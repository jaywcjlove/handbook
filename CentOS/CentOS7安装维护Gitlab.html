<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>
      CentOS7å®‰è£…ç»´æŠ¤Gitlab---
      ç›®å½•
      - handbook
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta description="æ”¾ç½®æˆ‘çš„ç¬”è®°ã€æœé›†ã€æ‘˜å½•ã€å®è·µï¼Œä¿æŒå¥½å¥‡å¿ƒã€‚çœ‹æ–‡éœ€è°¨æ…ï¼Œåæœå¾ˆä¸¥é‡ã€‚CentOS7å®‰è£…ç»´æŠ¤Gitlab---

ç›®å½•
 - handbook">
    <meta keywords="example,handbook">
    <link rel="icon" href="data:image/png;base64,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" type="image/x-icon">
    <style>[data-color-mode*='dark'], [data-color-mode*='dark'] body {
  color-scheme: dark;
  --color-header-bg: #3a3a3a8f;
  --color-header-border: #323232;
  --color-hover: #ffffff30;
}
[data-color-mode*='light'], [data-color-mode*='light'] body {
  color-scheme: light;
  --color-header-bg: #ffffff52;
  --color-header-border: #d3d3d3;
  --color-hover: #f2f2f2;
}

@media screen and (max-width: 1140px) {
  .header .inner {
    justify-content: center !important;
  }
}

body {
  margin: 0;
}

dark-mode {
  top: 5px !important;
  font-size: 14px;
}

markdown-style {
  margin-top: 78px !important;
}

github-corners {
  width: 32px !important;
  height: 32px;
  right: 0;
}

.header {
  position: fixed;
  width: 100%;
  background: #fff;
  backdrop-filter: saturate(180%) blur(0.4rem);
  background-color: var(--color-header-bg);
  border-bottom: 1px solid var(--color-header-border);
  z-index: 99;
  top: 0;
}

.header .inner {
  max-width: 960px;
  margin: 0 auto;
  display: flex;
  justify-content: space-between;
  padding: 5px 0;
}

.header .logo {
  margin-right: 10px;
}
.header .title {
  display: flex;
  align-items: center;
  font-size: 16px;
  font-weight: bold;
}
.header .logo img {
  height: 26px;
  display: block;
}

.footer {
  max-width: 960px;
  margin: 0 auto;
  text-align: center;
  padding: 0 0 110px 0;
  border-top: 1px solid var(--color-header-border);
  padding-top: 18px;
}

.footer a {
  font-size: 14px;
  text-decoration: initial;
  color: #3f51b5;
}

.footer a:hover {
  color:#009688;
  text-decoration: underline;
}

.footer a + a {
  margin-left: 10px;
}

.footer .copyright {
  color: #596068;
  font-size: 14px;
  padding-top: 5px;
}</style>
  </head>
  <body id="totop"><header class="header"><article class="inner"><a class="logo" href="../index.html"><img src="data:image/png;base64,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" alt="handbook logo"></a><div class="title">handbook</div><nav class="nav"></nav></article></header><script type="module">const GITHUB_CORNERS_TEMPLATE = document.createElement("template");
GITHUB_CORNERS_TEMPLATE.innerHTML = `
<style>
:host a:hover .octo-arm { animation: octocat-wave 560ms ease-in-out; }
@keyframes octocat-wave {
  0%, 100% { transform: rotate(0); }
  20%, 60% { transform: rotate(-25deg); }
  40%, 80% { transform: rotate(10deg); }
}
@media (max-width:500px) {
  :host a:hover .octo-arm { animation: none; }
  :host .octo-arm { animation: octocat-wave 560ms ease-in-out; }
}
:host svg { z-index: 99; position: fixed; border: 0px; top: 0px; }
</style>
<svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true">
  <a xlink:href="https://github.com/uiwjs/react-github-corners" target="_blank" rel="nofollow sponsored" style="fill: rgb(21, 21, 19); color: rgb(255, 255, 255);">
    <g>
      <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
      <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" class="octo-arm" style="transform-origin: 130px 106px;"></path>
      <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
    </g>
  </a>
</svg>
`;
export class GithubCorners extends HTMLElement {
    constructor() {
        super();
        this.right = '0';
        this.shadow = this.attachShadow({ mode: 'open' });
        this.shadow.appendChild(this.ownerDocument.importNode(GITHUB_CORNERS_TEMPLATE.content, true));
        this.update();
    }
    static get observedAttributes() {
        return ['style', 'z-index', 'target', 'height', 'width', 'href', 'color', 'fill', 'position', 'top', 'left', 'right', 'bottom', 'transform'];
    }
    setAttr(name, value) {
        const svg = this.shadow.querySelector('svg');
        if (/(href)/.test(name.toLocaleLowerCase())) {
            svg.lastElementChild.setAttribute('xlink:href', value);
        }
        else if (/(color|fill)/.test(name.toLocaleLowerCase())) {
            svg.firstElementChild.style[name] = value;
        }
        else if (/(z-index|position|top|left|right|bottom|transform)/.test(name.toLocaleLowerCase())) {
            svg.style[name] = value;
        }
        else {
            svg.setAttribute(name, value);
        }
    }
    update() {
        ;
        [...this.getAttributeNames(), 'right'].forEach((name) => {
            const value = this.getAttribute(name) || this[name] || '';
            this.setAttr(name, value);
        });
    }
    attributeChangedCallback(name, oldValue, newValue) {
        if (oldValue !== newValue) {
            this.setAttr(name, newValue);
        }
    }
}
customElements.define('github-corners', GithubCorners);</script><github-corners target="__blank" position="fixed" z-index="999" href="https://github.com/jaywcjlove/handbook.git"></github-corners><dark-mode permanent style="position: fixed; top: 8px; left: 10px; z-index: 999;" dark="Dark" light="Light"></dark-mode><script>const t=document;const e="_dark_mode_theme_";const s="permanent";const o="colorschemechange";const i="permanentcolorscheme";const h="light";const r="dark";const n=(t,e,s=e)=>{Object.defineProperty(t,s,{enumerable:true,get(){const t=this.getAttribute(e);return t===null?"":t},set(t){this.setAttribute(e,t)}})};const c=(t,e,s=e)=>{Object.defineProperty(t,s,{enumerable:true,get(){return this.hasAttribute(e)},set(t){if(t){this.setAttribute(e,"")}else{this.removeAttribute(e)}}})};class a extends HTMLElement{static get observedAttributes(){return["mode",h,r,s]}LOCAL_NANE=e;constructor(){super();this.t()}connectedCallback(){n(this,"mode");n(this,r);n(this,h);c(this,s);const a=localStorage.getItem(e);if(a&&[h,r].includes(a)){this.mode=a;this.permanent=true}if(this.permanent&&!a){localStorage.setItem(e,this.mode)}const l=[h,r].includes(a);if(this.permanent&&a){this.o()}else{if(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches){this.mode=r;this.o()}if(window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches){this.mode=h;this.o()}}if(!this.permanent&&!l){window.matchMedia("(prefers-color-scheme: light)").onchange=t=>{this.mode=t.matches?h:r;this.o()};window.matchMedia("(prefers-color-scheme: dark)").onchange=t=>{this.mode=t.matches?r:h;this.o()}}const d=new MutationObserver(((s,h)=>{this.mode=t.documentElement.dataset.colorMode;if(this.permanent&&l){localStorage.setItem(e,this.mode);this.i(i,{permanent:this.permanent})}this.h();this.i(o,{colorScheme:this.mode})}));d.observe(t.documentElement,{attributes:true});this.i(o,{colorScheme:this.mode});this.h()}attributeChangedCallback(t,s,o){if(t==="mode"&&s!==o&&[h,r].includes(o)){const t=localStorage.getItem(e);if(this.mode===t){this.mode=o;this.h();this.o()}else if(this.mode&&this.mode!==t){this.h();this.o()}}else if((t===h||t===r)&&s!==o){this.h()}if(t==="permanent"&&typeof this.permanent==="boolean"){this.permanent?localStorage.setItem(e,this.mode):localStorage.removeItem(e)}}o(){t.documentElement.setAttribute("data-color-mode",this.mode)}h(){this.icon.textContent=this.mode===h?"ğŸŒ’":"ğŸŒ";this.text.textContent=this.mode===h?this.getAttribute(r):this.getAttribute(h)}t(){var s=this.attachShadow({mode:"open"});this.label=t.createElement("span");this.label.setAttribute("class","wrapper");this.label.onclick=()=>{this.mode=this.mode===h?r:h;if(this.permanent){localStorage.setItem(e,this.mode)}this.o();this.h()};s.appendChild(this.label);this.icon=t.createElement("span");this.label.appendChild(this.icon);this.text=t.createElement("span");this.label.appendChild(this.text);const o=`
[data-color-mode*='dark'], [data-color-mode*='dark'] body {
  color-scheme: dark;
  --color-theme-bg: #0d1117;
  --color-theme-text: #c9d1d9;
  background-color: var(--color-theme-bg);
  color: var(--color-theme-text);
}

[data-color-mode*='light'], [data-color-mode*='light'] body {
  color-scheme: light;
  --color-theme-bg: #fff;
  --color-theme-text: #24292f;
  background-color: var(--color-theme-bg);
  color: var(--color-theme-text);
}`;const i="_dark_mode_style_";const n=t.getElementById(i);if(!n){var c=t.createElement("style");c.id=i;c.textContent=o;t.head.appendChild(c)}var a=t.createElement("style");a.textContent=`
    .wrapper { cursor: pointer; user-select: none; position: relative; }
    .wrapper > span + span { margin-left: .4rem; }
    `;s.appendChild(a)}i(t,e){this.dispatchEvent(new CustomEvent(t,{bubbles:true,composed:true,detail:e}))}}customElements.define("dark-mode",a);</script><script>const __TEMPLATE__ = document.createElement('template');
__TEMPLATE__.innerHTML = `
<style>

markdown-style h1:hover a.anchor .octicon-link:before,
markdown-style h2:hover a.anchor .octicon-link:before,
markdown-style h3:hover a.anchor .octicon-link:before,
markdown-style h4:hover a.anchor .octicon-link:before,
markdown-style h5:hover a.anchor .octicon-link:before,
markdown-style h6:hover a.anchor .octicon-link:before {
  width: 16px;
  height: 16px;
  content: ' ';
  display: inline-block;
  background-color: currentColor;
  -webkit-mask-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' aria-hidden='true'><path fill-rule='evenodd' d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'></path></svg>");
  mask-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' aria-hidden='true'><path fill-rule='evenodd' d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'></path></svg>");
}
markdown-style[theme*='light'] { --color-prettylights-syntax-comment: #6e7781; --color-prettylights-syntax-constant: #0550ae; --color-prettylights-syntax-entity: #8250df; --color-prettylights-syntax-storage-modifier-import: #24292f; --color-prettylights-syntax-entity-tag: #116329; --color-prettylights-syntax-keyword: #cf222e; --color-prettylights-syntax-string: #0a3069; --color-prettylights-syntax-variable: #953800; --color-prettylights-syntax-brackethighlighter-unmatched: #82071e; --color-prettylights-syntax-invalid-illegal-text: #f6f8fa; --color-prettylights-syntax-invalid-illegal-bg: #82071e; --color-prettylights-syntax-carriage-return-text: #f6f8fa; --color-prettylights-syntax-carriage-return-bg: #cf222e; --color-prettylights-syntax-string-regexp: #116329; --color-prettylights-syntax-markup-list: #3b2300; --color-prettylights-syntax-markup-heading: #0550ae; --color-prettylights-syntax-markup-italic: #24292f; --color-prettylights-syntax-markup-bold: #24292f; --color-prettylights-syntax-markup-deleted-text: #82071e; --color-prettylights-syntax-markup-deleted-bg: #FFEBE9; --color-prettylights-syntax-markup-inserted-text: #116329; --color-prettylights-syntax-markup-inserted-bg: #dafbe1; --color-prettylights-syntax-markup-changed-text: #953800; --color-prettylights-syntax-markup-changed-bg: #ffd8b5; --color-prettylights-syntax-markup-ignored-text: #eaeef2; --color-prettylights-syntax-markup-ignored-bg: #0550ae; --color-prettylights-syntax-meta-diff-range: #8250df; --color-prettylights-syntax-brackethighlighter-angle: #57606a; --color-prettylights-syntax-sublimelinter-gutter-mark: #8c959f; --color-prettylights-syntax-constant-other-reference-link: #0a3069; --color-fg-default: #24292f; --color-fg-muted: #57606a; --color-fg-subtle: #6e7781; --color-canvas-default: #ffffff; --color-canvas-subtle: #f6f8fa; --color-border-default: #d0d7de; --color-border-muted: hsla(210,18%,87%,1); --color-neutral-muted: rgba(175,184,193,0.2); --color-accent-fg: #0969da; --color-accent-emphasis: #0969da; --color-attention-subtle: #fff8c5; --color-danger-fg: #cf222e; } markdown-style[theme*='dark'] { --color-prettylights-syntax-comment: #8b949e; --color-prettylights-syntax-constant: #79c0ff; --color-prettylights-syntax-entity: #d2a8ff; --color-prettylights-syntax-storage-modifier-import: #c9d1d9; --color-prettylights-syntax-entity-tag: #7ee787; --color-prettylights-syntax-keyword: #ff7b72; --color-prettylights-syntax-string: #a5d6ff; --color-prettylights-syntax-variable: #ffa657; --color-prettylights-syntax-brackethighlighter-unmatched: #f85149; --color-prettylights-syntax-invalid-illegal-text: #f0f6fc; --color-prettylights-syntax-invalid-illegal-bg: #8e1519; --color-prettylights-syntax-carriage-return-text: #f0f6fc; --color-prettylights-syntax-carriage-return-bg: #b62324; --color-prettylights-syntax-string-regexp: #7ee787; --color-prettylights-syntax-markup-list: #f2cc60; --color-prettylights-syntax-markup-heading: #1f6feb; --color-prettylights-syntax-markup-italic: #c9d1d9; --color-prettylights-syntax-markup-bold: #c9d1d9; --color-prettylights-syntax-markup-deleted-text: #ffdcd7; --color-prettylights-syntax-markup-deleted-bg: #67060c; --color-prettylights-syntax-markup-inserted-text: #aff5b4; --color-prettylights-syntax-markup-inserted-bg: #033a16; --color-prettylights-syntax-markup-changed-text: #ffdfb6; --color-prettylights-syntax-markup-changed-bg: #5a1e02; --color-prettylights-syntax-markup-ignored-text: #c9d1d9; --color-prettylights-syntax-markup-ignored-bg: #1158c7; --color-prettylights-syntax-meta-diff-range: #d2a8ff; --color-prettylights-syntax-brackethighlighter-angle: #8b949e; --color-prettylights-syntax-sublimelinter-gutter-mark: #484f58; --color-prettylights-syntax-constant-other-reference-link: #a5d6ff; --color-fg-default: #c9d1d9; --color-fg-muted: #8b949e; --color-fg-subtle: #484f58; --color-canvas-default: #0d1117; --color-canvas-subtle: #161b22; --color-border-default: #30363d; --color-border-muted: #21262d; --color-neutral-muted: rgba(110,118,129,0.4); --color-accent-fg: #58a6ff; --color-accent-emphasis: #1f6feb; --color-attention-subtle: rgba(187,128,9,0.15); --color-danger-fg: #f85149; } markdown-style { display: block; -webkit-text-size-adjust: 100%; font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji"; font-size: 16px; line-height: 1.5; word-wrap: break-word; color: var(--color-fg-default); background-color: var(--color-canvas-default); } markdown-style details, markdown-style figcaption, markdown-style figure { display: block; } markdown-style summary { display: list-item; } markdown-style [hidden] { display: none !important; } markdown-style a { background-color: transparent; color: var(--color-accent-fg); text-decoration: none; } markdown-style a:active, markdown-style a:hover { outline-width: 0; } markdown-style abbr[title] { border-bottom: none; text-decoration: underline dotted; } markdown-style b, markdown-style strong { font-weight: 600; } markdown-style dfn { font-style: italic; } markdown-style h1 { margin: .67em 0; font-weight: 600; padding-bottom: .3em; font-size: 2em; border-bottom: 1px solid var(--color-border-muted); } markdown-style mark { background-color: var(--color-attention-subtle); color: var(--color-text-primary); } markdown-style small { font-size: 90%; } markdown-style sub, markdown-style sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; } markdown-style sub { bottom: -0.25em; } markdown-style sup { top: -0.5em; } markdown-style img { border-style: none; max-width: 100%; box-sizing: content-box; background-color: var(--color-canvas-default); } markdown-style code, markdown-style kbd, markdown-style pre, markdown-style samp { font-family: monospace,monospace; font-size: 1em; } markdown-style figure { margin: 1em 40px; } markdown-style hr { box-sizing: content-box; overflow: hidden; background: transparent; border-bottom: 1px solid var(--color-border-muted); height: .25em; padding: 0; margin: 24px 0; background-color: var(--color-border-default); border: 0; } markdown-style input { font: inherit; margin: 0; overflow: visible; font-family: inherit; font-size: inherit; line-height: inherit; } markdown-style [type=button], markdown-style [type=reset], markdown-style [type=submit] { -webkit-appearance: button; } markdown-style [type=button]::-moz-focus-inner, markdown-style [type=reset]::-moz-focus-inner, markdown-style [type=submit]::-moz-focus-inner { border-style: none; padding: 0; } markdown-style [type=button]:-moz-focusring, markdown-style [type=reset]:-moz-focusring, markdown-style [type=submit]:-moz-focusring { outline: 1px dotted ButtonText; } markdown-style [type=checkbox], markdown-style [type=radio] { box-sizing: border-box; padding: 0; } markdown-style [type=number]::-webkit-inner-spin-button, markdown-style [type=number]::-webkit-outer-spin-button { height: auto; } markdown-style [type=search] { -webkit-appearance: textfield; outline-offset: -2px; } markdown-style [type=search]::-webkit-search-cancel-button, markdown-style [type=search]::-webkit-search-decoration { -webkit-appearance: none; } markdown-style ::-webkit-input-placeholder { color: inherit; opacity: .54; } markdown-style ::-webkit-file-upload-button { -webkit-appearance: button; font: inherit; } markdown-style a:hover { text-decoration: underline; } markdown-style hr::before { display: table; content: ""; } markdown-style hr::after { display: table; clear: both; content: ""; } markdown-style table { border-spacing: 0; border-collapse: collapse; display: block; width: max-content; max-width: 100%; overflow: auto; } markdown-style td, markdown-style th { padding: 0; } markdown-style details summary { cursor: pointer; } markdown-style details:not([open])>*:not(summary) { display: none !important; } markdown-style kbd { display: inline-block; padding: 3px 5px; font: 11px ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace; line-height: 10px; color: var(--color-fg-default); vertical-align: middle; background-color: var(--color-canvas-subtle); border: solid 1px var(--color-neutral-muted); border-bottom-color: var(--color-neutral-muted); border-radius: 6px; box-shadow: inset 0 -1px 0 var(--color-neutral-muted); } markdown-style h1, markdown-style h2, markdown-style h3, markdown-style h4, markdown-style h5, markdown-style h6 { margin-top: 24px; margin-bottom: 16px; font-weight: 600; line-height: 1.25; } markdown-style h2 { font-weight: 600; padding-bottom: .3em; font-size: 1.5em; border-bottom: 1px solid var(--color-border-muted); } markdown-style h3 { font-weight: 600; font-size: 1.25em; } markdown-style h4 { font-weight: 600; font-size: 1em; } markdown-style h5 { font-weight: 600; font-size: .875em; } markdown-style h6 { font-weight: 600; font-size: .85em; color: var(--color-fg-muted); } markdown-style p { margin-top: 0; margin-bottom: 10px; } markdown-style blockquote { margin: 0; padding: 0 1em; color: var(--color-fg-muted); border-left: .25em solid var(--color-border-default); } markdown-style ul, markdown-style ol { margin-top: 0; margin-bottom: 0; padding-left: 2em; } markdown-style ol ol, markdown-style ul ol { list-style-type: lower-roman; } markdown-style ul ul ol, markdown-style ul ol ol, markdown-style ol ul ol, markdown-style ol ol ol { list-style-type: lower-alpha; } markdown-style dd { margin-left: 0; } markdown-style tt, markdown-style code { font-family: ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace; font-size: 12px; } markdown-style pre { margin-top: 0; margin-bottom: 0; font-family: ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace; font-size: 12px; word-wrap: normal; } markdown-style .octicon { display: inline-block; overflow: visible !important; vertical-align: text-bottom; fill: currentColor; } markdown-style ::placeholder { color: var(--color-fg-subtle); opacity: 1; } markdown-style input::-webkit-outer-spin-button, markdown-style input::-webkit-inner-spin-button { margin: 0; -webkit-appearance: none; appearance: none; }
markdown-style .token.comment, markdown-style .token.prolog, markdown-style .token.doctype, markdown-style .token.cdata { color: var(--color-prettylights-syntax-comment); } markdown-style .token.namespace { opacity: 0.7; } markdown-style .token.tag, markdown-style .token.selector, markdown-style .token.constant, markdown-style .token.symbol, markdown-style .token.deleted { color: var(--color-prettylights-syntax-entity-tag); } markdown-style .token.maybe-class-name { color: var(--color-prettylights-syntax-variable); } markdown-style .token.property-access, markdown-style .token.operator, markdown-style .token.boolean, markdown-style .token.number, markdown-style .token.selector markdown-style .token.class, markdown-style .token.attr-name, markdown-style .token.string, markdown-style .token.char, markdown-style .token.builtin { color: var(--color-prettylights-syntax-constant); } markdown-style .token.deleted { color: var(--color-prettylights-syntax-markup-deleted-text); } markdown-style .token.property { color: var(--color-prettylights-syntax-constant); } markdown-style .token.punctuation { color: var(--color-prettylights-syntax-markup-bold); } markdown-style .token.function { color: var(--color-prettylights-syntax-entity); } markdown-style .code-line .token.deleted { background-color: var(--color-prettylights-syntax-markup-deleted-bg); } markdown-style .token.inserted { color: var(--color-prettylights-syntax-markup-inserted-text); } markdown-style .code-line .token.inserted { background-color: var(--color-prettylights-syntax-markup-inserted-bg); } markdown-style .token.variable { color: var(--color-prettylights-syntax-constant); } markdown-style .token.entity, markdown-style .token.url, .language-css markdown-style .token.string, .style markdown-style .token.string { color: var(--color-prettylights-syntax-string); } markdown-style .token.color, markdown-style .token.atrule, markdown-style .token.attr-value, markdown-style .token.function, markdown-style .token.class-name { color: var(--color-prettylights-syntax-string); } markdown-style .token.rule, markdown-style .token.regex, markdown-style .token.important, markdown-style .token.keyword { color: var(--color-prettylights-syntax-keyword); } markdown-style .token.coord { color: var(--color-prettylights-syntax-meta-diff-range); } markdown-style .token.important, markdown-style .token.bold { font-weight: bold; } markdown-style .token.italic { font-style: italic; } markdown-style .token.entity { cursor: help; } markdown-style [data-catalyst] { display: block; }
markdown-style g-emoji { font-family: "Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"; font-size: 1em; font-style: normal !important; font-weight: 400; line-height: 1; vertical-align: -0.075em; } markdown-style g-emoji img { width: 1em; height: 1em; } markdown-style::before { display: table; content: ""; } markdown-style::after { display: table; clear: both; content: ""; } markdown-style>*:first-child { margin-top: 0 !important; } markdown-style>*:last-child { margin-bottom: 0 !important; } markdown-style a:not([href]) { color: inherit; text-decoration: none; } markdown-style .absent { color: var(--color-danger-fg); } markdown-style .anchor { float: left; padding-right: 4px; margin-left: -20px; line-height: 1; } markdown-style .anchor:focus { outline: none; } markdown-style p, markdown-style blockquote, markdown-style ul, markdown-style ol, markdown-style dl, markdown-style table, markdown-style pre, markdown-style details { margin-top: 0; margin-bottom: 16px; } markdown-style blockquote>:first-child { margin-top: 0; } markdown-style blockquote>:last-child { margin-bottom: 0; } markdown-style sup>a::before { content: "["; } markdown-style sup>a::after { content: "]"; } markdown-style h1 .octicon-link, markdown-style h2 .octicon-link, markdown-style h3 .octicon-link, markdown-style h4 .octicon-link, markdown-style h5 .octicon-link, markdown-style h6 .octicon-link { color: var(--color-fg-default); vertical-align: middle; visibility: hidden; } markdown-style h1:hover .anchor, markdown-style h2:hover .anchor, markdown-style h3:hover .anchor, markdown-style h4:hover .anchor, markdown-style h5:hover .anchor, markdown-style h6:hover .anchor { text-decoration: none; } markdown-style h1:hover .anchor .octicon-link, markdown-style h2:hover .anchor .octicon-link, markdown-style h3:hover .anchor .octicon-link, markdown-style h4:hover .anchor .octicon-link, markdown-style h5:hover .anchor .octicon-link, markdown-style h6:hover .anchor .octicon-link { visibility: visible; } markdown-style h1 tt, markdown-style h1 code, markdown-style h2 tt, markdown-style h2 code, markdown-style h3 tt, markdown-style h3 code, markdown-style h4 tt, markdown-style h4 code, markdown-style h5 tt, markdown-style h5 code, markdown-style h6 tt, markdown-style h6 code { padding: 0 .2em; font-size: inherit; } markdown-style ul.no-list, markdown-style ol.no-list { padding: 0; list-style-type: none; } markdown-style ol[type="1"] { list-style-type: decimal; } markdown-style ol[type=a] { list-style-type: lower-alpha; } markdown-style ol[type=i] { list-style-type: lower-roman; } markdown-style div>ol:not([type]) { list-style-type: decimal; } markdown-style ul ul, markdown-style ul ol, markdown-style ol ol, markdown-style ol ul { margin-top: 0; margin-bottom: 0; } markdown-style li>p { margin-top: 16px; } markdown-style li+li { margin-top: .25em; } markdown-style dl { padding: 0; } markdown-style dl dt { padding: 0; margin-top: 16px; font-size: 1em; font-style: italic; font-weight: 600; } markdown-style dl dd { padding: 0 16px; margin-bottom: 16px; } markdown-style table th { font-weight: 600; } markdown-style table th, markdown-style table td { padding: 6px 13px; border: 1px solid var(--color-border-default); } markdown-style table tr { background-color: var(--color-canvas-default); border-top: 1px solid var(--color-border-muted); } markdown-style table tr:nth-child(2n) { background-color: var(--color-canvas-subtle); } markdown-style table img { background-color: transparent; } markdown-style img[align=right] { padding-left: 20px; } markdown-style img[align=left] { padding-right: 20px; } markdown-style .emoji { max-width: none; vertical-align: text-top; background-color: transparent; } markdown-style span.frame { display: block; overflow: hidden; } markdown-style span.frame>span { display: block; float: left; width: auto; padding: 7px; margin: 13px 0 0; overflow: hidden; border: 1px solid var(--color-border-default); } markdown-style span.frame span img { display: block; float: left; } markdown-style span.frame span span { display: block; padding: 5px 0 0; clear: both; color: var(--color-fg-default); } markdown-style span.align-center { display: block; overflow: hidden; clear: both; } markdown-style span.align-center>span { display: block; margin: 13px auto 0; overflow: hidden; text-align: center; } markdown-style span.align-center span img { margin: 0 auto; text-align: center; } markdown-style span.align-right { display: block; overflow: hidden; clear: both; } markdown-style span.align-right>span { display: block; margin: 13px 0 0; overflow: hidden; text-align: right; } markdown-style span.align-right span img { margin: 0; text-align: right; } markdown-style span.float-left { display: block; float: left; margin-right: 13px; overflow: hidden; } markdown-style span.float-left span { margin: 13px 0 0; } markdown-style span.float-right { display: block; float: right; margin-left: 13px; overflow: hidden; } markdown-style span.float-right>span { display: block; margin: 13px auto 0; overflow: hidden; text-align: right; } markdown-style code, markdown-style tt { padding: .2em .4em; margin: 0; font-size: 85%; background-color: var(--color-neutral-muted); border-radius: 6px; } markdown-style code br, markdown-style tt br { display: none; } markdown-style del code { text-decoration: inherit; } markdown-style pre code { font-size: 100%; } markdown-style pre>code { padding: 0; margin: 0; word-break: normal; white-space: pre; background: transparent; border: 0; } markdown-style .highlight { margin-bottom: 16px; } markdown-style .highlight pre { margin-bottom: 0; word-break: normal; } markdown-style .highlight pre, markdown-style pre { position: relative; padding: 16px; overflow: auto; font-size: 85%; line-height: 1.45; background-color: var(--color-canvas-subtle); border-radius: 6px; } markdown-style pre code, markdown-style pre tt { display: inline; max-width: auto; padding: 0; margin: 0; overflow: visible; line-height: inherit; word-wrap: normal; background-color: transparent; border: 0; } markdown-style .csv-data td, markdown-style .csv-data th { padding: 5px; overflow: hidden; font-size: 12px; line-height: 1; text-align: left; white-space: nowrap; } markdown-style .csv-data .blob-num { padding: 10px 8px 9px; text-align: right; background: var(--color-canvas-default); border: 0; } markdown-style .csv-data tr { border-top: 0; } markdown-style .csv-data th { font-weight: 600; background: var(--color-canvas-subtle); border-top: 0; } markdown-style .footnotes { font-size: 12px; color: var(--color-fg-muted); border-top: 1px solid var(--color-border-default); } markdown-style .footnotes ol { padding-left: 16px; } markdown-style .footnotes li { position: relative; } markdown-style .footnotes li:target::before { position: absolute; top: -8px; right: -8px; bottom: -8px; left: -24px; pointer-events: none; content: ""; border: 2px solid var(--color-accent-emphasis); border-radius: 6px; } markdown-style .footnotes li:target { color: var(--color-fg-default); } markdown-style .footnotes .data-footnote-backref g-emoji { font-family: monospace; } markdown-style .task-list-item { list-style-type: none; } markdown-style .task-list-item label { font-weight: 400; } markdown-style .task-list-item.enabled label { cursor: pointer; } markdown-style .task-list-item+.task-list-item { margin-top: 3px; } markdown-style .task-list-item .handle { display: none; } markdown-style .task-list-item-checkbox, markdown-style input[type="checkbox"] { margin: 0 .2em .25em -1.6em; vertical-align: middle; } markdown-style .contains-task-list:dir(rtl) .task-list-item-checkbox, markdown-style .contains-task-list:dir(rtl) input[type="checkbox"] { margin: 0 -1.6em .25em .2em; } markdown-style ::-webkit-calendar-picker-indicator { filter: invert(50%); }
</style>
<slot></slot>
`;
class MarkdownStyle extends HTMLElement {
    constructor() {
        super();
        this.initTheme = this.getAttribute('theme');
        this.shadow = this.attachShadow({ mode: 'open' });
        this.shadow.appendChild(__TEMPLATE__.content.cloneNode(true));
        this.setTheme();
        const style = Array.prototype.slice
            .call(this.shadow.children)
            .find((item) => item.tagName === 'STYLE');
        if (style) {
            const id = '__MARKDOWN_STYLE__';
            const findStyle = document.getElementById(id);
            if (!findStyle) {
                style.id = id;
                document.head.append(style);
            }
        }
    }
    setTheme() {
        if (!this.initTheme) {
            const { colorMode } = document.documentElement.dataset;
            this.theme = colorMode;
            if (this.theme === 'undefined') {
                if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                    this.theme = 'dark';
                }
                if (window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches) {
                    this.theme = 'light';
                }
            }
        }
    }
    connectedCallback() {
        this.installStringReflection('theme');
        if (!this.initTheme) {
            this.setTheme();
            const observer = new MutationObserver((mutationsList, observer) => {
                this.theme = document.documentElement.dataset.colorMode;
                this.setTheme();
            });
            // Start observing the target node with the above configuration
            observer.observe(document.documentElement, { attributes: true });
            window.matchMedia('(prefers-color-scheme: light)').onchange = (event) => {
                this.theme = event.matches ? 'light' : 'dark';
                this.setTheme();
            };
            window.matchMedia('(prefers-color-scheme: dark)').onchange = (event) => {
                this.theme = event.matches ? 'dark' : 'light';
                this.setTheme();
            };
        }
    }
    /**
     * See https://html.spec.whatwg.org/multipage/common-dom-interfaces.html
     * #reflecting-content-attributes-in-idl-attributes.
     */
    installStringReflection(attrName, propName = attrName) {
        Object.defineProperty(this, propName, {
            enumerable: true,
            get() {
                const value = this.getAttribute(attrName);
                return value === null ? '' : value;
            },
            set(v) {
                this.setAttribute(attrName, v);
            },
        });
    }
}
customElements.define('markdown-style', MarkdownStyle);
</script><markdown-style style="max-width: 960px; margin: 0 auto 60px auto; padding: 8px" class="markdown-body">
    <h2 id="centos7å®‰è£…ç»´æŠ¤gitlab"><a class="anchor" aria-hidden="true" tabindex="-1" href="#centos7å®‰è£…ç»´æŠ¤gitlab"><span class="octicon octicon-link"></span></a>CentOS7å®‰è£…ç»´æŠ¤Gitlab</h2>
    <h1 id="ç›®å½•"><a class="anchor" aria-hidden="true" tabindex="-1" href="#ç›®å½•"><span class="octicon octicon-link"></span></a>ç›®å½•</h1><!-- TOC -->
    <ul>
      <li><a href="#%E7%9B%AE%E5%BD%95">ç›®å½•</a>
        <ul>
          <li><a href="#%E5%AE%98%E6%96%B9%E5%AE%89%E8%A3%85">å®˜æ–¹å®‰è£…</a></li>
          <li><a href="#%E7%AC%AC%E4%B8%89%E6%96%B9%E9%95%9C%E5%83%8F%E5%AE%89%E8%A3%85">ç¬¬ä¸‰æ–¹é•œåƒå®‰è£…</a>
            <ul>
              <li><a href="#%E7%BC%96%E8%BE%91%E6%BA%90">ç¼–è¾‘æº</a></li>
              <li><a href="#%E6%9B%B4%E6%96%B0%E6%9C%AC%E5%9C%B0yum%E7%BC%93%E5%AD%98">æ›´æ–°æœ¬åœ°YUMç¼“å­˜</a></li>
              <li><a href="#%E5%AE%89%E8%A3%85%E7%A4%BE%E5%8C%BA%E7%89%88">å®‰è£…ç¤¾åŒºç‰ˆ</a></li>
              <li><a href="#%E6%9B%B4%E6%94%B9%E9%85%8D%E7%BD%AE">æ›´æ”¹é…ç½®</a></li>
              <li><a href="#%E9%85%8D%E7%BD%AE%E5%B9%B6%E5%90%AF%E5%8A%A8gitlab">é…ç½®å¹¶å¯åŠ¨GitLab</a></li>
              <li><a href="#%E7%99%BB%E5%BD%95gitlab">ç™»å½•GitLab</a></li>
              <li><a href="#%E5%90%AF%E7%94%A8-gitlab-registry-%E5%8A%9F%E8%83%BD">å¯ç”¨ gitlab registry åŠŸèƒ½</a></li>
            </ul>
          </li>
          <li><a href="#docker%E5%AE%89%E8%A3%85">Dockerå®‰è£…</a></li>
          <li><a href="#%E5%8D%B8%E8%BD%BD">å¸è½½</a></li>
          <li><a href="#%E8%BF%90%E7%BB%B4">è¿ç»´</a>
            <ul>
              <li><a href="#%E6%9C%8D%E5%8A%A1%E7%AE%A1%E7%90%86">æœåŠ¡ç®¡ç†</a></li>
              <li><a href="#%E6%97%A5%E5%BF%97%E6%9F%A5%E7%9C%8B">æ—¥å¿—æŸ¥çœ‹</a></li>
              <li><a href="#%E9%87%8D%E7%BD%AE%E7%AE%A1%E7%90%86%E5%91%98%E5%AF%86%E7%A0%81">é‡ç½®ç®¡ç†å‘˜å¯†ç </a></li>
            </ul>
          </li>
          <li><a href="#%E5%A4%87%E4%BB%BD%E6%81%A2%E5%A4%8D">å¤‡ä»½æ¢å¤</a>
            <ul>
              <li><a href="#%E4%BF%AE%E6%94%B9%E5%A4%87%E4%BB%BD%E6%96%87%E4%BB%B6%E9%BB%98%E8%AE%A4%E7%9B%AE%E5%BD%95">ä¿®æ”¹å¤‡ä»½æ–‡ä»¶é»˜è®¤ç›®å½•</a></li>
              <li><a href="#%E5%88%9B%E5%BB%BA%E5%A4%87%E4%BB%BD">åˆ›å»ºå¤‡ä»½</a></li>
              <li><a href="#%E5%BC%80%E5%A7%8B%E5%A4%87%E4%BB%BD">å¼€å§‹å¤‡ä»½</a></li>
              <li><a href="#%E8%87%AA%E5%8A%A8%E5%A4%87%E4%BB%BD">è‡ªåŠ¨å¤‡ä»½</a></li>
              <li><a href="#%E5%A4%87%E4%BB%BD%E4%BF%9D%E7%95%99%E4%B8%83%E5%A4%A9">å¤‡ä»½ä¿ç•™ä¸ƒå¤©</a></li>
              <li><a href="#%E5%BC%80%E5%A7%8B%E6%81%A2%E5%A4%8D">å¼€å§‹æ¢å¤</a></li>
            </ul>
          </li>
          <li><a href="#%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93">è¿æ¥æ•°æ®åº“</a></li>
          <li><a href="#%E4%B8%80%E4%BA%9B%E5%B8%B8%E8%A7%84%E7%9B%AE%E5%BD%95">ä¸€äº›å¸¸è§„ç›®å½•</a></li>
          <li><a href="#%E4%BD%BF%E7%94%A8https">ä½¿ç”¨HTTPS</a></li>
          <li><a href="#%E6%9A%B4%E5%8A%9B%E5%8D%87%E7%BA%A7">æš´åŠ›å‡çº§</a></li>
          <li><a href="#%E4%BC%98%E5%8C%96%E5%86%85%E5%AD%98%E4%BD%BF%E7%94%A8">ä¼˜åŒ–å†…å­˜ä½¿ç”¨</a></li>
          <li><a href="#%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86">é”™è¯¯å¤„ç†</a>
            <ul>
              <li><a href="#%E8%A7%A3%E5%86%B380%E7%AB%AF%E5%8F%A3%E8%A2%AB%E5%8D%A0%E7%94%A8">è§£å†³80ç«¯å£è¢«å ç”¨</a></li>
              <li><a href="#%E5%A4%B4%E5%83%8F%E6%97%A0%E6%B3%95%E6%AD%A3%E5%B8%B8%E6%98%BE%E7%A4%BA">å¤´åƒæ— æ³•æ­£å¸¸æ˜¾ç¤º</a></li>
              <li><a href="#internal-api-unreachable">internal API unreachable</a></li>
              <li><a href="#proxy_temp-%E7%9B%AE%E5%BD%95%E6%B2%A1%E6%9C%89%E6%9D%83%E9%99%90">proxy_temp ç›®å½•æ²¡æœ‰æƒé™</a></li>
              <li><a href="#webhooks-%E9%94%99%E8%AF%AF">webhooks é”™è¯¯</a></li>
              <li><a href="#%E6%9C%8D%E5%8A%A1%E6%97%A0%E6%B3%95%E5%90%AF%E5%8A%A8">æœåŠ¡æ— æ³•å¯åŠ¨</a></li>
              <li><a href="#%E5%85%B6%E5%AE%83%E9%94%99%E8%AF%AF">å…¶å®ƒé”™è¯¯</a></li>
            </ul>
          </li>
          <li><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">å‚è€ƒèµ„æ–™</a></li>
        </ul>
      </li>
    </ul><!-- /TOC -->
    <h2 id="å®˜æ–¹å®‰è£…"><a class="anchor" aria-hidden="true" tabindex="-1" href="#å®˜æ–¹å®‰è£…"><span class="octicon octicon-link"></span></a>å®˜æ–¹å®‰è£…</h2>
    <p>ä¸‹é¢æ˜¯å®˜ç½‘å¤åˆ¶è¿‡æ¥çš„å®˜æ–¹å®‰è£…æ–¹æ³•ï¼Œæœ€ç®€å•çš„å®‰è£…ï¼Œåœ¨æˆ‘å¤§å¤©æœï¼Œåªèƒ½æœ›å¤©å…´å¹ï¼Œä½ å¯ç¿»å¢™å®‰è£…æˆ–è€…ç•¥è¿‡è¿™é‡Œï¼Œçœ‹ä¸‹é¢çš„ã€‚</p>
    <ol>
      <li>å®‰è£…å¹¶é…ç½®å¿…è¦çš„ä¾èµ–é¡¹</li>
    </ol>
    <p>If you install Postfix to send email please select 'Internet Site' during setup. Instead of using Postfix you can also use Sendmail or configure a custom SMTP server and configure it as an SMTP server.</p>
    <p>On Centos 6 and 7, the commands below will also open HTTP and SSH access in the system firewall.</p>
    <pre><code class="code-highlight"><span class="code-line">sudo yum install curl openssh-server openssh-clients postfix cronie
</span><span class="code-line">sudo service postfix start
</span><span class="code-line">sudo chkconfig postfix on
</span><span class="code-line">sudo lokkit -s http -s ssh
</span></code><div onclick="copied(this)" data-code="sudo yum install curl openssh-server openssh-clients postfix cronie
sudo service postfix start
sudo chkconfig postfix on
sudo lokkit -s http -s ssh
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <ol start="2">
      <li>æ·»åŠ gitlabæœåŠ¡å™¨åŒ…å’Œå®‰è£…åŒ…</li>
    </ol>
    <pre><code class="code-highlight"><span class="code-line">curl -sS https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.rpm.sh | sudo bash
</span><span class="code-line">sudo yum install gitlab-ce
</span></code><div onclick="copied(this)" data-code="curl -sS https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.rpm.sh | sudo bash
sudo yum install gitlab-ce
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>
      If you are not comfortable installing the repository through a piped script, you can find the entire script here and select and download the package manually and install using
      <a href="https://packages.gitlab.com/gitlab/gitlab-ce">gitlab/gitlab-ce</a>
    </p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">curl</span> -LJO https://packages.gitlab.com/gitlab/gitlab-ce/packages/el/6/gitlab-ce-XXX.rpm/download
</span><span class="code-line"><span class="token function">curl</span> -LJO https://packages.gitlab.com/gitlab/gitlab-ce/packages/el/7/gitlab-ce-10.2.2-ce.0.el7.x86_64.rpm/download
</span><span class="code-line"><span class="token function">rpm</span> -i gitlab-ce-XXX.rpm
</span></code><div onclick="copied(this)" data-code="curl -LJO https://packages.gitlab.com/gitlab/gitlab-ce/packages/el/6/gitlab-ce-XXX.rpm/download
curl -LJO https://packages.gitlab.com/gitlab/gitlab-ce/packages/el/7/gitlab-ce-10.2.2-ce.0.el7.x86_64.rpm/download
rpm -i gitlab-ce-XXX.rpm
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <ol start="3">
      <li>é…ç½®å¹¶å¯åŠ¨GitLab</li>
    </ol>
    <pre><code class="code-highlight"><span class="code-line">sudo gitlab-ctl reconfigure
</span></code><div onclick="copied(this)" data-code="sudo gitlab-ctl reconfigure
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <ol start="4">
      <li>æµè§ˆå™¨æ‰“å¼€å¹¶ç™»å½•</li>
    </ol>
    <p>On your first visit, you'll be redirected to a password reset screen to provide the password for the initial administrator account. Enter your desired password and you'll be redirected back to the login screen.</p>
    <p>The default account's username is root. Provide the password you created earlier and login. After login you can change the username if you wish.</p>
    <h2 id="ç¬¬ä¸‰æ–¹é•œåƒå®‰è£…"><a class="anchor" aria-hidden="true" tabindex="-1" href="#ç¬¬ä¸‰æ–¹é•œåƒå®‰è£…"><span class="octicon octicon-link"></span></a>ç¬¬ä¸‰æ–¹é•œåƒå®‰è£…</h2>
    <ul>
      <li><a href="https://mirror.tuna.tsinghua.edu.cn/help/gitlab-ce/">Gitlab Community Edition é•œåƒä½¿ç”¨å¸®åŠ©</a></li>
      <li><a href="https://github.com/hehongwei44/my-blog/issues/19">åœ¨é˜¿é‡Œäº‘ä¸Šé€šè¿‡Omnibusä¸€é”®å®‰è£…åŒ…å®‰è£…Gitlab</a></li>
    </ul>
    <h3 id="ç¼–è¾‘æº"><a class="anchor" aria-hidden="true" tabindex="-1" href="#ç¼–è¾‘æº"><span class="octicon octicon-link"></span></a>ç¼–è¾‘æº</h3>
    <p>æ–°å»º /etc/yum.repos.d/gitlab-ce.repoï¼Œå†…å®¹ä¸º</p>
    <p><a href="https://mirror.tuna.tsinghua.edu.cn/help/gitlab-ce/">ä½¿ç”¨æ¸…åå¤§å­¦ TUNA é•œåƒæº</a> æ‰“å¼€ç½‘å€å°†å†…å®¹å¤åˆ¶åˆ°<code>gitlab-ce.repo</code>æ–‡ä»¶ä¸­ï¼Œç¼–è¾‘è·¯å¾„<code>vim /etc/yum.repos.d/gitlab-ce.repo</code></p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token punctuation">[</span>gitlab-ce<span class="token punctuation">]</span>
</span><span class="code-line"><span class="token assign-left variable">name</span><span class="token operator">=</span>gitlab-ce
</span><span class="code-line"><span class="token assign-left variable">baseurl</span><span class="token operator">=</span>http://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el6
</span><span class="code-line"><span class="token assign-left variable">repo_gpgcheck</span><span class="token operator">=</span><span class="token number">0</span>
</span><span class="code-line"><span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">0</span>
</span><span class="code-line"><span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span>
</span><span class="code-line"><span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>https://packages.gitlab.com/gpg.key
</span></code><div onclick="copied(this)" data-code="[gitlab-ce]
name=gitlab-ce
baseurl=http://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el6
repo_gpgcheck=0
gpgcheck=0
enabled=1
gpgkey=https://packages.gitlab.com/gpg.key
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="æ›´æ–°æœ¬åœ°yumç¼“å­˜"><a class="anchor" aria-hidden="true" tabindex="-1" href="#æ›´æ–°æœ¬åœ°yumç¼“å­˜"><span class="octicon octicon-link"></span></a>æ›´æ–°æœ¬åœ°YUMç¼“å­˜</h3>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">sudo</span> yum makecache
</span></code><div onclick="copied(this)" data-code="sudo yum makecache
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="å®‰è£…ç¤¾åŒºç‰ˆ"><a class="anchor" aria-hidden="true" tabindex="-1" href="#å®‰è£…ç¤¾åŒºç‰ˆ"><span class="octicon octicon-link"></span></a>å®‰è£…ç¤¾åŒºç‰ˆ</h3>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">sudo</span> yum <span class="token function">install</span> gitlab-ce <span class="token comment">#(è‡ªåŠ¨å®‰è£…æœ€æ–°ç‰ˆ)</span>
</span><span class="code-line"><span class="token function">sudo</span> yum <span class="token function">install</span> gitlab-ce-8.15.2-ce.0.el6 <span class="token comment">#(å®‰è£…æŒ‡å®šç‰ˆæœ¬)</span>
</span></code><div onclick="copied(this)" data-code="sudo yum install gitlab-ce #(è‡ªåŠ¨å®‰è£…æœ€æ–°ç‰ˆ)
sudo yum install gitlab-ce-8.15.2-ce.0.el6 #(å®‰è£…æŒ‡å®šç‰ˆæœ¬)
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="æ›´æ”¹é…ç½®"><a class="anchor" aria-hidden="true" tabindex="-1" href="#æ›´æ”¹é…ç½®"><span class="octicon octicon-link"></span></a>æ›´æ”¹é…ç½®</h3>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">vim</span> /etc/gitlab/gitlab.rb
</span><span class="code-line"><span class="token comment"># æ‰¾åˆ° external_url 'http://000.00.00.00:8081'</span>
</span><span class="code-line"><span class="token comment"># ä¿®æ”¹æˆä½ çš„åœ°å€</span>
</span></code><div onclick="copied(this)" data-code="vim /etc/gitlab/gitlab.rb
# æ‰¾åˆ° external_url &#x27;http://000.00.00.00:8081&#x27;
# ä¿®æ”¹æˆä½ çš„åœ°å€
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="é…ç½®å¹¶å¯åŠ¨gitlab"><a class="anchor" aria-hidden="true" tabindex="-1" href="#é…ç½®å¹¶å¯åŠ¨gitlab"><span class="octicon octicon-link"></span></a>é…ç½®å¹¶å¯åŠ¨GitLab</h3>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># æ‰“å¼€`/etc/gitlab/gitlab.rb`,</span>
</span><span class="code-line"><span class="token comment"># å°†`external_url = 'http://git.example.com'`ä¿®æ”¹ä¸ºè‡ªå·±çš„IPåœ°å€ï¼š`http://xxx.xx.xxx.xx`ï¼Œ</span>
</span><span class="code-line"><span class="token comment"># ç„¶åæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå¯¹GitLabè¿›è¡Œç¼–è¯‘ã€‚</span>
</span><span class="code-line"><span class="token function">sudo</span> gitlab-ctl reconfigure
</span><span class="code-line"><span class="token comment"># æ¸…é™¤ç¼“å­˜</span>
</span><span class="code-line"><span class="token function">sudo</span> gitlab-rake cache:clear <span class="token assign-left variable">RAILS_ENV</span><span class="token operator">=</span>production
</span></code><div onclick="copied(this)" data-code="# æ‰“å¼€&#x60;/etc/gitlab/gitlab.rb&#x60;,
# å°†&#x60;external_url = &#x27;http://git.example.com&#x27;&#x60;ä¿®æ”¹ä¸ºè‡ªå·±çš„IPåœ°å€ï¼š&#x60;http://xxx.xx.xxx.xx&#x60;ï¼Œ
# ç„¶åæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå¯¹GitLabè¿›è¡Œç¼–è¯‘ã€‚
sudo gitlab-ctl reconfigure
# æ¸…é™¤ç¼“å­˜
sudo gitlab-rake cache:clear RAILS_ENV=production
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="ç™»å½•gitlab"><a class="anchor" aria-hidden="true" tabindex="-1" href="#ç™»å½•gitlab"><span class="octicon octicon-link"></span></a>ç™»å½•GitLab</h3>
    <pre><code class="code-highlight"><span class="code-line">Username: root 
</span><span class="code-line">Password: 5iveL!fe
</span></code><div onclick="copied(this)" data-code="Username: root 
Password: 5iveL!fe
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="å¯ç”¨-gitlab-registry-åŠŸèƒ½"><a class="anchor" aria-hidden="true" tabindex="-1" href="#å¯ç”¨-gitlab-registry-åŠŸèƒ½"><span class="octicon octicon-link"></span></a>å¯ç”¨ gitlab registry åŠŸèƒ½</h3>
    <p>å¼€å¯ <a href="https://docs.gitlab.com/omnibus/architecture/registry/README.html#configuring-registry">Configuring Registry</a> åŠŸèƒ½ï¼Œåªéœ€ä¿®æ”¹é…ç½® <a href="https://gitlab.com/gitlab-org/omnibus-gitlab/blob/10-3-stable/files/gitlab-cookbooks/gitlab/libraries/registry.rb#L39-55"><code>/etc/gitlab/gitlab.rb</code></a> æ–‡ä»¶ï¼Œå°† <code>registry_external_url</code> çš„å€¼ä¿®æ”¹ä¸º <a href="http://192.168.188.211:5008/">http://192.168.188.211:5008</a></p>
    <pre class="language-ruby"><code class="language-ruby code-highlight"><span class="code-line">registry_external_url <span class="token string-literal"><span class="token string">'http://192.168.188.211:5008'</span></span>
</span></code><div onclick="copied(this)" data-code="registry_external_url &#x27;http://192.168.188.211:5008&#x27;
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p><code>registry_external_url</code> è¿™ä¸ªåœ°å€æ˜¯æˆ‘ä»¬ä½¿ç”¨ <code>docker</code> å‘½ä»¤è¿›è¡Œ <code>pull</code> æˆ–è€… <code>push</code> é•œåƒçš„ä»“åº“åœ°å€ã€‚</p>
    <p>é‡å¯ <code>Gitlab</code> åï¼Œå¯ä»¥åœ¨ <code>Gitlab</code> å·¦ä¾§é¢æ¿çœ‹åˆ° <code>Container Registry</code> çš„èœå•ã€‚</p>
    <p>æŒ‰ç…§ gitlab ç»™å‡ºçš„æç¤ºï¼Œæˆ‘ä»¬å…ˆç™»å½•ä¸Š gitlab çš„ registryï¼š</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">docker</span> login <span class="token number">192.168</span>.188.211:5008
</span><span class="code-line">Username: ****
</span><span class="code-line">Password: **
</span></code><div onclick="copied(this)" data-code="docker login 192.168.188.211:5008
Username: ****
Password: **
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>æ³¨æ„ï¼šâš ï¸ å¯†ç æ˜¯éœ€è¦é€šè¿‡ <a href="http://gitlab.com/-/profile/personal_access_tokens">Gitlab > User Settings > Access Tokens > Add a personal access token</a> ç”Ÿæˆä¸€ä¸ª <code>personal_access_tokens</code> è€Œä¸æ˜¯çœŸæ­£çš„å¯†ç </p>
    <pre><code class="code-highlight"><span class="code-line">docker build -t 192.168.188.211:5008/docker/docker-static-service-template .
</span><span class="code-line"># æäº¤é•œåƒ
</span><span class="code-line">docker push 192.168.188.211:5008/docker/docker-static-service-template
</span></code><div onclick="copied(this)" data-code="docker build -t 192.168.188.211:5008/docker/docker-static-service-template .
# æäº¤é•œåƒ
docker push 192.168.188.211:5008/docker/docker-static-service-template
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="dockerå®‰è£…"><a class="anchor" aria-hidden="true" tabindex="-1" href="#dockerå®‰è£…"><span class="octicon octicon-link"></span></a>Dockerå®‰è£…</h2>
    <p><a href="https://github.com/jaywcjlove/docker-tutorial/blob/master/gitlab.html">Docker å®‰è£… Gitlab æ•™ç¨‹</a></p>
    <h2 id="å¸è½½"><a class="anchor" aria-hidden="true" tabindex="-1" href="#å¸è½½"><span class="octicon octicon-link"></span></a>å¸è½½</h2>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">sudo</span> gitlab-ctl uninstall
</span></code><div onclick="copied(this)" data-code="sudo gitlab-ctl uninstall
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="è¿ç»´"><a class="anchor" aria-hidden="true" tabindex="-1" href="#è¿ç»´"><span class="octicon octicon-link"></span></a>è¿ç»´</h2>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># ä¿®æ”¹é»˜è®¤çš„é…ç½®æ–‡ä»¶</span>
</span><span class="code-line"><span class="token function">sudo</span> <span class="token function">vim</span> /etc/gitlab/gitlab.rb
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># æŸ¥çœ‹ç‰ˆæœ¬</span>
</span><span class="code-line"><span class="token function">sudo</span> <span class="token function">cat</span> /opt/gitlab/embedded/service/gitlab-rails/VERSION
</span><span class="code-line"><span class="token comment"># echo "vm.overcommit_memory=1" >> /etc/sysctl.conf</span>
</span><span class="code-line"><span class="token comment"># sysctl -p</span>
</span><span class="code-line"><span class="token comment"># echo never > /sys/kernel/mm/transparent_hugepage/enabled</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># æ£€æŸ¥gitlab</span>
</span><span class="code-line">gitlab-rake gitlab:check <span class="token assign-left variable">SANITIZE</span><span class="token operator">=</span>true --trace
</span><span class="code-line">gitlab-rake gitlab:check
</span><span class="code-line">gitlab-rake gitlab:check <span class="token assign-left variable">SANITIZE</span><span class="token operator">=</span>true
</span><span class="code-line"><span class="token comment"># æŸ¥çœ‹æ—¥å¿—</span>
</span><span class="code-line">gitlab-ctl <span class="token function">tail</span>
</span><span class="code-line"><span class="token comment"># æ•°æ®åº“å…³ç³»å‡çº§</span>
</span><span class="code-line">gitlab-rake db:migrate
</span><span class="code-line"><span class="token comment"># æ¸…ç†ç¼“å­˜</span>
</span><span class="code-line">gitlab-rake cache:clear
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># æ›´æ–°gitlabåŒ…</span>
</span><span class="code-line">yum update gitlab-ce
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># å‡çº§gitlab</span>
</span><span class="code-line">yum <span class="token function">install</span> gitlab-ce
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># å‡çº§æ•°æ®å‘½ä»¤</span>
</span><span class="code-line">gitlab-ctl pg-upgrade
</span></code><div onclick="copied(this)" data-code="# ä¿®æ”¹é»˜è®¤çš„é…ç½®æ–‡ä»¶
sudo vim /etc/gitlab/gitlab.rb

# æŸ¥çœ‹ç‰ˆæœ¬
sudo cat /opt/gitlab/embedded/service/gitlab-rails/VERSION
# echo &#x22;vm.overcommit_memory=1&#x22; >> /etc/sysctl.conf
# sysctl -p
# echo never > /sys/kernel/mm/transparent_hugepage/enabled

# æ£€æŸ¥gitlab
gitlab-rake gitlab:check SANITIZE=true --trace
gitlab-rake gitlab:check
gitlab-rake gitlab:check SANITIZE=true
# æŸ¥çœ‹æ—¥å¿—
gitlab-ctl tail
# æ•°æ®åº“å…³ç³»å‡çº§
gitlab-rake db:migrate
# æ¸…ç†ç¼“å­˜
gitlab-rake cache:clear

# æ›´æ–°gitlabåŒ…
yum update gitlab-ce

# å‡çº§gitlab
yum install gitlab-ce

# å‡çº§æ•°æ®å‘½ä»¤
gitlab-ctl pg-upgrade
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="æœåŠ¡ç®¡ç†"><a class="anchor" aria-hidden="true" tabindex="-1" href="#æœåŠ¡ç®¡ç†"><span class="octicon octicon-link"></span></a>æœåŠ¡ç®¡ç†</h3>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">gitlab-ctl start <span class="token comment"># å¯åŠ¨æ‰€æœ‰ gitlab ç»„ä»¶ï¼š</span>
</span><span class="code-line">gitlab-ctl stop  <span class="token comment"># åœæ­¢æ‰€æœ‰ gitlab ç»„ä»¶ï¼š</span>
</span><span class="code-line">gitlab-ctl stop postgresql <span class="token comment"># åœæ­¢æ‰€æœ‰ gitlab postgresql ç»„ä»¶ï¼š</span>
</span><span class="code-line"><span class="token comment"># åœæ­¢ç›¸å…³æ•°æ®è¿æ¥æœåŠ¡</span>
</span><span class="code-line">gitlab-ctl stop unicorn
</span><span class="code-line">gitlab-ctl stop sidekiq
</span><span class="code-line">gitlab-ctl restart <span class="token comment"># é‡å¯æ‰€æœ‰ gitlab ç»„ä»¶ï¼š</span>
</span><span class="code-line">gitlab-ctl restart gitlab-workhorse <span class="token comment"># é‡å¯æ‰€æœ‰ gitlab gitlab-workhorse ç»„ä»¶ï¼š</span>
</span><span class="code-line">gitlab-ctl status <span class="token comment"># æŸ¥çœ‹æœåŠ¡çŠ¶æ€</span>
</span><span class="code-line">gitlab-ctl reconfigure <span class="token comment"># ç”Ÿæˆé…ç½®å¯åŠ¨æœåŠ¡</span>
</span></code><div onclick="copied(this)" data-code="gitlab-ctl start # å¯åŠ¨æ‰€æœ‰ gitlab ç»„ä»¶ï¼š
gitlab-ctl stop  # åœæ­¢æ‰€æœ‰ gitlab ç»„ä»¶ï¼š
gitlab-ctl stop postgresql # åœæ­¢æ‰€æœ‰ gitlab postgresql ç»„ä»¶ï¼š
# åœæ­¢ç›¸å…³æ•°æ®è¿æ¥æœåŠ¡
gitlab-ctl stop unicorn
gitlab-ctl stop sidekiq
gitlab-ctl restart # é‡å¯æ‰€æœ‰ gitlab ç»„ä»¶ï¼š
gitlab-ctl restart gitlab-workhorse # é‡å¯æ‰€æœ‰ gitlab gitlab-workhorse ç»„ä»¶ï¼š
gitlab-ctl status # æŸ¥çœ‹æœåŠ¡çŠ¶æ€
gitlab-ctl reconfigure # ç”Ÿæˆé…ç½®å¯åŠ¨æœåŠ¡
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="æ—¥å¿—æŸ¥çœ‹"><a class="anchor" aria-hidden="true" tabindex="-1" href="#æ—¥å¿—æŸ¥çœ‹"><span class="octicon octicon-link"></span></a>æ—¥å¿—æŸ¥çœ‹</h3>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">sudo</span> gitlab-ctl <span class="token function">tail</span> <span class="token comment"># æŸ¥çœ‹æ—¥å¿—</span>
</span><span class="code-line"><span class="token function">sudo</span> gitlab-ctl <span class="token function">tail</span> redis <span class="token comment"># æ£€æŸ¥redisçš„æ—¥å¿—</span>
</span><span class="code-line"><span class="token function">sudo</span> gitlab-ctl <span class="token function">tail</span> postgresql       <span class="token comment"># æ£€æŸ¥postgresqlçš„æ—¥å¿—</span>
</span><span class="code-line"><span class="token function">sudo</span> gitlab-ctl <span class="token function">tail</span> gitlab-workhorse <span class="token comment"># æ£€æŸ¥gitlab-workhorseçš„æ—¥å¿—</span>
</span><span class="code-line"><span class="token function">sudo</span> gitlab-ctl <span class="token function">tail</span> <span class="token function">logrotate</span> <span class="token comment"># æ£€æŸ¥logrotateçš„æ—¥å¿—</span>
</span><span class="code-line"><span class="token function">sudo</span> gitlab-ctl <span class="token function">tail</span> nginx    <span class="token comment"># æ£€æŸ¥nginxçš„æ—¥å¿—</span>
</span><span class="code-line"><span class="token function">sudo</span> gitlab-ctl <span class="token function">tail</span> sidekiq  <span class="token comment"># æ£€æŸ¥sidekiqçš„æ—¥å¿—</span>
</span><span class="code-line"><span class="token function">sudo</span> gitlab-ctl <span class="token function">tail</span> unicorn  <span class="token comment"># æ£€æŸ¥unicornçš„æ—¥å¿—</span>
</span></code><div onclick="copied(this)" data-code="sudo gitlab-ctl tail # æŸ¥çœ‹æ—¥å¿—
sudo gitlab-ctl tail redis # æ£€æŸ¥redisçš„æ—¥å¿—
sudo gitlab-ctl tail postgresql       # æ£€æŸ¥postgresqlçš„æ—¥å¿—
sudo gitlab-ctl tail gitlab-workhorse # æ£€æŸ¥gitlab-workhorseçš„æ—¥å¿—
sudo gitlab-ctl tail logrotate # æ£€æŸ¥logrotateçš„æ—¥å¿—
sudo gitlab-ctl tail nginx    # æ£€æŸ¥nginxçš„æ—¥å¿—
sudo gitlab-ctl tail sidekiq  # æ£€æŸ¥sidekiqçš„æ—¥å¿—
sudo gitlab-ctl tail unicorn  # æ£€æŸ¥unicornçš„æ—¥å¿—
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="é‡ç½®ç®¡ç†å‘˜å¯†ç "><a class="anchor" aria-hidden="true" tabindex="-1" href="#é‡ç½®ç®¡ç†å‘˜å¯†ç "><span class="octicon octicon-link"></span></a>é‡ç½®ç®¡ç†å‘˜å¯†ç </h3>
    <p>Gitlabç®¡ç†å‘˜å¯†ç å¿˜è®°ï¼Œæ€ä¹ˆé‡ç½®å¯†ç ï¼ŒGitlab ä¿®æ”¹rootç”¨æˆ·å¯†ç ï¼Œ<a href="http://docs.gitlab.com/ce/security/reset_root_password.html">How to reset your root password</a>ã€‚</p>
    <p>ä½¿ç”¨railså·¥å…·æ‰“å¼€ç»ˆç«¯</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">sudo</span> gitlab-rails console production
</span></code><div onclick="copied(this)" data-code="sudo gitlab-rails console production
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>æŸ¥è¯¢ç”¨æˆ·çš„emailï¼Œç”¨æˆ·åï¼Œå¯†ç ç­‰ä¿¡æ¯ï¼Œid:1 è¡¨ç¤ºrootè´¦å·</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">user <span class="token operator">=</span> User.where<span class="token punctuation">(</span>id: <span class="token number">1</span><span class="token punctuation">)</span>.first
</span></code><div onclick="copied(this)" data-code="user = User.where(id: 1).first
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>é‡æ–°è®¾ç½®å¯†ç </p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">user.password <span class="token operator">=</span> <span class="token string">'æ–°å¯†ç '</span>
</span><span class="code-line">user.password_confirmation <span class="token operator">=</span> <span class="token string">'æ–°å¯†ç '</span>ã€€
</span></code><div onclick="copied(this)" data-code="user.password = &#x27;æ–°å¯†ç &#x27;
user.password_confirmation = &#x27;æ–°å¯†ç &#x27;ã€€
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>ä¿å­˜å¯†ç </p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">user.save<span class="token operator">!</span>
</span></code><div onclick="copied(this)" data-code="user.save!
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>å®Œæ•´çš„æ“ä½œrubyè„šæœ¬</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">user <span class="token operator">=</span> User.where<span class="token punctuation">(</span>id: <span class="token number">1</span><span class="token punctuation">)</span>.first
</span><span class="code-line">user.password <span class="token operator">=</span> <span class="token string">'æ–°å¯†ç '</span>
</span><span class="code-line">user.password_confirmation <span class="token operator">=</span> <span class="token string">'æ–°å¯†ç '</span>
</span><span class="code-line">user.save<span class="token operator">!</span>
</span></code><div onclick="copied(this)" data-code="user = User.where(id: 1).first
user.password = &#x27;æ–°å¯†ç &#x27;
user.password_confirmation = &#x27;æ–°å¯†ç &#x27;
user.save!
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="å¤‡ä»½æ¢å¤"><a class="anchor" aria-hidden="true" tabindex="-1" href="#å¤‡ä»½æ¢å¤"><span class="octicon octicon-link"></span></a>å¤‡ä»½æ¢å¤</h2>
    <p>ä½¿ç”¨Gitlabä¸€é”®å®‰è£…åŒ…å®‰è£…Gitlabéå¸¸ç®€å•, åŒæ ·çš„å¤‡ä»½æ¢å¤ä¸è¿ç§»ä¹Ÿéå¸¸ç®€å•,ç”¨ä¸€æ¡å‘½ä»¤å³å¯åˆ›å»ºå®Œæ•´çš„Gitlabå¤‡ä»½:</p>
    <h3 id="ä¿®æ”¹å¤‡ä»½æ–‡ä»¶é»˜è®¤ç›®å½•"><a class="anchor" aria-hidden="true" tabindex="-1" href="#ä¿®æ”¹å¤‡ä»½æ–‡ä»¶é»˜è®¤ç›®å½•"><span class="octicon octicon-link"></span></a>ä¿®æ”¹å¤‡ä»½æ–‡ä»¶é»˜è®¤ç›®å½•</h3>
    <p>ä¿®æ”¹<code>/etc/gitlab/gitlab.rb</code>æ¥ä¿®æ”¹é»˜è®¤å­˜æ”¾å¤‡ä»½æ–‡ä»¶çš„ç›®å½•:</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">gitlab_rails<span class="token punctuation">[</span><span class="token string">'backup_path'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'/mnt/backups'</span>  
</span></code><div onclick="copied(this)" data-code="gitlab_rails[&#x27;backup_path&#x27;] = &#x27;/mnt/backups&#x27;  
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="åˆ›å»ºå¤‡ä»½"><a class="anchor" aria-hidden="true" tabindex="-1" href="#åˆ›å»ºå¤‡ä»½"><span class="octicon octicon-link"></span></a>åˆ›å»ºå¤‡ä»½</h3>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">gitlab-rake gitlab:backup:create
</span></code><div onclick="copied(this)" data-code="gitlab-rake gitlab:backup:create
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>ä»¥ä¸Šå‘½ä»¤å°†åœ¨ <code>/var/opt/gitlab/backups</code> ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåç§°ç±»ä¼¼ä¸ºxxxxxxxx_gitlab_backup.tarçš„å‹ç¼©åŒ…, è¿™ä¸ªå‹ç¼©åŒ…å°±æ˜¯Gitlabæ•´ä¸ªçš„å®Œæ•´éƒ¨åˆ†, å…¶ä¸­å¼€å¤´çš„xxxxxxæ˜¯å¤‡ä»½åˆ›å»ºçš„æ—¶é—´æˆ³ã€‚</p>
    <p>ä¿®æ”¹åä½¿ç”¨gitlab-ctl reconfigureå‘½ä»¤é‡è½½é…ç½®æ–‡ä»¶ã€‚</p>
    <h3 id="å¼€å§‹å¤‡ä»½"><a class="anchor" aria-hidden="true" tabindex="-1" href="#å¼€å§‹å¤‡ä»½"><span class="octicon octicon-link"></span></a>å¼€å§‹å¤‡ä»½</h3>
    <p>è¿™é‡Œæ”¾ä½ çš„å¤‡ä»½æ–‡ä»¶æ–‡ä»¶å¤¹ï¼Œå’Œä»“åº“æºæ–‡ä»¶ã€‚</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">/var/opt/gitlab/backups                   <span class="token comment"># å¤‡ä»½æ–‡ä»¶æ–‡ä»¶å¤¹</span>
</span><span class="code-line">/var/opt/gitlab/git-data/repositories     <span class="token comment"># gitä»“åº“æºæ–‡ä»¶</span>
</span></code><div onclick="copied(this)" data-code="/var/opt/gitlab/backups                   # å¤‡ä»½æ–‡ä»¶æ–‡ä»¶å¤¹
/var/opt/gitlab/git-data/repositories     # gitä»“åº“æºæ–‡ä»¶
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="è‡ªåŠ¨å¤‡ä»½"><a class="anchor" aria-hidden="true" tabindex="-1" href="#è‡ªåŠ¨å¤‡ä»½"><span class="octicon octicon-link"></span></a>è‡ªåŠ¨å¤‡ä»½</h3>
    <p>é€šè¿‡crontabä½¿ç”¨å¤‡ä»½å‘½ä»¤å®ç°è‡ªåŠ¨å¤‡ä»½</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">crontab</span> -e
</span><span class="code-line"><span class="token comment"># æ¯å¤©2ç‚¹å¤‡ä»½gitlabæ•°æ®</span>
</span><span class="code-line"><span class="token number">0</span> <span class="token number">2</span> * * * /usr/bin/gitlab-rake gitlab:backup:create
</span><span class="code-line"><span class="token number">0</span> <span class="token number">2</span> * * * /opt/gitlab/bin/gitlab-rake gitlab:backup:create
</span></code><div onclick="copied(this)" data-code="crontab -e
# æ¯å¤©2ç‚¹å¤‡ä»½gitlabæ•°æ®
0 2 * * * /usr/bin/gitlab-rake gitlab:backup:create
0 2 * * * /opt/gitlab/bin/gitlab-rake gitlab:backup:create
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>ä¸Šé¢ä¸¤è¡Œä¿å­˜ä¹‹åï¼Œé‡æ–°è½½å…¥é…ç½®</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">service</span> crond reload
</span><span class="code-line"><span class="token comment"># or</span>
</span><span class="code-line">systemctl reload crond.service
</span></code><div onclick="copied(this)" data-code="service crond reload
# or
systemctl reload crond.service
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="å¤‡ä»½ä¿ç•™ä¸ƒå¤©"><a class="anchor" aria-hidden="true" tabindex="-1" href="#å¤‡ä»½ä¿ç•™ä¸ƒå¤©"><span class="octicon octicon-link"></span></a>å¤‡ä»½ä¿ç•™ä¸ƒå¤©</h3>
    <p>è®¾ç½®åªä¿å­˜æœ€è¿‘7å¤©çš„å¤‡ä»½ï¼Œç¼–è¾‘ /etc/gitlab/gitlab.rb é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ°å¦‚ä¸‹ä»£ç ï¼Œåˆ é™¤æ³¨é‡Š <code>#</code> ä¿å­˜</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># /etc/gitlab/gitlab.rb é…ç½®æ–‡ä»¶ ä¿®æ”¹ä¸‹é¢è¿™ä¸€è¡Œ</span>
</span><span class="code-line">gitlab_rails<span class="token punctuation">[</span><span class="token string">'backup_keep_time'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">604800</span>  
</span></code><div onclick="copied(this)" data-code="# /etc/gitlab/gitlab.rb é…ç½®æ–‡ä»¶ ä¿®æ”¹ä¸‹é¢è¿™ä¸€è¡Œ
gitlab_rails[&#x27;backup_keep_time&#x27;] = 604800  
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>é‡æ–°åŠ è½½gitlabé…ç½®æ–‡ä»¶</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">sudo</span> gitlab-ctl reconfigure  
</span></code><div onclick="copied(this)" data-code="sudo gitlab-ctl reconfigure  
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="å¼€å§‹æ¢å¤"><a class="anchor" aria-hidden="true" tabindex="-1" href="#å¼€å§‹æ¢å¤"><span class="octicon octicon-link"></span></a>å¼€å§‹æ¢å¤</h3>
    <p>
      è¿ç§»å¦‚åŒå¤‡ä»½ä¸æ¢å¤çš„æ­¥éª¤ä¸€æ ·, åªéœ€è¦å°†è€æœåŠ¡å™¨ <code>/var/opt/gitlab/backups</code> ç›®å½•ä¸‹çš„å¤‡ä»½æ–‡ä»¶æ‹·è´åˆ°æ–°æœåŠ¡å™¨ä¸Šçš„ <code>/var/opt/gitlab/backups</code> å³å¯(å¦‚æœä½ æ²¡ä¿®æ”¹è¿‡é»˜è®¤å¤‡ä»½ç›®å½•çš„è¯)ã€‚ ç„¶åæ‰§è¡Œæ¢å¤å‘½ä»¤ã€‚
      å¦‚æœä¿®æ”¹äº†ï¼Œé¦–å…ˆè¿›å…¥å¤‡ä»½ gitlab çš„ç›®å½•ï¼Œè¿™ä¸ªç›®å½•æ˜¯é…ç½®æ–‡ä»¶ä¸­çš„ <code>gitlab_rails['backup_path']</code> ï¼Œé»˜è®¤ä¸º <code>/var/opt/gitlab/backups</code> ã€‚
    </p>
    <p>ç„¶ååœæ­¢ unicorn å’Œ sidekiq ï¼Œä¿è¯æ•°æ®åº“æ²¡æœ‰æ–°çš„è¿æ¥ï¼Œä¸ä¼šæœ‰å†™æ•°æ®æƒ…å†µã€‚</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># åœæ­¢ç›¸å…³æ•°æ®è¿æ¥æœåŠ¡</span>
</span><span class="code-line">gitlab-ctl stop unicorn
</span><span class="code-line"><span class="token comment"># ok: down: unicorn: 0s, normally up</span>
</span><span class="code-line">gitlab-ctl stop sidekiq
</span><span class="code-line"><span class="token comment"># ok: down: sidekiq: 0s, normally up</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># ä»xxxxxç¼–å·å¤‡ä»½ä¸­æ¢å¤</span>
</span><span class="code-line"><span class="token comment"># ç„¶åæ¢å¤æ•°æ®ï¼Œ1406691018ä¸ºå¤‡ä»½æ–‡ä»¶çš„æ—¶é—´æˆ³</span>
</span><span class="code-line">gitlab-rake gitlab:backup:restore <span class="token assign-left variable">BACKUP</span><span class="token operator">=</span><span class="token number">1406691018</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># æ–°ç‰ˆæœ¬ 1483533591_2017_01_04_gitlab_backup.tar</span>
</span><span class="code-line">gitlab-rake gitlab:backup:restore <span class="token assign-left variable">BACKUP</span><span class="token operator">=</span>1483533591_2017_01_04_gitlab_backup.tar
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># å¯åŠ¨Gitlab</span>
</span><span class="code-line"><span class="token function">sudo</span> gitlab-ctl start  
</span></code><div onclick="copied(this)" data-code="# åœæ­¢ç›¸å…³æ•°æ®è¿æ¥æœåŠ¡
gitlab-ctl stop unicorn
# ok: down: unicorn: 0s, normally up
gitlab-ctl stop sidekiq
# ok: down: sidekiq: 0s, normally up

# ä»xxxxxç¼–å·å¤‡ä»½ä¸­æ¢å¤
# ç„¶åæ¢å¤æ•°æ®ï¼Œ1406691018ä¸ºå¤‡ä»½æ–‡ä»¶çš„æ—¶é—´æˆ³
gitlab-rake gitlab:backup:restore BACKUP=1406691018

# æ–°ç‰ˆæœ¬ 1483533591_2017_01_04_gitlab_backup.tar
gitlab-rake gitlab:backup:restore BACKUP=1483533591_2017_01_04_gitlab_backup.tar

# å¯åŠ¨Gitlab
sudo gitlab-ctl start  
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>åˆ¤æ–­æ˜¯æ‰§è¡Œå®é™…æ“ä½œçš„gitlabç›¸å…³ç”¨æˆ·ï¼šgitï¼Œæ²¡æœ‰å¾—åˆ°è¶³å¤Ÿçš„æƒé™ã€‚ä¾æ¬¡æ‰§è¡Œå‘½ä»¤ï¼š</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># æ¢å¤è¿‡ç¨‹ä¸­æ²¡æœ‰æƒé™</span>
</span><span class="code-line"><span class="token function">mkdir</span> /var/opt/gitlab/backups
</span><span class="code-line"><span class="token function">chown</span> <span class="token function">git</span> /var/opt/gitlab/backups
</span><span class="code-line"><span class="token function">chmod</span> <span class="token number">700</span> /var/opt/gitlab/backups
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># æ¢å¤æˆåŠŸé¡µé¢æŠ¥æ²¡æœ‰æƒé™çš„é”™è¯¯</span>
</span><span class="code-line"><span class="token function">sudo</span> <span class="token function">chown</span> -R git:git /var/opt/gitlab/git-data/repositories
</span><span class="code-line"><span class="token function">sudo</span> <span class="token function">chmod</span> -R ug+rwX,o-rwx /var/opt/gitlab/git-data/repositories
</span><span class="code-line"><span class="token function">sudo</span> <span class="token function">chmod</span> -R ug-s /var/opt/gitlab/git-data/repositories
</span><span class="code-line"><span class="token function">sudo</span> <span class="token function">find</span> /var/opt/gitlab/git-data/repositories -type d -print0 <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">xargs</span> -0 <span class="token function">chmod</span> g+s
</span></code><div onclick="copied(this)" data-code="# æ¢å¤è¿‡ç¨‹ä¸­æ²¡æœ‰æƒé™
mkdir /var/opt/gitlab/backups
chown git /var/opt/gitlab/backups
chmod 700 /var/opt/gitlab/backups

# æ¢å¤æˆåŠŸé¡µé¢æŠ¥æ²¡æœ‰æƒé™çš„é”™è¯¯
sudo chown -R git:git /var/opt/gitlab/git-data/repositories
sudo chmod -R ug+rwX,o-rwx /var/opt/gitlab/git-data/repositories
sudo chmod -R ug-s /var/opt/gitlab/git-data/repositories
sudo find /var/opt/gitlab/git-data/repositories -type d -print0 | sudo xargs -0 chmod g+s
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>å¦‚æœå¤‡ä»½æ–‡ä»¶æŠ¥æ²¡æœ‰æƒé™ï¼Œé€šè¿‡<code>ls -al</code>æŸ¥çœ‹æƒé™æ˜¯ä¸æ˜¯<code>git</code>ï¼Œè€Œä¸æ˜¯<code>root</code>ï¼Œé€šè¿‡ä¸‹é¢æ–¹å¼ç»™<code>git</code>ç”¨æˆ·æƒé™</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">sudo</span> <span class="token function">chown</span> -R git:git 1483533591_2017_01_04_gitlab_backup.tar
</span></code><div onclick="copied(this)" data-code="sudo chown -R git:git 1483533591_2017_01_04_gitlab_backup.tar
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="è¿æ¥æ•°æ®åº“"><a class="anchor" aria-hidden="true" tabindex="-1" href="#è¿æ¥æ•°æ®åº“"><span class="octicon octicon-link"></span></a>è¿æ¥æ•°æ®åº“</h2>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># ç™»é™†gitlabçš„å®‰è£…æœåŠ¡æŸ¥çœ‹é…ç½®æ–‡ä»¶</span>
</span><span class="code-line"><span class="token function">cat</span> /var/opt/gitlab/gitlab-rails/etc/database.yml 
</span><span class="code-line">
</span><span class="code-line"><span class="token function">vim</span> /var/opt/gitlab/postgresql/data/postgresql.conf
</span><span class="code-line"><span class="token comment"># listen_addresses = '192.168.1.125' # ä¿®æ”¹ç›‘å¬åœ°å€ä¸ºip</span>
</span><span class="code-line"><span class="token comment"># æˆ–è€…æ”¹ä¸º "*"</span>
</span></code><div onclick="copied(this)" data-code="# ç™»é™†gitlabçš„å®‰è£…æœåŠ¡æŸ¥çœ‹é…ç½®æ–‡ä»¶
cat /var/opt/gitlab/gitlab-rails/etc/database.yml 

vim /var/opt/gitlab/postgresql/data/postgresql.conf
# listen_addresses = &#x27;192.168.1.125&#x27; # ä¿®æ”¹ç›‘å¬åœ°å€ä¸ºip
# æˆ–è€…æ”¹ä¸º &#x22;*&#x22;
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>ä¿®æ”¹ <code>pg_hba.conf</code> é…ç½®</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">vim</span>  /var/opt/gitlab/postgresql/data/pg_hba.conf
</span><span class="code-line"><span class="token comment"># å°†ä¸‹é¢è¿™ä¸€è¡Œæ·»åŠ åˆ°é…ç½®çš„æœ€åé¢</span>
</span><span class="code-line"><span class="token comment"># host    all    all    0.0.0.0/0    trust</span>
</span></code><div onclick="copied(this)" data-code="vim  /var/opt/gitlab/postgresql/data/pg_hba.conf
# å°†ä¸‹é¢è¿™ä¸€è¡Œæ·»åŠ åˆ°é…ç½®çš„æœ€åé¢
# host    all    all    0.0.0.0/0    trust
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>å¦‚æœä¸å¸Œæœ›å…è®¸æ‰€æœ‰IPè¿œç¨‹è®¿é—®ï¼Œåˆ™å¯ä»¥å°†ä¸Šè¿°é…ç½®é¡¹ä¸­çš„0.0.0.0è®¾å®šä¸ºç‰¹å®šçš„IPå€¼ã€‚</p>
    <p>é‡å¯ <code>postgresql</code> æ•°æ®åº“</p>
    <pre><code class="code-highlight"><span class="code-line">gitlab-ctl restart postgresql
</span></code><div onclick="copied(this)" data-code="gitlab-ctl restart postgresql
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>æŸ¥çœ‹ <code>/etc/passwd</code> æ–‡ä»¶é‡Œè¾¹ <code>gitlab</code> å¯¹åº”çš„ç³»ç»Ÿç”¨æˆ·</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span>$ <span class="token function">cat</span> /etc/passwd
</span><span class="code-line"><span class="token punctuation">..</span>.
</span><span class="code-line">gitlab-psql:x:493:490::/var/opt/gitlab/postgresql:/bin/sh  <span class="token comment"># gitlabçš„postgresqlç”¨æˆ·</span>
</span></code><div onclick="copied(this)" data-code="[root@localhost ~]$ cat /etc/passwd
...
gitlab-psql:x:493:490::/var/opt/gitlab/postgresql:/bin/sh  # gitlabçš„postgresqlç”¨æˆ·
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="ä¸€äº›å¸¸è§„ç›®å½•"><a class="anchor" aria-hidden="true" tabindex="-1" href="#ä¸€äº›å¸¸è§„ç›®å½•"><span class="octicon octicon-link"></span></a>ä¸€äº›å¸¸è§„ç›®å½•</h2>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># é…ç½®ç›®å½•</span>
</span><span class="code-line">/etc/gitlab/gitlab.rb
</span><span class="code-line"><span class="token comment"># ç”Ÿæˆå¥½çš„nginxé…ç½®</span>
</span><span class="code-line">/var/opt/gitlab/nginx/conf/gitlab-http.conf
</span><span class="code-line"><span class="token comment"># å¤‡ä»½ç›®å½•</span>
</span><span class="code-line">/var/opt/gitlab/backups
</span></code><div onclick="copied(this)" data-code="# é…ç½®ç›®å½•
/etc/gitlab/gitlab.rb
# ç”Ÿæˆå¥½çš„nginxé…ç½®
/var/opt/gitlab/nginx/conf/gitlab-http.conf
# å¤‡ä»½ç›®å½•
/var/opt/gitlab/backups
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="ä½¿ç”¨https"><a class="anchor" aria-hidden="true" tabindex="-1" href="#ä½¿ç”¨https"><span class="octicon octicon-link"></span></a>ä½¿ç”¨HTTPS</h2>
    <p>ç›´æ¥å°†nginxé…ç½®å¤åˆ¶åˆ°ä½ è‡ªå·±çš„nginxé…ç½®ä¸­ï¼Œåœæ‰gitlabçš„nginx</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">cp</span> /var/opt/gitlab/nginx/conf/gitlab-http.conf /usr/local/nginx/conf/vhost/
</span></code><div onclick="copied(this)" data-code="cp /var/opt/gitlab/nginx/conf/gitlab-http.conf /usr/local/nginx/conf/vhost/
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>å°†ä½ çš„SSLè¯ä¹¦é…ç½®å¤åˆ¶è¿›å»</p>
    <pre class="language-nginx"><code class="language-nginx code-highlight"><span class="code-line"><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token directive"><span class="token keyword">listen</span> <span class="token number">443</span> ssl</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token directive"><span class="token keyword">server_name</span>  g.doman.cn</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token directive"><span class="token keyword">ssl_certificate</span> /etc/letsencrypt/live/*****/certificate.crt</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token directive"><span class="token keyword">ssl_certificate_key</span> /etc/letsencrypt/live/*****/private.key</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token comment"># .....</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div onclick="copied(this)" data-code="server {
  listen 443 ssl;
  server_name  g.doman.cn;
  ssl_certificate /etc/letsencrypt/live/*****/certificate.crt;
  ssl_certificate_key /etc/letsencrypt/live/*****/private.key;
  # .....
}
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>ç¼–è¾‘<code>vi /usr/local/nginx/conf/nginx.conf</code>ä½ çš„nginxé…ç½®ï¼Œå¼•ç”¨ä½ å¤åˆ¶è¿‡æ¥çš„é…ç½®ã€‚</p>
    <pre class="language-nginx"><code class="language-nginx code-highlight"><span class="code-line"><span class="token directive"><span class="token keyword">http</span></span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment"># .....</span>
</span><span class="code-line">  <span class="token directive"><span class="token keyword">include</span> vhost/gitlab-http.conf</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div onclick="copied(this)" data-code="http {
  # .....
  include vhost/gitlab-http.conf;
}
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>åŒæ—¶è¦æŠŠ<code>/var/opt/gitlab/nginx/conf/nginx.conf</code>ä¸­çš„ä¸€äº›å˜é‡å¤åˆ¶åˆ°è‡ªå·±çš„nginxé…ç½®ä¸­<code>nginx.conf</code></p>
    <pre class="language-nginx"><code class="language-nginx code-highlight"><span class="code-line"><span class="token directive"><span class="token keyword">http</span></span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment"># .....</span>
</span><span class="code-line">  <span class="token directive"><span class="token keyword">log_format</span> gitlab_access <span class="token string">'<span class="token variable">$remote_addr</span> - <span class="token variable">$remote_user</span> [<span class="token variable">$time_local]</span> "<span class="token variable">$request_method</span> <span class="token variable">$filtered_request_uri</span> <span class="token variable">$server_protocol</span>" <span class="token variable">$status</span> <span class="token variable">$body_bytes_sent</span> "<span class="token variable">$filtered_http_referer</span>" "<span class="token variable">$http_user_agent</span>"'</span></span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token directive"><span class="token keyword">log_format</span> gitlab_mattermost_access <span class="token string">'<span class="token variable">$remote_addr</span> - <span class="token variable">$remote_user</span> [<span class="token variable">$time_local]</span> "<span class="token variable">$request_method</span> <span class="token variable">$filtered_request_uri</span> <span class="token variable">$server_protocol</span>" <span class="token variable">$status</span> <span class="token variable">$body_bytes_sent</span> "<span class="token variable">$filtered_http_referer</span>" "<span class="token variable">$http_user_agent</span>"'</span></span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token directive"><span class="token keyword">proxy_cache_path</span> proxy_cache keys_zone=gitlab:10m max_size=1g levels=1:2</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token directive"><span class="token keyword">proxy_cache</span> gitlab</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token directive"><span class="token keyword">map</span> <span class="token variable">$http_upgrade</span> <span class="token variable">$connection_upgrade</span></span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token directive"><span class="token keyword">default</span> upgrade</span><span class="token punctuation">;</span>
</span><span class="code-line">      ''      <span class="token directive"><span class="token keyword">close</span></span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment"># Remove private_token from the request URI</span>
</span><span class="code-line">  <span class="token comment"># In:  /foo?private_token=unfiltered&#x26;authenticity_token=unfiltered&#x26;rss_token=unfiltered&#x26;...</span>
</span><span class="code-line">  <span class="token comment"># Out: /foo?private_token=[FILTERED]&#x26;authenticity_token=unfiltered&#x26;rss_token=unfiltered&#x26;...</span>
</span><span class="code-line">  <span class="token directive"><span class="token keyword">map</span> <span class="token variable">$request_uri</span> <span class="token variable">$temp_request_uri_1</span></span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token directive"><span class="token keyword">default</span> <span class="token variable">$request_uri</span></span><span class="token punctuation">;</span>
</span><span class="code-line">    ~(?i)^(?&#x3C;start>.*)(?&#x3C;temp>[\?&#x26;]private[\-_]token)=[^&#x26;]*(?&#x3C;rest>.*)$ "$start$temp=[FILTERED]$rest"<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token comment"># Remove authenticity_token from the request URI</span>
</span><span class="code-line">  <span class="token comment"># In:  /foo?private_token=[FILTERED]&#x26;authenticity_token=unfiltered&#x26;rss_token=unfiltered&#x26;...</span>
</span><span class="code-line">  <span class="token comment"># Out: /foo?private_token=[FILTERED]&#x26;authenticity_token=[FILTERED]&#x26;rss_token=unfiltered&#x26;...</span>
</span><span class="code-line">  <span class="token directive"><span class="token keyword">map</span> <span class="token variable">$temp_request_uri_1</span> <span class="token variable">$temp_request_uri_2</span></span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token directive"><span class="token keyword">default</span> <span class="token variable">$temp_request_uri_1</span></span><span class="token punctuation">;</span>
</span><span class="code-line">    ~(?i)^(?&#x3C;start>.*)(?&#x3C;temp>[\?&#x26;]authenticity[\-_]token)=[^&#x26;]*(?&#x3C;rest>.*)$ "$start$temp=[FILTERED]$rest"<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token comment"># Remove rss_token from the request URI</span>
</span><span class="code-line">  <span class="token comment"># In:  /foo?private_token=[FILTERED]&#x26;authenticity_token=[FILTERED]&#x26;rss_token=unfiltered&#x26;...</span>
</span><span class="code-line">  <span class="token comment"># Out: /foo?private_token=[FILTERED]&#x26;authenticity_token=[FILTERED]&#x26;rss_token=[FILTERED]&#x26;...</span>
</span><span class="code-line">  <span class="token directive"><span class="token keyword">map</span> <span class="token variable">$temp_request_uri_2</span> <span class="token variable">$filtered_request_uri</span></span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token directive"><span class="token keyword">default</span> <span class="token variable">$temp_request_uri_2</span></span><span class="token punctuation">;</span>
</span><span class="code-line">    ~(?i)^(?&#x3C;start>.*)(?&#x3C;temp>[\?&#x26;]rss[\-_]token)=[^&#x26;]*(?&#x3C;rest>.*)$ "$start$temp=[FILTERED]$rest"<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token comment"># A version of the referer without the query string</span>
</span><span class="code-line">  <span class="token directive"><span class="token keyword">map</span> <span class="token variable">$http_referer</span> <span class="token variable">$filtered_http_referer</span></span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token directive"><span class="token keyword">default</span> <span class="token variable">$http_referer</span></span><span class="token punctuation">;</span>
</span><span class="code-line">    ~^(?&#x3C;temp>.*)\? $temp<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div onclick="copied(this)" data-code="http {
  # .....
  log_format gitlab_access &#x27;$remote_addr - $remote_user [$time_local] &#x22;$request_method $filtered_request_uri $server_protocol&#x22; $status $body_bytes_sent &#x22;$filtered_http_referer&#x22; &#x22;$http_user_agent&#x22;&#x27;;
  log_format gitlab_mattermost_access &#x27;$remote_addr - $remote_user [$time_local] &#x22;$request_method $filtered_request_uri $server_protocol&#x22; $status $body_bytes_sent &#x22;$filtered_http_referer&#x22; &#x22;$http_user_agent&#x22;&#x27;;

  proxy_cache_path proxy_cache keys_zone=gitlab:10m max_size=1g levels=1:2;
  proxy_cache gitlab;
  map $http_upgrade $connection_upgrade {
      default upgrade;
      &#x27;&#x27;      close;
  }

  # Remove private_token from the request URI
  # In:  /foo?private_token=unfiltered&#x26;authenticity_token=unfiltered&#x26;rss_token=unfiltered&#x26;...
  # Out: /foo?private_token=[FILTERED]&#x26;authenticity_token=unfiltered&#x26;rss_token=unfiltered&#x26;...
  map $request_uri $temp_request_uri_1 {
    default $request_uri;
    ~(?i)^(?<start>.*)(?<temp>[\?&#x26;]private[\-_]token)=[^&#x26;]*(?<rest>.*)$ &#x22;$start$temp=[FILTERED]$rest&#x22;;
  }
  # Remove authenticity_token from the request URI
  # In:  /foo?private_token=[FILTERED]&#x26;authenticity_token=unfiltered&#x26;rss_token=unfiltered&#x26;...
  # Out: /foo?private_token=[FILTERED]&#x26;authenticity_token=[FILTERED]&#x26;rss_token=unfiltered&#x26;...
  map $temp_request_uri_1 $temp_request_uri_2 {
    default $temp_request_uri_1;
    ~(?i)^(?<start>.*)(?<temp>[\?&#x26;]authenticity[\-_]token)=[^&#x26;]*(?<rest>.*)$ &#x22;$start$temp=[FILTERED]$rest&#x22;;
  }
  # Remove rss_token from the request URI
  # In:  /foo?private_token=[FILTERED]&#x26;authenticity_token=[FILTERED]&#x26;rss_token=unfiltered&#x26;...
  # Out: /foo?private_token=[FILTERED]&#x26;authenticity_token=[FILTERED]&#x26;rss_token=[FILTERED]&#x26;...
  map $temp_request_uri_2 $filtered_request_uri {
    default $temp_request_uri_2;
    ~(?i)^(?<start>.*)(?<temp>[\?&#x26;]rss[\-_]token)=[^&#x26;]*(?<rest>.*)$ &#x22;$start$temp=[FILTERED]$rest&#x22;;
  }
  # A version of the referer without the query string
  map $http_referer $filtered_http_referer {
    default $http_referer;
    ~^(?<temp>.*)\? $temp;
  }
}
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="æš´åŠ›å‡çº§"><a class="anchor" aria-hidden="true" tabindex="-1" href="#æš´åŠ›å‡çº§"><span class="octicon octicon-link"></span></a>æš´åŠ›å‡çº§</h2>
    <p>æš´åŠ›å‡çº§å‰å…ˆå¤‡ä»½ï¼Œç„¶ååœæ­¢æ‰€æœ‰æœåŠ¡è¿è¡Œï¼Œè®°å¾—å¤‡ä»½çš„è‰¯å¥½ä¹ æƒ¯</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">gitlab-ctl stop  <span class="token comment"># åœæ­¢æ‰€æœ‰ gitlab ç»„ä»¶ï¼š</span>
</span><span class="code-line"><span class="token comment"># æ›´æ–°gitlabåŒ…</span>
</span><span class="code-line">yum update gitlab-ce
</span></code><div onclick="copied(this)" data-code="gitlab-ctl stop  # åœæ­¢æ‰€æœ‰ gitlab ç»„ä»¶ï¼š
# æ›´æ–°gitlabåŒ…
yum update gitlab-ce
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>ç›´æ¥ç¼–è¾‘æº /etc/yum.repos.d/gitlab-ce.repoï¼Œå®‰è£… GitLab ç¤¾åŒºç‰ˆ</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">yum list gitlab-ce <span class="token comment"># æŸ¥çœ‹ç‰ˆæœ¬</span>
</span><span class="code-line"><span class="token function">sudo</span> yum <span class="token function">install</span> gitlab-ce <span class="token comment">#(è‡ªåŠ¨å®‰è£…æœ€æ–°ç‰ˆ)</span>
</span><span class="code-line"><span class="token function">sudo</span> yum <span class="token function">install</span> gitlab-ce-8.15.2-ce.0.el6 <span class="token comment">#(å®‰è£…æŒ‡å®šç‰ˆæœ¬)</span>
</span></code><div onclick="copied(this)" data-code="yum list gitlab-ce # æŸ¥çœ‹ç‰ˆæœ¬
sudo yum install gitlab-ce #(è‡ªåŠ¨å®‰è£…æœ€æ–°ç‰ˆ)
sudo yum install gitlab-ce-8.15.2-ce.0.el6 #(å®‰è£…æŒ‡å®šç‰ˆæœ¬)
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>æ³¨æ„ï¼š<code>10.7</code> ç‰ˆæœ¬å‡çº§åˆ° <code>11.x</code> ç‰ˆæœ¬éœ€è¦å…ˆå‡çº§åˆ° <code>10.8</code> ç‰ˆæœ¬</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># å®‰è£…æŒ‡å®šç‰ˆæœ¬ 10.8 çš„ç‰ˆæœ¬</span>
</span><span class="code-line"><span class="token function">sudo</span> yum <span class="token function">install</span> gitlab-ce-10.8.0-ce.0.el6
</span></code><div onclick="copied(this)" data-code="# å®‰è£…æŒ‡å®šç‰ˆæœ¬ 10.8 çš„ç‰ˆæœ¬
sudo yum install gitlab-ce-10.8.0-ce.0.el6
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>å®‰è£…å®Œæˆè®°å¾—å°†æ‰€æœ‰æœåŠ¡å¯èµ·æ¥å“¦</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">gitlab-ctl start <span class="token comment"># å¯åŠ¨æ‰€æœ‰æ•°æ®åº“</span>
</span><span class="code-line"><span class="token comment"># postgresql æ•°æ®åº“å¦‚æœå¯åŠ¨ä¸äº†ï¼Œé€šè¿‡é‡å¯å¯åŠ¨</span>
</span><span class="code-line">gitlab-ctl restart postgresql
</span></code><div onclick="copied(this)" data-code="gitlab-ctl start # å¯åŠ¨æ‰€æœ‰æ•°æ®åº“
# postgresql æ•°æ®åº“å¦‚æœå¯åŠ¨ä¸äº†ï¼Œé€šè¿‡é‡å¯å¯åŠ¨
gitlab-ctl restart postgresql
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>å®‰è£…è¿‡å¦‚æœæŠ¥é”™ï¼ŒæŸ¥çœ‹æç¤ºæ ¹æ®æç¤ºæ“ä½œï¼Œç‰ˆæœ¬è·¨åº¦å¤ªå¤§ä¼šæŠ¥é”™å“¦ã€‚</p>
    <pre><code class="code-highlight"><span class="code-line">gitlab preinstall: Automatically backing up only the GitLab SQL database (excluding everything else!)
</span><span class="code-line">Dumping database ...
</span><span class="code-line">Dumping PostgreSQL database gitlabhq_production ... pg_dump: [archiver (db)] connection to database "gitlabhq_production" failed: could not connect to server: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•
</span><span class="code-line">    Is the server running locally and accepting
</span><span class="code-line">    connections on Unix domain socket "/var/opt/gitlab/postgresql/.s.PGSQL.5432"?
</span><span class="code-line">Backup failed
</span><span class="code-line">[FAILED]
</span><span class="code-line">gitlab preinstall:
</span><span class="code-line">gitlab preinstall: Backup failed! If you want to skip this backup, run the following command and
</span><span class="code-line">gitlab preinstall: try again:
</span><span class="code-line">gitlab preinstall:
</span><span class="code-line">gitlab preinstall:   sudo touch /etc/gitlab/skip-auto-migrations
</span><span class="code-line">gitlab preinstall:
</span><span class="code-line">error: %pre(gitlab-ce-8.15.2-ce.0.el6.x86_64) scriptlet failed, exit status 1
</span><span class="code-line">Error in PREIN scriptlet in rpm package gitlab-ce-8.15.2-ce.0.el6.x86_64
</span><span class="code-line">error:   install: %pre scriptlet failed (2), skipping gitlab-ce-8.15.2-ce.0.el6
</span><span class="code-line">gitlab-ce-8.11.5-ce.0.el6.x86_64 was supposed to be removed but is not!
</span><span class="code-line">  Verifying  : gitlab-ce-8.11.5-ce.0.el6.x86_64                                                                                                                                                             1/2
</span><span class="code-line">  Verifying  : gitlab-ce-8.15.2-ce.0.el6.x86_64                                                                                                                                                             2/2
</span><span class="code-line">
</span><span class="code-line">Failed:
</span><span class="code-line">  gitlab-ce.x86_64 0:8.11.5-ce.0.el6
</span></code><div onclick="copied(this)" data-code="gitlab preinstall: Automatically backing up only the GitLab SQL database (excluding everything else!)
Dumping database ...
Dumping PostgreSQL database gitlabhq_production ... pg_dump: [archiver (db)] connection to database &#x22;gitlabhq_production&#x22; failed: could not connect to server: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•
    Is the server running locally and accepting
    connections on Unix domain socket &#x22;/var/opt/gitlab/postgresql/.s.PGSQL.5432&#x22;?
Backup failed
[FAILED]
gitlab preinstall:
gitlab preinstall: Backup failed! If you want to skip this backup, run the following command and
gitlab preinstall: try again:
gitlab preinstall:
gitlab preinstall:   sudo touch /etc/gitlab/skip-auto-migrations
gitlab preinstall:
error: %pre(gitlab-ce-8.15.2-ce.0.el6.x86_64) scriptlet failed, exit status 1
Error in PREIN scriptlet in rpm package gitlab-ce-8.15.2-ce.0.el6.x86_64
error:   install: %pre scriptlet failed (2), skipping gitlab-ce-8.15.2-ce.0.el6
gitlab-ce-8.11.5-ce.0.el6.x86_64 was supposed to be removed but is not!
  Verifying  : gitlab-ce-8.11.5-ce.0.el6.x86_64                                                                                                                                                             1/2
  Verifying  : gitlab-ce-8.15.2-ce.0.el6.x86_64                                                                                                                                                             2/2

Failed:
  gitlab-ce.x86_64 0:8.11.5-ce.0.el6
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>çœ‹ä¸Šé¢ä¸€å †é”™è¯¯ï¼Œç¬é—´å°±æ‡µé€¼äº†ï¼Œçœ‹åˆ°ä¸€æ¡æ•‘æ˜Ÿå‘½ä»¤è®©æˆ‘å°è¯•è¿è¡Œ <code>sudo touch /etc/gitlab/skip-auto-migrations</code> äºæ˜¯æˆ‘äºŒé€¼çš„é‡æ–°<code>yum install gitlab-ce</code>è¿è¡Œäº†ï¼Œç»“æœçœŸçš„å®‰è£…æˆåŠŸäº†ï¼ŒğŸ˜„ã€‚</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># é‡æ–°å®‰è£…å‘½ä»¤</span>
</span><span class="code-line">yum reinstall gitlab-ce
</span><span class="code-line"><span class="token comment"># or</span>
</span><span class="code-line">yum <span class="token function">install</span> gitlab-ce
</span></code><div onclick="copied(this)" data-code="# é‡æ–°å®‰è£…å‘½ä»¤
yum reinstall gitlab-ce
# or
yum install gitlab-ce
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <pre><code class="code-highlight"><span class="code-line">...
</span><span class="code-line">gitlab: Thank you for installing GitLab!
</span><span class="code-line">gitlab: To configure and start GitLab, RUN THE FOLLOWING COMMAND:
</span><span class="code-line">
</span><span class="code-line">sudo gitlab-ctl reconfigure
</span><span class="code-line">
</span><span class="code-line">gitlab: GitLab should be reachable at http://114.55.148.71:8081
</span><span class="code-line">gitlab: Otherwise configure GitLab for your system by editing /etc/gitlab/gitlab.rb file
</span><span class="code-line">gitlab: And running reconfigure again.
</span><span class="code-line">gitlab:
</span><span class="code-line">gitlab: For a comprehensive list of configuration options please see the Omnibus GitLab readme
</span><span class="code-line">gitlab: https://gitlab.com/gitlab-org/omnibus-gitlab/blob/master/README.md
</span><span class="code-line">gitlab:
</span><span class="code-line">
</span><span class="code-line">gitlab: GitLab now ships with a newer version of PostgreSQL (9.6.1), and will be used
</span><span class="code-line">gitlab: as the default in the next major relase. To upgrade, RUN THE FOLLOWING COMMANDS:
</span><span class="code-line">
</span><span class="code-line">sudo gitlab-ctl pg-upgrade
</span><span class="code-line">
</span><span class="code-line">gitlab: For more details, please see:
</span><span class="code-line">gitlab: https://docs.gitlab.com/omnibus/settings/database.html#upgrade-packaged-postgresql-server
</span><span class="code-line">gitlab:
</span><span class="code-line">  æ¸…ç†       : gitlab-ce-8.11.5-ce.0.el6.x86_64                                                                                                                                                             2/2
</span><span class="code-line">Found /etc/gitlab/skip-auto-migrations, exiting...
</span><span class="code-line">  Verifying  : gitlab-ce-8.15.2-ce.0.el6.x86_64                                                                                                                                                             1/2
</span><span class="code-line">  Verifying  : gitlab-ce-8.11.5-ce.0.el6.x86_64                                                                                                                                                             2/2
</span><span class="code-line">
</span><span class="code-line">æ›´æ–°å®Œæ¯•:
</span><span class="code-line">  gitlab-ce.x86_64 0:8.15.2-ce.0.el6
</span><span class="code-line">
</span><span class="code-line">å®Œæ¯•ï¼
</span></code><div onclick="copied(this)" data-code="...
gitlab: Thank you for installing GitLab!
gitlab: To configure and start GitLab, RUN THE FOLLOWING COMMAND:

sudo gitlab-ctl reconfigure

gitlab: GitLab should be reachable at http://114.55.148.71:8081
gitlab: Otherwise configure GitLab for your system by editing /etc/gitlab/gitlab.rb file
gitlab: And running reconfigure again.
gitlab:
gitlab: For a comprehensive list of configuration options please see the Omnibus GitLab readme
gitlab: https://gitlab.com/gitlab-org/omnibus-gitlab/blob/master/README.md
gitlab:

gitlab: GitLab now ships with a newer version of PostgreSQL (9.6.1), and will be used
gitlab: as the default in the next major relase. To upgrade, RUN THE FOLLOWING COMMANDS:

sudo gitlab-ctl pg-upgrade

gitlab: For more details, please see:
gitlab: https://docs.gitlab.com/omnibus/settings/database.html#upgrade-packaged-postgresql-server
gitlab:
  æ¸…ç†       : gitlab-ce-8.11.5-ce.0.el6.x86_64                                                                                                                                                             2/2
Found /etc/gitlab/skip-auto-migrations, exiting...
  Verifying  : gitlab-ce-8.15.2-ce.0.el6.x86_64                                                                                                                                                             1/2
  Verifying  : gitlab-ce-8.11.5-ce.0.el6.x86_64                                                                                                                                                             2/2

æ›´æ–°å®Œæ¯•:
  gitlab-ce.x86_64 0:8.15.2-ce.0.el6

å®Œæ¯•ï¼
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>é‡å¯é…ç½®ï¼Œå¯ä»¥è§£å†³å¤§éƒ¨åˆ†<code>502</code>é”™è¯¯ã€‚</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">gitlab-ctl reconfigure
</span></code><div onclick="copied(this)" data-code="gitlab-ctl reconfigure
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="ä¼˜åŒ–å†…å­˜ä½¿ç”¨"><a class="anchor" aria-hidden="true" tabindex="-1" href="#ä¼˜åŒ–å†…å­˜ä½¿ç”¨"><span class="octicon octicon-link"></span></a>ä¼˜åŒ–å†…å­˜ä½¿ç”¨</h2>
    <p>ä¿®æ”¹é…ç½®æ–‡ä»¶ <code>/etc/gitlab/gitlab.rb</code></p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># å‡å°‘ postgresql æ•°æ®åº“ç¼“å­˜</span>
</span><span class="code-line">postgresql<span class="token punctuation">[</span><span class="token string">'shared_buffers'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"256MB"</span>
</span><span class="code-line"><span class="token comment"># å‡å°‘sidekiqçš„å¹¶å‘æ•°</span>
</span><span class="code-line">sidekiq<span class="token punctuation">[</span><span class="token string">'concurrency'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># workerè¿›ç¨‹æ•°</span>
</span><span class="code-line">postgresql<span class="token punctuation">[</span><span class="token string">'max_worker_processes'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">4</span>
</span><span class="code-line">
</span><span class="code-line">unicorn<span class="token punctuation">[</span><span class="token string">'worker_processes'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span>  <span class="token comment">## workerè¿›ç¨‹æ•°</span>
</span><span class="code-line">unicorn<span class="token punctuation">[</span><span class="token string">'worker_memory_limit_min'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"400 * 1 &#x3C;&#x3C; 20"</span> <span class="token comment">##workeræœ€å°å†…å­˜</span>
</span><span class="code-line">unicorn<span class="token punctuation">[</span><span class="token string">'worker_memory_limit_max'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"650 * 1 &#x3C;&#x3C; 20"</span> <span class="token comment">##workeræœ€å¤§å†…å­˜</span>
</span></code><div onclick="copied(this)" data-code="# å‡å°‘ postgresql æ•°æ®åº“ç¼“å­˜
postgresql[&#x27;shared_buffers&#x27;] = &#x22;256MB&#x22;
# å‡å°‘sidekiqçš„å¹¶å‘æ•°
sidekiq[&#x27;concurrency&#x27;] = 1

# workerè¿›ç¨‹æ•°
postgresql[&#x27;max_worker_processes&#x27;] = 4

unicorn[&#x27;worker_processes&#x27;] = 2  ## workerè¿›ç¨‹æ•°
unicorn[&#x27;worker_memory_limit_min&#x27;] = &#x22;400 * 1 << 20&#x22; ##workeræœ€å°å†…å­˜
unicorn[&#x27;worker_memory_limit_max&#x27;] = &#x22;650 * 1 << 20&#x22; ##workeræœ€å¤§å†…å­˜
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="é”™è¯¯å¤„ç†"><a class="anchor" aria-hidden="true" tabindex="-1" href="#é”™è¯¯å¤„ç†"><span class="octicon octicon-link"></span></a>é”™è¯¯å¤„ç†</h2>
    <h3 id="è§£å†³80ç«¯å£è¢«å ç”¨"><a class="anchor" aria-hidden="true" tabindex="-1" href="#è§£å†³80ç«¯å£è¢«å ç”¨"><span class="octicon octicon-link"></span></a>è§£å†³80ç«¯å£è¢«å ç”¨</h3>
    <p>nginxé…ç½®è§£å†³ <code>80</code> ç«¯å£è¢«å ç”¨</p>
    <pre class="language-nginx"><code class="language-nginx code-highlight"><span class="code-line"><span class="token directive"><span class="token keyword">upstream</span> gitlab</span> <span class="token punctuation">{</span>
</span><span class="code-line">     <span class="token directive"><span class="token keyword">server</span> 114.55.111.111:8081</span> <span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line"><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment"># ä¾¦å¬çš„80ç«¯å£</span>
</span><span class="code-line">  <span class="token directive"><span class="token keyword">listen</span>       <span class="token number">80</span></span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token directive"><span class="token keyword">server_name</span>  git.diggg.cn</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token directive"><span class="token keyword">proxy_pass</span>   http://gitlab</span><span class="token punctuation">;</span>    <span class="token comment">#åœ¨è¿™é‡Œè®¾ç½®ä¸€ä¸ªä»£ç†ï¼Œå’Œupstreamçš„åå­—ä¸€æ ·</span>
</span><span class="code-line">    <span class="token comment">#ä»¥ä¸‹æ˜¯ä¸€äº›åå‘ä»£ç†çš„é…ç½®å¯åˆ é™¤</span>
</span><span class="code-line">    <span class="token directive"><span class="token keyword">proxy_redirect</span>             <span class="token boolean">off</span></span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token comment">#åç«¯çš„WebæœåŠ¡å™¨å¯ä»¥é€šè¿‡X-Forwarded-Forè·å–ç”¨æˆ·çœŸå®IP</span>
</span><span class="code-line">    <span class="token directive"><span class="token keyword">proxy_set_header</span>           Host <span class="token variable">$host</span></span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token directive"><span class="token keyword">proxy_set_header</span>           X-Real-IP <span class="token variable">$remote_addr</span></span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token directive"><span class="token keyword">proxy_set_header</span>           X-Forwarded-For <span class="token variable">$proxy_add_x_forwarded_for</span></span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token directive"><span class="token keyword">client_max_body_size</span>       <span class="token number">10m</span></span><span class="token punctuation">;</span> <span class="token comment">#å…è®¸å®¢æˆ·ç«¯è¯·æ±‚çš„æœ€å¤§å•æ–‡ä»¶å­—èŠ‚æ•°</span>
</span><span class="code-line">    <span class="token directive"><span class="token keyword">client_body_buffer_size</span>    <span class="token number">128k</span></span><span class="token punctuation">;</span> <span class="token comment">#ç¼“å†²åŒºä»£ç†ç¼“å†²ç”¨æˆ·ç«¯è¯·æ±‚çš„æœ€å¤§å­—èŠ‚æ•°</span>
</span><span class="code-line">    <span class="token directive"><span class="token keyword">proxy_connect_timeout</span>      <span class="token number">300</span></span><span class="token punctuation">;</span> <span class="token comment">#nginxè·Ÿåç«¯æœåŠ¡å™¨è¿æ¥è¶…æ—¶æ—¶é—´(ä»£ç†è¿æ¥è¶…æ—¶)</span>
</span><span class="code-line">    <span class="token directive"><span class="token keyword">proxy_send_timeout</span>         <span class="token number">300</span></span><span class="token punctuation">;</span> <span class="token comment">#åç«¯æœåŠ¡å™¨æ•°æ®å›ä¼ æ—¶é—´(ä»£ç†å‘é€è¶…æ—¶)</span>
</span><span class="code-line">    <span class="token directive"><span class="token keyword">proxy_read_timeout</span>         <span class="token number">300</span></span><span class="token punctuation">;</span> <span class="token comment">#è¿æ¥æˆåŠŸåï¼Œåç«¯æœåŠ¡å™¨å“åº”æ—¶é—´(ä»£ç†æ¥æ”¶è¶…æ—¶)</span>
</span><span class="code-line">    <span class="token directive"><span class="token keyword">proxy_buffer_size</span>          <span class="token number">4k</span></span><span class="token punctuation">;</span> <span class="token comment">#è®¾ç½®ä»£ç†æœåŠ¡å™¨ï¼ˆnginxï¼‰ä¿å­˜ç”¨æˆ·å¤´ä¿¡æ¯çš„ç¼“å†²åŒºå¤§å°</span>
</span><span class="code-line">    <span class="token directive"><span class="token keyword">proxy_buffers</span>              <span class="token number">4</span> <span class="token number">32k</span></span><span class="token punctuation">;</span> <span class="token comment">#proxy_buffersç¼“å†²åŒºï¼Œç½‘é¡µå¹³å‡åœ¨32kä»¥ä¸‹çš„è¯ï¼Œè¿™æ ·è®¾ç½®</span>
</span><span class="code-line">    <span class="token directive"><span class="token keyword">proxy_busy_buffers_size</span>    <span class="token number">64k</span></span><span class="token punctuation">;</span> <span class="token comment">#é«˜è´Ÿè·ä¸‹ç¼“å†²å¤§å°ï¼ˆproxy_buffers*2ï¼‰</span>
</span><span class="code-line">    <span class="token directive"><span class="token keyword">proxy_temp_file_write_size</span> <span class="token number">64k</span></span><span class="token punctuation">;</span> <span class="token comment">#è®¾å®šç¼“å­˜æ–‡ä»¶å¤¹å¤§å°ï¼Œå¤§äºè¿™ä¸ªå€¼ï¼Œå°†ä»upstreamæœåŠ¡å™¨ä¼ </span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div onclick="copied(this)" data-code="upstream gitlab {
     server 114.55.111.111:8081 ;
}
server {
  # ä¾¦å¬çš„80ç«¯å£
  listen       80;
  server_name  git.diggg.cn;
  location / {
    proxy_pass   http://gitlab;    #åœ¨è¿™é‡Œè®¾ç½®ä¸€ä¸ªä»£ç†ï¼Œå’Œupstreamçš„åå­—ä¸€æ ·
    #ä»¥ä¸‹æ˜¯ä¸€äº›åå‘ä»£ç†çš„é…ç½®å¯åˆ é™¤
    proxy_redirect             off;
    #åç«¯çš„WebæœåŠ¡å™¨å¯ä»¥é€šè¿‡X-Forwarded-Forè·å–ç”¨æˆ·çœŸå®IP
    proxy_set_header           Host $host;
    proxy_set_header           X-Real-IP $remote_addr;
    proxy_set_header           X-Forwarded-For $proxy_add_x_forwarded_for;
    client_max_body_size       10m; #å…è®¸å®¢æˆ·ç«¯è¯·æ±‚çš„æœ€å¤§å•æ–‡ä»¶å­—èŠ‚æ•°
    client_body_buffer_size    128k; #ç¼“å†²åŒºä»£ç†ç¼“å†²ç”¨æˆ·ç«¯è¯·æ±‚çš„æœ€å¤§å­—èŠ‚æ•°
    proxy_connect_timeout      300; #nginxè·Ÿåç«¯æœåŠ¡å™¨è¿æ¥è¶…æ—¶æ—¶é—´(ä»£ç†è¿æ¥è¶…æ—¶)
    proxy_send_timeout         300; #åç«¯æœåŠ¡å™¨æ•°æ®å›ä¼ æ—¶é—´(ä»£ç†å‘é€è¶…æ—¶)
    proxy_read_timeout         300; #è¿æ¥æˆåŠŸåï¼Œåç«¯æœåŠ¡å™¨å“åº”æ—¶é—´(ä»£ç†æ¥æ”¶è¶…æ—¶)
    proxy_buffer_size          4k; #è®¾ç½®ä»£ç†æœåŠ¡å™¨ï¼ˆnginxï¼‰ä¿å­˜ç”¨æˆ·å¤´ä¿¡æ¯çš„ç¼“å†²åŒºå¤§å°
    proxy_buffers              4 32k; #proxy_buffersç¼“å†²åŒºï¼Œç½‘é¡µå¹³å‡åœ¨32kä»¥ä¸‹çš„è¯ï¼Œè¿™æ ·è®¾ç½®
    proxy_busy_buffers_size    64k; #é«˜è´Ÿè·ä¸‹ç¼“å†²å¤§å°ï¼ˆproxy_buffers*2ï¼‰
    proxy_temp_file_write_size 64k; #è®¾å®šç¼“å­˜æ–‡ä»¶å¤¹å¤§å°ï¼Œå¤§äºè¿™ä¸ªå€¼ï¼Œå°†ä»upstreamæœåŠ¡å™¨ä¼ 
  }
}
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>nginxé…ç½®æ£€æŸ¥å’Œç«‹å³ç”Ÿæ•ˆ</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># æ£€æŸ¥é…ç½®</span>
</span><span class="code-line">/usr/local/nginx/sbin/nginx -tc conf/nginx.conf
</span><span class="code-line"><span class="token comment"># nginx é‡æ–°åŠ è½½é…ç½®</span>
</span><span class="code-line">/usr/local/nginx/sbin/nginx -s reload
</span></code><div onclick="copied(this)" data-code="# æ£€æŸ¥é…ç½®
/usr/local/nginx/sbin/nginx -tc conf/nginx.conf
# nginx é‡æ–°åŠ è½½é…ç½®
/usr/local/nginx/sbin/nginx -s reload
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="å¤´åƒæ— æ³•æ­£å¸¸æ˜¾ç¤º"><a class="anchor" aria-hidden="true" tabindex="-1" href="#å¤´åƒæ— æ³•æ­£å¸¸æ˜¾ç¤º"><span class="octicon octicon-link"></span></a>å¤´åƒæ— æ³•æ­£å¸¸æ˜¾ç¤º</h3>
    <p>
      åŸå› ï¼šgravatarè¢«å¢™
      è§£å†³åŠæ³•ï¼š
      ç¼–è¾‘ /etc/gitlab/gitlab.rbï¼Œå°†
    </p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># gitlab_rails['gravatar_plain_url'] = 'http://gravatar.duoshuo.com/avatar/%{hash}?s=%{size}&#x26;d=identicon'</span>
</span></code><div onclick="copied(this)" data-code="# gitlab_rails[&#x27;gravatar_plain_url&#x27;] = &#x27;http://gravatar.duoshuo.com/avatar/%{hash}?s=%{size}&#x26;d=identicon&#x27;
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>ä¿®æ”¹ä¸ºï¼š</p>
    <pre><code class="code-highlight"><span class="code-line">gitlab_rails['gravatar_plain_url'] = 'http://gravatar.duoshuo.com/avatar/%{hash}?s=%{size}&#x26;d=identicon'
</span></code><div onclick="copied(this)" data-code="gitlab_rails[&#x27;gravatar_plain_url&#x27;] = &#x27;http://gravatar.duoshuo.com/avatar/%{hash}?s=%{size}&#x26;d=identicon&#x27;
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>ç„¶ååœ¨å‘½ä»¤è¡Œæ‰§è¡Œï¼š</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">sudo</span> gitlab-ctl reconfigure 
</span><span class="code-line"><span class="token function">sudo</span> gitlab-rake cache:clear <span class="token assign-left variable">RAILS_ENV</span><span class="token operator">=</span>production
</span></code><div onclick="copied(this)" data-code="sudo gitlab-ctl reconfigure 
sudo gitlab-rake cache:clear RAILS_ENV=production
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="internal-api-unreachable"><a class="anchor" aria-hidden="true" tabindex="-1" href="#internal-api-unreachable"><span class="octicon octicon-link"></span></a>internal API unreachable</h3>
    <p>è¿™ä¸ªé”™è¯¯æ˜¯ä¸€ä¸ªè‡ªå·±åˆ¶é€ çš„å‘ï¼Œæˆ‘å…‹éš†å’Œæäº¤éƒ½æ²¡æœ‰åŠæ³•æï¼Œä½†æ˜¯ç½‘ç«™èƒ½æ­£å¸¸è¿è¡Œï¼Œå°è¯•äº†éå¸¸å¤šçš„æ–¹æ³•ï¼Œæœ€ç»ˆæˆ‘çš„é—®é¢˜æ˜¯<code>22</code>ç«¯å£æ²¡æœ‰éšå°„å‡ºå»ï¼Œå¥½å°´å°¬ã€‚</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">GitLab: Failed to authorize your Git request: internal API unreachable
</span></code><div onclick="copied(this)" data-code="GitLab: Failed to authorize your Git request: internal API unreachable
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>è§£å†³åŠæ³•ï¼š<a href="https://gitlab.com/gitlab-org/gitlab-ce/issues/33702">https://gitlab.com/gitlab-org/gitlab-ce/issues/33702</a><br>é€šè¿‡é˜²ç«å¢™è§„åˆ™ 127.0.0.1</p>
    <h3 id="proxy_temp-ç›®å½•æ²¡æœ‰æƒé™"><a class="anchor" aria-hidden="true" tabindex="-1" href="#proxy_temp-ç›®å½•æ²¡æœ‰æƒé™"><span class="octicon octicon-link"></span></a>proxy_temp ç›®å½•æ²¡æœ‰æƒé™</h3>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token punctuation">[</span>crit<span class="token punctuation">]</span> <span class="token number">14788</span><span class="token comment">#0: *215 open() "/usr/local/nginx/proxy_temp/5/01/0000000015" failed (13: Permission denied) while reading upstream</span>
</span></code><div onclick="copied(this)" data-code="[crit] 14788#0: *215 open() &#x22;/usr/local/nginx/proxy_temp/5/01/0000000015&#x22; failed (13: Permission denied) while reading upstream
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>ä»¥ä¸‹æ–¹å¼è§£å†³</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">chown</span> -R root:root /usr/local/nginx/proxy_temp
</span><span class="code-line"><span class="token comment"># ç¼–è¾‘ nginx.conf</span>
</span><span class="code-line"><span class="token function">sudo</span> <span class="token function">vi</span> /usr/local/nginx/conf/nginx.conf
</span><span class="code-line"><span class="token comment"># åœ¨ç¬¬ä¸€è¡Œæ·»åŠ </span>
</span><span class="code-line">user root<span class="token punctuation">;</span>
</span></code><div onclick="copied(this)" data-code="chown -R root:root /usr/local/nginx/proxy_temp
# ç¼–è¾‘ nginx.conf
sudo vi /usr/local/nginx/conf/nginx.conf
# åœ¨ç¬¬ä¸€è¡Œæ·»åŠ 
user root;
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="webhooks-é”™è¯¯"><a class="anchor" aria-hidden="true" tabindex="-1" href="#webhooks-é”™è¯¯"><span class="octicon octicon-link"></span></a>webhooks é”™è¯¯</h3>
    <p>é”™è¯¯æ˜¾ç¤ºä¸å…è®¸å‘é€æœ¬åœ°è¯·æ±‚</p>
    <pre><code class="code-highlight"><span class="code-line">Url is blocked: Requests to the local network are not allowed
</span></code><div onclick="copied(this)" data-code="Url is blocked: Requests to the local network are not allowed
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>è§£å†³æ–¹æ³•ï¼Œåœ¨è®¾ç½®ä¸­è®¾ç½®å…è®¸æœ¬åœ°è¿æ¥å³å¯</p>
    <blockquote>
      <p><code>admin</code> => <code>Settings</code> => <code>Outbound requests</code></p>
    </blockquote>
    <h3 id="æœåŠ¡æ— æ³•å¯åŠ¨"><a class="anchor" aria-hidden="true" tabindex="-1" href="#æœåŠ¡æ— æ³•å¯åŠ¨"><span class="octicon octicon-link"></span></a>æœåŠ¡æ— æ³•å¯åŠ¨</h3>
    <pre><code class="code-highlight"><span class="code-line">[root@localhost gitlab]# gitlab-ctl status
</span><span class="code-line">fail: alertmanager: runsv not running
</span><span class="code-line">fail: gitaly: runsv not running
</span><span class="code-line">fail: gitlab-monitor: runsv not running
</span><span class="code-line">fail: gitlab-workhorse: runsv not running
</span><span class="code-line">fail: logrotate: runsv not running
</span><span class="code-line">fail: nginx: runsv not running
</span><span class="code-line">fail: node-exporter: runsv not running
</span><span class="code-line">fail: postgres-exporter: runsv not running
</span><span class="code-line">fail: postgresql: runsv not running
</span><span class="code-line">fail: prometheus: runsv not running
</span><span class="code-line">fail: redis: runsv not running
</span><span class="code-line">fail: redis-exporter: runsv not running
</span><span class="code-line">fail: sidekiq: runsv not running
</span><span class="code-line">fail: unicorn: runsv not running
</span></code><div onclick="copied(this)" data-code="[root@localhost gitlab]# gitlab-ctl status
fail: alertmanager: runsv not running
fail: gitaly: runsv not running
fail: gitlab-monitor: runsv not running
fail: gitlab-workhorse: runsv not running
fail: logrotate: runsv not running
fail: nginx: runsv not running
fail: node-exporter: runsv not running
fail: postgres-exporter: runsv not running
fail: postgresql: runsv not running
fail: prometheus: runsv not running
fail: redis: runsv not running
fail: redis-exporter: runsv not running
fail: sidekiq: runsv not running
fail: unicorn: runsv not running
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>
      <a href="https://confluence.jaytaala.com/pages/viewpage.action?pageId=9666568"></a><a href="https://gitlab.com/gitlab-org/omnibus-gitlab/issues/272">Omnibus gitlab do not restart on CentOS7</a>
      å¼€æœºè‡ªåŠ¨å¯åŠ¨æœåŠ¡
    </p>
    <pre><code class="code-highlight"><span class="code-line">[root@localhost ~]# systemctl status gitlab-runsvdir.service -l
</span><span class="code-line">â— gitlab-runsvdir.service - GitLab Runit supervision process
</span><span class="code-line">   Loaded: loaded (/usr/lib/systemd/system/gitlab-runsvdir.service; enabled; vendor preset: disabled)
</span><span class="code-line">   Active: inactive (dead)
</span></code><div onclick="copied(this)" data-code="[root@localhost ~]# systemctl status gitlab-runsvdir.service -l
â— gitlab-runsvdir.service - GitLab Runit supervision process
   Loaded: loaded (/usr/lib/systemd/system/gitlab-runsvdir.service; enabled; vendor preset: disabled)
   Active: inactive (dead)
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>å¦‚æœ <code>gitlab-runsvdir.service</code> æœåŠ¡æ²¡æœ‰å“åº”ï¼Œä½ å¯èƒ½è¦çœ‹ä¸€ä¸‹å†…å­˜æ˜¯å¦æ»¡äº†ï¼Œéœ€è¦é‡Šæ”¾å†…å­˜ï¼Œè€çš„ç‰ˆæœ¬éœ€è¦ 2G å†…å­˜ï¼Œæ–°ç‰ˆæœ¬éœ€è¦è‡³å°‘ 4G å†…å­˜ã€‚</p>
    <h3 id="å…¶å®ƒé”™è¯¯"><a class="anchor" aria-hidden="true" tabindex="-1" href="#å…¶å®ƒé”™è¯¯"><span class="octicon octicon-link"></span></a>å…¶å®ƒé”™è¯¯</h3>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">Error executing action <span class="token variable"><span class="token variable">`</span>run<span class="token variable">`</span></span> on resource <span class="token string">'bash[migrate gitlab-rails database]'</span>
</span></code><div onclick="copied(this)" data-code="Error executing action &#x60;run&#x60; on resource &#x27;bash[migrate gitlab-rails database]&#x27;
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>
      ä¸Šé¢é”™è¯¯æ˜¯æ•°æ®åº“æ²¡æœ‰å¯åŠ¨ï¼Œæˆ‘ä¸çŸ¥é“å¦‚ä½•å¯åŠ¨ï¼Œæˆ‘é‡å¯äº†æœåŠ¡å™¨ï¼Œç„¶åå¥½çƒäº†ã€‚ğŸ˜†
      <a href="https://gitlab.com/gitlab-org/gitlab-ce/issues/2052#note_1667899">https://gitlab.com/gitlab-org/gitlab-ce/issues/2052#note_1667899</a>
    </p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">NameError: uninitialized constant Devise::Async
</span></code><div onclick="copied(this)" data-code="NameError: uninitialized constant Devise::Async
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <pre><code class="code-highlight"><span class="code-line">Processing by RootController#index as HTML
</span><span class="code-line">Completed 401 Unauthorized in 17ms (ActiveRecord: 2.7ms)
</span></code><div onclick="copied(this)" data-code="Processing by RootController#index as HTML
Completed 401 Unauthorized in 17ms (ActiveRecord: 2.7ms)
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <pre><code class="code-highlight"><span class="code-line">/var/log/gitlab/nginx/gitlab_access.log &#x3C;==
</span><span class="code-line">114.55.148.71 - - [04/Jan/2017:17:20:24 +0800] "GET /favicon.ico HTTP/1.0" 502 2662 "http://git.xxxxx.cn/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.95 Safari/537.36"
</span></code><div onclick="copied(this)" data-code="/var/log/gitlab/nginx/gitlab_access.log <==
114.55.148.71 - - [04/Jan/2017:17:20:24 +0800] &#x22;GET /favicon.ico HTTP/1.0&#x22; 502 2662 &#x22;http://git.xxxxx.cn/&#x22; &#x22;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.95 Safari/537.36&#x22;
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="å‚è€ƒèµ„æ–™"><a class="anchor" aria-hidden="true" tabindex="-1" href="#å‚è€ƒèµ„æ–™"><span class="octicon octicon-link"></span></a>å‚è€ƒèµ„æ–™</h2>
    <ul>
      <li><a href="https://packages.gitlab.com/gitlab/gitlab-ce">gitlab/gitlab-ce</a></li>
      <li><a href="https://www.gitlab.cc/downloads">å®˜ç½‘ä¸‹è½½</a></li>
      <li><a href="https://doc.gitlab.cc/ce/install/requirements.html">å®˜ç½‘å®‰è£…è¯´æ˜</a></li>
      <li><a href="https://www.gitlab.cc/features/#enterprise">å¼€æºç‰ˆæœ¬å’Œä¼ä¸šç‰ˆæœ¬å¯¹æ¯”</a></li>
      <li><a href="https://gitlab.com/gitlab-org/gitlab-ce/blob/master/doc/update/8.14-to-8.15.html">å®˜æ–¹å‡çº§Gitlabæ•™ç¨‹</a></li>
      <li><a href="https://gitlab.com/gitlab-org/gitlab-recipes/tree/master/install/centos">å®˜æ–¹Centoså®‰è£…Gitlabæ•™ç¨‹</a></li>
      <li><a href="http://opjasee.com/2016/01/28/gitlab-upgrade.html">Gitlabå‡çº§è®°å½•</a></li>
      <li><a href="http://www.yuzhewo.com/2015/11/03/%E4%BF%AE%E6%94%B9gitlab%E4%BD%BF%E7%94%A8%E7%8E%B0%E6%9C%89nginx%E6%9C%8D%E5%8A%A1%E5%8F%8A502%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/">ä¿®æ”¹gitlabä½¿ç”¨ç°æœ‰nginxæœåŠ¡åŠ502é—®é¢˜è§£å†³</a></li>
      <li><a href="http://blog.csdn.net/wangxicoding/article/details/43738137">æˆ‘æ‰€é‡åˆ°çš„GitLab 502é—®é¢˜çš„è§£å†³</a></li>
    </ul>
  <style>.markdown-body pre .copied {
  display: flex;
  position: absolute;
  cursor: pointer;
  color: #a5afbb;
  top: 6px;
  right: 6px;
  border-radius: 5px;
  background: #82828226;
  padding: 6px;
  font-size: 12px;
  transition: all .3s;
}
.markdown-body pre .copied:not(.active) {
  visibility: hidden;
}
.markdown-body pre:hover .copied {
  visibility: visible;
}
.markdown-body pre:hover .copied:hover {
  background: #4caf50;
  color: #fff;
}
.markdown-body pre:hover .copied:active,
.markdown-body pre .copied.active {
  background: #2e9b33;
  color: #fff;
}
.markdown-body pre .copied .octicon-copy {
  display: block;
}
.markdown-body pre .copied .octicon-check {
  display: none;
}
.markdown-body pre .active .octicon-copy {
  display: none;
}
.markdown-body pre .active .octicon-check {
  display: block;
}</style><script>/*! @uiw/copy-to-clipboard v1.0.12 | MIT (c) 2021 Kenny Wang | https://github.com/uiwjs/copy-to-clipboard.git */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).copyTextToClipboard=t()}(this,(function(){"use strict";return function(e,t){const o=document.createElement("textarea");o.value=e,o.setAttribute("readonly",""),o.style={position:"absolute",left:"-9999px"},document.body.appendChild(o);const n=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);o.select();let c=!1;try{c=!!document.execCommand("copy")}catch(e){c=!1}document.body.removeChild(o),n&&document.getSelection&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(n)),t&&t(c)}}));

function copied(target, str) {
  target.classList.add('active');
  copyTextToClipboard(target.dataset.code, function() {
    setTimeout(() => {
      target.classList.remove('active');
    }, 2000);
  });
}</script></markdown-style><div class="footer"><a data-edit target="__blank" title="https://github.com/jaywcjlove/handbook/edit/master/CentOS/CentOS7å®‰è£…ç»´æŠ¤Gitlab.md" href="https://github.com/jaywcjlove/handbook/edit/master/CentOS/CentOS7å®‰è£…ç»´æŠ¤Gitlab.md">ç¼–è¾‘å½“å‰é¡µé¢</a><a target="__blank" href="https://jaywcjlove.gitee.io/handbook/">å›½å†…é•œåƒç«™ç‚¹ ğŸ‡¨ğŸ‡³</a><a target="__blank" href="https://github.com/jaywcjlove/handbook">Github</a><a target="__blank" href="https://gitee.com/jaywcjlove/handbook">Gitee</a><div class="copyright">Copyright Â© 2021. All rights reserved.</div></div></body>
</html>
