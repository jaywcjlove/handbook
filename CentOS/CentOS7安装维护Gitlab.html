<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CentOS7 å®‰è£…ç»´æŠ¤ GitLab handbook</title>
    <meta name="description" content="ä¸‹é¢æ˜¯å®˜ç½‘å¤åˆ¶è¿‡æ¥çš„å®˜æ–¹å®‰è£…æ–¹æ³•ï¼Œæœ€ç®€å•çš„å®‰è£…ï¼Œåœ¨æˆ‘å¤§å¤©æœï¼Œåªèƒ½æœ›å¤©å…´å¹ï¼Œä½ å¯ç¿»å¢™å®‰è£…æˆ–è€…ç•¥è¿‡è¿™é‡Œï¼Œçœ‹ä¸‹é¢çš„ã€‚">
    <meta name="keywords" content="handbook,ç¬”è®°,æœé›†,æ‘˜å½•,å®è·µ,tutorial">
    <link rel="stylesheet" type="text/css" href="../css/main.css?v=1.26.6">
    <link rel="stylesheet" type="text/css" href="../css/tocbot.css?v=1.26.6">
    <link rel="stylesheet" type="text/css" href="../css/media.css?v=1.26.6">
    <link rel="stylesheet" type="text/css" href="../css/sidebar.css?v=1.26.6">
    <link rel="stylesheet" type="text/css" href="../css/copy.css?v=1.26.6">
    <link rel="stylesheet" type="text/css" href="../css/demo-preview.css?v=1.26.6">
    <link rel="icon" href="data:image/png;base64,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" type="image/x-icon">
    <script src="../js/copy.js?v=1.26.6"></script>
    <script src="../js/dark-mode.js?v=1.26.6"></script>
    <script src="../js/markdown-style.js?v=1.26.6"></script>
  </head>
  <body id="idoctotop"><a href="#idoctotop" class="gototop">top</a>
    <header class="header">
      <article class="inner warpper"><a class="logo" href="../index.html"><img alt="handbook logo" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAAEIlJREFUeF7tnXtwVNUdx3/n7kIe8sgTNEjLTMeAUrVUKB0U0f6D1ZkKCqhBJKDSdjplHEnW6B8l0hZIQKBaq+KMQDvTOhYfnY5jpU7rg9pp0Y5aSysKA4SEAJJNIJjdkN3TOWuigcnuub97727u2fu9MzuJ7ve8vt/72XPP2XCvIBxwAA6kdUDAGzgAB9I7AEBwdsCBDA4AEJwecACA4ByAA84cwAzizDeUCogDACQgQWOYzhwAIM58Q6mAOABAAhI0hunMAQDizDeUCogDACQgQWOYzhwAIM58Q6mAOABAAhI0hunMAQDizDeUCogDACQgQWOYzhwAIM58Q6mAOABAAhI0hunMAQDizDeUCogDACQgQWOYzhwAIM58Q6mAOABAAhI0hunMgawC0tTU9DgRLRRCVDrrHqtUBxFFiSj1U0rZYVlWRzKZVP+v3bKsViJqi8fjbX19fa2NjY1JVu0BFG/atKlMSlmRSCQqhRAVRFQhpVRZqt9TP6WUJUR0wcBLCDHweyhHlm1PJBI7Hnzwwdez0V7WAGlubpbZ6LCHdbYLIVqllB8JIfZIKfcUFha+s3LlyriHbfi6qrVr16oTf6plWZcR0VQhxGUKAAWDekkpc3WSu/bJsqypdXV1e11XdF4FWQFkw4YNm6WU93nd2RzV94GCxbIsBc0/IpHIezlqN6vNrFu3blIoFLpOSjmjHwQFRC5m9qyOa1DleyKRyLe8biwrgDQ3N6vLmSqvOztM9Z0moreklLuFEO/29fW9+9BDD50cpr7YbnYACCKaLYS4RkpZbbuwoUIhxJX19fUfeNn9bAHi98srxx4KIRJSyn9KKV+TUu5qaGjY7bgyjwtu3LhxbjKZnNsPxAyPqzehuusikcgbXnYUgLh3U31i7VKwPPDAA392Xx2vhqampuuFEDcS0U1EdCmvdN6pAYifI5VSfqJgIaJXe3p6djU2Nsay0d/169fPCoVCN0opFRTfyEYbJtZpWdacurq6N73sO2YQL908ty61Q5aaWWKxmIJFbT+7Opqbm+8honuJyPPFqKuO+aRw3gBSX1/vuaXxeJx6e3tJ/Tz/d/XfPT09FI1Gv3glEgnP+5ChwhNEtFMIsbO+vv4v3IabmpqWWJb1AynlLG5Zrr6goICKioqouLj4nJ+D/9/g35U+V8ezzz5LLS0taZtLJpNzGhoazJ9BsgEIN6Surq5zgFHwHD16NAVSNg8hxG4p5c5wOLzz/vvvV7t9aY/169cvUmAQ0fXZ6FNZWRmNHz8+9brwwgtTP0eOHJmNpjypUwcIEV0biUTe8qSx/kqG5RLLD4CkM/HkyZPU2tpKR44cSf3s7Oz00u/BdXUR0fPJZHJnQ0PDK4Pf2LBhw81SSgXGDV41rk78iRMnpl4mwDDUuAGIV2eDh/UoYNra2lIvNb2rmSYLxx4i+lgIsU9K+V0imum2DQVEVVVV6jVp0iSaMGGC2yqHvbwOEMuyZtfV1Xm67Y4ZhBn74cOH6dChQ3Tw4EFqb29nls6uvKKigqqrq1MwXHzxxRQOh7PbYI5r1wGSTCZne/29FABxEfKxY8dSsAwA46IqV0UnT55MAy9XFfm8sA4QIromEon8zcthABCP3FSXXvv370+91CyT7WNgtpgyZQqVl5dnuzlf1A9AfBGD+04cP36cDhw4kIJFrV28PNR64oorrkjNGEE7dICEQqGrV61a9baXvrieQQp2nKq2pLxKyuQXia058fTqTJ308y6Wl+aquhQgChQFjALH6aFmjOnTp9Pll1/utArjy+kAeX70nGfeL6xOfVEiRfLt8MiC98/UjDrmZuCuACnY3rlREK06vwNrjm/N2KcgATLYCHXpNXAZZnc3LBQK0cyZM2nGjBm+/o7CzUlot6wOkKdLb6aWEePPr25rrLbk+3bbOF/nGJDC7Z1p/2IXgOjj2Lt3L3344YepBX66Q31jvWDBgtT3FjiIHAKSsi5WW+LoXHdUqHBH53MkaWG60ACIvdP57NmztGXLlrRitV1bU1Njr7IAqNwAIokeideW1HFtYgNSsL3za4JI/dVq2gOA2IsBgNjzaUClB2QetYwYl7ZSKazJ8aVj9nFaZQNStCM6X0rxAgDh2Dy0FoDwPNQBsrV0Hh3JAIggUdNTO/Z3nFbZgBRuizaSEBl3qTCD2IsAgNjzye4MogOEpHw4tqy0kdMqAOG45bEWgPAMdTuDABCe38OuBiC8CAAIzy/j1QCEF6EOkKdK51PriAx3MsIlFs/w4VYDEF4CAITnl/FqAMKLEIDw/DJeDUB4EWoBKZtPrWFcYvFc9bEagPDC0QHyZNl8agMgPFP9rAYgvHQACM8v49UAhBehHpBbqC2snsyQ5sAuFs/w4VYDEF4CAITnl/FqAMKLUAfIE2W30FHMIDxT/awGILx0AAjPL+PVAIQXIQDp92vfvn3U3d3Nc8+HanWPqlGjRqXtmReAqNulqpfpx0UXXUTqlenQA3IrHQ1nuMNLvizSAcjnp4mdf1EIQL5E6okyAGLUByVmEPtxeTGD/KrsVmrHDGLf9OFWAhD7CQCQQV7pbvuDSyxcYg2Flm4NghnE/geSL5SYQezH4M0MsoDaw2XpG8Ui3X4guVACEPsuewHI42UL6FhQALFvrX+V6tkcudjmPX1aPcrd7GP06NGut3kDA4jZUdvvvRffg9hvzXylbg0CQMzP+JwRABBeoACE55fxagDCi1AHyC/LFtLxcGn+L9J5tpmrBiC87AAIzy/j1QCEFyEA4fllvBqA8CIEIDy/jFcDEF6EOkAeK1tIJ7AG4ZnqZzUA4aUDQHh+Ga8GILwI9YAsohPhEuxi8Wz1rxqA8LLRAlK+iE6EAAjPVR+rAQgvHADC88t4NQDhRagD5NHyRfQpZhCeqX5WAxBeOgCE55fxagDCixCA8PwyXg1AeBHqAbmNPg2NxS4Wz1b/qgEILxsdIL8ov41OAhCeqX5WAxBeOgCE55fxagDCixCA8PwyXg1AeBECEJ5fxqsBCC9CHSBbym+njtAYLNJ5tvpXDUB42QCQfr/y4WbMaijqTh25uKsJ7zTzr9rtzasDM4Pgzoqfn8S4efW5MGMG6fcDgACQoeY5HSCby2+naBDWIAAEgACQDJfCAASAOAPkDoqGRuf/LhYAASAABDMIebHNiydMfXkibS7HDOLfPcoheoa7u9uPy4u7u28qv4M6g3CJlQ8P8Bw4NbL9PUhQvFJ+6naxAgOI/c8ds5VeXGKZ7QCv93pAaqgzlP6pwpQvD9Dh2WauGoDwsgMgPL+MVwMQXoQ6QB4pr6EuzCA8U/2sBiC8dLSAVNRQl4VLLJ6rPlYDEF44WkAwg/AM9bsagPAS0gKCGYRnqN/VAISXkA6QjRWL6ZR1Qf7/qQnPNnPVAISXHQDh+WW8GoDwIgQgPL+MVwMQXoQAhOeX8WoAwotQB8iGisV0GmsQnql+VgMQXjp6QO6k01YxFuk8W/2rBiC8bAAIzy/j1QCEFyEA4fllvBqA8CIEIDy/jFcDEF6EOkCaK+6kbqxBeKb6WQ1AeOnoAVlC3VYRFuk8W/2rBiC8bAAIzy/j1QCEFyEA4fllvBqA8CLUAdJUsYTO4BKLZ6qf1QCElw4A4fllvBqA8CIEIDy/jFcDEF6EekDuojNWIXaxeLb6Vw1AeNnoAFlfcRd9FgRA8ACdz08cu88H4Z1m/lW7fYBOYADBzat5gOTDB4oXtx4FIP798BuyZ7g3r/3AAMggr+rr6zM6hxkEM8hQJ4huDbKuYin1WAX5v0gHIAAEgGSYQwAIAHEESOVS6hGYQexf2A6zEmsQ+wF4sQZZB0DsG+4HJQCxnwIAYSzSg/JQGC++KAyKV+r00S3S11YupVgQLrHsf+6YrfQCELMd4PVeD0gtxcTI/N/F4tlmrhqA8LIDIDy/jFcDEF6EAITnl/FqAMKLUAfIzytrKY5LLJ6pflYDEF46AITnl/FqAMKLUA/IMoqLEVik82z1rxqA8LIBIDy/jFcDEF6EOkB+VrmMejGD8Ez1sxqA8NIBIDy/jFcDEF6EAITnl/FqAMKLUA/IcuoVYSzSebb6Vw1AeNnoAPlp5XI6C0B4pvpZDUB46QAQnl/GqwEIL0IAwvPLeDUA4UUIQHh+Ga8GILwI9YDcTWdFCIt0nq3+VQMQXjY6QNZU3k19AIRnqp/VAISXDgDh+WW8GoDwIgQgPL+MVwMQXoQAhOeX8WoAwotQB8jDlXdTAmsQnql+VgMQXjp6QO6hhLCwi8Wz1b9qAMLLBoDw/DJeDUB4EQIQnl/GqwEIL0IdII3j7qEk4RKL56qP1QCEFw4A4fllvBqA8CIEIDy/jFcDEF6EekDupSQJ7GLxbPWvGoDwstEBsnrcvSQBCM9UP6sBCC+dwAAya9YsnjN5qi4tLaWXX3457eiqqqpo2rRpFI1G89QB3rBaWlpIvdIdeTOD8GwJrrqgoIDi8XhwDWCOHIAwDYM8WA6sHreCZKYhS/lwbFlpI8eVDEv+oasp3BZtJCFWZ2pkzfGtnD5ACwc8ceAn41ZkrgeAeOIzKjHUAWMAWdz1Kk2OHzLUZnTbRAc6QmNoS/ntZswg03v+S987/ZaJPqPPhjqwu/hK2jVqphmAqF5OjR+g27peM9RudNskB2zBoQbklzXIgLlFMk7lfV0UpoRJfmetr8qLS+MHqbr3sKM2Ph45kfaPnEBtIyodlc+3QupRB9HQaOrJ9OjnwYP2GyD5FohX4/lm7COad+oNVnUvjZlD/yqczCoD8XkOABBzTolZn/2bbuj+u60O/2H0tfRu0RRbWogyOJALQAq2Re8TQmxGEO4dUBsZakMj06EWnuoaG4d7B6SkH8aXlTzJqYn9RWHRts6FUtBznEagTe/Aks5X6JLeof++yPbiEwbbckAkrat7lo9525a4X8QGpHh751VJonc4jUCb3gG1kbGi4yUqT3SdI1LrDbXuwOGZA/tiZ3qvoh+N6+bUyAZEVV60LfqoFOLHnIagTe9AVd+ntKLjRbL6/5LofwVfpd+OnQvLvHRAyutjy0pf51bpCBDViJ2/yeJ2Jsj6ge+NWkaMp+0lN2V+UlKQjXIwdinEyvjSsY85KJrpn1/pqyt65tQsaSWXE4lvE8mp+hJQZHJg9mfv0fuFl9Ap6wIY5d6B16VaCoTEU/ElYz9xWp3jGcRpg/lSrnBH559IkinXQaditSVj88X7XI4DgDh0u/A3p2ZTIvmmw+K5LeZg/z+3HfRvawDERTYF26MvChLzXFSRg6LiP7HasV/PQUN52QQAcRFr8Y7otKQULxHRV1xUk9WiQtKinmUlv89qI3lcOQBxGW7hM53fIYv+SETFLqvyvDjgcG8pAHHvIRX9OnpLUorFQtK1RFThQZXOq5B0jAT9VUh6ATOHcxsHSgIQ9x6eU0PqsitJw7JjlLRGdPQuHfWBx0MKdHUAJNDxY/A6BwCIziG8H2gHAEig48fgdQ4AEJ1DeD/QDgCQQMePwescACA6h/B+oB0AIIGOH4PXOQBAdA7h/UA7AEACHT8Gr3MAgOgcwvuBdgCABDp+DF7nAADROYT3A+0AAAl0/Bi8zgEAonMI7wfaAQAS6PgxeJ0DAETnEN4PtAMAJNDxY/A6BwCIziG8H2gH/g8LPRyq8vuk8QAAAABJRU5ErkJggg==">
<span class="title">handbook</span></a>
        <div class="content">
          <ul class="menu">
            <li><a href="../index.html" target="" class="">Home</a></li>
            <li><a href="../awesome.html" target="" class="">Awesome</a></li>
            <li><a href="https://jaywcjlove.gitee.io/handbook/" target="__blank" class="">ğŸ‡¨ğŸ‡³</a></li>
          </ul><a href="https://github.com/jaywcjlove/handbook" target="_blank" rel="noopener noreferrer" title="Github" name="Github" class="github"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
            </svg></a>
          <dark-mode permanent=""></dark-mode>
        </div>
      </article>
    </header>
    <div class="warpper-content warpper sidebar">
      <div class="sidebar-border">
        <aside class="sidebar" role="navigation">
          <div>
            <label>JavaScript</label>
            <a href="../JavaScript/RegExp.html" class="">ä¸€äº›æ­£åˆ™è¡¨è¾¾å¼éšè®°</a>
            <a href="../JavaScript/SDK.html" class="">å¼€æº JS æ’ä»¶å’Œåº“</a>
            <a href="../JavaScript/nodejs.html" class="">NodeJS åŒ…æœé›†</a>
            <a href="../JavaScript/æ€ç»´å¯¼å›¾æ¥å­¦ä¹  Javascript åŸºç¡€çŸ¥è¯†.html" class="">åŸºç¡€çŸ¥è¯†(æ€ç»´å¯¼å›¾)</a>
            <label>Redis</label>
            <a href="../Redis/index.html" class="">å¿«é€Ÿå…¥é—¨ Redis</a>
            <label>Android</label>
            <a href="../Android/react-native.html" class="">React Native Android ç¯å¢ƒæ­å»º</a>
            <label>CentOS</label>
            <a href="CentOS.html" class="">CentOS å¸¸ç”¨å‘½ä»¤</a>
            <a href="CentOS7ç½‘ç»œé…ç½®.html" class="">CentOS7 ç½‘ç»œé…ç½®</a>
            <a href="å¸¸ç”¨åŸºç¡€å‘½ä»¤.html" class="">å¸¸ç”¨åŸºç¡€å‘½ä»¤</a>
            <a href="CentOS7å®‰è£…KVMè™šæ‹Ÿæœºè¯¦è§£.html" class="">å®‰è£… KVM è™šæ‹Ÿæœºè¯¦è§£</a>
            <a href="CentOS7æ›´æ¢yumè½¯ä»¶é•œåƒæº.html" class="">æ›´æ¢ yum è½¯ä»¶é•œåƒæº</a>
            <a href="CentOS7å®‰è£…ç»´æŠ¤Gitlab.html" class="active">å®‰è£…ç»´æŠ¤ GitLab</a>
            <a href="CentOS7å®‰è£…é…ç½®vsftpæ­å»ºFTP.html" class="">å®‰è£…æ­å»º FTP</a>
            <a href="Centos7å®‰è£…ç¼–è¯‘Node.html" class="">Centos7å®‰è£…ç¼–è¯‘Node</a>
            <a href="Elasticsearchå®‰è£…ç»´æŠ¤.html" class="">Elasticsearchå®‰è£…ç»´æŠ¤</a>
            <a href="Frpå†…ç½‘ç©¿é€æ­å»º.html" class="">Frpå†…ç½‘ç©¿é€æ­å»º</a>
            <a href="Linuxæ·»åŠ ã€åˆ é™¤ç”¨æˆ·å’Œç”¨æˆ·ç»„.html" class="">Linuxæ·»åŠ ã€åˆ é™¤ç”¨æˆ·å’Œç”¨æˆ·ç»„</a>
            <a href="Macä½¿ç”¨NFSè¿æ¥CentOSä¸Šçš„å…±äº«æ–‡ä»¶å¤¹.html" class="">Macä½¿ç”¨NFSè¿æ¥CentOSä¸Šçš„å…±äº«æ–‡ä»¶å¤¹</a>
            <a href="Macä¸‹åˆ¶ä½œCentOS7å¯åŠ¨ç›˜.html" class="">Macä¸‹åˆ¶ä½œCentOS7å¯åŠ¨ç›˜</a>
            <a href="Python2å‡çº§åˆ°Python3.html" class="">Python2 å‡çº§åˆ° Python3</a>
            <a href="Rocket.Chat.html" class="">Rocket.Chat</a>
            <a href="Rubyå®‰è£….html" class="">Ruby å®‰è£…</a>
            <a href="samba.html" class="">Samba å®‰è£…</a>
            <a href="åœ¨5åˆ†é’Ÿå†…æ­å»ºä¼ä¸šå†…éƒ¨ç§æœ‰npmä»“åº“.html" class="">æ­å»ºç§æœ‰ npm ä»“åº“</a>
            <a href="Java.html" class="">å®‰è£… Java</a>
            <a href="éƒ¨ç½²Seafileæ­å»ºè‡ªå·±çš„ç½‘ç›˜.html" class="">éƒ¨ç½² Seafile æ­å»ºè‡ªå·±çš„ç½‘ç›˜</a>
            <a href="æ­å»ºShadowsocksæœåŠ¡å™¨.html" class="">æ­å»º Shadowsocks æœåŠ¡å™¨</a>
            <a href="éƒ¨ç½²YApiå¹³å°.html" class="">éƒ¨ç½² YApi å¹³å°</a>
            <a href="openstack.html" class="">æ­å»º OpenStack</a>
            <a href="pip.html" class="">å®‰è£… pip å·¥å…·</a>
            <a href="ä¿®æ”¹sshç«¯å£å·çš„æ–¹æ³•.html" class="">ä¿®æ”¹ ssh ç«¯å£å·çš„æ–¹æ³•</a>
            <a href="å°è¯•åœ¨CentOS7.2ä¸Šç¼–è¯‘å®‰è£…Swift.html" class="">åœ¨CentOS ä¸Šç¼–è¯‘å®‰è£… Swift</a>
            <a href="ä½¿ç”¨å…è´¹SSLè¯ä¹¦è®©ç½‘ç«™æ”¯æŒHTTPSè®¿é—®.html" class="">ä½¿ç”¨å…è´¹ SSL è¯ä¹¦æ”¯æŒ HTTPS è®¿é—®</a>
            <a href="svn.html" class="">å®‰è£…ä½¿ç”¨ svn</a>
            <a href="ç®¡ç†è¿œç¨‹ä¼šè¯screenå·¥å…·.html" class="">ç®¡ç†è¿œç¨‹ä¼šè¯screenå·¥å…·</a>
            <label>macOS</label>
            <a href="../macOS/åˆ›å»º macOS æ“ä½œç³»ç»Ÿçš„ App å›¾æ ‡æ–‡ä»¶ icons.html" class="">åˆ›å»º macOS æ“ä½œç³»ç»Ÿçš„ App å›¾æ ‡æ–‡ä»¶ icons</a>
            <label>å…¶å®ƒ</label>
            <a href="../other/weixin-public-account.html" class="">å…¬ä¼—è´¦å·æ¨è</a>
            <a href="../other/google.html" class="">è°·æ­Œ(Google)é•œåƒ</a>
            <a href="../other/ç¦»çº¿é¢„è§ˆå„ç§å‰ç«¯æ–‡æ¡£ç½‘ç«™.html" class="">ç¦»çº¿é¢„è§ˆå‰ç«¯æ–‡æ¡£</a>
            <a href="../other/é€šè¿‡ä»£ç†å·¥å…·æé«˜Github Cloneé€Ÿåº¦.html" class="">æé«˜ Github Clone é€Ÿåº¦</a>
            <a href="../other/github-oraganizations.html" class="">å›½å†…äº’è”ç½‘å…¬å¸çš„å¼€æºé¡¹ç›®æ±‡æ€»</a>
            <a href="../other/HTTP-status-codes.html" class="">å¸¸è§HTTP/FTPé”™è¯¯ä»£ç å¤§å…¨</a>
            <a href="../other/Lua5.3.html" class="">Lua 5.3 æ–‡æ¡£</a>
            <a href="../Shortcuts/Sketch.html" class="">Sketch è®¾è®¡è½¯ä»¶å¿«æ·é”®</a>
            <a href="../Shortcuts/bash.html" class="">å‘½ä»¤è¡Œå·¥å…·bashå¿«æ·é”®</a>
          </div>
        </aside>
      </div>
      <markdown-style>
        <h1 id="centos7-å®‰è£…ç»´æŠ¤-gitlab"><a aria-hidden="true" tabindex="-1" href="#centos7-å®‰è£…ç»´æŠ¤-gitlab" class="anchor"><span class="icon icon-link"></span></a>CentOS7 å®‰è£…ç»´æŠ¤ GitLab</h1>
        <h2 id="å®˜æ–¹å®‰è£…"><a aria-hidden="true" tabindex="-1" href="#å®˜æ–¹å®‰è£…" class="anchor"><span class="icon icon-link"></span></a>å®˜æ–¹å®‰è£…</h2>
        <p>ä¸‹é¢æ˜¯å®˜ç½‘å¤åˆ¶è¿‡æ¥çš„å®˜æ–¹å®‰è£…æ–¹æ³•ï¼Œæœ€ç®€å•çš„å®‰è£…ï¼Œåœ¨æˆ‘å¤§å¤©æœï¼Œåªèƒ½æœ›å¤©å…´å¹ï¼Œä½ å¯ç¿»å¢™å®‰è£…æˆ–è€…ç•¥è¿‡è¿™é‡Œï¼Œçœ‹ä¸‹é¢çš„ã€‚</p>
        <ol>
          <li>å®‰è£…å¹¶é…ç½®å¿…è¦çš„ä¾èµ–é¡¹</li>
        </ol>
        <p>If you install Postfix to send email please select 'Internet Site' during setup. Instead of using Postfix you can also use Sendmail or configure a custom SMTP server and configure it as an SMTP server.</p>
        <p>On Centos 6 and 7, the commands below will also open HTTP and SSH access in the system firewall.</p>
        <pre><code class="code-highlight"><span class="code-line line-number" line="1">sudo yum install curl openssh-server openssh-clients postfix cronie
</span><span class="code-line line-number" line="2">sudo service postfix start
</span><span class="code-line line-number" line="3">sudo chkconfig postfix on
</span><span class="code-line line-number" line="4">sudo lokkit -s http -s ssh
</span></code><input type="hidden" value="sudo yum install curl openssh-server openssh-clients postfix cronie
sudo service postfix start
sudo chkconfig postfix on
sudo lokkit -s http -s ssh
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ol start="2">
          <li>æ·»åŠ gitlabæœåŠ¡å™¨åŒ…å’Œå®‰è£…åŒ…</li>
        </ol>
        <pre><code class="code-highlight"><span class="code-line line-number" line="1">curl -sS https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.rpm.sh | sudo bash
</span><span class="code-line line-number" line="2">sudo yum install gitlab-ce
</span></code><input type="hidden" value="curl -sS https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.rpm.sh | sudo bash
sudo yum install gitlab-ce
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>
          If you are not comfortable installing the repository through a piped script, you can find the entire script here and select and download the package manually and install using
          <a href="https://packages.gitlab.com/gitlab/gitlab-ce">gitlab/gitlab-ce</a>
        </p>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1"><span class="token function">curl</span> <span class="token parameter variable">-LJO</span> https://packages.gitlab.com/gitlab/gitlab-ce/packages/el/6/gitlab-ce-XXX.rpm/download
</span><span class="code-line line-number" line="2"><span class="token function">curl</span> <span class="token parameter variable">-LJO</span> https://packages.gitlab.com/gitlab/gitlab-ce/packages/el/7/gitlab-ce-10.2.2-ce.0.el7.x86_64.rpm/download
</span><span class="code-line line-number" line="3"><span class="token function">rpm</span> <span class="token parameter variable">-i</span> gitlab-ce-XXX.rpm
</span></code><input type="hidden" value="curl -LJO https://packages.gitlab.com/gitlab/gitlab-ce/packages/el/6/gitlab-ce-XXX.rpm/download
curl -LJO https://packages.gitlab.com/gitlab/gitlab-ce/packages/el/7/gitlab-ce-10.2.2-ce.0.el7.x86_64.rpm/download
rpm -i gitlab-ce-XXX.rpm
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ol start="3">
          <li>é…ç½®å¹¶å¯åŠ¨GitLab</li>
        </ol>
        <pre><code class="code-highlight"><span class="code-line line-number" line="1">sudo gitlab-ctl reconfigure
</span></code><input type="hidden" value="sudo gitlab-ctl reconfigure
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ol start="4">
          <li>æµè§ˆå™¨æ‰“å¼€å¹¶ç™»å½•</li>
        </ol>
        <p>On your first visit, you'll be redirected to a password reset screen to provide the password for the initial administrator account. Enter your desired password and you'll be redirected back to the login screen.</p>
        <p>The default account's username is root. Provide the password you created earlier and login. After login you can change the username if you wish.</p>
        <h2 id="ç¬¬ä¸‰æ–¹é•œåƒå®‰è£…"><a aria-hidden="true" tabindex="-1" href="#ç¬¬ä¸‰æ–¹é•œåƒå®‰è£…" class="anchor"><span class="icon icon-link"></span></a>ç¬¬ä¸‰æ–¹é•œåƒå®‰è£…</h2>
        <ul>
          <li><a href="https://mirror.tuna.tsinghua.edu.cn/help/gitlab-ce/">Gitlab Community Edition é•œåƒä½¿ç”¨å¸®åŠ©</a></li>
          <li><a href="https://github.com/hehongwei44/my-blog/issues/19">åœ¨é˜¿é‡Œäº‘ä¸Šé€šè¿‡Omnibusä¸€é”®å®‰è£…åŒ…å®‰è£…Gitlab</a></li>
        </ul>
        <h3 id="ç¼–è¾‘æº"><a aria-hidden="true" tabindex="-1" href="#ç¼–è¾‘æº" class="anchor"><span class="icon icon-link"></span></a>ç¼–è¾‘æº</h3>
        <p>æ–°å»º /etc/yum.repos.d/gitlab-ce.repoï¼Œå†…å®¹ä¸º</p>
        <p><a href="https://mirror.tuna.tsinghua.edu.cn/help/gitlab-ce/">ä½¿ç”¨æ¸…åå¤§å­¦ TUNA é•œåƒæº</a> æ‰“å¼€ç½‘å€å°†å†…å®¹å¤åˆ¶åˆ°<code>gitlab-ce.repo</code>æ–‡ä»¶ä¸­ï¼Œç¼–è¾‘è·¯å¾„<code>vim /etc/yum.repos.d/gitlab-ce.repo</code></p>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1"><span class="token punctuation">[</span>gitlab-ce<span class="token punctuation">]</span>
</span><span class="code-line line-number" line="2"><span class="token assign-left variable">name</span><span class="token operator">=</span>gitlab-ce
</span><span class="code-line line-number" line="3"><span class="token assign-left variable">baseurl</span><span class="token operator">=</span>http://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el6
</span><span class="code-line line-number" line="4"><span class="token assign-left variable">repo_gpgcheck</span><span class="token operator">=</span><span class="token number">0</span>
</span><span class="code-line line-number" line="5"><span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">0</span>
</span><span class="code-line line-number" line="6"><span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span>
</span><span class="code-line line-number" line="7"><span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>https://packages.gitlab.com/gpg.key
</span></code><input type="hidden" value="[gitlab-ce]
name=gitlab-ce
baseurl=http://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el6
repo_gpgcheck=0
gpgcheck=0
enabled=1
gpgkey=https://packages.gitlab.com/gpg.key
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h3 id="æ›´æ–°æœ¬åœ°yumç¼“å­˜"><a aria-hidden="true" tabindex="-1" href="#æ›´æ–°æœ¬åœ°yumç¼“å­˜" class="anchor"><span class="icon icon-link"></span></a>æ›´æ–°æœ¬åœ°YUMç¼“å­˜</h3>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1"><span class="token function">sudo</span> yum makecache
</span></code><input type="hidden" value="sudo yum makecache
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h3 id="å®‰è£…ç¤¾åŒºç‰ˆ"><a aria-hidden="true" tabindex="-1" href="#å®‰è£…ç¤¾åŒºç‰ˆ" class="anchor"><span class="icon icon-link"></span></a>å®‰è£…ç¤¾åŒºç‰ˆ</h3>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1"><span class="token function">sudo</span> yum <span class="token function">install</span> gitlab-ce <span class="token comment">#(è‡ªåŠ¨å®‰è£…æœ€æ–°ç‰ˆ)</span>
</span><span class="code-line line-number" line="2"><span class="token function">sudo</span> yum <span class="token function">install</span> gitlab-ce-8.15.2-ce.0.el6 <span class="token comment">#(å®‰è£…æŒ‡å®šç‰ˆæœ¬)</span>
</span></code><input type="hidden" value="sudo yum install gitlab-ce #(è‡ªåŠ¨å®‰è£…æœ€æ–°ç‰ˆ)
sudo yum install gitlab-ce-8.15.2-ce.0.el6 #(å®‰è£…æŒ‡å®šç‰ˆæœ¬)
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h3 id="æ›´æ”¹é…ç½®"><a aria-hidden="true" tabindex="-1" href="#æ›´æ”¹é…ç½®" class="anchor"><span class="icon icon-link"></span></a>æ›´æ”¹é…ç½®</h3>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1"><span class="token function">vim</span> /etc/gitlab/gitlab.rb
</span><span class="code-line line-number" line="2"><span class="token comment"># æ‰¾åˆ° external_url 'http://000.00.00.00:8081'</span>
</span><span class="code-line line-number" line="3"><span class="token comment"># ä¿®æ”¹æˆä½ çš„åœ°å€</span>
</span></code><input type="hidden" value="vim /etc/gitlab/gitlab.rb
# æ‰¾åˆ° external_url &#x27;http://000.00.00.00:8081&#x27;
# ä¿®æ”¹æˆä½ çš„åœ°å€
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h3 id="é…ç½®å¹¶å¯åŠ¨gitlab"><a aria-hidden="true" tabindex="-1" href="#é…ç½®å¹¶å¯åŠ¨gitlab" class="anchor"><span class="icon icon-link"></span></a>é…ç½®å¹¶å¯åŠ¨GitLab</h3>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1"><span class="token comment"># æ‰“å¼€`/etc/gitlab/gitlab.rb`,</span>
</span><span class="code-line line-number" line="2"><span class="token comment"># å°†`external_url = 'http://git.example.com'`ä¿®æ”¹ä¸ºè‡ªå·±çš„IPåœ°å€ï¼š`http://xxx.xx.xxx.xx`ï¼Œ</span>
</span><span class="code-line line-number" line="3"><span class="token comment"># ç„¶åæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå¯¹GitLabè¿›è¡Œç¼–è¯‘ã€‚</span>
</span><span class="code-line line-number" line="4"><span class="token function">sudo</span> gitlab-ctl reconfigure
</span><span class="code-line line-number" line="5"><span class="token comment"># æ¸…é™¤ç¼“å­˜</span>
</span><span class="code-line line-number" line="6"><span class="token function">sudo</span> gitlab-rake cache:clear <span class="token assign-left variable">RAILS_ENV</span><span class="token operator">=</span>production
</span></code><input type="hidden" value="# æ‰“å¼€&#x60;/etc/gitlab/gitlab.rb&#x60;,
# å°†&#x60;external_url = &#x27;http://git.example.com&#x27;&#x60;ä¿®æ”¹ä¸ºè‡ªå·±çš„IPåœ°å€ï¼š&#x60;http://xxx.xx.xxx.xx&#x60;ï¼Œ
# ç„¶åæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå¯¹GitLabè¿›è¡Œç¼–è¯‘ã€‚
sudo gitlab-ctl reconfigure
# æ¸…é™¤ç¼“å­˜
sudo gitlab-rake cache:clear RAILS_ENV=production
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h3 id="ç™»å½•gitlab"><a aria-hidden="true" tabindex="-1" href="#ç™»å½•gitlab" class="anchor"><span class="icon icon-link"></span></a>ç™»å½•GitLab</h3>
        <pre><code class="code-highlight"><span class="code-line line-number" line="1">Username: root 
</span><span class="code-line line-number" line="2">Password: 5iveL!fe
</span></code><input type="hidden" value="Username: root 
Password: 5iveL!fe
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h3 id="å¯ç”¨-gitlab-registry-åŠŸèƒ½"><a aria-hidden="true" tabindex="-1" href="#å¯ç”¨-gitlab-registry-åŠŸèƒ½" class="anchor"><span class="icon icon-link"></span></a>å¯ç”¨ gitlab registry åŠŸèƒ½</h3>
        <p>å¼€å¯ <a href="https://docs.gitlab.com/omnibus/architecture/registry/README.html#configuring-registry">Configuring Registry</a> åŠŸèƒ½ï¼Œåªéœ€ä¿®æ”¹é…ç½® <a href="https://gitlab.com/gitlab-org/omnibus-gitlab/blob/10-3-stable/files/gitlab-cookbooks/gitlab/libraries/registry.rb#L39-55"><code>/etc/gitlab/gitlab.rb</code></a> æ–‡ä»¶ï¼Œå°† <code>registry_external_url</code> çš„å€¼ä¿®æ”¹ä¸º <a href="http://192.168.188.211:5008">http://192.168.188.211:5008</a></p>
        <pre class="language-ruby"><code class="language-ruby code-highlight"><span class="code-line line-number" line="1">registry_external_url <span class="token string-literal"><span class="token string">'http://192.168.188.211:5008'</span></span>
</span></code><input type="hidden" value="registry_external_url &#x27;http://192.168.188.211:5008&#x27;
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p><code>registry_external_url</code> è¿™ä¸ªåœ°å€æ˜¯æˆ‘ä»¬ä½¿ç”¨ <code>docker</code> å‘½ä»¤è¿›è¡Œ <code>pull</code> æˆ–è€… <code>push</code> é•œåƒçš„ä»“åº“åœ°å€ã€‚</p>
        <p>é‡å¯ <code>Gitlab</code> åï¼Œå¯ä»¥åœ¨ <code>Gitlab</code> å·¦ä¾§é¢æ¿çœ‹åˆ° <code>Container Registry</code> çš„èœå•ã€‚</p>
        <p>æŒ‰ç…§ gitlab ç»™å‡ºçš„æç¤ºï¼Œæˆ‘ä»¬å…ˆç™»å½•ä¸Š gitlab çš„ registryï¼š</p>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1"><span class="token function">docker</span> login <span class="token number">192.168</span>.188.211:5008
</span><span class="code-line line-number" line="2">Username: ****
</span><span class="code-line line-number" line="3">Password: **
</span></code><input type="hidden" value="docker login 192.168.188.211:5008
Username: ****
Password: **
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>æ³¨æ„ï¼šâš ï¸ å¯†ç æ˜¯éœ€è¦é€šè¿‡ <a href="http://gitlab.com/-/profile/personal_access_tokens">Gitlab > User Settings > Access Tokens > Add a personal access token</a> ç”Ÿæˆä¸€ä¸ª <code>personal_access_tokens</code> è€Œä¸æ˜¯çœŸæ­£çš„å¯†ç </p>
        <pre><code class="code-highlight"><span class="code-line line-number" line="1">docker build -t 192.168.188.211:5008/docker/docker-static-service-template .
</span><span class="code-line line-number" line="2"># æäº¤é•œåƒ
</span><span class="code-line line-number" line="3">docker push 192.168.188.211:5008/docker/docker-static-service-template
</span></code><input type="hidden" value="docker build -t 192.168.188.211:5008/docker/docker-static-service-template .
# æäº¤é•œåƒ
docker push 192.168.188.211:5008/docker/docker-static-service-template
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h2 id="dockerå®‰è£…"><a aria-hidden="true" tabindex="-1" href="#dockerå®‰è£…" class="anchor"><span class="icon icon-link"></span></a>Dockerå®‰è£…</h2>
        <p><a href="https://github.com/jaywcjlove/docker-tutorial/blob/master/gitlab.md">Docker å®‰è£… Gitlab æ•™ç¨‹</a></p>
        <h2 id="å¸è½½"><a aria-hidden="true" tabindex="-1" href="#å¸è½½" class="anchor"><span class="icon icon-link"></span></a>å¸è½½</h2>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1"><span class="token function">sudo</span> gitlab-ctl uninstall
</span></code><input type="hidden" value="sudo gitlab-ctl uninstall
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h2 id="è¿ç»´"><a aria-hidden="true" tabindex="-1" href="#è¿ç»´" class="anchor"><span class="icon icon-link"></span></a>è¿ç»´</h2>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1"><span class="token comment"># ä¿®æ”¹é»˜è®¤çš„é…ç½®æ–‡ä»¶</span>
</span><span class="code-line line-number" line="2"><span class="token function">sudo</span> <span class="token function">vim</span> /etc/gitlab/gitlab.rb
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number" line="4"><span class="token comment"># æŸ¥çœ‹ç‰ˆæœ¬</span>
</span><span class="code-line line-number" line="5"><span class="token function">sudo</span> <span class="token function">cat</span> /opt/gitlab/embedded/service/gitlab-rails/VERSION
</span><span class="code-line line-number" line="6"><span class="token comment"># echo "vm.overcommit_memory=1" >> /etc/sysctl.conf</span>
</span><span class="code-line line-number" line="7"><span class="token comment"># sysctl -p</span>
</span><span class="code-line line-number" line="8"><span class="token comment"># echo never > /sys/kernel/mm/transparent_hugepage/enabled</span>
</span><span class="code-line line-number" line="9">
</span><span class="code-line line-number" line="10"><span class="token comment"># æ£€æŸ¥gitlab</span>
</span><span class="code-line line-number" line="11">gitlab-rake gitlab:check <span class="token assign-left variable">SANITIZE</span><span class="token operator">=</span>true <span class="token parameter variable">--trace</span>
</span><span class="code-line line-number" line="12">gitlab-rake gitlab:check
</span><span class="code-line line-number" line="13">gitlab-rake gitlab:check <span class="token assign-left variable">SANITIZE</span><span class="token operator">=</span>true
</span><span class="code-line line-number" line="14"><span class="token comment"># æŸ¥çœ‹æ—¥å¿—</span>
</span><span class="code-line line-number" line="15">gitlab-ctl <span class="token function">tail</span>
</span><span class="code-line line-number" line="16"><span class="token comment"># æ•°æ®åº“å…³ç³»å‡çº§</span>
</span><span class="code-line line-number" line="17">gitlab-rake db:migrate
</span><span class="code-line line-number" line="18"><span class="token comment"># æ¸…ç†ç¼“å­˜</span>
</span><span class="code-line line-number" line="19">gitlab-rake cache:clear
</span><span class="code-line line-number" line="20">
</span><span class="code-line line-number" line="21"><span class="token comment"># æ›´æ–°gitlabåŒ…</span>
</span><span class="code-line line-number" line="22">yum update gitlab-ce
</span><span class="code-line line-number" line="23">
</span><span class="code-line line-number" line="24"><span class="token comment"># å‡çº§gitlab</span>
</span><span class="code-line line-number" line="25">yum <span class="token function">install</span> gitlab-ce
</span><span class="code-line line-number" line="26">
</span><span class="code-line line-number" line="27"><span class="token comment"># å‡çº§æ•°æ®å‘½ä»¤</span>
</span><span class="code-line line-number" line="28">gitlab-ctl pg-upgrade
</span></code><input type="hidden" value="# ä¿®æ”¹é»˜è®¤çš„é…ç½®æ–‡ä»¶
sudo vim /etc/gitlab/gitlab.rb

# æŸ¥çœ‹ç‰ˆæœ¬
sudo cat /opt/gitlab/embedded/service/gitlab-rails/VERSION
# echo &#x22;vm.overcommit_memory=1&#x22; >> /etc/sysctl.conf
# sysctl -p
# echo never > /sys/kernel/mm/transparent_hugepage/enabled

# æ£€æŸ¥gitlab
gitlab-rake gitlab:check SANITIZE=true --trace
gitlab-rake gitlab:check
gitlab-rake gitlab:check SANITIZE=true
# æŸ¥çœ‹æ—¥å¿—
gitlab-ctl tail
# æ•°æ®åº“å…³ç³»å‡çº§
gitlab-rake db:migrate
# æ¸…ç†ç¼“å­˜
gitlab-rake cache:clear

# æ›´æ–°gitlabåŒ…
yum update gitlab-ce

# å‡çº§gitlab
yum install gitlab-ce

# å‡çº§æ•°æ®å‘½ä»¤
gitlab-ctl pg-upgrade
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h3 id="æœåŠ¡ç®¡ç†"><a aria-hidden="true" tabindex="-1" href="#æœåŠ¡ç®¡ç†" class="anchor"><span class="icon icon-link"></span></a>æœåŠ¡ç®¡ç†</h3>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1">gitlab-ctl start <span class="token comment"># å¯åŠ¨æ‰€æœ‰ gitlab ç»„ä»¶ï¼š</span>
</span><span class="code-line line-number" line="2">gitlab-ctl stop  <span class="token comment"># åœæ­¢æ‰€æœ‰ gitlab ç»„ä»¶ï¼š</span>
</span><span class="code-line line-number" line="3">gitlab-ctl stop postgresql <span class="token comment"># åœæ­¢æ‰€æœ‰ gitlab postgresql ç»„ä»¶ï¼š</span>
</span><span class="code-line line-number" line="4"><span class="token comment"># åœæ­¢ç›¸å…³æ•°æ®è¿æ¥æœåŠ¡</span>
</span><span class="code-line line-number" line="5">gitlab-ctl stop unicorn
</span><span class="code-line line-number" line="6">gitlab-ctl stop sidekiq
</span><span class="code-line line-number" line="7">gitlab-ctl restart <span class="token comment"># é‡å¯æ‰€æœ‰ gitlab ç»„ä»¶ï¼š</span>
</span><span class="code-line line-number" line="8">gitlab-ctl restart gitlab-workhorse <span class="token comment"># é‡å¯æ‰€æœ‰ gitlab gitlab-workhorse ç»„ä»¶ï¼š</span>
</span><span class="code-line line-number" line="9">gitlab-ctl status <span class="token comment"># æŸ¥çœ‹æœåŠ¡çŠ¶æ€</span>
</span><span class="code-line line-number" line="10">gitlab-ctl reconfigure <span class="token comment"># ç”Ÿæˆé…ç½®å¯åŠ¨æœåŠ¡</span>
</span></code><input type="hidden" value="gitlab-ctl start # å¯åŠ¨æ‰€æœ‰ gitlab ç»„ä»¶ï¼š
gitlab-ctl stop  # åœæ­¢æ‰€æœ‰ gitlab ç»„ä»¶ï¼š
gitlab-ctl stop postgresql # åœæ­¢æ‰€æœ‰ gitlab postgresql ç»„ä»¶ï¼š
# åœæ­¢ç›¸å…³æ•°æ®è¿æ¥æœåŠ¡
gitlab-ctl stop unicorn
gitlab-ctl stop sidekiq
gitlab-ctl restart # é‡å¯æ‰€æœ‰ gitlab ç»„ä»¶ï¼š
gitlab-ctl restart gitlab-workhorse # é‡å¯æ‰€æœ‰ gitlab gitlab-workhorse ç»„ä»¶ï¼š
gitlab-ctl status # æŸ¥çœ‹æœåŠ¡çŠ¶æ€
gitlab-ctl reconfigure # ç”Ÿæˆé…ç½®å¯åŠ¨æœåŠ¡
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h3 id="æ—¥å¿—æŸ¥çœ‹"><a aria-hidden="true" tabindex="-1" href="#æ—¥å¿—æŸ¥çœ‹" class="anchor"><span class="icon icon-link"></span></a>æ—¥å¿—æŸ¥çœ‹</h3>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1"><span class="token function">sudo</span> gitlab-ctl <span class="token function">tail</span> <span class="token comment"># æŸ¥çœ‹æ—¥å¿—</span>
</span><span class="code-line line-number" line="2"><span class="token function">sudo</span> gitlab-ctl <span class="token function">tail</span> redis <span class="token comment"># æ£€æŸ¥redisçš„æ—¥å¿—</span>
</span><span class="code-line line-number" line="3"><span class="token function">sudo</span> gitlab-ctl <span class="token function">tail</span> postgresql       <span class="token comment"># æ£€æŸ¥postgresqlçš„æ—¥å¿—</span>
</span><span class="code-line line-number" line="4"><span class="token function">sudo</span> gitlab-ctl <span class="token function">tail</span> gitlab-workhorse <span class="token comment"># æ£€æŸ¥gitlab-workhorseçš„æ—¥å¿—</span>
</span><span class="code-line line-number" line="5"><span class="token function">sudo</span> gitlab-ctl <span class="token function">tail</span> <span class="token function">logrotate</span> <span class="token comment"># æ£€æŸ¥logrotateçš„æ—¥å¿—</span>
</span><span class="code-line line-number" line="6"><span class="token function">sudo</span> gitlab-ctl <span class="token function">tail</span> nginx    <span class="token comment"># æ£€æŸ¥nginxçš„æ—¥å¿—</span>
</span><span class="code-line line-number" line="7"><span class="token function">sudo</span> gitlab-ctl <span class="token function">tail</span> sidekiq  <span class="token comment"># æ£€æŸ¥sidekiqçš„æ—¥å¿—</span>
</span><span class="code-line line-number" line="8"><span class="token function">sudo</span> gitlab-ctl <span class="token function">tail</span> unicorn  <span class="token comment"># æ£€æŸ¥unicornçš„æ—¥å¿—</span>
</span></code><input type="hidden" value="sudo gitlab-ctl tail # æŸ¥çœ‹æ—¥å¿—
sudo gitlab-ctl tail redis # æ£€æŸ¥redisçš„æ—¥å¿—
sudo gitlab-ctl tail postgresql       # æ£€æŸ¥postgresqlçš„æ—¥å¿—
sudo gitlab-ctl tail gitlab-workhorse # æ£€æŸ¥gitlab-workhorseçš„æ—¥å¿—
sudo gitlab-ctl tail logrotate # æ£€æŸ¥logrotateçš„æ—¥å¿—
sudo gitlab-ctl tail nginx    # æ£€æŸ¥nginxçš„æ—¥å¿—
sudo gitlab-ctl tail sidekiq  # æ£€æŸ¥sidekiqçš„æ—¥å¿—
sudo gitlab-ctl tail unicorn  # æ£€æŸ¥unicornçš„æ—¥å¿—
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h3 id="é‡ç½®ç®¡ç†å‘˜å¯†ç "><a aria-hidden="true" tabindex="-1" href="#é‡ç½®ç®¡ç†å‘˜å¯†ç " class="anchor"><span class="icon icon-link"></span></a>é‡ç½®ç®¡ç†å‘˜å¯†ç </h3>
        <p>Gitlabç®¡ç†å‘˜å¯†ç å¿˜è®°ï¼Œæ€ä¹ˆé‡ç½®å¯†ç ï¼ŒGitlab ä¿®æ”¹rootç”¨æˆ·å¯†ç ï¼Œ<a href="http://docs.gitlab.com/ce/security/reset_root_password.html">How to reset your root password</a>ã€‚</p>
        <p>ä½¿ç”¨railså·¥å…·æ‰“å¼€ç»ˆç«¯</p>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1"><span class="token function">sudo</span> gitlab-rails console production
</span></code><input type="hidden" value="sudo gitlab-rails console production
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>æŸ¥è¯¢ç”¨æˆ·çš„emailï¼Œç”¨æˆ·åï¼Œå¯†ç ç­‰ä¿¡æ¯ï¼Œid:1 è¡¨ç¤ºrootè´¦å·</p>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1">user <span class="token operator">=</span> User.where<span class="token punctuation">(</span>id: <span class="token number">1</span><span class="token punctuation">)</span>.first
</span></code><input type="hidden" value="user = User.where(id: 1).first
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>é‡æ–°è®¾ç½®å¯†ç </p>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1">user.password <span class="token operator">=</span> <span class="token string">'æ–°å¯†ç '</span>
</span><span class="code-line line-number" line="2">user.password_confirmation <span class="token operator">=</span> <span class="token string">'æ–°å¯†ç '</span>ã€€
</span></code><input type="hidden" value="user.password = &#x27;æ–°å¯†ç &#x27;
user.password_confirmation = &#x27;æ–°å¯†ç &#x27;ã€€
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>ä¿å­˜å¯†ç </p>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1">user.save<span class="token operator">!</span>
</span></code><input type="hidden" value="user.save!
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>å®Œæ•´çš„æ“ä½œrubyè„šæœ¬</p>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1">user <span class="token operator">=</span> User.where<span class="token punctuation">(</span>id: <span class="token number">1</span><span class="token punctuation">)</span>.first
</span><span class="code-line line-number" line="2">user.password <span class="token operator">=</span> <span class="token string">'æ–°å¯†ç '</span>
</span><span class="code-line line-number" line="3">user.password_confirmation <span class="token operator">=</span> <span class="token string">'æ–°å¯†ç '</span>
</span><span class="code-line line-number" line="4">user.save<span class="token operator">!</span>
</span></code><input type="hidden" value="user = User.where(id: 1).first
user.password = &#x27;æ–°å¯†ç &#x27;
user.password_confirmation = &#x27;æ–°å¯†ç &#x27;
user.save!
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h2 id="å¤‡ä»½æ¢å¤"><a aria-hidden="true" tabindex="-1" href="#å¤‡ä»½æ¢å¤" class="anchor"><span class="icon icon-link"></span></a>å¤‡ä»½æ¢å¤</h2>
        <p>ä½¿ç”¨Gitlabä¸€é”®å®‰è£…åŒ…å®‰è£…Gitlabéå¸¸ç®€å•, åŒæ ·çš„å¤‡ä»½æ¢å¤ä¸è¿ç§»ä¹Ÿéå¸¸ç®€å•,ç”¨ä¸€æ¡å‘½ä»¤å³å¯åˆ›å»ºå®Œæ•´çš„Gitlabå¤‡ä»½:</p>
        <h3 id="ä¿®æ”¹å¤‡ä»½æ–‡ä»¶é»˜è®¤ç›®å½•"><a aria-hidden="true" tabindex="-1" href="#ä¿®æ”¹å¤‡ä»½æ–‡ä»¶é»˜è®¤ç›®å½•" class="anchor"><span class="icon icon-link"></span></a>ä¿®æ”¹å¤‡ä»½æ–‡ä»¶é»˜è®¤ç›®å½•</h3>
        <p>ä¿®æ”¹<code>/etc/gitlab/gitlab.rb</code>æ¥ä¿®æ”¹é»˜è®¤å­˜æ”¾å¤‡ä»½æ–‡ä»¶çš„ç›®å½•:</p>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1">gitlab_rails<span class="token punctuation">[</span><span class="token string">'backup_path'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'/mnt/backups'</span>  
</span></code><input type="hidden" value="gitlab_rails[&#x27;backup_path&#x27;] = &#x27;/mnt/backups&#x27;  
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h3 id="åˆ›å»ºå¤‡ä»½"><a aria-hidden="true" tabindex="-1" href="#åˆ›å»ºå¤‡ä»½" class="anchor"><span class="icon icon-link"></span></a>åˆ›å»ºå¤‡ä»½</h3>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1">gitlab-rake gitlab:backup:create
</span></code><input type="hidden" value="gitlab-rake gitlab:backup:create
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>ä»¥ä¸Šå‘½ä»¤å°†åœ¨ <code>/var/opt/gitlab/backups</code> ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåç§°ç±»ä¼¼ä¸ºxxxxxxxx_gitlab_backup.tarçš„å‹ç¼©åŒ…, è¿™ä¸ªå‹ç¼©åŒ…å°±æ˜¯Gitlabæ•´ä¸ªçš„å®Œæ•´éƒ¨åˆ†, å…¶ä¸­å¼€å¤´çš„xxxxxxæ˜¯å¤‡ä»½åˆ›å»ºçš„æ—¶é—´æˆ³ã€‚</p>
        <p>ä¿®æ”¹åä½¿ç”¨gitlab-ctl reconfigureå‘½ä»¤é‡è½½é…ç½®æ–‡ä»¶ã€‚</p>
        <h3 id="å¼€å§‹å¤‡ä»½"><a aria-hidden="true" tabindex="-1" href="#å¼€å§‹å¤‡ä»½" class="anchor"><span class="icon icon-link"></span></a>å¼€å§‹å¤‡ä»½</h3>
        <p>è¿™é‡Œæ”¾ä½ çš„å¤‡ä»½æ–‡ä»¶æ–‡ä»¶å¤¹ï¼Œå’Œä»“åº“æºæ–‡ä»¶ã€‚</p>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1">/var/opt/gitlab/backups                   <span class="token comment"># å¤‡ä»½æ–‡ä»¶æ–‡ä»¶å¤¹</span>
</span><span class="code-line line-number" line="2">/var/opt/gitlab/git-data/repositories     <span class="token comment"># gitä»“åº“æºæ–‡ä»¶</span>
</span></code><input type="hidden" value="/var/opt/gitlab/backups                   # å¤‡ä»½æ–‡ä»¶æ–‡ä»¶å¤¹
/var/opt/gitlab/git-data/repositories     # gitä»“åº“æºæ–‡ä»¶
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h3 id="è‡ªåŠ¨å¤‡ä»½"><a aria-hidden="true" tabindex="-1" href="#è‡ªåŠ¨å¤‡ä»½" class="anchor"><span class="icon icon-link"></span></a>è‡ªåŠ¨å¤‡ä»½</h3>
        <p>é€šè¿‡crontabä½¿ç”¨å¤‡ä»½å‘½ä»¤å®ç°è‡ªåŠ¨å¤‡ä»½</p>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1"><span class="token function">crontab</span> <span class="token parameter variable">-e</span>
</span><span class="code-line line-number" line="2"><span class="token comment"># æ¯å¤©2ç‚¹å¤‡ä»½gitlabæ•°æ®</span>
</span><span class="code-line line-number" line="3"><span class="token number">0</span> <span class="token number">2</span> * * * /usr/bin/gitlab-rake gitlab:backup:create
</span><span class="code-line line-number" line="4"><span class="token number">0</span> <span class="token number">2</span> * * * /opt/gitlab/bin/gitlab-rake gitlab:backup:create
</span></code><input type="hidden" value="crontab -e
# æ¯å¤©2ç‚¹å¤‡ä»½gitlabæ•°æ®
0 2 * * * /usr/bin/gitlab-rake gitlab:backup:create
0 2 * * * /opt/gitlab/bin/gitlab-rake gitlab:backup:create
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>ä¸Šé¢ä¸¤è¡Œä¿å­˜ä¹‹åï¼Œé‡æ–°è½½å…¥é…ç½®</p>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1"><span class="token function">service</span> crond reload
</span><span class="code-line line-number" line="2"><span class="token comment"># or</span>
</span><span class="code-line line-number" line="3">systemctl reload crond.service
</span></code><input type="hidden" value="service crond reload
# or
systemctl reload crond.service
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h3 id="å¤‡ä»½ä¿ç•™ä¸ƒå¤©"><a aria-hidden="true" tabindex="-1" href="#å¤‡ä»½ä¿ç•™ä¸ƒå¤©" class="anchor"><span class="icon icon-link"></span></a>å¤‡ä»½ä¿ç•™ä¸ƒå¤©</h3>
        <p>è®¾ç½®åªä¿å­˜æœ€è¿‘7å¤©çš„å¤‡ä»½ï¼Œç¼–è¾‘ /etc/gitlab/gitlab.rb é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ°å¦‚ä¸‹ä»£ç ï¼Œåˆ é™¤æ³¨é‡Š <code>#</code> ä¿å­˜</p>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1"><span class="token comment"># /etc/gitlab/gitlab.rb é…ç½®æ–‡ä»¶ ä¿®æ”¹ä¸‹é¢è¿™ä¸€è¡Œ</span>
</span><span class="code-line line-number" line="2">gitlab_rails<span class="token punctuation">[</span><span class="token string">'backup_keep_time'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">604800</span>  
</span></code><input type="hidden" value="# /etc/gitlab/gitlab.rb é…ç½®æ–‡ä»¶ ä¿®æ”¹ä¸‹é¢è¿™ä¸€è¡Œ
gitlab_rails[&#x27;backup_keep_time&#x27;] = 604800  
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>é‡æ–°åŠ è½½gitlabé…ç½®æ–‡ä»¶</p>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1"><span class="token function">sudo</span> gitlab-ctl reconfigure  
</span></code><input type="hidden" value="sudo gitlab-ctl reconfigure  
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h3 id="å¼€å§‹æ¢å¤"><a aria-hidden="true" tabindex="-1" href="#å¼€å§‹æ¢å¤" class="anchor"><span class="icon icon-link"></span></a>å¼€å§‹æ¢å¤</h3>
        <p>
          è¿ç§»å¦‚åŒå¤‡ä»½ä¸æ¢å¤çš„æ­¥éª¤ä¸€æ ·, åªéœ€è¦å°†è€æœåŠ¡å™¨ <code>/var/opt/gitlab/backups</code> ç›®å½•ä¸‹çš„å¤‡ä»½æ–‡ä»¶æ‹·è´åˆ°æ–°æœåŠ¡å™¨ä¸Šçš„ <code>/var/opt/gitlab/backups</code> å³å¯(å¦‚æœä½ æ²¡ä¿®æ”¹è¿‡é»˜è®¤å¤‡ä»½ç›®å½•çš„è¯)ã€‚ ç„¶åæ‰§è¡Œæ¢å¤å‘½ä»¤ã€‚
          å¦‚æœä¿®æ”¹äº†ï¼Œé¦–å…ˆè¿›å…¥å¤‡ä»½ gitlab çš„ç›®å½•ï¼Œè¿™ä¸ªç›®å½•æ˜¯é…ç½®æ–‡ä»¶ä¸­çš„ <code>gitlab_rails['backup_path']</code> ï¼Œé»˜è®¤ä¸º <code>/var/opt/gitlab/backups</code> ã€‚
        </p>
        <p>ç„¶ååœæ­¢ unicorn å’Œ sidekiq ï¼Œä¿è¯æ•°æ®åº“æ²¡æœ‰æ–°çš„è¿æ¥ï¼Œä¸ä¼šæœ‰å†™æ•°æ®æƒ…å†µã€‚</p>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1"><span class="token comment"># åœæ­¢ç›¸å…³æ•°æ®è¿æ¥æœåŠ¡</span>
</span><span class="code-line line-number" line="2">gitlab-ctl stop unicorn
</span><span class="code-line line-number" line="3"><span class="token comment"># ok: down: unicorn: 0s, normally up</span>
</span><span class="code-line line-number" line="4">gitlab-ctl stop sidekiq
</span><span class="code-line line-number" line="5"><span class="token comment"># ok: down: sidekiq: 0s, normally up</span>
</span><span class="code-line line-number" line="6">
</span><span class="code-line line-number" line="7"><span class="token comment"># ä»xxxxxç¼–å·å¤‡ä»½ä¸­æ¢å¤</span>
</span><span class="code-line line-number" line="8"><span class="token comment"># ç„¶åæ¢å¤æ•°æ®ï¼Œ1406691018ä¸ºå¤‡ä»½æ–‡ä»¶çš„æ—¶é—´æˆ³</span>
</span><span class="code-line line-number" line="9">gitlab-rake gitlab:backup:restore <span class="token assign-left variable">BACKUP</span><span class="token operator">=</span><span class="token number">1406691018</span>
</span><span class="code-line line-number" line="10">
</span><span class="code-line line-number" line="11"><span class="token comment"># æ–°ç‰ˆæœ¬ 1483533591_2017_01_04_gitlab_backup.tar</span>
</span><span class="code-line line-number" line="12">gitlab-rake gitlab:backup:restore <span class="token assign-left variable">BACKUP</span><span class="token operator">=</span>1483533591_2017_01_04_gitlab_backup.tar
</span><span class="code-line line-number" line="13">
</span><span class="code-line line-number" line="14"><span class="token comment"># å¯åŠ¨Gitlab</span>
</span><span class="code-line line-number" line="15"><span class="token function">sudo</span> gitlab-ctl start  
</span></code><input type="hidden" value="# åœæ­¢ç›¸å…³æ•°æ®è¿æ¥æœåŠ¡
gitlab-ctl stop unicorn
# ok: down: unicorn: 0s, normally up
gitlab-ctl stop sidekiq
# ok: down: sidekiq: 0s, normally up

# ä»xxxxxç¼–å·å¤‡ä»½ä¸­æ¢å¤
# ç„¶åæ¢å¤æ•°æ®ï¼Œ1406691018ä¸ºå¤‡ä»½æ–‡ä»¶çš„æ—¶é—´æˆ³
gitlab-rake gitlab:backup:restore BACKUP=1406691018

# æ–°ç‰ˆæœ¬ 1483533591_2017_01_04_gitlab_backup.tar
gitlab-rake gitlab:backup:restore BACKUP=1483533591_2017_01_04_gitlab_backup.tar

# å¯åŠ¨Gitlab
sudo gitlab-ctl start  
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>åˆ¤æ–­æ˜¯æ‰§è¡Œå®é™…æ“ä½œçš„gitlabç›¸å…³ç”¨æˆ·ï¼šgitï¼Œæ²¡æœ‰å¾—åˆ°è¶³å¤Ÿçš„æƒé™ã€‚ä¾æ¬¡æ‰§è¡Œå‘½ä»¤ï¼š</p>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1"><span class="token comment"># æ¢å¤è¿‡ç¨‹ä¸­æ²¡æœ‰æƒé™</span>
</span><span class="code-line line-number" line="2"><span class="token function">mkdir</span> /var/opt/gitlab/backups
</span><span class="code-line line-number" line="3"><span class="token function">chown</span> <span class="token function">git</span> /var/opt/gitlab/backups
</span><span class="code-line line-number" line="4"><span class="token function">chmod</span> <span class="token number">700</span> /var/opt/gitlab/backups
</span><span class="code-line line-number" line="5">
</span><span class="code-line line-number" line="6"><span class="token comment"># æ¢å¤æˆåŠŸé¡µé¢æŠ¥æ²¡æœ‰æƒé™çš„é”™è¯¯</span>
</span><span class="code-line line-number" line="7"><span class="token function">sudo</span> <span class="token function">chown</span> <span class="token parameter variable">-R</span> git:git /var/opt/gitlab/git-data/repositories
</span><span class="code-line line-number" line="8"><span class="token function">sudo</span> <span class="token function">chmod</span> <span class="token parameter variable">-R</span> ug+rwX,o-rwx /var/opt/gitlab/git-data/repositories
</span><span class="code-line line-number" line="9"><span class="token function">sudo</span> <span class="token function">chmod</span> <span class="token parameter variable">-R</span> ug-s /var/opt/gitlab/git-data/repositories
</span><span class="code-line line-number" line="10"><span class="token function">sudo</span> <span class="token function">find</span> /var/opt/gitlab/git-data/repositories <span class="token parameter variable">-type</span> d <span class="token parameter variable">-print0</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">xargs</span> <span class="token parameter variable">-0</span> <span class="token function">chmod</span> g+s
</span></code><input type="hidden" value="# æ¢å¤è¿‡ç¨‹ä¸­æ²¡æœ‰æƒé™
mkdir /var/opt/gitlab/backups
chown git /var/opt/gitlab/backups
chmod 700 /var/opt/gitlab/backups

# æ¢å¤æˆåŠŸé¡µé¢æŠ¥æ²¡æœ‰æƒé™çš„é”™è¯¯
sudo chown -R git:git /var/opt/gitlab/git-data/repositories
sudo chmod -R ug+rwX,o-rwx /var/opt/gitlab/git-data/repositories
sudo chmod -R ug-s /var/opt/gitlab/git-data/repositories
sudo find /var/opt/gitlab/git-data/repositories -type d -print0 | sudo xargs -0 chmod g+s
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>å¦‚æœå¤‡ä»½æ–‡ä»¶æŠ¥æ²¡æœ‰æƒé™ï¼Œé€šè¿‡<code>ls -al</code>æŸ¥çœ‹æƒé™æ˜¯ä¸æ˜¯<code>git</code>ï¼Œè€Œä¸æ˜¯<code>root</code>ï¼Œé€šè¿‡ä¸‹é¢æ–¹å¼ç»™<code>git</code>ç”¨æˆ·æƒé™</p>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1"><span class="token function">sudo</span> <span class="token function">chown</span> <span class="token parameter variable">-R</span> git:git 1483533591_2017_01_04_gitlab_backup.tar
</span></code><input type="hidden" value="sudo chown -R git:git 1483533591_2017_01_04_gitlab_backup.tar
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h2 id="è¿æ¥æ•°æ®åº“"><a aria-hidden="true" tabindex="-1" href="#è¿æ¥æ•°æ®åº“" class="anchor"><span class="icon icon-link"></span></a>è¿æ¥æ•°æ®åº“</h2>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1"><span class="token comment"># ç™»é™†gitlabçš„å®‰è£…æœåŠ¡æŸ¥çœ‹é…ç½®æ–‡ä»¶</span>
</span><span class="code-line line-number" line="2"><span class="token function">cat</span> /var/opt/gitlab/gitlab-rails/etc/database.yml 
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number" line="4"><span class="token function">vim</span> /var/opt/gitlab/postgresql/data/postgresql.conf
</span><span class="code-line line-number" line="5"><span class="token comment"># listen_addresses = '192.168.1.125' # ä¿®æ”¹ç›‘å¬åœ°å€ä¸ºip</span>
</span><span class="code-line line-number" line="6"><span class="token comment"># æˆ–è€…æ”¹ä¸º "*"</span>
</span></code><input type="hidden" value="# ç™»é™†gitlabçš„å®‰è£…æœåŠ¡æŸ¥çœ‹é…ç½®æ–‡ä»¶
cat /var/opt/gitlab/gitlab-rails/etc/database.yml 

vim /var/opt/gitlab/postgresql/data/postgresql.conf
# listen_addresses = &#x27;192.168.1.125&#x27; # ä¿®æ”¹ç›‘å¬åœ°å€ä¸ºip
# æˆ–è€…æ”¹ä¸º &#x22;*&#x22;
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>ä¿®æ”¹ <code>pg_hba.conf</code> é…ç½®</p>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1"><span class="token function">vim</span>  /var/opt/gitlab/postgresql/data/pg_hba.conf
</span><span class="code-line line-number" line="2"><span class="token comment"># å°†ä¸‹é¢è¿™ä¸€è¡Œæ·»åŠ åˆ°é…ç½®çš„æœ€åé¢</span>
</span><span class="code-line line-number" line="3"><span class="token comment"># host    all    all    0.0.0.0/0    trust</span>
</span></code><input type="hidden" value="vim  /var/opt/gitlab/postgresql/data/pg_hba.conf
# å°†ä¸‹é¢è¿™ä¸€è¡Œæ·»åŠ åˆ°é…ç½®çš„æœ€åé¢
# host    all    all    0.0.0.0/0    trust
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>å¦‚æœä¸å¸Œæœ›å…è®¸æ‰€æœ‰IPè¿œç¨‹è®¿é—®ï¼Œåˆ™å¯ä»¥å°†ä¸Šè¿°é…ç½®é¡¹ä¸­çš„0.0.0.0è®¾å®šä¸ºç‰¹å®šçš„IPå€¼ã€‚</p>
        <p>é‡å¯ <code>postgresql</code> æ•°æ®åº“</p>
        <pre><code class="code-highlight"><span class="code-line line-number" line="1">gitlab-ctl restart postgresql
</span></code><input type="hidden" value="gitlab-ctl restart postgresql
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>æŸ¥çœ‹ <code>/etc/passwd</code> æ–‡ä»¶é‡Œè¾¹ <code>gitlab</code> å¯¹åº”çš„ç³»ç»Ÿç”¨æˆ·</p>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1"><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span>$ <span class="token function">cat</span> /etc/passwd
</span><span class="code-line line-number" line="2"><span class="token punctuation">..</span>.
</span><span class="code-line line-number" line="3">gitlab-psql:x:493:490::/var/opt/gitlab/postgresql:/bin/sh  <span class="token comment"># gitlabçš„postgresqlç”¨æˆ·</span>
</span></code><input type="hidden" value="[root@localhost ~]$ cat /etc/passwd
...
gitlab-psql:x:493:490::/var/opt/gitlab/postgresql:/bin/sh  # gitlabçš„postgresqlç”¨æˆ·
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h2 id="ä¸€äº›å¸¸è§„ç›®å½•"><a aria-hidden="true" tabindex="-1" href="#ä¸€äº›å¸¸è§„ç›®å½•" class="anchor"><span class="icon icon-link"></span></a>ä¸€äº›å¸¸è§„ç›®å½•</h2>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1"><span class="token comment"># é…ç½®ç›®å½•</span>
</span><span class="code-line line-number" line="2">/etc/gitlab/gitlab.rb
</span><span class="code-line line-number" line="3"><span class="token comment"># ç”Ÿæˆå¥½çš„nginxé…ç½®</span>
</span><span class="code-line line-number" line="4">/var/opt/gitlab/nginx/conf/gitlab-http.conf
</span><span class="code-line line-number" line="5"><span class="token comment"># å¤‡ä»½ç›®å½•</span>
</span><span class="code-line line-number" line="6">/var/opt/gitlab/backups
</span></code><input type="hidden" value="# é…ç½®ç›®å½•
/etc/gitlab/gitlab.rb
# ç”Ÿæˆå¥½çš„nginxé…ç½®
/var/opt/gitlab/nginx/conf/gitlab-http.conf
# å¤‡ä»½ç›®å½•
/var/opt/gitlab/backups
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h2 id="ä½¿ç”¨https"><a aria-hidden="true" tabindex="-1" href="#ä½¿ç”¨https" class="anchor"><span class="icon icon-link"></span></a>ä½¿ç”¨HTTPS</h2>
        <p>ç›´æ¥å°†nginxé…ç½®å¤åˆ¶åˆ°ä½ è‡ªå·±çš„nginxé…ç½®ä¸­ï¼Œåœæ‰gitlabçš„nginx</p>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1"><span class="token function">cp</span> /var/opt/gitlab/nginx/conf/gitlab-http.conf /usr/local/nginx/conf/vhost/
</span></code><input type="hidden" value="cp /var/opt/gitlab/nginx/conf/gitlab-http.conf /usr/local/nginx/conf/vhost/
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>å°†ä½ çš„SSLè¯ä¹¦é…ç½®å¤åˆ¶è¿›å»</p>
        <pre class="language-nginx"><code class="language-nginx code-highlight"><span class="code-line line-number" line="1"><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">  <span class="token directive"><span class="token keyword">listen</span> <span class="token number">443</span> ssl</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3">  <span class="token directive"><span class="token keyword">server_name</span>  g.doman.cn</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="4">  <span class="token directive"><span class="token keyword">ssl_certificate</span> /etc/letsencrypt/live/*****/certificate.crt</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="5">  <span class="token directive"><span class="token keyword">ssl_certificate_key</span> /etc/letsencrypt/live/*****/private.key</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="6">  <span class="token comment"># .....</span>
</span><span class="code-line line-number" line="7"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="server {
  listen 443 ssl;
  server_name  g.doman.cn;
  ssl_certificate /etc/letsencrypt/live/*****/certificate.crt;
  ssl_certificate_key /etc/letsencrypt/live/*****/private.key;
  # .....
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>ç¼–è¾‘<code>vi /usr/local/nginx/conf/nginx.conf</code>ä½ çš„nginxé…ç½®ï¼Œå¼•ç”¨ä½ å¤åˆ¶è¿‡æ¥çš„é…ç½®ã€‚</p>
        <pre class="language-nginx"><code class="language-nginx code-highlight"><span class="code-line line-number" line="1"><span class="token directive"><span class="token keyword">http</span></span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">  <span class="token comment"># .....</span>
</span><span class="code-line line-number" line="3">  <span class="token directive"><span class="token keyword">include</span> vhost/gitlab-http.conf</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="4"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="http {
  # .....
  include vhost/gitlab-http.conf;
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>åŒæ—¶è¦æŠŠ<code>/var/opt/gitlab/nginx/conf/nginx.conf</code>ä¸­çš„ä¸€äº›å˜é‡å¤åˆ¶åˆ°è‡ªå·±çš„nginxé…ç½®ä¸­<code>nginx.conf</code></p>
        <pre class="language-nginx"><code class="language-nginx code-highlight"><span class="code-line line-number" line="1"><span class="token directive"><span class="token keyword">http</span></span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">  <span class="token comment"># .....</span>
</span><span class="code-line line-number" line="3">  <span class="token directive"><span class="token keyword">log_format</span> gitlab_access <span class="token string">'<span class="token variable">$remote_addr</span> - <span class="token variable">$remote_user</span> [<span class="token variable">$time_local]</span> "<span class="token variable">$request_method</span> <span class="token variable">$filtered_request_uri</span> <span class="token variable">$server_protocol</span>" <span class="token variable">$status</span> <span class="token variable">$body_bytes_sent</span> "<span class="token variable">$filtered_http_referer</span>" "<span class="token variable">$http_user_agent</span>"'</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="4">  <span class="token directive"><span class="token keyword">log_format</span> gitlab_mattermost_access <span class="token string">'<span class="token variable">$remote_addr</span> - <span class="token variable">$remote_user</span> [<span class="token variable">$time_local]</span> "<span class="token variable">$request_method</span> <span class="token variable">$filtered_request_uri</span> <span class="token variable">$server_protocol</span>" <span class="token variable">$status</span> <span class="token variable">$body_bytes_sent</span> "<span class="token variable">$filtered_http_referer</span>" "<span class="token variable">$http_user_agent</span>"'</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="5">
</span><span class="code-line line-number" line="6">  <span class="token directive"><span class="token keyword">proxy_cache_path</span> proxy_cache keys_zone=gitlab:10m max_size=1g levels=1:2</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="7">  <span class="token directive"><span class="token keyword">proxy_cache</span> gitlab</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="8">  <span class="token directive"><span class="token keyword">map</span> <span class="token variable">$http_upgrade</span> <span class="token variable">$connection_upgrade</span></span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="9">      <span class="token directive"><span class="token keyword">default</span> upgrade</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="10">      ''      <span class="token directive"><span class="token keyword">close</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="11">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="12">
</span><span class="code-line line-number" line="13">  <span class="token comment"># Remove private_token from the request URI</span>
</span><span class="code-line line-number" line="14">  <span class="token comment"># In:  /foo?private_token=unfiltered&#x26;authenticity_token=unfiltered&#x26;rss_token=unfiltered&#x26;...</span>
</span><span class="code-line line-number" line="15">  <span class="token comment"># Out: /foo?private_token=[FILTERED]&#x26;authenticity_token=unfiltered&#x26;rss_token=unfiltered&#x26;...</span>
</span><span class="code-line line-number" line="16">  <span class="token directive"><span class="token keyword">map</span> <span class="token variable">$request_uri</span> <span class="token variable">$temp_request_uri_1</span></span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="17">    <span class="token directive"><span class="token keyword">default</span> <span class="token variable">$request_uri</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="18">    ~(?i)^(?&#x3C;start>.*)(?&#x3C;temp>[\?&#x26;]private[\-_]token)=[^&#x26;]*(?&#x3C;rest>.*)$ "$start$temp=[FILTERED]$rest"<span class="token punctuation">;</span>
</span><span class="code-line line-number" line="19">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="20">  <span class="token comment"># Remove authenticity_token from the request URI</span>
</span><span class="code-line line-number" line="21">  <span class="token comment"># In:  /foo?private_token=[FILTERED]&#x26;authenticity_token=unfiltered&#x26;rss_token=unfiltered&#x26;...</span>
</span><span class="code-line line-number" line="22">  <span class="token comment"># Out: /foo?private_token=[FILTERED]&#x26;authenticity_token=[FILTERED]&#x26;rss_token=unfiltered&#x26;...</span>
</span><span class="code-line line-number" line="23">  <span class="token directive"><span class="token keyword">map</span> <span class="token variable">$temp_request_uri_1</span> <span class="token variable">$temp_request_uri_2</span></span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="24">    <span class="token directive"><span class="token keyword">default</span> <span class="token variable">$temp_request_uri_1</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="25">    ~(?i)^(?&#x3C;start>.*)(?&#x3C;temp>[\?&#x26;]authenticity[\-_]token)=[^&#x26;]*(?&#x3C;rest>.*)$ "$start$temp=[FILTERED]$rest"<span class="token punctuation">;</span>
</span><span class="code-line line-number" line="26">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="27">  <span class="token comment"># Remove rss_token from the request URI</span>
</span><span class="code-line line-number" line="28">  <span class="token comment"># In:  /foo?private_token=[FILTERED]&#x26;authenticity_token=[FILTERED]&#x26;rss_token=unfiltered&#x26;...</span>
</span><span class="code-line line-number" line="29">  <span class="token comment"># Out: /foo?private_token=[FILTERED]&#x26;authenticity_token=[FILTERED]&#x26;rss_token=[FILTERED]&#x26;...</span>
</span><span class="code-line line-number" line="30">  <span class="token directive"><span class="token keyword">map</span> <span class="token variable">$temp_request_uri_2</span> <span class="token variable">$filtered_request_uri</span></span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="31">    <span class="token directive"><span class="token keyword">default</span> <span class="token variable">$temp_request_uri_2</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="32">    ~(?i)^(?&#x3C;start>.*)(?&#x3C;temp>[\?&#x26;]rss[\-_]token)=[^&#x26;]*(?&#x3C;rest>.*)$ "$start$temp=[FILTERED]$rest"<span class="token punctuation">;</span>
</span><span class="code-line line-number" line="33">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="34">  <span class="token comment"># A version of the referer without the query string</span>
</span><span class="code-line line-number" line="35">  <span class="token directive"><span class="token keyword">map</span> <span class="token variable">$http_referer</span> <span class="token variable">$filtered_http_referer</span></span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="36">    <span class="token directive"><span class="token keyword">default</span> <span class="token variable">$http_referer</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="37">    ~^(?&#x3C;temp>.*)\? $temp<span class="token punctuation">;</span>
</span><span class="code-line line-number" line="38">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="39"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="http {
  # .....
  log_format gitlab_access &#x27;$remote_addr - $remote_user [$time_local] &#x22;$request_method $filtered_request_uri $server_protocol&#x22; $status $body_bytes_sent &#x22;$filtered_http_referer&#x22; &#x22;$http_user_agent&#x22;&#x27;;
  log_format gitlab_mattermost_access &#x27;$remote_addr - $remote_user [$time_local] &#x22;$request_method $filtered_request_uri $server_protocol&#x22; $status $body_bytes_sent &#x22;$filtered_http_referer&#x22; &#x22;$http_user_agent&#x22;&#x27;;

  proxy_cache_path proxy_cache keys_zone=gitlab:10m max_size=1g levels=1:2;
  proxy_cache gitlab;
  map $http_upgrade $connection_upgrade {
      default upgrade;
      &#x27;&#x27;      close;
  }

  # Remove private_token from the request URI
  # In:  /foo?private_token=unfiltered&#x26;authenticity_token=unfiltered&#x26;rss_token=unfiltered&#x26;...
  # Out: /foo?private_token=[FILTERED]&#x26;authenticity_token=unfiltered&#x26;rss_token=unfiltered&#x26;...
  map $request_uri $temp_request_uri_1 {
    default $request_uri;
    ~(?i)^(?<start>.*)(?<temp>[\?&#x26;]private[\-_]token)=[^&#x26;]*(?<rest>.*)$ &#x22;$start$temp=[FILTERED]$rest&#x22;;
  }
  # Remove authenticity_token from the request URI
  # In:  /foo?private_token=[FILTERED]&#x26;authenticity_token=unfiltered&#x26;rss_token=unfiltered&#x26;...
  # Out: /foo?private_token=[FILTERED]&#x26;authenticity_token=[FILTERED]&#x26;rss_token=unfiltered&#x26;...
  map $temp_request_uri_1 $temp_request_uri_2 {
    default $temp_request_uri_1;
    ~(?i)^(?<start>.*)(?<temp>[\?&#x26;]authenticity[\-_]token)=[^&#x26;]*(?<rest>.*)$ &#x22;$start$temp=[FILTERED]$rest&#x22;;
  }
  # Remove rss_token from the request URI
  # In:  /foo?private_token=[FILTERED]&#x26;authenticity_token=[FILTERED]&#x26;rss_token=unfiltered&#x26;...
  # Out: /foo?private_token=[FILTERED]&#x26;authenticity_token=[FILTERED]&#x26;rss_token=[FILTERED]&#x26;...
  map $temp_request_uri_2 $filtered_request_uri {
    default $temp_request_uri_2;
    ~(?i)^(?<start>.*)(?<temp>[\?&#x26;]rss[\-_]token)=[^&#x26;]*(?<rest>.*)$ &#x22;$start$temp=[FILTERED]$rest&#x22;;
  }
  # A version of the referer without the query string
  map $http_referer $filtered_http_referer {
    default $http_referer;
    ~^(?<temp>.*)\? $temp;
  }
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h2 id="æš´åŠ›å‡çº§"><a aria-hidden="true" tabindex="-1" href="#æš´åŠ›å‡çº§" class="anchor"><span class="icon icon-link"></span></a>æš´åŠ›å‡çº§</h2>
        <p>æš´åŠ›å‡çº§å‰å…ˆå¤‡ä»½ï¼Œç„¶ååœæ­¢æ‰€æœ‰æœåŠ¡è¿è¡Œï¼Œè®°å¾—å¤‡ä»½çš„è‰¯å¥½ä¹ æƒ¯</p>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1">gitlab-ctl stop  <span class="token comment"># åœæ­¢æ‰€æœ‰ gitlab ç»„ä»¶ï¼š</span>
</span><span class="code-line line-number" line="2"><span class="token comment"># æ›´æ–°gitlabåŒ…</span>
</span><span class="code-line line-number" line="3">yum update gitlab-ce
</span></code><input type="hidden" value="gitlab-ctl stop  # åœæ­¢æ‰€æœ‰ gitlab ç»„ä»¶ï¼š
# æ›´æ–°gitlabåŒ…
yum update gitlab-ce
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>ç›´æ¥ç¼–è¾‘æº /etc/yum.repos.d/gitlab-ce.repoï¼Œå®‰è£… GitLab ç¤¾åŒºç‰ˆ</p>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1">yum list gitlab-ce <span class="token comment"># æŸ¥çœ‹ç‰ˆæœ¬</span>
</span><span class="code-line line-number" line="2"><span class="token function">sudo</span> yum <span class="token function">install</span> gitlab-ce <span class="token comment">#(è‡ªåŠ¨å®‰è£…æœ€æ–°ç‰ˆ)</span>
</span><span class="code-line line-number" line="3"><span class="token function">sudo</span> yum <span class="token function">install</span> gitlab-ce-8.15.2-ce.0.el6 <span class="token comment">#(å®‰è£…æŒ‡å®šç‰ˆæœ¬)</span>
</span></code><input type="hidden" value="yum list gitlab-ce # æŸ¥çœ‹ç‰ˆæœ¬
sudo yum install gitlab-ce #(è‡ªåŠ¨å®‰è£…æœ€æ–°ç‰ˆ)
sudo yum install gitlab-ce-8.15.2-ce.0.el6 #(å®‰è£…æŒ‡å®šç‰ˆæœ¬)
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>æ³¨æ„ï¼š<code>10.7</code> ç‰ˆæœ¬å‡çº§åˆ° <code>11.x</code> ç‰ˆæœ¬éœ€è¦å…ˆå‡çº§åˆ° <code>10.8</code> ç‰ˆæœ¬</p>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1"><span class="token comment"># å®‰è£…æŒ‡å®šç‰ˆæœ¬ 10.8 çš„ç‰ˆæœ¬</span>
</span><span class="code-line line-number" line="2"><span class="token function">sudo</span> yum <span class="token function">install</span> gitlab-ce-10.8.0-ce.0.el6
</span></code><input type="hidden" value="# å®‰è£…æŒ‡å®šç‰ˆæœ¬ 10.8 çš„ç‰ˆæœ¬
sudo yum install gitlab-ce-10.8.0-ce.0.el6
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>å®‰è£…å®Œæˆè®°å¾—å°†æ‰€æœ‰æœåŠ¡å¯èµ·æ¥å“¦</p>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1">gitlab-ctl start <span class="token comment"># å¯åŠ¨æ‰€æœ‰æ•°æ®åº“</span>
</span><span class="code-line line-number" line="2"><span class="token comment"># postgresql æ•°æ®åº“å¦‚æœå¯åŠ¨ä¸äº†ï¼Œé€šè¿‡é‡å¯å¯åŠ¨</span>
</span><span class="code-line line-number" line="3">gitlab-ctl restart postgresql
</span></code><input type="hidden" value="gitlab-ctl start # å¯åŠ¨æ‰€æœ‰æ•°æ®åº“
# postgresql æ•°æ®åº“å¦‚æœå¯åŠ¨ä¸äº†ï¼Œé€šè¿‡é‡å¯å¯åŠ¨
gitlab-ctl restart postgresql
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>å®‰è£…è¿‡å¦‚æœæŠ¥é”™ï¼ŒæŸ¥çœ‹æç¤ºæ ¹æ®æç¤ºæ“ä½œï¼Œç‰ˆæœ¬è·¨åº¦å¤ªå¤§ä¼šæŠ¥é”™å“¦ã€‚</p>
        <pre><code class="code-highlight"><span class="code-line line-number" line="1">gitlab preinstall: Automatically backing up only the GitLab SQL database (excluding everything else!)
</span><span class="code-line line-number" line="2">Dumping database ...
</span><span class="code-line line-number" line="3">Dumping PostgreSQL database gitlabhq_production ... pg_dump: [archiver (db)] connection to database "gitlabhq_production" failed: could not connect to server: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•
</span><span class="code-line line-number" line="4">    Is the server running locally and accepting
</span><span class="code-line line-number" line="5">    connections on Unix domain socket "/var/opt/gitlab/postgresql/.s.PGSQL.5432"?
</span><span class="code-line line-number" line="6">Backup failed
</span><span class="code-line line-number" line="7">[FAILED]
</span><span class="code-line line-number" line="8">gitlab preinstall:
</span><span class="code-line line-number" line="9">gitlab preinstall: Backup failed! If you want to skip this backup, run the following command and
</span><span class="code-line line-number" line="10">gitlab preinstall: try again:
</span><span class="code-line line-number" line="11">gitlab preinstall:
</span><span class="code-line line-number" line="12">gitlab preinstall:   sudo touch /etc/gitlab/skip-auto-migrations
</span><span class="code-line line-number" line="13">gitlab preinstall:
</span><span class="code-line line-number" line="14">error: %pre(gitlab-ce-8.15.2-ce.0.el6.x86_64) scriptlet failed, exit status 1
</span><span class="code-line line-number" line="15">Error in PREIN scriptlet in rpm package gitlab-ce-8.15.2-ce.0.el6.x86_64
</span><span class="code-line line-number" line="16">error:   install: %pre scriptlet failed (2), skipping gitlab-ce-8.15.2-ce.0.el6
</span><span class="code-line line-number" line="17">gitlab-ce-8.11.5-ce.0.el6.x86_64 was supposed to be removed but is not!
</span><span class="code-line line-number" line="18">  Verifying  : gitlab-ce-8.11.5-ce.0.el6.x86_64                                                                                                                                                             1/2
</span><span class="code-line line-number" line="19">  Verifying  : gitlab-ce-8.15.2-ce.0.el6.x86_64                                                                                                                                                             2/2
</span><span class="code-line line-number" line="20">
</span><span class="code-line line-number" line="21">Failed:
</span><span class="code-line line-number" line="22">  gitlab-ce.x86_64 0:8.11.5-ce.0.el6
</span></code><input type="hidden" value="gitlab preinstall: Automatically backing up only the GitLab SQL database (excluding everything else!)
Dumping database ...
Dumping PostgreSQL database gitlabhq_production ... pg_dump: [archiver (db)] connection to database &#x22;gitlabhq_production&#x22; failed: could not connect to server: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•
    Is the server running locally and accepting
    connections on Unix domain socket &#x22;/var/opt/gitlab/postgresql/.s.PGSQL.5432&#x22;?
Backup failed
[FAILED]
gitlab preinstall:
gitlab preinstall: Backup failed! If you want to skip this backup, run the following command and
gitlab preinstall: try again:
gitlab preinstall:
gitlab preinstall:   sudo touch /etc/gitlab/skip-auto-migrations
gitlab preinstall:
error: %pre(gitlab-ce-8.15.2-ce.0.el6.x86_64) scriptlet failed, exit status 1
Error in PREIN scriptlet in rpm package gitlab-ce-8.15.2-ce.0.el6.x86_64
error:   install: %pre scriptlet failed (2), skipping gitlab-ce-8.15.2-ce.0.el6
gitlab-ce-8.11.5-ce.0.el6.x86_64 was supposed to be removed but is not!
  Verifying  : gitlab-ce-8.11.5-ce.0.el6.x86_64                                                                                                                                                             1/2
  Verifying  : gitlab-ce-8.15.2-ce.0.el6.x86_64                                                                                                                                                             2/2

Failed:
  gitlab-ce.x86_64 0:8.11.5-ce.0.el6
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>çœ‹ä¸Šé¢ä¸€å †é”™è¯¯ï¼Œç¬é—´å°±æ‡µé€¼äº†ï¼Œçœ‹åˆ°ä¸€æ¡æ•‘æ˜Ÿå‘½ä»¤è®©æˆ‘å°è¯•è¿è¡Œ <code>sudo touch /etc/gitlab/skip-auto-migrations</code> äºæ˜¯æˆ‘äºŒé€¼çš„é‡æ–°<code>yum install gitlab-ce</code>è¿è¡Œäº†ï¼Œç»“æœçœŸçš„å®‰è£…æˆåŠŸäº†ï¼ŒğŸ˜„ã€‚</p>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1"><span class="token comment"># é‡æ–°å®‰è£…å‘½ä»¤</span>
</span><span class="code-line line-number" line="2">yum reinstall gitlab-ce
</span><span class="code-line line-number" line="3"><span class="token comment"># or</span>
</span><span class="code-line line-number" line="4">yum <span class="token function">install</span> gitlab-ce
</span></code><input type="hidden" value="# é‡æ–°å®‰è£…å‘½ä»¤
yum reinstall gitlab-ce
# or
yum install gitlab-ce
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <pre><code class="code-highlight"><span class="code-line line-number" line="1">...
</span><span class="code-line line-number" line="2">gitlab: Thank you for installing GitLab!
</span><span class="code-line line-number" line="3">gitlab: To configure and start GitLab, RUN THE FOLLOWING COMMAND:
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5">sudo gitlab-ctl reconfigure
</span><span class="code-line line-number" line="6">
</span><span class="code-line line-number" line="7">gitlab: GitLab should be reachable at http://114.55.148.71:8081
</span><span class="code-line line-number" line="8">gitlab: Otherwise configure GitLab for your system by editing /etc/gitlab/gitlab.rb file
</span><span class="code-line line-number" line="9">gitlab: And running reconfigure again.
</span><span class="code-line line-number" line="10">gitlab:
</span><span class="code-line line-number" line="11">gitlab: For a comprehensive list of configuration options please see the Omnibus GitLab readme
</span><span class="code-line line-number" line="12">gitlab: https://gitlab.com/gitlab-org/omnibus-gitlab/blob/master/README.md
</span><span class="code-line line-number" line="13">gitlab:
</span><span class="code-line line-number" line="14">
</span><span class="code-line line-number" line="15">gitlab: GitLab now ships with a newer version of PostgreSQL (9.6.1), and will be used
</span><span class="code-line line-number" line="16">gitlab: as the default in the next major relase. To upgrade, RUN THE FOLLOWING COMMANDS:
</span><span class="code-line line-number" line="17">
</span><span class="code-line line-number" line="18">sudo gitlab-ctl pg-upgrade
</span><span class="code-line line-number" line="19">
</span><span class="code-line line-number" line="20">gitlab: For more details, please see:
</span><span class="code-line line-number" line="21">gitlab: https://docs.gitlab.com/omnibus/settings/database.html#upgrade-packaged-postgresql-server
</span><span class="code-line line-number" line="22">gitlab:
</span><span class="code-line line-number" line="23">  æ¸…ç†       : gitlab-ce-8.11.5-ce.0.el6.x86_64                                                                                                                                                             2/2
</span><span class="code-line line-number" line="24">Found /etc/gitlab/skip-auto-migrations, exiting...
</span><span class="code-line line-number" line="25">  Verifying  : gitlab-ce-8.15.2-ce.0.el6.x86_64                                                                                                                                                             1/2
</span><span class="code-line line-number" line="26">  Verifying  : gitlab-ce-8.11.5-ce.0.el6.x86_64                                                                                                                                                             2/2
</span><span class="code-line line-number" line="27">
</span><span class="code-line line-number" line="28">æ›´æ–°å®Œæ¯•:
</span><span class="code-line line-number" line="29">  gitlab-ce.x86_64 0:8.15.2-ce.0.el6
</span><span class="code-line line-number" line="30">
</span><span class="code-line line-number" line="31">å®Œæ¯•ï¼
</span></code><input type="hidden" value="...
gitlab: Thank you for installing GitLab!
gitlab: To configure and start GitLab, RUN THE FOLLOWING COMMAND:

sudo gitlab-ctl reconfigure

gitlab: GitLab should be reachable at http://114.55.148.71:8081
gitlab: Otherwise configure GitLab for your system by editing /etc/gitlab/gitlab.rb file
gitlab: And running reconfigure again.
gitlab:
gitlab: For a comprehensive list of configuration options please see the Omnibus GitLab readme
gitlab: https://gitlab.com/gitlab-org/omnibus-gitlab/blob/master/README.md
gitlab:

gitlab: GitLab now ships with a newer version of PostgreSQL (9.6.1), and will be used
gitlab: as the default in the next major relase. To upgrade, RUN THE FOLLOWING COMMANDS:

sudo gitlab-ctl pg-upgrade

gitlab: For more details, please see:
gitlab: https://docs.gitlab.com/omnibus/settings/database.html#upgrade-packaged-postgresql-server
gitlab:
  æ¸…ç†       : gitlab-ce-8.11.5-ce.0.el6.x86_64                                                                                                                                                             2/2
Found /etc/gitlab/skip-auto-migrations, exiting...
  Verifying  : gitlab-ce-8.15.2-ce.0.el6.x86_64                                                                                                                                                             1/2
  Verifying  : gitlab-ce-8.11.5-ce.0.el6.x86_64                                                                                                                                                             2/2

æ›´æ–°å®Œæ¯•:
  gitlab-ce.x86_64 0:8.15.2-ce.0.el6

å®Œæ¯•ï¼
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>é‡å¯é…ç½®ï¼Œå¯ä»¥è§£å†³å¤§éƒ¨åˆ†<code>502</code>é”™è¯¯ã€‚</p>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1">gitlab-ctl reconfigure
</span></code><input type="hidden" value="gitlab-ctl reconfigure
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h2 id="ä¼˜åŒ–å†…å­˜ä½¿ç”¨"><a aria-hidden="true" tabindex="-1" href="#ä¼˜åŒ–å†…å­˜ä½¿ç”¨" class="anchor"><span class="icon icon-link"></span></a>ä¼˜åŒ–å†…å­˜ä½¿ç”¨</h2>
        <p>ä¿®æ”¹é…ç½®æ–‡ä»¶ <code>/etc/gitlab/gitlab.rb</code></p>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1"><span class="token comment"># å‡å°‘ postgresql æ•°æ®åº“ç¼“å­˜</span>
</span><span class="code-line line-number" line="2">postgresql<span class="token punctuation">[</span><span class="token string">'shared_buffers'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"256MB"</span>
</span><span class="code-line line-number" line="3"><span class="token comment"># å‡å°‘sidekiqçš„å¹¶å‘æ•°</span>
</span><span class="code-line line-number" line="4">sidekiq<span class="token punctuation">[</span><span class="token string">'concurrency'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>
</span><span class="code-line line-number" line="5">
</span><span class="code-line line-number" line="6"><span class="token comment"># workerè¿›ç¨‹æ•°</span>
</span><span class="code-line line-number" line="7">postgresql<span class="token punctuation">[</span><span class="token string">'max_worker_processes'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">4</span>
</span><span class="code-line line-number" line="8">
</span><span class="code-line line-number" line="9">unicorn<span class="token punctuation">[</span><span class="token string">'worker_processes'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span>  <span class="token comment">## workerè¿›ç¨‹æ•°</span>
</span><span class="code-line line-number" line="10">unicorn<span class="token punctuation">[</span><span class="token string">'worker_memory_limit_min'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"400 * 1 &#x3C;&#x3C; 20"</span> <span class="token comment">##workeræœ€å°å†…å­˜</span>
</span><span class="code-line line-number" line="11">unicorn<span class="token punctuation">[</span><span class="token string">'worker_memory_limit_max'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"650 * 1 &#x3C;&#x3C; 20"</span> <span class="token comment">##workeræœ€å¤§å†…å­˜</span>
</span></code><input type="hidden" value="# å‡å°‘ postgresql æ•°æ®åº“ç¼“å­˜
postgresql[&#x27;shared_buffers&#x27;] = &#x22;256MB&#x22;
# å‡å°‘sidekiqçš„å¹¶å‘æ•°
sidekiq[&#x27;concurrency&#x27;] = 1

# workerè¿›ç¨‹æ•°
postgresql[&#x27;max_worker_processes&#x27;] = 4

unicorn[&#x27;worker_processes&#x27;] = 2  ## workerè¿›ç¨‹æ•°
unicorn[&#x27;worker_memory_limit_min&#x27;] = &#x22;400 * 1 << 20&#x22; ##workeræœ€å°å†…å­˜
unicorn[&#x27;worker_memory_limit_max&#x27;] = &#x22;650 * 1 << 20&#x22; ##workeræœ€å¤§å†…å­˜
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h2 id="é”™è¯¯å¤„ç†"><a aria-hidden="true" tabindex="-1" href="#é”™è¯¯å¤„ç†" class="anchor"><span class="icon icon-link"></span></a>é”™è¯¯å¤„ç†</h2>
        <h3 id="è§£å†³80ç«¯å£è¢«å ç”¨"><a aria-hidden="true" tabindex="-1" href="#è§£å†³80ç«¯å£è¢«å ç”¨" class="anchor"><span class="icon icon-link"></span></a>è§£å†³80ç«¯å£è¢«å ç”¨</h3>
        <p>nginxé…ç½®è§£å†³ <code>80</code> ç«¯å£è¢«å ç”¨</p>
        <pre class="language-nginx"><code class="language-nginx code-highlight"><span class="code-line line-number" line="1"><span class="token directive"><span class="token keyword">upstream</span> gitlab</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">     <span class="token directive"><span class="token keyword">server</span> 114.55.111.111:8081</span> <span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="4"><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="5">  <span class="token comment"># ä¾¦å¬çš„80ç«¯å£</span>
</span><span class="code-line line-number" line="6">  <span class="token directive"><span class="token keyword">listen</span>       <span class="token number">80</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="7">  <span class="token directive"><span class="token keyword">server_name</span>  git.diggg.cn</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="8">  <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="9">    <span class="token directive"><span class="token keyword">proxy_pass</span>   http://gitlab</span><span class="token punctuation">;</span>    <span class="token comment">#åœ¨è¿™é‡Œè®¾ç½®ä¸€ä¸ªä»£ç†ï¼Œå’Œupstreamçš„åå­—ä¸€æ ·</span>
</span><span class="code-line line-number" line="10">    <span class="token comment">#ä»¥ä¸‹æ˜¯ä¸€äº›åå‘ä»£ç†çš„é…ç½®å¯åˆ é™¤</span>
</span><span class="code-line line-number" line="11">    <span class="token directive"><span class="token keyword">proxy_redirect</span>             <span class="token boolean">off</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="12">    <span class="token comment">#åç«¯çš„WebæœåŠ¡å™¨å¯ä»¥é€šè¿‡X-Forwarded-Forè·å–ç”¨æˆ·çœŸå®IP</span>
</span><span class="code-line line-number" line="13">    <span class="token directive"><span class="token keyword">proxy_set_header</span>           Host <span class="token variable">$host</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="14">    <span class="token directive"><span class="token keyword">proxy_set_header</span>           X-Real-IP <span class="token variable">$remote_addr</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="15">    <span class="token directive"><span class="token keyword">proxy_set_header</span>           X-Forwarded-For <span class="token variable">$proxy_add_x_forwarded_for</span></span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="16">    <span class="token directive"><span class="token keyword">client_max_body_size</span>       <span class="token number">10m</span></span><span class="token punctuation">;</span> <span class="token comment">#å…è®¸å®¢æˆ·ç«¯è¯·æ±‚çš„æœ€å¤§å•æ–‡ä»¶å­—èŠ‚æ•°</span>
</span><span class="code-line line-number" line="17">    <span class="token directive"><span class="token keyword">client_body_buffer_size</span>    <span class="token number">128k</span></span><span class="token punctuation">;</span> <span class="token comment">#ç¼“å†²åŒºä»£ç†ç¼“å†²ç”¨æˆ·ç«¯è¯·æ±‚çš„æœ€å¤§å­—èŠ‚æ•°</span>
</span><span class="code-line line-number" line="18">    <span class="token directive"><span class="token keyword">proxy_connect_timeout</span>      <span class="token number">300</span></span><span class="token punctuation">;</span> <span class="token comment">#nginxè·Ÿåç«¯æœåŠ¡å™¨è¿æ¥è¶…æ—¶æ—¶é—´(ä»£ç†è¿æ¥è¶…æ—¶)</span>
</span><span class="code-line line-number" line="19">    <span class="token directive"><span class="token keyword">proxy_send_timeout</span>         <span class="token number">300</span></span><span class="token punctuation">;</span> <span class="token comment">#åç«¯æœåŠ¡å™¨æ•°æ®å›ä¼ æ—¶é—´(ä»£ç†å‘é€è¶…æ—¶)</span>
</span><span class="code-line line-number" line="20">    <span class="token directive"><span class="token keyword">proxy_read_timeout</span>         <span class="token number">300</span></span><span class="token punctuation">;</span> <span class="token comment">#è¿æ¥æˆåŠŸåï¼Œåç«¯æœåŠ¡å™¨å“åº”æ—¶é—´(ä»£ç†æ¥æ”¶è¶…æ—¶)</span>
</span><span class="code-line line-number" line="21">    <span class="token directive"><span class="token keyword">proxy_buffer_size</span>          <span class="token number">4k</span></span><span class="token punctuation">;</span> <span class="token comment">#è®¾ç½®ä»£ç†æœåŠ¡å™¨ï¼ˆnginxï¼‰ä¿å­˜ç”¨æˆ·å¤´ä¿¡æ¯çš„ç¼“å†²åŒºå¤§å°</span>
</span><span class="code-line line-number" line="22">    <span class="token directive"><span class="token keyword">proxy_buffers</span>              <span class="token number">4</span> <span class="token number">32k</span></span><span class="token punctuation">;</span> <span class="token comment">#proxy_buffersç¼“å†²åŒºï¼Œç½‘é¡µå¹³å‡åœ¨32kä»¥ä¸‹çš„è¯ï¼Œè¿™æ ·è®¾ç½®</span>
</span><span class="code-line line-number" line="23">    <span class="token directive"><span class="token keyword">proxy_busy_buffers_size</span>    <span class="token number">64k</span></span><span class="token punctuation">;</span> <span class="token comment">#é«˜è´Ÿè·ä¸‹ç¼“å†²å¤§å°ï¼ˆproxy_buffers*2ï¼‰</span>
</span><span class="code-line line-number" line="24">    <span class="token directive"><span class="token keyword">proxy_temp_file_write_size</span> <span class="token number">64k</span></span><span class="token punctuation">;</span> <span class="token comment">#è®¾å®šç¼“å­˜æ–‡ä»¶å¤¹å¤§å°ï¼Œå¤§äºè¿™ä¸ªå€¼ï¼Œå°†ä»upstreamæœåŠ¡å™¨ä¼ </span>
</span><span class="code-line line-number" line="25">  <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="26"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="upstream gitlab {
     server 114.55.111.111:8081 ;
}
server {
  # ä¾¦å¬çš„80ç«¯å£
  listen       80;
  server_name  git.diggg.cn;
  location / {
    proxy_pass   http://gitlab;    #åœ¨è¿™é‡Œè®¾ç½®ä¸€ä¸ªä»£ç†ï¼Œå’Œupstreamçš„åå­—ä¸€æ ·
    #ä»¥ä¸‹æ˜¯ä¸€äº›åå‘ä»£ç†çš„é…ç½®å¯åˆ é™¤
    proxy_redirect             off;
    #åç«¯çš„WebæœåŠ¡å™¨å¯ä»¥é€šè¿‡X-Forwarded-Forè·å–ç”¨æˆ·çœŸå®IP
    proxy_set_header           Host $host;
    proxy_set_header           X-Real-IP $remote_addr;
    proxy_set_header           X-Forwarded-For $proxy_add_x_forwarded_for;
    client_max_body_size       10m; #å…è®¸å®¢æˆ·ç«¯è¯·æ±‚çš„æœ€å¤§å•æ–‡ä»¶å­—èŠ‚æ•°
    client_body_buffer_size    128k; #ç¼“å†²åŒºä»£ç†ç¼“å†²ç”¨æˆ·ç«¯è¯·æ±‚çš„æœ€å¤§å­—èŠ‚æ•°
    proxy_connect_timeout      300; #nginxè·Ÿåç«¯æœåŠ¡å™¨è¿æ¥è¶…æ—¶æ—¶é—´(ä»£ç†è¿æ¥è¶…æ—¶)
    proxy_send_timeout         300; #åç«¯æœåŠ¡å™¨æ•°æ®å›ä¼ æ—¶é—´(ä»£ç†å‘é€è¶…æ—¶)
    proxy_read_timeout         300; #è¿æ¥æˆåŠŸåï¼Œåç«¯æœåŠ¡å™¨å“åº”æ—¶é—´(ä»£ç†æ¥æ”¶è¶…æ—¶)
    proxy_buffer_size          4k; #è®¾ç½®ä»£ç†æœåŠ¡å™¨ï¼ˆnginxï¼‰ä¿å­˜ç”¨æˆ·å¤´ä¿¡æ¯çš„ç¼“å†²åŒºå¤§å°
    proxy_buffers              4 32k; #proxy_buffersç¼“å†²åŒºï¼Œç½‘é¡µå¹³å‡åœ¨32kä»¥ä¸‹çš„è¯ï¼Œè¿™æ ·è®¾ç½®
    proxy_busy_buffers_size    64k; #é«˜è´Ÿè·ä¸‹ç¼“å†²å¤§å°ï¼ˆproxy_buffers*2ï¼‰
    proxy_temp_file_write_size 64k; #è®¾å®šç¼“å­˜æ–‡ä»¶å¤¹å¤§å°ï¼Œå¤§äºè¿™ä¸ªå€¼ï¼Œå°†ä»upstreamæœåŠ¡å™¨ä¼ 
  }
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>nginxé…ç½®æ£€æŸ¥å’Œç«‹å³ç”Ÿæ•ˆ</p>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1"><span class="token comment"># æ£€æŸ¥é…ç½®</span>
</span><span class="code-line line-number" line="2">/usr/local/nginx/sbin/nginx <span class="token parameter variable">-tc</span> conf/nginx.conf
</span><span class="code-line line-number" line="3"><span class="token comment"># nginx é‡æ–°åŠ è½½é…ç½®</span>
</span><span class="code-line line-number" line="4">/usr/local/nginx/sbin/nginx <span class="token parameter variable">-s</span> reload
</span></code><input type="hidden" value="# æ£€æŸ¥é…ç½®
/usr/local/nginx/sbin/nginx -tc conf/nginx.conf
# nginx é‡æ–°åŠ è½½é…ç½®
/usr/local/nginx/sbin/nginx -s reload
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h3 id="å¤´åƒæ— æ³•æ­£å¸¸æ˜¾ç¤º"><a aria-hidden="true" tabindex="-1" href="#å¤´åƒæ— æ³•æ­£å¸¸æ˜¾ç¤º" class="anchor"><span class="icon icon-link"></span></a>å¤´åƒæ— æ³•æ­£å¸¸æ˜¾ç¤º</h3>
        <p>
          åŸå› ï¼šgravatarè¢«å¢™
          è§£å†³åŠæ³•ï¼š
          ç¼–è¾‘ /etc/gitlab/gitlab.rbï¼Œå°†
        </p>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1"><span class="token comment"># gitlab_rails['gravatar_plain_url'] = 'http://gravatar.duoshuo.com/avatar/%{hash}?s=%{size}&#x26;d=identicon'</span>
</span></code><input type="hidden" value="# gitlab_rails[&#x27;gravatar_plain_url&#x27;] = &#x27;http://gravatar.duoshuo.com/avatar/%{hash}?s=%{size}&#x26;d=identicon&#x27;
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>ä¿®æ”¹ä¸ºï¼š</p>
        <pre><code class="code-highlight"><span class="code-line line-number" line="1">gitlab_rails['gravatar_plain_url'] = 'http://gravatar.duoshuo.com/avatar/%{hash}?s=%{size}&#x26;d=identicon'
</span></code><input type="hidden" value="gitlab_rails[&#x27;gravatar_plain_url&#x27;] = &#x27;http://gravatar.duoshuo.com/avatar/%{hash}?s=%{size}&#x26;d=identicon&#x27;
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>ç„¶ååœ¨å‘½ä»¤è¡Œæ‰§è¡Œï¼š</p>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1"><span class="token function">sudo</span> gitlab-ctl reconfigure 
</span><span class="code-line line-number" line="2"><span class="token function">sudo</span> gitlab-rake cache:clear <span class="token assign-left variable">RAILS_ENV</span><span class="token operator">=</span>production
</span></code><input type="hidden" value="sudo gitlab-ctl reconfigure 
sudo gitlab-rake cache:clear RAILS_ENV=production
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h3 id="internal-api-unreachable"><a aria-hidden="true" tabindex="-1" href="#internal-api-unreachable" class="anchor"><span class="icon icon-link"></span></a>internal API unreachable</h3>
        <p>è¿™ä¸ªé”™è¯¯æ˜¯ä¸€ä¸ªè‡ªå·±åˆ¶é€ çš„å‘ï¼Œæˆ‘å…‹éš†å’Œæäº¤éƒ½æ²¡æœ‰åŠæ³•æï¼Œä½†æ˜¯ç½‘ç«™èƒ½æ­£å¸¸è¿è¡Œï¼Œå°è¯•äº†éå¸¸å¤šçš„æ–¹æ³•ï¼Œæœ€ç»ˆæˆ‘çš„é—®é¢˜æ˜¯<code>22</code>ç«¯å£æ²¡æœ‰éšå°„å‡ºå»ï¼Œå¥½å°´å°¬ã€‚</p>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1">GitLab: Failed to authorize your Git request: internal API unreachable
</span></code><input type="hidden" value="GitLab: Failed to authorize your Git request: internal API unreachable
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>è§£å†³åŠæ³•ï¼š<a href="https://gitlab.com/gitlab-org/gitlab-ce/issues/33702">https://gitlab.com/gitlab-org/gitlab-ce/issues/33702</a><br>é€šè¿‡é˜²ç«å¢™è§„åˆ™ 127.0.0.1</p>
        <h3 id="proxy_temp-ç›®å½•æ²¡æœ‰æƒé™"><a aria-hidden="true" tabindex="-1" href="#proxy_temp-ç›®å½•æ²¡æœ‰æƒé™" class="anchor"><span class="icon icon-link"></span></a>proxy_temp ç›®å½•æ²¡æœ‰æƒé™</h3>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1"><span class="token punctuation">[</span>crit<span class="token punctuation">]</span> <span class="token number">14788</span><span class="token comment">#0: *215 open() "/usr/local/nginx/proxy_temp/5/01/0000000015" failed (13: Permission denied) while reading upstream</span>
</span></code><input type="hidden" value="[crit] 14788#0: *215 open() &#x22;/usr/local/nginx/proxy_temp/5/01/0000000015&#x22; failed (13: Permission denied) while reading upstream
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>ä»¥ä¸‹æ–¹å¼è§£å†³</p>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1"><span class="token function">chown</span> <span class="token parameter variable">-R</span> root:root /usr/local/nginx/proxy_temp
</span><span class="code-line line-number" line="2"><span class="token comment"># ç¼–è¾‘ nginx.conf</span>
</span><span class="code-line line-number" line="3"><span class="token function">sudo</span> <span class="token function">vi</span> /usr/local/nginx/conf/nginx.conf
</span><span class="code-line line-number" line="4"><span class="token comment"># åœ¨ç¬¬ä¸€è¡Œæ·»åŠ </span>
</span><span class="code-line line-number" line="5">user root<span class="token punctuation">;</span>
</span></code><input type="hidden" value="chown -R root:root /usr/local/nginx/proxy_temp
# ç¼–è¾‘ nginx.conf
sudo vi /usr/local/nginx/conf/nginx.conf
# åœ¨ç¬¬ä¸€è¡Œæ·»åŠ 
user root;
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h3 id="webhooks-é”™è¯¯"><a aria-hidden="true" tabindex="-1" href="#webhooks-é”™è¯¯" class="anchor"><span class="icon icon-link"></span></a>webhooks é”™è¯¯</h3>
        <p>é”™è¯¯æ˜¾ç¤ºä¸å…è®¸å‘é€æœ¬åœ°è¯·æ±‚</p>
        <pre><code class="code-highlight"><span class="code-line line-number" line="1">Url is blocked: Requests to the local network are not allowed
</span></code><input type="hidden" value="Url is blocked: Requests to the local network are not allowed
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>è§£å†³æ–¹æ³•ï¼Œåœ¨è®¾ç½®ä¸­è®¾ç½®å…è®¸æœ¬åœ°è¿æ¥å³å¯</p>
        <blockquote>
          <p><code>admin</code> => <code>Settings</code> => <code>Outbound requests</code></p>
        </blockquote>
        <h3 id="æœåŠ¡æ— æ³•å¯åŠ¨"><a aria-hidden="true" tabindex="-1" href="#æœåŠ¡æ— æ³•å¯åŠ¨" class="anchor"><span class="icon icon-link"></span></a>æœåŠ¡æ— æ³•å¯åŠ¨</h3>
        <pre><code class="code-highlight"><span class="code-line line-number" line="1">[root@localhost gitlab]# gitlab-ctl status
</span><span class="code-line line-number" line="2">fail: alertmanager: runsv not running
</span><span class="code-line line-number" line="3">fail: gitaly: runsv not running
</span><span class="code-line line-number" line="4">fail: gitlab-monitor: runsv not running
</span><span class="code-line line-number" line="5">fail: gitlab-workhorse: runsv not running
</span><span class="code-line line-number" line="6">fail: logrotate: runsv not running
</span><span class="code-line line-number" line="7">fail: nginx: runsv not running
</span><span class="code-line line-number" line="8">fail: node-exporter: runsv not running
</span><span class="code-line line-number" line="9">fail: postgres-exporter: runsv not running
</span><span class="code-line line-number" line="10">fail: postgresql: runsv not running
</span><span class="code-line line-number" line="11">fail: prometheus: runsv not running
</span><span class="code-line line-number" line="12">fail: redis: runsv not running
</span><span class="code-line line-number" line="13">fail: redis-exporter: runsv not running
</span><span class="code-line line-number" line="14">fail: sidekiq: runsv not running
</span><span class="code-line line-number" line="15">fail: unicorn: runsv not running
</span></code><input type="hidden" value="[root@localhost gitlab]# gitlab-ctl status
fail: alertmanager: runsv not running
fail: gitaly: runsv not running
fail: gitlab-monitor: runsv not running
fail: gitlab-workhorse: runsv not running
fail: logrotate: runsv not running
fail: nginx: runsv not running
fail: node-exporter: runsv not running
fail: postgres-exporter: runsv not running
fail: postgresql: runsv not running
fail: prometheus: runsv not running
fail: redis: runsv not running
fail: redis-exporter: runsv not running
fail: sidekiq: runsv not running
fail: unicorn: runsv not running
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>
          <a href="https://confluence.jaytaala.com/pages/viewpage.action?pageId=9666568"></a><a href="https://gitlab.com/gitlab-org/omnibus-gitlab/issues/272">Omnibus gitlab do not restart on CentOS7</a>
          å¼€æœºè‡ªåŠ¨å¯åŠ¨æœåŠ¡
        </p>
        <pre><code class="code-highlight"><span class="code-line line-number" line="1">[root@localhost ~]# systemctl status gitlab-runsvdir.service -l
</span><span class="code-line line-number" line="2">â— gitlab-runsvdir.service - GitLab Runit supervision process
</span><span class="code-line line-number" line="3">   Loaded: loaded (/usr/lib/systemd/system/gitlab-runsvdir.service; enabled; vendor preset: disabled)
</span><span class="code-line line-number" line="4">   Active: inactive (dead)
</span></code><input type="hidden" value="[root@localhost ~]# systemctl status gitlab-runsvdir.service -l
â— gitlab-runsvdir.service - GitLab Runit supervision process
   Loaded: loaded (/usr/lib/systemd/system/gitlab-runsvdir.service; enabled; vendor preset: disabled)
   Active: inactive (dead)
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>å¦‚æœ <code>gitlab-runsvdir.service</code> æœåŠ¡æ²¡æœ‰å“åº”ï¼Œä½ å¯èƒ½è¦çœ‹ä¸€ä¸‹å†…å­˜æ˜¯å¦æ»¡äº†ï¼Œéœ€è¦é‡Šæ”¾å†…å­˜ï¼Œè€çš„ç‰ˆæœ¬éœ€è¦ 2G å†…å­˜ï¼Œæ–°ç‰ˆæœ¬éœ€è¦è‡³å°‘ 4G å†…å­˜ã€‚</p>
        <h3 id="å…¶å®ƒé”™è¯¯"><a aria-hidden="true" tabindex="-1" href="#å…¶å®ƒé”™è¯¯" class="anchor"><span class="icon icon-link"></span></a>å…¶å®ƒé”™è¯¯</h3>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1">Error executing action <span class="token variable"><span class="token variable">`</span>run<span class="token variable">`</span></span> on resource <span class="token string">'bash[migrate gitlab-rails database]'</span>
</span></code><input type="hidden" value="Error executing action &#x60;run&#x60; on resource &#x27;bash[migrate gitlab-rails database]&#x27;
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>
          ä¸Šé¢é”™è¯¯æ˜¯æ•°æ®åº“æ²¡æœ‰å¯åŠ¨ï¼Œæˆ‘ä¸çŸ¥é“å¦‚ä½•å¯åŠ¨ï¼Œæˆ‘é‡å¯äº†æœåŠ¡å™¨ï¼Œç„¶åå¥½çƒäº†ã€‚ğŸ˜†
          <a href="https://gitlab.com/gitlab-org/gitlab-ce/issues/2052#note_1667899">https://gitlab.com/gitlab-org/gitlab-ce/issues/2052#note_1667899</a>
        </p>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1">NameError: uninitialized constant Devise::Async
</span></code><input type="hidden" value="NameError: uninitialized constant Devise::Async
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <pre><code class="code-highlight"><span class="code-line line-number" line="1">Processing by RootController#index as HTML
</span><span class="code-line line-number" line="2">Completed 401 Unauthorized in 17ms (ActiveRecord: 2.7ms)
</span></code><input type="hidden" value="Processing by RootController#index as HTML
Completed 401 Unauthorized in 17ms (ActiveRecord: 2.7ms)
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <pre><code class="code-highlight"><span class="code-line line-number" line="1">/var/log/gitlab/nginx/gitlab_access.log &#x3C;==
</span><span class="code-line line-number" line="2">114.55.148.71 - - [04/Jan/2017:17:20:24 +0800] "GET /favicon.ico HTTP/1.0" 502 2662 "http://git.xxxxx.cn/" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.95 Safari/537.36"
</span></code><input type="hidden" value="/var/log/gitlab/nginx/gitlab_access.log <==
114.55.148.71 - - [04/Jan/2017:17:20:24 +0800] &#x22;GET /favicon.ico HTTP/1.0&#x22; 502 2662 &#x22;http://git.xxxxx.cn/&#x22; &#x22;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.95 Safari/537.36&#x22;
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h2 id="å‚è€ƒèµ„æ–™"><a aria-hidden="true" tabindex="-1" href="#å‚è€ƒèµ„æ–™" class="anchor"><span class="icon icon-link"></span></a>å‚è€ƒèµ„æ–™</h2>
        <ul>
          <li><a href="https://packages.gitlab.com/gitlab/gitlab-ce">gitlab/gitlab-ce</a></li>
          <li><a href="https://www.gitlab.cc/downloads">å®˜ç½‘ä¸‹è½½</a></li>
          <li><a href="https://doc.gitlab.cc/ce/install/requirements.html">å®˜ç½‘å®‰è£…è¯´æ˜</a></li>
          <li><a href="https://www.gitlab.cc/features/#enterprise">å¼€æºç‰ˆæœ¬å’Œä¼ä¸šç‰ˆæœ¬å¯¹æ¯”</a></li>
          <li><a href="https://gitlab.com/gitlab-org/gitlab-ce/blob/master/doc/update/8.14-to-8.15.md">å®˜æ–¹å‡çº§Gitlabæ•™ç¨‹</a></li>
          <li><a href="https://gitlab.com/gitlab-org/gitlab-recipes/tree/master/install/centos">å®˜æ–¹Centoså®‰è£…Gitlabæ•™ç¨‹</a></li>
          <li><a href="http://opjasee.com/2016/01/28/gitlab-upgrade.html">Gitlabå‡çº§è®°å½•</a></li>
          <li><a href="http://www.yuzhewo.com/2015/11/03/%E4%BF%AE%E6%94%B9gitlab%E4%BD%BF%E7%94%A8%E7%8E%B0%E6%9C%89nginx%E6%9C%8D%E5%8A%A1%E5%8F%8A502%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/">ä¿®æ”¹gitlabä½¿ç”¨ç°æœ‰nginxæœåŠ¡åŠ502é—®é¢˜è§£å†³</a></li>
          <li><a href="http://blog.csdn.net/wangxicoding/article/details/43738137">æˆ‘æ‰€é‡åˆ°çš„GitLab 502é—®é¢˜çš„è§£å†³</a></li>
        </ul>
        <div class="previous"><a class="prev" href="CentOS7æ›´æ¢yumè½¯ä»¶é•œåƒæº.html"><svg viewBox="0 0 1024 1024" width="16" height="16" fill="currentColor">
              <path d="M842.666667 864c-8.533333 0-14.933333-2.133333-21.333334-8.533333l-341.333333-309.333334c-6.4-6.4-10.666667-14.933333-10.666667-23.466666 0-8.533333 4.266667-17.066667 10.666667-23.466667l341.333333-309.333333c12.8-12.8 34.133333-10.666667 44.8 2.133333 12.8 12.8 10.666667 34.133333-2.133333 44.8L548.266667 522.666667l315.733333 285.866666c12.8 10.666667 14.933333 32 2.133333 44.8-6.4 6.4-14.933333 10.666667-23.466666 10.666667z"></path>
              <path d="M512 864c-8.533333 0-14.933333-2.133333-21.333333-8.533333L149.333333 546.133333c-6.4-6.4-10.666667-14.933333-10.666666-23.466666 0-8.533333 4.266667-17.066667 10.666666-23.466667L490.666667 189.866667c12.8-12.8 34.133333-10.666667 44.8 2.133333 12.8 12.8 10.666667 34.133333-2.133334 44.8L217.6 522.666667 533.333333 808.533333c12.8 12.8 14.933333 32 2.133334 44.8-6.4 6.4-14.933333 10.666667-23.466667 10.666667z"></path>
            </svg>
<span>æ›´æ¢ yum è½¯ä»¶é•œåƒæº
</span></a><a class="next" href="CentOS7å®‰è£…é…ç½®vsftpæ­å»ºFTP.html"><span>å®‰è£…æ­å»º FTP
</span><svg viewBox="0 0 1024 1024" width="16" height="16" fill="currentColor">
              <path d="M544 522.666667c0-8.533333-4.266667-17.066667-10.666667-23.466667L192 189.866667c-12.8-12.8-34.133333-10.666667-44.8 2.133333-12.8 12.8-10.666667 34.133333 2.133333 44.8l315.733334 285.866667L149.333333 808.533333c-12.8 12.8-14.933333 32-2.133333 44.8 6.4 6.4 14.933333 10.666667 23.466667 10.666667 8.533333 0 14.933333-2.133333 21.333333-8.533333l341.333333-309.333334c6.4-6.4 10.666667-14.933333 10.666667-23.466666z"></path>
              <path d="M864 499.2l-341.333333-309.333333c-12.8-12.8-34.133333-10.666667-44.8 2.133333-12.8 12.8-10.666667 34.133333 2.133333 44.8l315.733333 285.866667-315.733333 285.866666c-12.8 12.8-14.933333 32-2.133333 44.8 6.4 6.4 14.933333 10.666667 23.466666 10.666667 8.533333 0 14.933333-2.133333 21.333334-8.533333l341.333333-309.333334c6.4-6.4 10.666667-14.933333 10.666667-23.466666 0-8.533333-4.266667-17.066667-10.666667-23.466667z"></path>
            </svg></a></div>
        <section class="article-footer"><a href="https://github.com/jaywcjlove/handbook/blob/master/docs/CentOS/CentOS7å®‰è£…ç»´æŠ¤Gitlab.md" class="edit-button" target="_blank" rel="noopener noreferrer"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
            </svg>
<span>Edit this page on GitHub</span>
</a><span class="atime">2023/08/07</span></section>
      </markdown-style>
      <nav class="tocs">
        <aside class="inner toc">
          <ol class="tocs-list">
            <li><a href="#å®˜æ–¹å®‰è£…" class="tocs-link">å®˜æ–¹å®‰è£…</a></li>
            <li><a href="#ç¬¬ä¸‰æ–¹é•œåƒå®‰è£…" class="tocs-link">ç¬¬ä¸‰æ–¹é•œåƒå®‰è£…</a>
              <ol class="tocs-list is-collapsed">
                <li><a href="#ç¼–è¾‘æº" class="tocs-link">ç¼–è¾‘æº</a></li>
                <li><a href="#æ›´æ–°æœ¬åœ°yumç¼“å­˜" class="tocs-link">æ›´æ–°æœ¬åœ°YUMç¼“å­˜</a></li>
                <li><a href="#å®‰è£…ç¤¾åŒºç‰ˆ" class="tocs-link">å®‰è£…ç¤¾åŒºç‰ˆ</a></li>
                <li><a href="#æ›´æ”¹é…ç½®" class="tocs-link">æ›´æ”¹é…ç½®</a></li>
                <li><a href="#é…ç½®å¹¶å¯åŠ¨gitlab" class="tocs-link">é…ç½®å¹¶å¯åŠ¨GitLab</a></li>
                <li><a href="#ç™»å½•gitlab" class="tocs-link">ç™»å½•GitLab</a></li>
                <li><a href="#å¯ç”¨-gitlab-registry-åŠŸèƒ½" class="tocs-link">å¯ç”¨ gitlab registry åŠŸèƒ½</a></li>
              </ol>
            </li>
            <li><a href="#dockerå®‰è£…" class="tocs-link">Dockerå®‰è£…</a></li>
            <li><a href="#å¸è½½" class="tocs-link">å¸è½½</a></li>
            <li><a href="#è¿ç»´" class="tocs-link">è¿ç»´</a>
              <ol class="tocs-list is-collapsed">
                <li><a href="#æœåŠ¡ç®¡ç†" class="tocs-link">æœåŠ¡ç®¡ç†</a></li>
                <li><a href="#æ—¥å¿—æŸ¥çœ‹" class="tocs-link">æ—¥å¿—æŸ¥çœ‹</a></li>
                <li><a href="#é‡ç½®ç®¡ç†å‘˜å¯†ç " class="tocs-link">é‡ç½®ç®¡ç†å‘˜å¯†ç </a></li>
              </ol>
            </li>
            <li><a href="#å¤‡ä»½æ¢å¤" class="tocs-link">å¤‡ä»½æ¢å¤</a>
              <ol class="tocs-list is-collapsed">
                <li><a href="#ä¿®æ”¹å¤‡ä»½æ–‡ä»¶é»˜è®¤ç›®å½•" class="tocs-link">ä¿®æ”¹å¤‡ä»½æ–‡ä»¶é»˜è®¤ç›®å½•</a></li>
                <li><a href="#åˆ›å»ºå¤‡ä»½" class="tocs-link">åˆ›å»ºå¤‡ä»½</a></li>
                <li><a href="#å¼€å§‹å¤‡ä»½" class="tocs-link">å¼€å§‹å¤‡ä»½</a></li>
                <li><a href="#è‡ªåŠ¨å¤‡ä»½" class="tocs-link">è‡ªåŠ¨å¤‡ä»½</a></li>
                <li><a href="#å¤‡ä»½ä¿ç•™ä¸ƒå¤©" class="tocs-link">å¤‡ä»½ä¿ç•™ä¸ƒå¤©</a></li>
                <li><a href="#å¼€å§‹æ¢å¤" class="tocs-link">å¼€å§‹æ¢å¤</a></li>
              </ol>
            </li>
            <li><a href="#è¿æ¥æ•°æ®åº“" class="tocs-link">è¿æ¥æ•°æ®åº“</a></li>
            <li><a href="#ä¸€äº›å¸¸è§„ç›®å½•" class="tocs-link">ä¸€äº›å¸¸è§„ç›®å½•</a></li>
            <li><a href="#ä½¿ç”¨https" class="tocs-link">ä½¿ç”¨HTTPS</a></li>
            <li><a href="#æš´åŠ›å‡çº§" class="tocs-link">æš´åŠ›å‡çº§</a></li>
            <li><a href="#ä¼˜åŒ–å†…å­˜ä½¿ç”¨" class="tocs-link">ä¼˜åŒ–å†…å­˜ä½¿ç”¨</a></li>
            <li><a href="#é”™è¯¯å¤„ç†" class="tocs-link">é”™è¯¯å¤„ç†</a>
              <ol class="tocs-list is-collapsed">
                <li><a href="#è§£å†³80ç«¯å£è¢«å ç”¨" class="tocs-link">è§£å†³80ç«¯å£è¢«å ç”¨</a></li>
                <li><a href="#å¤´åƒæ— æ³•æ­£å¸¸æ˜¾ç¤º" class="tocs-link">å¤´åƒæ— æ³•æ­£å¸¸æ˜¾ç¤º</a></li>
                <li><a href="#internal-api-unreachable" class="tocs-link">internal API unreachable</a></li>
                <li><a href="#proxy_temp-ç›®å½•æ²¡æœ‰æƒé™" class="tocs-link">proxy_temp ç›®å½•æ²¡æœ‰æƒé™</a></li>
                <li><a href="#webhooks-é”™è¯¯" class="tocs-link">webhooks é”™è¯¯</a></li>
                <li><a href="#æœåŠ¡æ— æ³•å¯åŠ¨" class="tocs-link">æœåŠ¡æ— æ³•å¯åŠ¨</a></li>
                <li><a href="#å…¶å®ƒé”™è¯¯" class="tocs-link">å…¶å®ƒé”™è¯¯</a></li>
              </ol>
            </li>
            <li><a href="#å‚è€ƒèµ„æ–™" class="tocs-link">å‚è€ƒèµ„æ–™</a></li>
          </ol>
        </aside>
      </nav>
    </div>
    <script src="../js/demo-preview.js?v=1.26.6"></script>
    <div class="footer warpper">Released under the MIT License. Copyright Â© 2022 Kenny Wong<br>Generated by <a href="https://github.com/jaywcjlove/idoc" target="_blank">idoc</a> v1.26.6</div>
    <script src="../js/tocbot.js?v=1.26.6"></script>
  </body>
</html>
