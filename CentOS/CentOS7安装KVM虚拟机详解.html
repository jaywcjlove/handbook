<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>
      CentOS7å®‰è£…KVMè™šæ‹Ÿæœºè¯¦è§£---
      ![](img/kvmbanner-logo3.png)
      åŸºäº CentOS Linux release 7.2.1511 (Core) çš„ç¯å¢ƒä¸‹å‘½ä»¤è¡Œçš„æ–¹å¼å®‰è£…KVMçš„è¯¦ç»†è¿‡ç¨‹ã€‚
      ç›®å½•
      - handbook
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta description="æ”¾ç½®æˆ‘çš„ç¬”è®°ã€æœé›†ã€æ‘˜å½•ã€å®è·µï¼Œä¿æŒå¥½å¥‡å¿ƒã€‚çœ‹æ–‡éœ€è°¨æ…ï¼Œåæœå¾ˆä¸¥é‡ã€‚CentOS7å®‰è£…KVMè™šæ‹Ÿæœºè¯¦è§£---

![](img/kvmbanner-logo3.png)

åŸºäº CentOS Linux release 7.2.1511 (Core) çš„ç¯å¢ƒä¸‹å‘½ä»¤è¡Œçš„æ–¹å¼å®‰è£…KVMçš„è¯¦ç»†è¿‡ç¨‹ã€‚

ç›®å½•
 - handbook">
    <meta keywords="example,handbook">
    <link rel="icon" href="data:image/png;base64,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" type="image/x-icon">
    <style>[data-color-mode*='dark'], [data-color-mode*='dark'] body {
  color-scheme: dark;
  --color-header-bg: #3a3a3a8f;
  --color-header-border: #323232;
  --color-hover: #ffffff30;
}
[data-color-mode*='light'], [data-color-mode*='light'] body {
  color-scheme: light;
  --color-header-bg: #ffffff52;
  --color-header-border: #d3d3d3;
  --color-hover: #f2f2f2;
}

@media screen and (max-width: 1140px) {
  .header .inner {
    justify-content: center !important;
  }
}

body {
  margin: 0;
}

dark-mode {
  top: 5px !important;
  font-size: 14px;
}

markdown-style {
  margin-top: 78px !important;
}

github-corners {
  width: 32px !important;
  height: 32px;
  right: 0;
}

.header {
  position: fixed;
  width: 100%;
  background: #fff;
  backdrop-filter: saturate(180%) blur(0.4rem);
  background-color: var(--color-header-bg);
  border-bottom: 1px solid var(--color-header-border);
  z-index: 99;
  top: 0;
}

.header .inner {
  max-width: 960px;
  margin: 0 auto;
  display: flex;
  justify-content: space-between;
  padding: 5px 0;
}

.header .logo {
  margin-right: 10px;
}
.header .title {
  display: flex;
  align-items: center;
  font-size: 16px;
  font-weight: bold;
}
.header .logo img {
  height: 26px;
  display: block;
}

.footer {
  max-width: 960px;
  margin: 0 auto;
  text-align: center;
  padding: 0 0 110px 0;
  border-top: 1px solid var(--color-header-border);
  padding-top: 18px;
}

.footer a {
  font-size: 14px;
  text-decoration: initial;
  color: #3f51b5;
}

.footer a:hover {
  color:#009688;
  text-decoration: underline;
}

.footer a + a {
  margin-left: 10px;
}

.footer .copyright {
  color: #596068;
  font-size: 14px;
  padding-top: 5px;
}</style>
  </head>
  <body id="totop"><header class="header"><article class="inner"><a class="logo" href="../index.html"><img src="data:image/png;base64,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" alt="handbook logo"></a><div class="title">handbook</div><nav class="nav"></nav></article></header><script type="module">const GITHUB_CORNERS_TEMPLATE = document.createElement("template");
GITHUB_CORNERS_TEMPLATE.innerHTML = `
<style>
:host a:hover .octo-arm { animation: octocat-wave 560ms ease-in-out; }
@keyframes octocat-wave {
  0%, 100% { transform: rotate(0); }
  20%, 60% { transform: rotate(-25deg); }
  40%, 80% { transform: rotate(10deg); }
}
@media (max-width:500px) {
  :host a:hover .octo-arm { animation: none; }
  :host .octo-arm { animation: octocat-wave 560ms ease-in-out; }
}
:host svg { z-index: 99; position: fixed; border: 0px; top: 0px; }
</style>
<svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true">
  <a xlink:href="https://github.com/uiwjs/react-github-corners" target="_blank" rel="nofollow sponsored" style="fill: rgb(21, 21, 19); color: rgb(255, 255, 255);">
    <g>
      <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
      <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" class="octo-arm" style="transform-origin: 130px 106px;"></path>
      <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
    </g>
  </a>
</svg>
`;
export class GithubCorners extends HTMLElement {
    constructor() {
        super();
        this.right = '0';
        this.shadow = this.attachShadow({ mode: 'open' });
        this.shadow.appendChild(this.ownerDocument.importNode(GITHUB_CORNERS_TEMPLATE.content, true));
        this.update();
    }
    static get observedAttributes() {
        return ['style', 'z-index', 'target', 'height', 'width', 'href', 'color', 'fill', 'position', 'top', 'left', 'right', 'bottom', 'transform'];
    }
    setAttr(name, value) {
        const svg = this.shadow.querySelector('svg');
        if (/(href)/.test(name.toLocaleLowerCase())) {
            svg.lastElementChild.setAttribute('xlink:href', value);
        }
        else if (/(color|fill)/.test(name.toLocaleLowerCase())) {
            svg.firstElementChild.style[name] = value;
        }
        else if (/(z-index|position|top|left|right|bottom|transform)/.test(name.toLocaleLowerCase())) {
            svg.style[name] = value;
        }
        else {
            svg.setAttribute(name, value);
        }
    }
    update() {
        ;
        [...this.getAttributeNames(), 'right'].forEach((name) => {
            const value = this.getAttribute(name) || this[name] || '';
            this.setAttr(name, value);
        });
    }
    attributeChangedCallback(name, oldValue, newValue) {
        if (oldValue !== newValue) {
            this.setAttr(name, newValue);
        }
    }
}
customElements.define('github-corners', GithubCorners);</script><github-corners target="__blank" position="fixed" z-index="999" href="https://github.com/jaywcjlove/handbook.git"></github-corners><dark-mode permanent style="position: fixed; top: 8px; left: 10px; z-index: 999;" dark="Dark" light="Light"></dark-mode><script>const t=document;const e="_dark_mode_theme_";const s="permanent";const o="colorschemechange";const i="permanentcolorscheme";const h="light";const r="dark";const n=(t,e,s=e)=>{Object.defineProperty(t,s,{enumerable:true,get(){const t=this.getAttribute(e);return t===null?"":t},set(t){this.setAttribute(e,t)}})};const c=(t,e,s=e)=>{Object.defineProperty(t,s,{enumerable:true,get(){return this.hasAttribute(e)},set(t){if(t){this.setAttribute(e,"")}else{this.removeAttribute(e)}}})};class a extends HTMLElement{static get observedAttributes(){return["mode",h,r,s]}LOCAL_NANE=e;constructor(){super();this.t()}connectedCallback(){n(this,"mode");n(this,r);n(this,h);c(this,s);const a=localStorage.getItem(e);if(a&&[h,r].includes(a)){this.mode=a;this.permanent=true}if(this.permanent&&!a){localStorage.setItem(e,this.mode)}const l=[h,r].includes(a);if(this.permanent&&a){this.o()}else{if(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches){this.mode=r;this.o()}if(window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches){this.mode=h;this.o()}}if(!this.permanent&&!l){window.matchMedia("(prefers-color-scheme: light)").onchange=t=>{this.mode=t.matches?h:r;this.o()};window.matchMedia("(prefers-color-scheme: dark)").onchange=t=>{this.mode=t.matches?r:h;this.o()}}const d=new MutationObserver(((s,h)=>{this.mode=t.documentElement.dataset.colorMode;if(this.permanent&&l){localStorage.setItem(e,this.mode);this.i(i,{permanent:this.permanent})}this.h();this.i(o,{colorScheme:this.mode})}));d.observe(t.documentElement,{attributes:true});this.i(o,{colorScheme:this.mode});this.h()}attributeChangedCallback(t,s,o){if(t==="mode"&&s!==o&&[h,r].includes(o)){const t=localStorage.getItem(e);if(this.mode===t){this.mode=o;this.h();this.o()}else if(this.mode&&this.mode!==t){this.h();this.o()}}else if((t===h||t===r)&&s!==o){this.h()}if(t==="permanent"&&typeof this.permanent==="boolean"){this.permanent?localStorage.setItem(e,this.mode):localStorage.removeItem(e)}}o(){t.documentElement.setAttribute("data-color-mode",this.mode)}h(){this.icon.textContent=this.mode===h?"ğŸŒ’":"ğŸŒ";this.text.textContent=this.mode===h?this.getAttribute(r):this.getAttribute(h)}t(){var s=this.attachShadow({mode:"open"});this.label=t.createElement("span");this.label.setAttribute("class","wrapper");this.label.onclick=()=>{this.mode=this.mode===h?r:h;if(this.permanent){localStorage.setItem(e,this.mode)}this.o();this.h()};s.appendChild(this.label);this.icon=t.createElement("span");this.label.appendChild(this.icon);this.text=t.createElement("span");this.label.appendChild(this.text);const o=`
[data-color-mode*='dark'], [data-color-mode*='dark'] body {
  color-scheme: dark;
  --color-theme-bg: #0d1117;
  --color-theme-text: #c9d1d9;
  background-color: var(--color-theme-bg);
  color: var(--color-theme-text);
}

[data-color-mode*='light'], [data-color-mode*='light'] body {
  color-scheme: light;
  --color-theme-bg: #fff;
  --color-theme-text: #24292f;
  background-color: var(--color-theme-bg);
  color: var(--color-theme-text);
}`;const i="_dark_mode_style_";const n=t.getElementById(i);if(!n){var c=t.createElement("style");c.id=i;c.textContent=o;t.head.appendChild(c)}var a=t.createElement("style");a.textContent=`
    .wrapper { cursor: pointer; user-select: none; position: relative; }
    .wrapper > span + span { margin-left: .4rem; }
    `;s.appendChild(a)}i(t,e){this.dispatchEvent(new CustomEvent(t,{bubbles:true,composed:true,detail:e}))}}customElements.define("dark-mode",a);</script><script>const __TEMPLATE__ = document.createElement('template');
__TEMPLATE__.innerHTML = `
<style>

markdown-style h1:hover a.anchor .octicon-link:before,
markdown-style h2:hover a.anchor .octicon-link:before,
markdown-style h3:hover a.anchor .octicon-link:before,
markdown-style h4:hover a.anchor .octicon-link:before,
markdown-style h5:hover a.anchor .octicon-link:before,
markdown-style h6:hover a.anchor .octicon-link:before {
  width: 16px;
  height: 16px;
  content: ' ';
  display: inline-block;
  background-color: currentColor;
  -webkit-mask-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' aria-hidden='true'><path fill-rule='evenodd' d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'></path></svg>");
  mask-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' aria-hidden='true'><path fill-rule='evenodd' d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'></path></svg>");
}
markdown-style[theme*='light'] { --color-prettylights-syntax-comment: #6e7781; --color-prettylights-syntax-constant: #0550ae; --color-prettylights-syntax-entity: #8250df; --color-prettylights-syntax-storage-modifier-import: #24292f; --color-prettylights-syntax-entity-tag: #116329; --color-prettylights-syntax-keyword: #cf222e; --color-prettylights-syntax-string: #0a3069; --color-prettylights-syntax-variable: #953800; --color-prettylights-syntax-brackethighlighter-unmatched: #82071e; --color-prettylights-syntax-invalid-illegal-text: #f6f8fa; --color-prettylights-syntax-invalid-illegal-bg: #82071e; --color-prettylights-syntax-carriage-return-text: #f6f8fa; --color-prettylights-syntax-carriage-return-bg: #cf222e; --color-prettylights-syntax-string-regexp: #116329; --color-prettylights-syntax-markup-list: #3b2300; --color-prettylights-syntax-markup-heading: #0550ae; --color-prettylights-syntax-markup-italic: #24292f; --color-prettylights-syntax-markup-bold: #24292f; --color-prettylights-syntax-markup-deleted-text: #82071e; --color-prettylights-syntax-markup-deleted-bg: #FFEBE9; --color-prettylights-syntax-markup-inserted-text: #116329; --color-prettylights-syntax-markup-inserted-bg: #dafbe1; --color-prettylights-syntax-markup-changed-text: #953800; --color-prettylights-syntax-markup-changed-bg: #ffd8b5; --color-prettylights-syntax-markup-ignored-text: #eaeef2; --color-prettylights-syntax-markup-ignored-bg: #0550ae; --color-prettylights-syntax-meta-diff-range: #8250df; --color-prettylights-syntax-brackethighlighter-angle: #57606a; --color-prettylights-syntax-sublimelinter-gutter-mark: #8c959f; --color-prettylights-syntax-constant-other-reference-link: #0a3069; --color-fg-default: #24292f; --color-fg-muted: #57606a; --color-fg-subtle: #6e7781; --color-canvas-default: #ffffff; --color-canvas-subtle: #f6f8fa; --color-border-default: #d0d7de; --color-border-muted: hsla(210,18%,87%,1); --color-neutral-muted: rgba(175,184,193,0.2); --color-accent-fg: #0969da; --color-accent-emphasis: #0969da; --color-attention-subtle: #fff8c5; --color-danger-fg: #cf222e; } markdown-style[theme*='dark'] { --color-prettylights-syntax-comment: #8b949e; --color-prettylights-syntax-constant: #79c0ff; --color-prettylights-syntax-entity: #d2a8ff; --color-prettylights-syntax-storage-modifier-import: #c9d1d9; --color-prettylights-syntax-entity-tag: #7ee787; --color-prettylights-syntax-keyword: #ff7b72; --color-prettylights-syntax-string: #a5d6ff; --color-prettylights-syntax-variable: #ffa657; --color-prettylights-syntax-brackethighlighter-unmatched: #f85149; --color-prettylights-syntax-invalid-illegal-text: #f0f6fc; --color-prettylights-syntax-invalid-illegal-bg: #8e1519; --color-prettylights-syntax-carriage-return-text: #f0f6fc; --color-prettylights-syntax-carriage-return-bg: #b62324; --color-prettylights-syntax-string-regexp: #7ee787; --color-prettylights-syntax-markup-list: #f2cc60; --color-prettylights-syntax-markup-heading: #1f6feb; --color-prettylights-syntax-markup-italic: #c9d1d9; --color-prettylights-syntax-markup-bold: #c9d1d9; --color-prettylights-syntax-markup-deleted-text: #ffdcd7; --color-prettylights-syntax-markup-deleted-bg: #67060c; --color-prettylights-syntax-markup-inserted-text: #aff5b4; --color-prettylights-syntax-markup-inserted-bg: #033a16; --color-prettylights-syntax-markup-changed-text: #ffdfb6; --color-prettylights-syntax-markup-changed-bg: #5a1e02; --color-prettylights-syntax-markup-ignored-text: #c9d1d9; --color-prettylights-syntax-markup-ignored-bg: #1158c7; --color-prettylights-syntax-meta-diff-range: #d2a8ff; --color-prettylights-syntax-brackethighlighter-angle: #8b949e; --color-prettylights-syntax-sublimelinter-gutter-mark: #484f58; --color-prettylights-syntax-constant-other-reference-link: #a5d6ff; --color-fg-default: #c9d1d9; --color-fg-muted: #8b949e; --color-fg-subtle: #484f58; --color-canvas-default: #0d1117; --color-canvas-subtle: #161b22; --color-border-default: #30363d; --color-border-muted: #21262d; --color-neutral-muted: rgba(110,118,129,0.4); --color-accent-fg: #58a6ff; --color-accent-emphasis: #1f6feb; --color-attention-subtle: rgba(187,128,9,0.15); --color-danger-fg: #f85149; } markdown-style { display: block; -webkit-text-size-adjust: 100%; font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji"; font-size: 16px; line-height: 1.5; word-wrap: break-word; color: var(--color-fg-default); background-color: var(--color-canvas-default); } markdown-style details, markdown-style figcaption, markdown-style figure { display: block; } markdown-style summary { display: list-item; } markdown-style [hidden] { display: none !important; } markdown-style a { background-color: transparent; color: var(--color-accent-fg); text-decoration: none; } markdown-style a:active, markdown-style a:hover { outline-width: 0; } markdown-style abbr[title] { border-bottom: none; text-decoration: underline dotted; } markdown-style b, markdown-style strong { font-weight: 600; } markdown-style dfn { font-style: italic; } markdown-style h1 { margin: .67em 0; font-weight: 600; padding-bottom: .3em; font-size: 2em; border-bottom: 1px solid var(--color-border-muted); } markdown-style mark { background-color: var(--color-attention-subtle); color: var(--color-text-primary); } markdown-style small { font-size: 90%; } markdown-style sub, markdown-style sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; } markdown-style sub { bottom: -0.25em; } markdown-style sup { top: -0.5em; } markdown-style img { border-style: none; max-width: 100%; box-sizing: content-box; background-color: var(--color-canvas-default); } markdown-style code, markdown-style kbd, markdown-style pre, markdown-style samp { font-family: monospace,monospace; font-size: 1em; } markdown-style figure { margin: 1em 40px; } markdown-style hr { box-sizing: content-box; overflow: hidden; background: transparent; border-bottom: 1px solid var(--color-border-muted); height: .25em; padding: 0; margin: 24px 0; background-color: var(--color-border-default); border: 0; } markdown-style input { font: inherit; margin: 0; overflow: visible; font-family: inherit; font-size: inherit; line-height: inherit; } markdown-style [type=button], markdown-style [type=reset], markdown-style [type=submit] { -webkit-appearance: button; } markdown-style [type=button]::-moz-focus-inner, markdown-style [type=reset]::-moz-focus-inner, markdown-style [type=submit]::-moz-focus-inner { border-style: none; padding: 0; } markdown-style [type=button]:-moz-focusring, markdown-style [type=reset]:-moz-focusring, markdown-style [type=submit]:-moz-focusring { outline: 1px dotted ButtonText; } markdown-style [type=checkbox], markdown-style [type=radio] { box-sizing: border-box; padding: 0; } markdown-style [type=number]::-webkit-inner-spin-button, markdown-style [type=number]::-webkit-outer-spin-button { height: auto; } markdown-style [type=search] { -webkit-appearance: textfield; outline-offset: -2px; } markdown-style [type=search]::-webkit-search-cancel-button, markdown-style [type=search]::-webkit-search-decoration { -webkit-appearance: none; } markdown-style ::-webkit-input-placeholder { color: inherit; opacity: .54; } markdown-style ::-webkit-file-upload-button { -webkit-appearance: button; font: inherit; } markdown-style a:hover { text-decoration: underline; } markdown-style hr::before { display: table; content: ""; } markdown-style hr::after { display: table; clear: both; content: ""; } markdown-style table { border-spacing: 0; border-collapse: collapse; display: block; width: max-content; max-width: 100%; overflow: auto; } markdown-style td, markdown-style th { padding: 0; } markdown-style details summary { cursor: pointer; } markdown-style details:not([open])>*:not(summary) { display: none !important; } markdown-style kbd { display: inline-block; padding: 3px 5px; font: 11px ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace; line-height: 10px; color: var(--color-fg-default); vertical-align: middle; background-color: var(--color-canvas-subtle); border: solid 1px var(--color-neutral-muted); border-bottom-color: var(--color-neutral-muted); border-radius: 6px; box-shadow: inset 0 -1px 0 var(--color-neutral-muted); } markdown-style h1, markdown-style h2, markdown-style h3, markdown-style h4, markdown-style h5, markdown-style h6 { margin-top: 24px; margin-bottom: 16px; font-weight: 600; line-height: 1.25; } markdown-style h2 { font-weight: 600; padding-bottom: .3em; font-size: 1.5em; border-bottom: 1px solid var(--color-border-muted); } markdown-style h3 { font-weight: 600; font-size: 1.25em; } markdown-style h4 { font-weight: 600; font-size: 1em; } markdown-style h5 { font-weight: 600; font-size: .875em; } markdown-style h6 { font-weight: 600; font-size: .85em; color: var(--color-fg-muted); } markdown-style p { margin-top: 0; margin-bottom: 10px; } markdown-style blockquote { margin: 0; padding: 0 1em; color: var(--color-fg-muted); border-left: .25em solid var(--color-border-default); } markdown-style ul, markdown-style ol { margin-top: 0; margin-bottom: 0; padding-left: 2em; } markdown-style ol ol, markdown-style ul ol { list-style-type: lower-roman; } markdown-style ul ul ol, markdown-style ul ol ol, markdown-style ol ul ol, markdown-style ol ol ol { list-style-type: lower-alpha; } markdown-style dd { margin-left: 0; } markdown-style tt, markdown-style code { font-family: ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace; font-size: 12px; } markdown-style pre { margin-top: 0; margin-bottom: 0; font-family: ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace; font-size: 12px; word-wrap: normal; } markdown-style .octicon { display: inline-block; overflow: visible !important; vertical-align: text-bottom; fill: currentColor; } markdown-style ::placeholder { color: var(--color-fg-subtle); opacity: 1; } markdown-style input::-webkit-outer-spin-button, markdown-style input::-webkit-inner-spin-button { margin: 0; -webkit-appearance: none; appearance: none; }
markdown-style .token.comment, markdown-style .token.prolog, markdown-style .token.doctype, markdown-style .token.cdata { color: var(--color-prettylights-syntax-comment); } markdown-style .token.namespace { opacity: 0.7; } markdown-style .token.tag, markdown-style .token.selector, markdown-style .token.constant, markdown-style .token.symbol, markdown-style .token.deleted { color: var(--color-prettylights-syntax-entity-tag); } markdown-style .token.maybe-class-name { color: var(--color-prettylights-syntax-variable); } markdown-style .token.property-access, markdown-style .token.operator, markdown-style .token.boolean, markdown-style .token.number, markdown-style .token.selector markdown-style .token.class, markdown-style .token.attr-name, markdown-style .token.string, markdown-style .token.char, markdown-style .token.builtin { color: var(--color-prettylights-syntax-constant); } markdown-style .token.deleted { color: var(--color-prettylights-syntax-markup-deleted-text); } markdown-style .token.property { color: var(--color-prettylights-syntax-constant); } markdown-style .token.punctuation { color: var(--color-prettylights-syntax-markup-bold); } markdown-style .token.function { color: var(--color-prettylights-syntax-entity); } markdown-style .code-line .token.deleted { background-color: var(--color-prettylights-syntax-markup-deleted-bg); } markdown-style .token.inserted { color: var(--color-prettylights-syntax-markup-inserted-text); } markdown-style .code-line .token.inserted { background-color: var(--color-prettylights-syntax-markup-inserted-bg); } markdown-style .token.variable { color: var(--color-prettylights-syntax-constant); } markdown-style .token.entity, markdown-style .token.url, .language-css markdown-style .token.string, .style markdown-style .token.string { color: var(--color-prettylights-syntax-string); } markdown-style .token.color, markdown-style .token.atrule, markdown-style .token.attr-value, markdown-style .token.function, markdown-style .token.class-name { color: var(--color-prettylights-syntax-string); } markdown-style .token.rule, markdown-style .token.regex, markdown-style .token.important, markdown-style .token.keyword { color: var(--color-prettylights-syntax-keyword); } markdown-style .token.coord { color: var(--color-prettylights-syntax-meta-diff-range); } markdown-style .token.important, markdown-style .token.bold { font-weight: bold; } markdown-style .token.italic { font-style: italic; } markdown-style .token.entity { cursor: help; }
markdown-style [data-catalyst] { display: block; } markdown-style g-emoji { font-family: "Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"; font-size: 1em; font-style: normal !important; font-weight: 400; line-height: 1; vertical-align: -0.075em; } markdown-style g-emoji img { width: 1em; height: 1em; } markdown-style::before { display: table; content: ""; } markdown-style::after { display: table; clear: both; content: ""; } markdown-style>*:first-child { margin-top: 0 !important; } markdown-style>*:last-child { margin-bottom: 0 !important; } markdown-style a:not([href]) { color: inherit; text-decoration: none; } markdown-style .absent { color: var(--color-danger-fg); } markdown-style .anchor { float: left; padding-right: 4px; margin-left: -20px; line-height: 1; } markdown-style .anchor:focus { outline: none; } markdown-style p, markdown-style blockquote, markdown-style ul, markdown-style ol, markdown-style dl, markdown-style table, markdown-style pre, markdown-style details { margin-top: 0; margin-bottom: 16px; } markdown-style blockquote>:first-child { margin-top: 0; } markdown-style blockquote>:last-child { margin-bottom: 0; } markdown-style sup>a::before { content: "["; } markdown-style sup>a::after { content: "]"; } markdown-style h1 .octicon-link, markdown-style h2 .octicon-link, markdown-style h3 .octicon-link, markdown-style h4 .octicon-link, markdown-style h5 .octicon-link, markdown-style h6 .octicon-link { color: var(--color-fg-default); vertical-align: middle; visibility: hidden; } markdown-style h1:hover .anchor, markdown-style h2:hover .anchor, markdown-style h3:hover .anchor, markdown-style h4:hover .anchor, markdown-style h5:hover .anchor, markdown-style h6:hover .anchor { text-decoration: none; } markdown-style h1:hover .anchor .octicon-link, markdown-style h2:hover .anchor .octicon-link, markdown-style h3:hover .anchor .octicon-link, markdown-style h4:hover .anchor .octicon-link, markdown-style h5:hover .anchor .octicon-link, markdown-style h6:hover .anchor .octicon-link { visibility: visible; } markdown-style h1 tt, markdown-style h1 code, markdown-style h2 tt, markdown-style h2 code, markdown-style h3 tt, markdown-style h3 code, markdown-style h4 tt, markdown-style h4 code, markdown-style h5 tt, markdown-style h5 code, markdown-style h6 tt, markdown-style h6 code { padding: 0 .2em; font-size: inherit; } markdown-style ul.no-list, markdown-style ol.no-list { padding: 0; list-style-type: none; } markdown-style ol[type="1"] { list-style-type: decimal; } markdown-style ol[type=a] { list-style-type: lower-alpha; } markdown-style ol[type=i] { list-style-type: lower-roman; } markdown-style div>ol:not([type]) { list-style-type: decimal; } markdown-style ul ul, markdown-style ul ol, markdown-style ol ol, markdown-style ol ul { margin-top: 0; margin-bottom: 0; } markdown-style li>p { margin-top: 16px; } markdown-style li+li { margin-top: .25em; } markdown-style dl { padding: 0; } markdown-style dl dt { padding: 0; margin-top: 16px; font-size: 1em; font-style: italic; font-weight: 600; } markdown-style dl dd { padding: 0 16px; margin-bottom: 16px; } markdown-style table th { font-weight: 600; } markdown-style table th, markdown-style table td { padding: 6px 13px; border: 1px solid var(--color-border-default); } markdown-style table tr { background-color: var(--color-canvas-default); border-top: 1px solid var(--color-border-muted); } markdown-style table tr:nth-child(2n) { background-color: var(--color-canvas-subtle); } markdown-style table img { background-color: transparent; } markdown-style img[align=right] { padding-left: 20px; } markdown-style img[align=left] { padding-right: 20px; } markdown-style .emoji { max-width: none; vertical-align: text-top; background-color: transparent; } markdown-style span.frame { display: block; overflow: hidden; } markdown-style span.frame>span { display: block; float: left; width: auto; padding: 7px; margin: 13px 0 0; overflow: hidden; border: 1px solid var(--color-border-default); } markdown-style span.frame span img { display: block; float: left; } markdown-style span.frame span span { display: block; padding: 5px 0 0; clear: both; color: var(--color-fg-default); } markdown-style span.align-center { display: block; overflow: hidden; clear: both; } markdown-style span.align-center>span { display: block; margin: 13px auto 0; overflow: hidden; text-align: center; } markdown-style span.align-center span img { margin: 0 auto; text-align: center; } markdown-style span.align-right { display: block; overflow: hidden; clear: both; } markdown-style span.align-right>span { display: block; margin: 13px 0 0; overflow: hidden; text-align: right; } markdown-style span.align-right span img { margin: 0; text-align: right; } markdown-style span.float-left { display: block; float: left; margin-right: 13px; overflow: hidden; } markdown-style span.float-left span { margin: 13px 0 0; } markdown-style span.float-right { display: block; float: right; margin-left: 13px; overflow: hidden; } markdown-style span.float-right>span { display: block; margin: 13px auto 0; overflow: hidden; text-align: right; } markdown-style code, markdown-style tt { padding: .2em .4em; margin: 0; font-size: 85%; background-color: var(--color-neutral-muted); border-radius: 6px; } markdown-style code br, markdown-style tt br { display: none; } markdown-style del code { text-decoration: inherit; } markdown-style pre code { font-size: 100%; } markdown-style pre>code { padding: 0; margin: 0; word-break: normal; white-space: pre; background: transparent; border: 0; } markdown-style .highlight { margin-bottom: 16px; } markdown-style .highlight pre { margin-bottom: 0; word-break: normal; } markdown-style .highlight pre, markdown-style pre { position: relative; padding: 16px; overflow: auto; font-size: 85%; line-height: 1.45; background-color: var(--color-canvas-subtle); border-radius: 6px; } markdown-style pre code, markdown-style pre tt { display: inline; max-width: auto; padding: 0; margin: 0; overflow: visible; line-height: inherit; word-wrap: normal; background-color: transparent; border: 0; } markdown-style .csv-data td, markdown-style .csv-data th { padding: 5px; overflow: hidden; font-size: 12px; line-height: 1; text-align: left; white-space: nowrap; } markdown-style .csv-data .blob-num { padding: 10px 8px 9px; text-align: right; background: var(--color-canvas-default); border: 0; } markdown-style .csv-data tr { border-top: 0; } markdown-style .csv-data th { font-weight: 600; background: var(--color-canvas-subtle); border-top: 0; } markdown-style .footnotes { font-size: 12px; color: var(--color-fg-muted); border-top: 1px solid var(--color-border-default); } markdown-style .footnotes ol { padding-left: 16px; } markdown-style .footnotes li { position: relative; } markdown-style .footnotes li:target::before { position: absolute; top: -8px; right: -8px; bottom: -8px; left: -24px; pointer-events: none; content: ""; border: 2px solid var(--color-accent-emphasis); border-radius: 6px; } markdown-style .footnotes li:target { color: var(--color-fg-default); } markdown-style .footnotes .data-footnote-backref g-emoji { font-family: monospace; } markdown-style .task-list-item { list-style-type: none; } markdown-style .task-list-item label { font-weight: 400; } markdown-style .task-list-item.enabled label { cursor: pointer; } markdown-style .task-list-item+.task-list-item { margin-top: 3px; } markdown-style .task-list-item .handle { display: none; } markdown-style .task-list-item-checkbox, markdown-style input[type="checkbox"] { margin: 0 .2em .25em -1.6em; vertical-align: middle; } markdown-style .contains-task-list:dir(rtl) .task-list-item-checkbox, markdown-style .contains-task-list:dir(rtl) input[type="checkbox"] { margin: 0 -1.6em .25em .2em; } markdown-style ::-webkit-calendar-picker-indicator { filter: invert(50%); }
</style>
<slot></slot>
`;
class MarkdownStyle extends HTMLElement {
    constructor() {
        super();
        this.shadow = this.attachShadow({ mode: 'open' });
        this.shadow.appendChild(__TEMPLATE__.content.cloneNode(true));
        const style = Array.prototype.slice
            .call(this.shadow.children)
            .find((item) => item.tagName === 'STYLE');
        if (style) {
            const id = '__MARKDOWN_STYLE__';
            const findStyle = document.getElementById(id);
            if (!findStyle) {
                style.id = id;
                document.head.append(style);
            }
        }
    }
    get theme() {
        const value = this.getAttribute('theme');
        return value === null ? '' : value;
    }
    set theme(name) {
        this.setAttribute('theme', name);
    }
    connectedCallback() {
        if (!this.theme) {
            const { colorMode } = document.documentElement.dataset;
            this.theme = colorMode;
            const observer = new MutationObserver((mutationsList, observer) => {
                this.theme = document.documentElement.dataset.colorMode;
            });
            observer.observe(document.documentElement, { attributes: true });
            window.matchMedia('(prefers-color-scheme: light)').onchange = (event) => {
                this.theme = event.matches ? 'light' : 'dark';
            };
            window.matchMedia('(prefers-color-scheme: dark)').onchange = (event) => {
                this.theme = event.matches ? 'dark' : 'light';
            };
        }
    }
}
customElements.define('markdown-style', MarkdownStyle);</script><markdown-style style="max-width: 960px; margin: 0 auto 60px auto; padding: 8px" class="markdown-body">
    <h2 id="centos7å®‰è£…kvmè™šæ‹Ÿæœºè¯¦è§£"><a class="anchor" aria-hidden="true" tabindex="-1" href="#centos7å®‰è£…kvmè™šæ‹Ÿæœºè¯¦è§£"><span class="octicon octicon-link"></span></a>CentOS7å®‰è£…KVMè™šæ‹Ÿæœºè¯¦è§£</h2>
    <p>
      <img src="img/kvmbanner-logo3.png" alt="">
    </p>
    <p>åŸºäº CentOS Linux release 7.2.1511 (Core) çš„ç¯å¢ƒä¸‹å‘½ä»¤è¡Œçš„æ–¹å¼å®‰è£…KVMçš„è¯¦ç»†è¿‡ç¨‹ã€‚</p>
    <h1 id="ç›®å½•"><a class="anchor" aria-hidden="true" tabindex="-1" href="#ç›®å½•"><span class="octicon octicon-link"></span></a>ç›®å½•</h1><!-- TOC -->
    <ul>
      <li><a href="#%E6%A3%80%E6%B5%8B%E6%98%AF%E5%90%A6%E6%94%AF%E6%8C%81kvm">æ£€æµ‹æ˜¯å¦æ”¯æŒKVM</a></li>
      <li><a href="#%E5%AE%89%E8%A3%85-kvm-%E7%8E%AF%E5%A2%83">å®‰è£… KVM ç¯å¢ƒ</a></li>
      <li><a href="#%E5%AE%89%E8%A3%85%E8%99%9A%E6%8B%9F%E6%9C%BA">å®‰è£…è™šæ‹Ÿæœº</a>
        <ul>
          <li><a href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%85%8D%E7%BD%AE%E7%B3%BB%E7%BB%9F">å‘½ä»¤è¡Œé…ç½®ç³»ç»Ÿ</a></li>
          <li><a href="#%E8%BF%9E%E6%8E%A5%E8%99%9A%E6%8B%9F%E6%9C%BA">è¿æ¥è™šæ‹Ÿæœº</a></li>
          <li><a href="#%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%85%B6%E5%AE%83%E7%AE%A1%E7%90%86">è™šæ‹Ÿæœºå…¶å®ƒç®¡ç†</a></li>
        </ul>
      </li>
      <li><a href="#%E9%85%8D%E7%BD%AE%E7%89%A9%E7%90%86%E6%9C%BA%E7%BD%91%E7%BB%9C">é…ç½®ç‰©ç†æœºç½‘ç»œ</a></li>
      <li><a href="#%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91">ç«¯å£è½¬å‘</a></li>
      <li><a href="#%E5%85%AC%E7%BD%91%E8%AE%BF%E9%97%AE%E8%99%9A%E6%8B%9F%E6%9C%BA">å…¬ç½‘è®¿é—®è™šæ‹Ÿæœº</a></li>
      <li><a href="#%E9%85%8D%E7%BD%AE%E5%AE%BF%E4%B8%BB%E6%9C%BA%E7%BD%91%E7%BB%9C">é…ç½®å®¿ä¸»æœºç½‘ç»œ</a>
        <ul>
          <li><a href="#bridge%E6%A8%A1%E5%BC%8F%E9%85%8D%E7%BD%AE">Bridgeæ¨¡å¼é…ç½®</a></li>
          <li><a href="#nat%E6%A8%A1%E5%BC%8F">NATæ¨¡å¼</a></li>
          <li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89nat%E7%BD%91%E7%BB%9C">è‡ªå®šä¹‰NATç½‘ç»œ</a></li>
          <li><a href="#%E9%80%80%E5%87%BA%E8%99%9A%E6%8B%9F%E6%9C%BA">é€€å‡ºè™šæ‹Ÿæœº</a></li>
        </ul>
      </li>
      <li><a href="#%E4%BF%AE%E6%94%B9%E8%99%9A%E6%8B%9F%E6%9C%BA%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF">ä¿®æ”¹è™šæ‹Ÿæœºé…ç½®ä¿¡æ¯</a></li>
      <li><a href="#%E5%85%8B%E9%9A%86%E8%99%9A%E6%8B%9F%E6%9C%BA">å…‹éš†è™šæ‹Ÿæœº</a></li>
      <li><a href="#%E9%80%9A%E8%BF%87%E9%95%9C%E5%83%8F%E5%88%9B%E5%BB%BA%E8%99%9A%E6%8B%9F%E6%9C%BA">é€šè¿‡é•œåƒåˆ›å»ºè™šæ‹Ÿæœº</a></li>
      <li><a href="#%E5%8A%A8%E6%80%81%E6%9B%B4%E6%94%B9cpu%E6%95%B0%E9%87%8F%E5%92%8C%E5%86%85%E5%AD%98%E5%A4%A7%E5%B0%8F">åŠ¨æ€æ›´æ”¹cpuæ•°é‡å’Œå†…å­˜å¤§å°</a></li>
      <li><a href="#%E6%8C%82%E8%BD%BD%E7%A3%81%E7%9B%98">æŒ‚è½½ç£ç›˜</a>
        <ul>
          <li><a href="#%E5%88%9B%E5%BB%BA%E7%A3%81%E7%9B%98">åˆ›å»ºç£ç›˜</a></li>
        </ul>
      </li>
      <li><a href="#%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E8%AF%B4%E6%98%8E">å¸¸ç”¨å‘½ä»¤è¯´æ˜</a>
        <ul>
          <li><a href="#virt-install">virt-install</a></li>
          <li><a href="#virsh">virsh</a></li>
        </ul>
      </li>
      <li><a href="#%E9%94%99%E8%AF%AF%E8%A7%A3%E5%86%B3">é”™è¯¯è§£å†³</a></li>
      <li><a href="#%E5%8F%82%E8%80%83%E6%96%87%E7%AB%A0">å‚è€ƒæ–‡ç« </a></li>
    </ul><!-- /TOC -->
    <h2 id="æ£€æµ‹æ˜¯å¦æ”¯æŒkvm"><a class="anchor" aria-hidden="true" tabindex="-1" href="#æ£€æµ‹æ˜¯å¦æ”¯æŒkvm"><span class="octicon octicon-link"></span></a>æ£€æµ‹æ˜¯å¦æ”¯æŒKVM</h2>
    <p>KVM æ˜¯åŸºäº x86 è™šæ‹ŸåŒ–æ‰©å±•(Intel VT æˆ–è€… AMD-V) æŠ€æœ¯çš„è™šæ‹Ÿæœºè½¯ä»¶ï¼Œæ‰€ä»¥æŸ¥çœ‹ CPU æ˜¯å¦æ”¯æŒ VT æŠ€æœ¯ï¼Œå°±å¯ä»¥åˆ¤æ–­æ˜¯å¦æ”¯æŒKVMã€‚æœ‰è¿”å›ç»“æœï¼Œå¦‚æœç»“æœä¸­æœ‰vmxï¼ˆIntelï¼‰æˆ–svm(AMD)å­—æ ·ï¼Œå°±è¯´æ˜CPUçš„æ”¯æŒçš„ã€‚</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">cat</span> /proc/cpuinfo <span class="token operator">|</span> <span class="token function">egrep</span> <span class="token string">'vmx|svm'</span>
</span><span class="code-line">
</span><span class="code-line">flags   <span class="token builtin class-name">:</span> fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx pdpe1gb rdtscp lm constant_tsc arch_perfmon pebs bts rep_good nopl xtopology nonstop_tsc aperfmperf eagerfpu pni pclmulqdq dtes64 monitor ds_cpl vmx smx est tm2 ssse3 fma cx16 xtpr pdcm pcid dca sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand lahf_lm abm arat epb pln pts dtherm tpr_shadow vnmi flexpriority ept vpid fsgsbase tsc_adjust bmi1 avx2 smep bmi2 erms invpcid cqm xsaveopt cqm_llc cqm_occup_llc
</span></code><div onclick="copied(this)" data-code="cat /proc/cpuinfo | egrep &#x27;vmx|svm&#x27;

flags   : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx pdpe1gb rdtscp lm constant_tsc arch_perfmon pebs bts rep_good nopl xtopology nonstop_tsc aperfmperf eagerfpu pni pclmulqdq dtes64 monitor ds_cpl vmx smx est tm2 ssse3 fma cx16 xtpr pdcm pcid dca sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave avx f16c rdrand lahf_lm abm arat epb pln pts dtherm tpr_shadow vnmi flexpriority ept vpid fsgsbase tsc_adjust bmi1 avx2 smep bmi2 erms invpcid cqm xsaveopt cqm_llc cqm_occup_llc
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>å…³é—­SELinuxï¼Œå°† /etc/sysconfig/selinux ä¸­çš„ <code>SELinux=enforcing</code> ä¿®æ”¹ä¸º <code>SELinux=disabled</code></p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">vi</span> /etc/sysconfig/selinux
</span></code><div onclick="copied(this)" data-code="vi /etc/sysconfig/selinux
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="å®‰è£…-kvm-ç¯å¢ƒ"><a class="anchor" aria-hidden="true" tabindex="-1" href="#å®‰è£…-kvm-ç¯å¢ƒ"><span class="octicon octicon-link"></span></a>å®‰è£… KVM ç¯å¢ƒ</h2>
    <p>é€šè¿‡ <a href="https://jaywcjlove.github.io/linux-command/c/yum.html">yum</a> å®‰è£… kvm åŸºç¡€åŒ…å’Œç®¡ç†å·¥å…·</p>
    <p>kvmç›¸å…³å®‰è£…åŒ…åŠå…¶ä½œç”¨:</p>
    <ul>
      <li><code>qemu-kvm</code> ä¸»è¦çš„KVMç¨‹åºåŒ…</li>
      <li><code>python-virtinst</code> åˆ›å»ºè™šæ‹Ÿæœºæ‰€éœ€è¦çš„å‘½ä»¤è¡Œå·¥å…·å’Œç¨‹åºåº“</li>
      <li><code>virt-manager</code> GUIè™šæ‹Ÿæœºç®¡ç†å·¥å…·</li>
      <li><code>virt-top</code> è™šæ‹Ÿæœºç»Ÿè®¡å‘½ä»¤</li>
      <li><code>virt-viewer</code> GUIè¿æ¥ç¨‹åºï¼Œè¿æ¥åˆ°å·²é…ç½®å¥½çš„è™šæ‹Ÿæœº</li>
      <li><code>libvirt</code> Cè¯­è¨€å·¥å…·åŒ…ï¼Œæä¾›libvirtæœåŠ¡</li>
      <li><code>libvirt-client</code> ä¸ºè™šæ‹Ÿå®¢æˆ·æœºæä¾›çš„Cè¯­è¨€å·¥å…·åŒ…</li>
      <li><code>virt-install</code> åŸºäºlibvirtæœåŠ¡çš„è™šæ‹Ÿæœºåˆ›å»ºå‘½ä»¤</li>
      <li><code>bridge-utils</code> åˆ›å»ºå’Œç®¡ç†æ¡¥æ¥è®¾å¤‡çš„å·¥å…·</li>
    </ul>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># å®‰è£… kvm </span>
</span><span class="code-line"><span class="token comment"># ------------------------</span>
</span><span class="code-line"><span class="token comment"># yum -y install qemu-kvm python-virtinst libvirt libvirt-python virt-manager libguestfs-tools bridge-utils virt-install</span>
</span><span class="code-line">
</span><span class="code-line">yum -y <span class="token function">install</span> qemu-kvm libvirt virt-install bridge-utils 
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># é‡å¯å®¿ä¸»æœºï¼Œä»¥ä¾¿åŠ è½½ kvm æ¨¡å—</span>
</span><span class="code-line"><span class="token comment"># ------------------------</span>
</span><span class="code-line"><span class="token function">reboot</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># æŸ¥çœ‹KVMæ¨¡å—æ˜¯å¦è¢«æ­£ç¡®åŠ è½½</span>
</span><span class="code-line"><span class="token comment"># ------------------------</span>
</span><span class="code-line">lsmod <span class="token operator">|</span> <span class="token function">grep</span> kvm
</span><span class="code-line">
</span><span class="code-line">kvm_intel             <span class="token number">162153</span>  <span class="token number">0</span>
</span><span class="code-line">kvm                   <span class="token number">525259</span>  <span class="token number">1</span> kvm_intel
</span><span class="code-line">
</span></code><div onclick="copied(this)" data-code="# å®‰è£… kvm 
# ------------------------
# yum -y install qemu-kvm python-virtinst libvirt libvirt-python virt-manager libguestfs-tools bridge-utils virt-install

yum -y install qemu-kvm libvirt virt-install bridge-utils 

# é‡å¯å®¿ä¸»æœºï¼Œä»¥ä¾¿åŠ è½½ kvm æ¨¡å—
# ------------------------
reboot

# æŸ¥çœ‹KVMæ¨¡å—æ˜¯å¦è¢«æ­£ç¡®åŠ è½½
# ------------------------
lsmod | grep kvm

kvm_intel             162153  0
kvm                   525259  1 kvm_intel

" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>å¼€å¯kvmæœåŠ¡ï¼Œå¹¶ä¸”è®¾ç½®å…¶å¼€æœºè‡ªåŠ¨å¯åŠ¨</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">systemctl start libvirtd
</span><span class="code-line">systemctl <span class="token builtin class-name">enable</span> libvirtd
</span></code><div onclick="copied(this)" data-code="systemctl start libvirtd
systemctl enable libvirtd
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>æŸ¥çœ‹çŠ¶æ€æ“ä½œç»“æœï¼Œå¦‚<code>Active: active (running)</code>ï¼Œè¯´æ˜è¿è¡Œæƒ…å†µè‰¯å¥½</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">systemctl status libvirtd
</span><span class="code-line">systemctl is-enabled libvirtd
</span><span class="code-line">
</span><span class="code-line">â— libvirtd.service - Virtualization daemon
</span><span class="code-line">   Loaded: loaded <span class="token punctuation">(</span>/usr/lib/systemd/system/libvirtd.service<span class="token punctuation">;</span> enabled<span class="token punctuation">;</span> vendor preset: enabled<span class="token punctuation">)</span>
</span><span class="code-line">   Active: active <span class="token punctuation">(</span>running<span class="token punctuation">)</span> since äºŒ <span class="token number">2001</span>-01-02 <span class="token number">11</span>:29:53 CST<span class="token punctuation">;</span> 1h 41min ago
</span><span class="code-line">     Docs: man:libvirtd<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>
</span><span class="code-line">           http://libvirt.org
</span></code><div onclick="copied(this)" data-code="systemctl status libvirtd
systemctl is-enabled libvirtd

â— libvirtd.service - Virtualization daemon
   Loaded: loaded (/usr/lib/systemd/system/libvirtd.service; enabled; vendor preset: enabled)
   Active: active (running) since äºŒ 2001-01-02 11:29:53 CST; 1h 41min ago
     Docs: man:libvirtd(8)
           http://libvirt.org
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="å®‰è£…è™šæ‹Ÿæœº"><a class="anchor" aria-hidden="true" tabindex="-1" href="#å®‰è£…è™šæ‹Ÿæœº"><span class="octicon octicon-link"></span></a>å®‰è£…è™šæ‹Ÿæœº</h2>
    <p>å®‰è£…å‰è¦è®¾ç½®ç¯å¢ƒè¯­è¨€ä¸ºè‹±æ–‡<code>LANG="en_US.UTF-8"</code>ï¼Œå¦‚æœæ˜¯ä¸­æ–‡çš„è¯æŸäº›ç‰ˆæœ¬å¯èƒ½ä¼šæŠ¥é”™ã€‚<code>CentOS 7</code> åœ¨è¿™é‡Œä¿®æ”¹ <code>/etc/locale.conf</code>ã€‚</p>
    <p>kvmåˆ›å»ºè™šæ‹Ÿæœºï¼Œç‰¹åˆ«æ³¨æ„<code>.iso</code>é•œåƒæ–‡ä»¶ä¸€å®šæ”¾åˆ°<code>/home</code> æˆ–è€…æ ¹ç›®å½•é‡æ–°åˆ›å»ºç›®å½•ï¼Œä¸ç„¶ä¼šå› ä¸ºæƒé™æŠ¥é”™ï¼Œæ— æ³•åˆ›å»ºè™šæ‹Ÿæœºã€‚</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">virt-install <span class="token punctuation">\</span>
</span><span class="code-line">--virt-type<span class="token operator">=</span>kvm <span class="token punctuation">\</span>
</span><span class="code-line">--name<span class="token operator">=</span>centos78 <span class="token punctuation">\</span>
</span><span class="code-line">--vcpus<span class="token operator">=</span><span class="token number">2</span> <span class="token punctuation">\</span>
</span><span class="code-line">--memory<span class="token operator">=</span><span class="token number">4096</span> <span class="token punctuation">\</span>
</span><span class="code-line">--location<span class="token operator">=</span>/tmp/CentOS-7-x86_64-Minimal-1511.iso <span class="token punctuation">\</span>
</span><span class="code-line">--disk <span class="token assign-left variable">path</span><span class="token operator">=</span>/home/vms/centos78.qcow2,size<span class="token operator">=</span><span class="token number">40</span>,format<span class="token operator">=</span>qcow2 <span class="token punctuation">\</span>
</span><span class="code-line">--network <span class="token assign-left variable">bridge</span><span class="token operator">=</span>br0 <span class="token punctuation">\</span>
</span><span class="code-line">--graphics none <span class="token punctuation">\</span>
</span><span class="code-line">--extra-args<span class="token operator">=</span><span class="token string">'console=ttyS0'</span> <span class="token punctuation">\</span>
</span><span class="code-line">--force
</span><span class="code-line"><span class="token comment"># ------------------------</span>
</span><span class="code-line">virt-install --virt-type<span class="token operator">=</span>kvm --name<span class="token operator">=</span>centos88 --vcpus<span class="token operator">=</span><span class="token number">2</span> --memory<span class="token operator">=</span><span class="token number">4096</span> --location<span class="token operator">=</span>/tmp/CentOS-7-x86_64-Minimal-1511.iso --disk <span class="token assign-left variable">path</span><span class="token operator">=</span>/home/vms/centos88.qcow2,size<span class="token operator">=</span><span class="token number">40</span>,format<span class="token operator">=</span>qcow2 --network <span class="token assign-left variable">bridge</span><span class="token operator">=</span>br0 --graphics none --extra-args<span class="token operator">=</span><span class="token string">'console=ttyS0'</span> --force
</span></code><div onclick="copied(this)" data-code="virt-install \
--virt-type=kvm \
--name=centos78 \
--vcpus=2 \
--memory=4096 \
--location=/tmp/CentOS-7-x86_64-Minimal-1511.iso \
--disk path=/home/vms/centos78.qcow2,size=40,format=qcow2 \
--network bridge=br0 \
--graphics none \
--extra-args=&#x27;console=ttyS0&#x27; \
--force
# ------------------------
virt-install --virt-type=kvm --name=centos88 --vcpus=2 --memory=4096 --location=/tmp/CentOS-7-x86_64-Minimal-1511.iso --disk path=/home/vms/centos88.qcow2,size=40,format=qcow2 --network bridge=br0 --graphics none --extra-args=&#x27;console=ttyS0&#x27; --force
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="å‘½ä»¤è¡Œé…ç½®ç³»ç»Ÿ"><a class="anchor" aria-hidden="true" tabindex="-1" href="#å‘½ä»¤è¡Œé…ç½®ç³»ç»Ÿ"><span class="octicon octicon-link"></span></a>å‘½ä»¤è¡Œé…ç½®ç³»ç»Ÿ</h3>
    <p>ä¸Šé¢åˆ›å»ºè™šæ‹Ÿæœºå‘½ä»¤æœ€ç»ˆéœ€è¦ä½ é…ç½®ç³»ç»ŸåŸºç¡€è®¾ç½®ï¼Œå¸¦ <code>[!]</code> åŸºæœ¬éƒ½æ˜¯è¦é…ç½®çš„ï¼ŒæŒ‰ç…§é¡ºåºå¾€ä¸‹é…ç½®ï¼ŒæŒ‰å¯¹ç”¨çš„æ•°å­—ä»¥æ­¤è¿›è¡Œè®¾ç½®ã€‚</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">
</span><span class="code-line">Installation
</span><span class="code-line">
</span><span class="code-line"> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>x<span class="token punctuation">]</span> Language settings                 <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token operator">!</span><span class="token punctuation">]</span> Timezone settings
</span><span class="code-line">        <span class="token punctuation">(</span>English <span class="token punctuation">(</span>United States<span class="token punctuation">))</span>                <span class="token punctuation">(</span>Timezone is not set.<span class="token punctuation">)</span>
</span><span class="code-line"> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token operator">!</span><span class="token punctuation">]</span> Installation <span class="token builtin class-name">source</span>               <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token operator">!</span><span class="token punctuation">]</span> Software selection
</span><span class="code-line">        <span class="token punctuation">(</span>Processing<span class="token punctuation">..</span>.<span class="token punctuation">)</span>                          <span class="token punctuation">(</span>Processing<span class="token punctuation">..</span>.<span class="token punctuation">)</span>
</span><span class="code-line"> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token operator">!</span><span class="token punctuation">]</span> Installation Destination          <span class="token number">6</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>x<span class="token punctuation">]</span> Kdump
</span><span class="code-line">        <span class="token punctuation">(</span>No disks selected<span class="token punctuation">)</span>                      <span class="token punctuation">(</span>Kdump is enabled<span class="token punctuation">)</span>
</span><span class="code-line"> <span class="token number">7</span><span class="token punctuation">)</span> <span class="token punctuation">[</span> <span class="token punctuation">]</span> Network configuration             <span class="token number">8</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token operator">!</span><span class="token punctuation">]</span> Root password
</span><span class="code-line">        <span class="token punctuation">(</span>Not connected<span class="token punctuation">)</span>                          <span class="token punctuation">(</span>Password is not set.<span class="token punctuation">)</span>
</span><span class="code-line"> <span class="token number">9</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token operator">!</span><span class="token punctuation">]</span> User creation
</span><span class="code-line">        <span class="token punctuation">(</span>No user will be created<span class="token punctuation">)</span>
</span><span class="code-line">  Please <span class="token function">make</span> your choice from above <span class="token punctuation">[</span><span class="token string">'q'</span> to quit <span class="token operator">|</span> <span class="token string">'b'</span> to begin installation <span class="token operator">|</span>
</span><span class="code-line">  <span class="token string">'r'</span> to refresh<span class="token punctuation">]</span>:
</span></code><div onclick="copied(this)" data-code="
Installation

 1) [x] Language settings                 2) [!] Timezone settings
        (English (United States))                (Timezone is not set.)
 3) [!] Installation source               4) [!] Software selection
        (Processing...)                          (Processing...)
 5) [!] Installation Destination          6) [x] Kdump
        (No disks selected)                      (Kdump is enabled)
 7) [ ] Network configuration             8) [!] Root password
        (Not connected)                          (Password is not set.)
 9) [!] User creation
        (No user will be created)
  Please make your choice from above [&#x27;q&#x27; to quit | &#x27;b&#x27; to begin installation |
  &#x27;r&#x27; to refresh]:
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <ol start="2">
      <li>Timezone settings æ—¶åŒºè®¾ç½®é€‰æ‹© <code>5) Asiaäºšæ´²</code>ï¼Œå†é€‰æ‹©åŸå¸‚ <code>62) Shanghaiä¸Šæµ·</code></li>
    </ol>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">Available regions
</span><span class="code-line"> <span class="token number">1</span><span class="token punctuation">)</span>  Africa                 <span class="token number">6</span><span class="token punctuation">)</span>  Atlantic              <span class="token number">10</span><span class="token punctuation">)</span>  Pacific
</span><span class="code-line"> <span class="token number">2</span><span class="token punctuation">)</span>  America                <span class="token number">7</span><span class="token punctuation">)</span>  Australia             <span class="token number">11</span><span class="token punctuation">)</span>  US
</span><span class="code-line"> <span class="token number">3</span><span class="token punctuation">)</span>  Antarctica             <span class="token number">8</span><span class="token punctuation">)</span>  Europe                <span class="token number">12</span><span class="token punctuation">)</span>  Etc
</span><span class="code-line"> <span class="token number">4</span><span class="token punctuation">)</span>  Arctic                 <span class="token number">9</span><span class="token punctuation">)</span>  Indian
</span><span class="code-line"> <span class="token number">5</span><span class="token punctuation">)</span>  Asia
</span><span class="code-line">Please <span class="token keyword">select</span> the timezone.
</span><span class="code-line">Use numbers or <span class="token builtin class-name">type</span> names directly <span class="token punctuation">[</span>b to region list, q to quit<span class="token punctuation">]</span>: <span class="token number">5</span>
</span><span class="code-line">--------------------
</span><span class="code-line">
</span><span class="code-line"> <span class="token number">8</span><span class="token punctuation">)</span>  Baghdad               <span class="token number">35</span><span class="token punctuation">)</span>  Kathmandu             <span class="token number">61</span><span class="token punctuation">)</span>  Seoul
</span><span class="code-line"> <span class="token number">9</span><span class="token punctuation">)</span>  Bahrain               <span class="token number">36</span><span class="token punctuation">)</span>  Khandyga              <span class="token number">62</span><span class="token punctuation">)</span>  Shanghai
</span><span class="code-line"><span class="token number">10</span><span class="token punctuation">)</span>  Baku                  <span class="token number">37</span><span class="token punctuation">)</span>  Kolkata               <span class="token number">63</span><span class="token punctuation">)</span>  Singapore
</span><span class="code-line"><span class="token number">26</span><span class="token punctuation">)</span>  Hong_Kong             <span class="token number">53</span><span class="token punctuation">)</span>  Pontianak
</span><span class="code-line"><span class="token number">27</span><span class="token punctuation">)</span>  Hovd
</span><span class="code-line">Please <span class="token keyword">select</span> the timezone.
</span><span class="code-line">Use numbers or <span class="token builtin class-name">type</span> names directly <span class="token punctuation">[</span>b to region list, q to quit<span class="token punctuation">]</span>: <span class="token number">62</span>
</span><span class="code-line">
</span></code><div onclick="copied(this)" data-code="Available regions
 1)  Africa                 6)  Atlantic              10)  Pacific
 2)  America                7)  Australia             11)  US
 3)  Antarctica             8)  Europe                12)  Etc
 4)  Arctic                 9)  Indian
 5)  Asia
Please select the timezone.
Use numbers or type names directly [b to region list, q to quit]: 5
--------------------

 8)  Baghdad               35)  Kathmandu             61)  Seoul
 9)  Bahrain               36)  Khandyga              62)  Shanghai
10)  Baku                  37)  Kolkata               63)  Singapore
26)  Hong_Kong             53)  Pontianak
27)  Hovd
Please select the timezone.
Use numbers or type names directly [b to region list, q to quit]: 62

" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <ol start="3">
      <li>Installation source å®‰è£…æºè¾“å…¥æ•°å­—<code>2</code></li>
    </ol>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">Choose an installation <span class="token builtin class-name">source</span> type.
</span><span class="code-line"> <span class="token number">1</span><span class="token punctuation">)</span>  CD/DVD
</span><span class="code-line"> <span class="token number">2</span><span class="token punctuation">)</span>  <span class="token builtin class-name">local</span> ISO <span class="token function">file</span>
</span><span class="code-line"> <span class="token number">3</span><span class="token punctuation">)</span>  Network
</span><span class="code-line">  Please <span class="token function">make</span> your choice from above <span class="token punctuation">[</span><span class="token string">'q'</span> to quit <span class="token operator">|</span> <span class="token string">'c'</span> to <span class="token builtin class-name">continue</span> <span class="token operator">|</span>
</span><span class="code-line">  <span class="token string">'r'</span> to refresh<span class="token punctuation">]</span>: <span class="token number">2</span>
</span></code><div onclick="copied(this)" data-code="Choose an installation source type.
 1)  CD/DVD
 2)  local ISO file
 3)  Network
  Please make your choice from above [&#x27;q&#x27; to quit | &#x27;c&#x27; to continue |
  &#x27;r&#x27; to refresh]: 2
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <ol start="4">
      <li>Software selection è½¯ä»¶é€‰æ‹©</li>
    </ol>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">Base environment
</span><span class="code-line">Software selection
</span><span class="code-line">
</span><span class="code-line">Base environment
</span><span class="code-line">
</span><span class="code-line"> <span class="token number">1</span><span class="token punctuation">)</span>  <span class="token punctuation">[</span>x<span class="token punctuation">]</span> Minimal Install
</span><span class="code-line">  Please <span class="token function">make</span> your choice from above <span class="token punctuation">[</span><span class="token string">'q'</span> to quit <span class="token operator">|</span> <span class="token string">'c'</span> to <span class="token builtin class-name">continue</span> <span class="token operator">|</span>
</span><span class="code-line">  <span class="token string">'r'</span> to refresh<span class="token punctuation">]</span>:
</span></code><div onclick="copied(this)" data-code="Base environment
Software selection

Base environment

 1)  [x] Minimal Install
  Please make your choice from above [&#x27;q&#x27; to quit | &#x27;c&#x27; to continue |
  &#x27;r&#x27; to refresh]:
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <ol start="5">
      <li>Installation Destination å®‰è£…ç›®çš„åœ°</li>
    </ol>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">Installation Destination
</span><span class="code-line">
</span><span class="code-line"><span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token builtin class-name">:</span> <span class="token number">40</span> GiB <span class="token punctuation">(</span>vda<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token number">1</span> disk selected<span class="token punctuation">;</span> <span class="token number">40</span> GiB capacity<span class="token punctuation">;</span> <span class="token number">40</span> GiB <span class="token function">free</span> <span class="token punctuation">..</span>.
</span><span class="code-line">
</span><span class="code-line">  Please <span class="token function">make</span> your choice from above <span class="token punctuation">[</span><span class="token string">'q'</span> to quit <span class="token operator">|</span> <span class="token string">'c'</span> to <span class="token builtin class-name">continue</span> <span class="token operator">|</span>
</span><span class="code-line">  <span class="token string">'r'</span> to refresh<span class="token punctuation">]</span>: c
</span><span class="code-line">
</span><span class="code-line">
</span><span class="code-line">Autopartitioning Options è‡ªåŠ¨åˆ†åŒºé€‰é¡¹
</span><span class="code-line">
</span><span class="code-line"><span class="token punctuation">[</span> <span class="token punctuation">]</span> <span class="token number">1</span><span class="token punctuation">)</span> Replace Existing Linux system<span class="token punctuation">(</span>s<span class="token punctuation">)</span> æ›¿æ¢ç°æœ‰çš„Linuxç³»ç»Ÿ
</span><span class="code-line">
</span><span class="code-line"><span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token number">2</span><span class="token punctuation">)</span> Use All Space ä½¿ç”¨æ‰€æœ‰ç©ºé—´
</span><span class="code-line">
</span><span class="code-line"><span class="token punctuation">[</span> <span class="token punctuation">]</span> <span class="token number">3</span><span class="token punctuation">)</span> Use Free Space ä½¿ç”¨å¯ç”¨ç©ºé—´
</span><span class="code-line">
</span><span class="code-line"><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
</span><span class="code-line">Partition Scheme Options åˆ†åŒºæ–¹æ¡ˆé€‰é¡¹
</span><span class="code-line">
</span><span class="code-line"><span class="token punctuation">[</span> <span class="token punctuation">]</span> <span class="token number">1</span><span class="token punctuation">)</span> Standard Partition æ ‡å‡†åˆ†åŒº
</span><span class="code-line">
</span><span class="code-line"><span class="token punctuation">[</span> <span class="token punctuation">]</span> <span class="token number">2</span><span class="token punctuation">)</span> Btrfs Btrfs
</span><span class="code-line">
</span><span class="code-line"><span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token number">3</span><span class="token punctuation">)</span> LVM LVM<span class="token punctuation">(</span>é€»è¾‘å·ç®¡ç†<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token punctuation">[</span> <span class="token punctuation">]</span> <span class="token number">4</span><span class="token punctuation">)</span> LVM Thin Provisioning ç²¾ç®€é…ç½®
</span><span class="code-line">
</span><span class="code-line">Select a partition scheme configuration.
</span><span class="code-line">
</span><span class="code-line">  Please <span class="token function">make</span> your choice from above <span class="token punctuation">[</span><span class="token string">'q'</span> to quit <span class="token operator">|</span> <span class="token string">'c'</span> to <span class="token builtin class-name">continue</span> <span class="token operator">|</span>
</span><span class="code-line">  <span class="token string">'r'</span> to refresh<span class="token punctuation">]</span>: c
</span><span class="code-line">
</span></code><div onclick="copied(this)" data-code="Installation Destination

[x] 1) : 40 GiB (vda)

1 disk selected; 40 GiB capacity; 40 GiB free ...

  Please make your choice from above [&#x27;q&#x27; to quit | &#x27;c&#x27; to continue |
  &#x27;r&#x27; to refresh]: c


Autopartitioning Options è‡ªåŠ¨åˆ†åŒºé€‰é¡¹

[ ] 1) Replace Existing Linux system(s) æ›¿æ¢ç°æœ‰çš„Linuxç³»ç»Ÿ

[x] 2) Use All Space ä½¿ç”¨æ‰€æœ‰ç©ºé—´

[ ] 3) Use Free Space ä½¿ç”¨å¯ç”¨ç©ºé—´

================================================================================
Partition Scheme Options åˆ†åŒºæ–¹æ¡ˆé€‰é¡¹

[ ] 1) Standard Partition æ ‡å‡†åˆ†åŒº

[ ] 2) Btrfs Btrfs

[x] 3) LVM LVM(é€»è¾‘å·ç®¡ç†)

[ ] 4) LVM Thin Provisioning ç²¾ç®€é…ç½®

Select a partition scheme configuration.

  Please make your choice from above [&#x27;q&#x27; to quit | &#x27;c&#x27; to continue |
  &#x27;r&#x27; to refresh]: c

" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>æ­¤å¤„ä¹Ÿå¯ä»¥åªè®¾ç½® <code>Root å¯†ç </code>å’Œ<code>Installation Destination å®‰è£…ç›®çš„åœ°</code>å…¶å®ƒè¿›å…¥ç³»ç»Ÿè®¾ç½®æ¯”å¦‚æ—¶åŒºè®¾ç½®å¦‚ä¸‹ï¼š</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token builtin class-name">echo</span> <span class="token string">"TZ='Asia/Shanghai'; export TZ"</span> <span class="token operator">>></span> /etc/profile
</span></code><div onclick="copied(this)" data-code="echo &#x22;TZ=&#x27;Asia/Shanghai&#x27;; export TZ&#x22; >> /etc/profile
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="è¿æ¥è™šæ‹Ÿæœº"><a class="anchor" aria-hidden="true" tabindex="-1" href="#è¿æ¥è™šæ‹Ÿæœº"><span class="octicon octicon-link"></span></a>è¿æ¥è™šæ‹Ÿæœº</h3>
    <p>é€šè¿‡ <code>virsh console &#x3C;è™šæ‹Ÿæœºåç§°></code> å‘½ä»¤æ¥è¿æ¥è™šæ‹Ÿæœº</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># æŸ¥çœ‹è™šæ‹Ÿæœº</span>
</span><span class="code-line"><span class="token function">virsh</span> list              <span class="token comment"># æŸ¥çœ‹åœ¨è¿è¡Œçš„è™šæ‹Ÿæœº</span>
</span><span class="code-line"><span class="token function">virsh</span> list --all         <span class="token comment"># æŸ¥çœ‹æ‰€æœ‰è™šæ‹Ÿæœº</span>
</span><span class="code-line">
</span><span class="code-line"> Id    Name                           State
</span><span class="code-line">----------------------------------------------------
</span><span class="code-line"> <span class="token number">7</span>     centos72                       running
</span></code><div onclick="copied(this)" data-code="# æŸ¥çœ‹è™šæ‹Ÿæœº
virsh list              # æŸ¥çœ‹åœ¨è¿è¡Œçš„è™šæ‹Ÿæœº
virsh list --all         # æŸ¥çœ‹æ‰€æœ‰è™šæ‹Ÿæœº

 Id    Name                           State
----------------------------------------------------
 7     centos72                       running
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>è¿æ¥è™šæ‹Ÿæœº</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">virsh</span> console centos72
</span></code><div onclick="copied(this)" data-code="virsh console centos72
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>é…ç½®è™šæ‹Ÿæœºç½‘ç»œï¼Œç¼–è¾‘<code>vi /etc/sysconfig/network-scripts/ifcfg-eth0</code></p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token assign-left variable">TYPE</span><span class="token operator">=</span>Ethernet
</span><span class="code-line"><span class="token assign-left variable">BOOTPROTO</span><span class="token operator">=</span>static
</span><span class="code-line"><span class="token assign-left variable">IPADDR</span><span class="token operator">=</span><span class="token number">192.168</span>.120.200
</span><span class="code-line"><span class="token assign-left variable">PREFIX</span><span class="token operator">=</span><span class="token number">24</span>
</span><span class="code-line"><span class="token assign-left variable">GATEWAY</span><span class="token operator">=</span><span class="token number">192.168</span>.120.1
</span><span class="code-line"><span class="token assign-left variable">DEFROUTE</span><span class="token operator">=</span>yes
</span><span class="code-line"><span class="token assign-left variable">PEERDNS</span><span class="token operator">=</span>yes
</span><span class="code-line"><span class="token assign-left variable">PEERROUTES</span><span class="token operator">=</span>yes
</span><span class="code-line"><span class="token assign-left variable">IPV4_FAILURE_FATAL</span><span class="token operator">=</span>no
</span><span class="code-line"><span class="token assign-left variable">IPV6INIT</span><span class="token operator">=</span>yes
</span><span class="code-line"><span class="token assign-left variable">IPV6_AUTOCONF</span><span class="token operator">=</span>yes
</span><span class="code-line"><span class="token assign-left variable">IPV6_DEFROUTE</span><span class="token operator">=</span>yes
</span><span class="code-line"><span class="token assign-left variable">IPV6_PEERDNS</span><span class="token operator">=</span>yes
</span><span class="code-line"><span class="token assign-left variable">IPV6_PEERROUTES</span><span class="token operator">=</span>yes
</span><span class="code-line"><span class="token assign-left variable">IPV6_FAILURE_FATAL</span><span class="token operator">=</span>no
</span><span class="code-line"><span class="token assign-left variable">NAME</span><span class="token operator">=</span>eth0
</span><span class="code-line"><span class="token assign-left variable">UUID</span><span class="token operator">=</span>adfa3b7d-bf60-47e6-8482-871dee686fb5
</span><span class="code-line"><span class="token assign-left variable">DEVICE</span><span class="token operator">=</span>eth0
</span><span class="code-line"><span class="token assign-left variable">ONBOOT</span><span class="token operator">=</span>yes
</span></code><div onclick="copied(this)" data-code="TYPE=Ethernet
BOOTPROTO=static
IPADDR=192.168.120.200
PREFIX=24
GATEWAY=192.168.120.1
DEFROUTE=yes
PEERDNS=yes
PEERROUTES=yes
IPV4_FAILURE_FATAL=no
IPV6INIT=yes
IPV6_AUTOCONF=yes
IPV6_DEFROUTE=yes
IPV6_PEERDNS=yes
IPV6_PEERROUTES=yes
IPV6_FAILURE_FATAL=no
NAME=eth0
UUID=adfa3b7d-bf60-47e6-8482-871dee686fb5
DEVICE=eth0
ONBOOT=yes
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>æ·»åŠ DNSé…ç½®ï¼Œä¹Ÿå¯ä»¥æ”¾åˆ°<code>ifcfg-eth0</code>ä¸­ï¼ŒDNSä¸æ˜¯éšä¾¿è®¾ç½®çš„ï¼Œä½ å¯ä»¥é€šè¿‡<a href="https://jaywcjlove.github.io/linux-command/c/host.html">host</a>ã€<a href="https://jaywcjlove.github.io/linux-command/c/dig.html">dig</a>ã€<a href="https://jaywcjlove.github.io/linux-command/c/nslookup.html">nslookup</a>å‘½ä»¤æŸ¥è¯¢DNSï¼Œå¦‚æœè¿™äº›å·¥å…·ä¸å­˜åœ¨å¯ä»¥é€šè¿‡<code>yum install bind-utils -y</code>æ¥å®‰è£…ä¸€ä¸‹ã€‚</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># å¦‚æœæ²¡æœ‰åœ¨ç½‘ç»œé…ç½®æ·»åŠ DNSå¯ä»¥è¿™ç§æ–¹å¼æ·»åŠ DNS</span>
</span><span class="code-line"><span class="token builtin class-name">echo</span> <span class="token string">"nameserver 192.168.188.1"</span> <span class="token operator">></span> /etc/resolv.conf
</span></code><div onclick="copied(this)" data-code="# å¦‚æœæ²¡æœ‰åœ¨ç½‘ç»œé…ç½®æ·»åŠ DNSå¯ä»¥è¿™ç§æ–¹å¼æ·»åŠ DNS
echo &#x22;nameserver 192.168.188.1&#x22; > /etc/resolv.conf
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>æ¿€æ´»ç½‘å¡</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">ifup</span> eth0 <span class="token comment"># æ¿€æ´»ç½‘å¡</span>
</span></code><div onclick="copied(this)" data-code="ifup eth0 # æ¿€æ´»ç½‘å¡
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="è™šæ‹Ÿæœºå…¶å®ƒç®¡ç†"><a class="anchor" aria-hidden="true" tabindex="-1" href="#è™šæ‹Ÿæœºå…¶å®ƒç®¡ç†"><span class="octicon octicon-link"></span></a>è™šæ‹Ÿæœºå…¶å®ƒç®¡ç†</h3>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">virsh</span> start centos72     <span class="token comment"># è™šæ‹Ÿæœºå¼€å¯ï¼ˆå¯åŠ¨ï¼‰ï¼š</span>
</span><span class="code-line"><span class="token function">virsh</span> <span class="token function">reboot</span> centos72    <span class="token comment"># è™šæ‹Ÿæœºé‡æ–°å¯åŠ¨</span>
</span><span class="code-line"><span class="token function">virsh</span> <span class="token function">shutdown</span> centos72  <span class="token comment"># è™šæ‹Ÿæœºå…³æœº</span>
</span><span class="code-line"><span class="token function">virsh</span> destroy centos72   <span class="token comment"># å¼ºåˆ¶å…³æœºï¼ˆå¼ºåˆ¶æ–­ç”µï¼‰</span>
</span><span class="code-line"><span class="token function">virsh</span> <span class="token function">suspend</span> centos72   <span class="token comment"># æš‚åœï¼ˆæŒ‚èµ·ï¼‰KVM è™šæ‹Ÿæœº</span>
</span><span class="code-line"><span class="token function">virsh</span> resume centos72    <span class="token comment"># æ¢å¤è¢«æŒ‚èµ·çš„ KVM è™šæ‹Ÿæœº</span>
</span><span class="code-line"><span class="token function">virsh</span> undefine centos72  <span class="token comment"># è¯¥æ–¹æ³•åªåˆ é™¤é…ç½®æ–‡ä»¶ï¼Œç£ç›˜æ–‡ä»¶æœªåˆ é™¤</span>
</span><span class="code-line"><span class="token function">virsh</span> autostart centos72 <span class="token comment"># éšç‰©ç†æœºå¯åŠ¨è€Œå¯åŠ¨ï¼ˆå¼€æœºå¯åŠ¨ï¼‰</span>
</span><span class="code-line"><span class="token function">virsh</span> autostart --disable centos72 <span class="token comment"># å–æ¶ˆæ ‡è®°ä¸ºè‡ªåŠ¨å¼€å§‹ï¼ˆå–æ¶ˆå¼€æœºå¯åŠ¨ï¼‰</span>
</span></code><div onclick="copied(this)" data-code="virsh start centos72     # è™šæ‹Ÿæœºå¼€å¯ï¼ˆå¯åŠ¨ï¼‰ï¼š
virsh reboot centos72    # è™šæ‹Ÿæœºé‡æ–°å¯åŠ¨
virsh shutdown centos72  # è™šæ‹Ÿæœºå…³æœº
virsh destroy centos72   # å¼ºåˆ¶å…³æœºï¼ˆå¼ºåˆ¶æ–­ç”µï¼‰
virsh suspend centos72   # æš‚åœï¼ˆæŒ‚èµ·ï¼‰KVM è™šæ‹Ÿæœº
virsh resume centos72    # æ¢å¤è¢«æŒ‚èµ·çš„ KVM è™šæ‹Ÿæœº
virsh undefine centos72  # è¯¥æ–¹æ³•åªåˆ é™¤é…ç½®æ–‡ä»¶ï¼Œç£ç›˜æ–‡ä»¶æœªåˆ é™¤
virsh autostart centos72 # éšç‰©ç†æœºå¯åŠ¨è€Œå¯åŠ¨ï¼ˆå¼€æœºå¯åŠ¨ï¼‰
virsh autostart --disable centos72 # å–æ¶ˆæ ‡è®°ä¸ºè‡ªåŠ¨å¼€å§‹ï¼ˆå–æ¶ˆå¼€æœºå¯åŠ¨ï¼‰
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="é…ç½®ç‰©ç†æœºç½‘ç»œ"><a class="anchor" aria-hidden="true" tabindex="-1" href="#é…ç½®ç‰©ç†æœºç½‘ç»œ"><span class="octicon octicon-link"></span></a>é…ç½®ç‰©ç†æœºç½‘ç»œ</h2>
    <p>ç›®å‰æˆ‘åªæœ‰ä¸€ä¸ªå›ºå®šIPï¼Œé€šè¿‡é…ç½®<code>eno2</code>ï¼Œç½‘æ¡¥å½“åšè·¯ç”±å™¨ï¼Œè™šæ‹Ÿæœºå…±äº«ç‰©ç†æœºè¿›å‡ºç½‘ç»œã€‚ç‰©ç†æœºç½‘ç»œé…ç½®ï¼Œç½‘ç»œè¿›å‡ºèµ°<code>eno2</code> ç¼–è¾‘<code>vi /etc/sysconfig/network-scripts/ifcfg-eno2</code></p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token assign-left variable">TYPE</span><span class="token operator">=</span>Ethernet
</span><span class="code-line"><span class="token assign-left variable">BOOTPROTO</span><span class="token operator">=</span>static
</span><span class="code-line"><span class="token assign-left variable">DEFROUTE</span><span class="token operator">=</span>yes
</span><span class="code-line"><span class="token assign-left variable">PEERDNS</span><span class="token operator">=</span>yes
</span><span class="code-line"><span class="token assign-left variable">PEERROUTES</span><span class="token operator">=</span>yes
</span><span class="code-line"><span class="token assign-left variable">IPV4_FAILURE_FATAL</span><span class="token operator">=</span>no
</span><span class="code-line"><span class="token assign-left variable">IPV6INIT</span><span class="token operator">=</span>yes
</span><span class="code-line"><span class="token assign-left variable">IPV6_AUTOCONF</span><span class="token operator">=</span>yes
</span><span class="code-line"><span class="token assign-left variable">IPV6_DEFROUTE</span><span class="token operator">=</span>yes
</span><span class="code-line"><span class="token assign-left variable">IPV6_PEERDNS</span><span class="token operator">=</span>yes
</span><span class="code-line"><span class="token assign-left variable">IPV6_PEERROUTES</span><span class="token operator">=</span>yes
</span><span class="code-line"><span class="token assign-left variable">IPV6_FAILURE_FATAL</span><span class="token operator">=</span>no
</span><span class="code-line"><span class="token assign-left variable">NAME</span><span class="token operator">=</span>eno2
</span><span class="code-line"><span class="token assign-left variable">UUID</span><span class="token operator">=</span>f66c303e-994a-43cf-bd91-bb897dc2088d
</span><span class="code-line"><span class="token assign-left variable">DEVICE</span><span class="token operator">=</span>eno2
</span><span class="code-line"><span class="token assign-left variable">ONBOOT</span><span class="token operator">=</span>yes
</span><span class="code-line">
</span><span class="code-line"><span class="token assign-left variable">IPADDR</span><span class="token operator">=</span><span class="token operator">&#x3C;</span>è¿™é‡Œå›ºå®šIPé…ç½®çš„åœ°æ–¹<span class="token operator">></span>  <span class="token comment"># è®¾ç½®IPåœ°å€</span>
</span><span class="code-line"><span class="token assign-left variable">PREFIX</span><span class="token operator">=</span><span class="token number">24</span>                   <span class="token comment"># è®¾ç½®å­ç½‘æ©ç </span>
</span><span class="code-line"><span class="token assign-left variable">GATEWAY</span><span class="token operator">=</span><span class="token operator">&#x3C;</span>è¿™é‡Œè®¾ç½®ç½‘å…³<span class="token operator">></span>        <span class="token comment"># è®¾ç½®ç½‘å…³</span>
</span><span class="code-line"><span class="token assign-left variable">DNS1</span><span class="token operator">=</span><span class="token operator">&#x3C;</span>è¿™é‡Œè®¾ç½®DNS<span class="token operator">></span>           <span class="token comment"># DNS</span>
</span></code><div onclick="copied(this)" data-code="TYPE=Ethernet
BOOTPROTO=static
DEFROUTE=yes
PEERDNS=yes
PEERROUTES=yes
IPV4_FAILURE_FATAL=no
IPV6INIT=yes
IPV6_AUTOCONF=yes
IPV6_DEFROUTE=yes
IPV6_PEERDNS=yes
IPV6_PEERROUTES=yes
IPV6_FAILURE_FATAL=no
NAME=eno2
UUID=f66c303e-994a-43cf-bd91-bb897dc2088d
DEVICE=eno2
ONBOOT=yes

IPADDR=<è¿™é‡Œå›ºå®šIPé…ç½®çš„åœ°æ–¹>  # è®¾ç½®IPåœ°å€
PREFIX=24                   # è®¾ç½®å­ç½‘æ©ç 
GATEWAY=<è¿™é‡Œè®¾ç½®ç½‘å…³>        # è®¾ç½®ç½‘å…³
DNS1=<è¿™é‡Œè®¾ç½®DNS>           # DNS
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p><code>ifcfg-br0</code> æ¡¥æ¥ç½‘å¡é…ç½®åœ¨åŒä¸€ä¸ªç›®å½•ä¸­ã€‚</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token assign-left variable">TYPE</span><span class="token operator">=</span>Bridge
</span><span class="code-line"><span class="token assign-left variable">BOOTPROTO</span><span class="token operator">=</span>static
</span><span class="code-line"><span class="token assign-left variable">NAME</span><span class="token operator">=</span>br0
</span><span class="code-line"><span class="token assign-left variable">DEVICE</span><span class="token operator">=</span>br0
</span><span class="code-line"><span class="token assign-left variable">ONBOOT</span><span class="token operator">=</span>yes
</span><span class="code-line"><span class="token assign-left variable">IPADDR</span><span class="token operator">=</span><span class="token number">192.168</span>.120.1
</span><span class="code-line"><span class="token assign-left variable">PREFIX</span><span class="token operator">=</span><span class="token number">24</span>
</span></code><div onclick="copied(this)" data-code="TYPE=Bridge
BOOTPROTO=static
NAME=br0
DEVICE=br0
ONBOOT=yes
IPADDR=192.168.120.1
PREFIX=24
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p><code>ifcfg-eno1</code> ç‰©ç†ç½‘å¡æŒ‡å®šæ¡¥æ¥ç½‘å¡<code>BRIDGE="br0"</code></p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token assign-left variable">TYPE</span><span class="token operator">=</span>Ethernet
</span><span class="code-line"><span class="token assign-left variable">BOOTPROTO</span><span class="token operator">=</span>none
</span><span class="code-line"><span class="token assign-left variable">NAME</span><span class="token operator">=</span>eno1
</span><span class="code-line"><span class="token assign-left variable">DEVICE</span><span class="token operator">=</span>eno1
</span><span class="code-line"><span class="token assign-left variable">ONBOOT</span><span class="token operator">=</span>yes
</span><span class="code-line"><span class="token assign-left variable">BRIDGE</span><span class="token operator">=</span><span class="token string">"br0"</span>
</span></code><div onclick="copied(this)" data-code="TYPE=Ethernet
BOOTPROTO=none
NAME=eno1
DEVICE=eno1
ONBOOT=yes
BRIDGE=&#x22;br0&#x22;
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>é…ç½®è·¯ç”±è½¬å‘<code>vi /etc/sysctl.conf</code></p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># Controls IP packet forwarding</span>
</span><span class="code-line">net.ipv4.ip_forward <span class="token operator">=</span> <span class="token number">0</span>
</span><span class="code-line">ä¿®æ”¹ä¸º
</span><span class="code-line"><span class="token comment"># Controls IP packet forwarding</span>
</span><span class="code-line">net.ipv4.ip_forward <span class="token operator">=</span> <span class="token number">1</span>    å…è®¸å†…ç½®è·¯ç”±
</span></code><div onclick="copied(this)" data-code="# Controls IP packet forwarding
net.ipv4.ip_forward = 0
ä¿®æ”¹ä¸º
# Controls IP packet forwarding
net.ipv4.ip_forward = 1    å…è®¸å†…ç½®è·¯ç”±
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>å†æ‰§è¡Œ <code>sysctl -p</code> ä½¿å…¶ç”Ÿæ•ˆ</p>
    <h2 id="ç«¯å£è½¬å‘"><a class="anchor" aria-hidden="true" tabindex="-1" href="#ç«¯å£è½¬å‘"><span class="octicon octicon-link"></span></a>ç«¯å£è½¬å‘</h2>
    <p>ç°åœ¨æˆ‘ä»¬è¿˜ä»¥ä¸Šè¿°VMä¸ºä¾‹ï¼Œç›®å‰è¯¥KVMçš„å…¬ç½‘IPä¸º<code>211.11.61.7</code>ï¼ŒVMçš„IPä¸º<code>192.168.188.115</code>ï¼Œç°åœ¨æˆ‘è¦æ±‚é€šè¿‡è®¿é—®KVMçš„2222ç«¯å£è®¿é—®VMçš„22ç«¯å£ã€‚</p>
    <p>ç¼–è¾‘<code>vi /etc/rc.d/rc.local</code> æ·»åŠ ä¸‹é¢å‘½ä»¤ï¼Œè¾¾åˆ°å¼€æœºé‡å¯é…ç½®ç½‘ç»œè½¬å‘è§„åˆ™ã€‚</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># å¯åŠ¨ç½‘ç»œè½¬å‘è§„åˆ™</span>
</span><span class="code-line">iptables -t nat -A <span class="token builtin class-name">:</span> -s <span class="token number">192.168</span>.188.0/24 -j SNAT --to-source <span class="token number">211.11</span>.61.7
</span><span class="code-line">
</span><span class="code-line">iptables -t nat -A POSTROUTING -s <span class="token number">192.168</span>.188.0/24 -j SNAT --to-source <span class="token number">211.11</span>.61.7
</span><span class="code-line">iptables -t nat -A PREROUTING -d  <span class="token number">211.11</span>.61.7 -p tcp --dport <span class="token number">2222</span>  -j DNAT --to-dest <span class="token number">192.168</span>.188.115:22
</span><span class="code-line">iptables -t nat -A PREROUTING -d  <span class="token number">211.11</span>.61.7 -p tcp --dport <span class="token number">2221</span>  -j DNAT --to-dest <span class="token number">192.168</span>.188.115:21
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># å®é™…æ•ˆæœå¯ä»¥é€šè¿‡å¤–ç½‘è¿æ¥è™šæ‹Ÿæœº</span>
</span><span class="code-line"><span class="token function">ssh</span> -p <span class="token number">2222</span> root@211.11.61.7
</span></code><div onclick="copied(this)" data-code="# å¯åŠ¨ç½‘ç»œè½¬å‘è§„åˆ™
iptables -t nat -A : -s 192.168.188.0/24 -j SNAT --to-source 211.11.61.7

iptables -t nat -A POSTROUTING -s 192.168.188.0/24 -j SNAT --to-source 211.11.61.7
iptables -t nat -A PREROUTING -d  211.11.61.7 -p tcp --dport 2222  -j DNAT --to-dest 192.168.188.115:22
iptables -t nat -A PREROUTING -d  211.11.61.7 -p tcp --dport 2221  -j DNAT --to-dest 192.168.188.115:21

# å®é™…æ•ˆæœå¯ä»¥é€šè¿‡å¤–ç½‘è¿æ¥è™šæ‹Ÿæœº
ssh -p 2222 root@211.11.61.7
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>é€šè¿‡<a href="https://jaywcjlove.github.io/linux-command/c/iptables.html">iptables</a>å‘½ä»¤æ¥è®¾ç½®è½¬å‘è§„åˆ™ï¼ŒæºSNATè§„åˆ™ï¼Œæºç½‘ç»œåœ°å€è½¬æ¢ï¼ŒSNATå°±æ˜¯é‡å†™åŒ…çš„æºIPåœ°å€ã€‚</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># æ•°æ®åŒ…è¿›è¡Œ æºNAT(SNAT)ï¼Œç³»ç»Ÿå…ˆè·¯ç”±â€”â€”>å†è¿‡æ»¤ï¼ˆFORWARD)â€”â€”>æœ€åæ‰è¿›è¡ŒPOSTROUTING SNATåœ°å€ç¿»è¯‘</span>
</span><span class="code-line"><span class="token comment"># -t&#x3C;è¡¨>ï¼šæŒ‡å®šè¦æ“çºµçš„è¡¨ï¼›</span>
</span><span class="code-line"><span class="token comment"># -Aï¼šå‘è§„åˆ™é“¾ä¸­æ·»åŠ æ¡ç›®ï¼›</span>
</span><span class="code-line"><span class="token comment"># -sï¼šæŒ‡å®šè¦åŒ¹é…çš„æ•°æ®åŒ…æºipåœ°å€ï¼›</span>
</span><span class="code-line"><span class="token comment"># -j&#x3C;ç›®æ ‡>ï¼šæŒ‡å®šè¦è·³è½¬çš„ç›®æ ‡ï¼›</span>
</span><span class="code-line"><span class="token comment"># -j SNATï¼šæºç½‘ç»œåœ°å€è½¬æ¢ï¼ŒSNATå°±æ˜¯é‡å†™åŒ…çš„æºIPåœ°å€</span>
</span><span class="code-line"><span class="token comment"># --to-source ipaddr[-ipaddr][:port-port] </span>
</span><span class="code-line"><span class="token comment">#   å®ƒå¯ä»¥æŒ‡å®šå•ä¸ªæ–°çš„æºIPåœ°å€ï¼ŒIPåœ°å€çš„åŒ…å«èŒƒå›´ï¼Œä»¥åŠå¯é€‰çš„ç«¯å£èŒƒå›´ï¼ˆä»…å½“è§„åˆ™è¿˜æŒ‡å®š-p tcpæˆ–-p udpæ—¶æ‰æœ‰æ•ˆï¼‰ã€‚ </span>
</span><span class="code-line"><span class="token comment">#   å¦‚æœæ²¡æœ‰æŒ‡å®šç«¯å£èŒƒå›´ï¼Œåˆ™ä½äº512çš„æºç«¯å£å°†æ˜ å°„åˆ°512ä»¥ä¸‹çš„å…¶ä»–ç«¯å£ï¼š512å’Œ1023ä¹‹é—´çš„ç«¯å£å°†æ˜ å°„åˆ°ä½äº1024çš„ç«¯å£ï¼Œ</span>
</span><span class="code-line"><span class="token comment">#   å…¶ä»–ç«¯å£å°†è¢«æ˜ å°„åˆ°1024æˆ–æ›´é«˜ã€‚ åœ¨å¯èƒ½çš„æƒ…å†µä¸‹ï¼Œä¸ä¼šå‘ç”Ÿæ¸¯å£æ›´æ”¹ã€‚</span>
</span><span class="code-line"><span class="token comment">#   åœ¨å†…æ ¸é«˜è¾¾2.6.10ï¼Œæ‚¨å¯ä»¥æ·»åŠ å‡ ä¸ª - æºé€‰é¡¹ã€‚ </span>
</span><span class="code-line"><span class="token comment">#   å¯¹äºè¿™äº›å†…æ ¸ï¼Œå¦‚æœé€šè¿‡åœ°å€èŒƒå›´æˆ–å¤šä¸ªæºé€‰é¡¹æŒ‡å®šå¤šä¸ªæºåœ°å€ï¼Œåˆ™ä¼šåœ¨è¿™äº›åœ°å€ä¹‹é—´è¿›è¡Œç®€å•çš„å¾ªç¯ï¼ˆå¾ªç¯ä¸­å¾ªç¯ï¼‰ã€‚ </span>
</span><span class="code-line"><span class="token comment">#   åæ¥çš„å†…æ ¸ï¼ˆ> = 2.6.11-rc1ï¼‰ä¸å†å…·æœ‰NATåˆ°å¤šä¸ªèŒƒå›´çš„èƒ½åŠ›ã€‚</span>
</span><span class="code-line">iptables -t nat -A POSTROUTING -s <span class="token number">192.168</span>.120.0/24 -j SNAT --to-source <span class="token operator">&#x3C;</span>å›ºå®šIP<span class="token operator">></span>
</span><span class="code-line"><span class="token comment"># cat /etc/sysconfig/iptables</span>
</span></code><div onclick="copied(this)" data-code="# æ•°æ®åŒ…è¿›è¡Œ æºNAT(SNAT)ï¼Œç³»ç»Ÿå…ˆè·¯ç”±â€”â€”>å†è¿‡æ»¤ï¼ˆFORWARD)â€”â€”>æœ€åæ‰è¿›è¡ŒPOSTROUTING SNATåœ°å€ç¿»è¯‘
# -t<è¡¨>ï¼šæŒ‡å®šè¦æ“çºµçš„è¡¨ï¼›
# -Aï¼šå‘è§„åˆ™é“¾ä¸­æ·»åŠ æ¡ç›®ï¼›
# -sï¼šæŒ‡å®šè¦åŒ¹é…çš„æ•°æ®åŒ…æºipåœ°å€ï¼›
# -j<ç›®æ ‡>ï¼šæŒ‡å®šè¦è·³è½¬çš„ç›®æ ‡ï¼›
# -j SNATï¼šæºç½‘ç»œåœ°å€è½¬æ¢ï¼ŒSNATå°±æ˜¯é‡å†™åŒ…çš„æºIPåœ°å€
# --to-source ipaddr[-ipaddr][:port-port] 
#   å®ƒå¯ä»¥æŒ‡å®šå•ä¸ªæ–°çš„æºIPåœ°å€ï¼ŒIPåœ°å€çš„åŒ…å«èŒƒå›´ï¼Œä»¥åŠå¯é€‰çš„ç«¯å£èŒƒå›´ï¼ˆä»…å½“è§„åˆ™è¿˜æŒ‡å®š-p tcpæˆ–-p udpæ—¶æ‰æœ‰æ•ˆï¼‰ã€‚ 
#   å¦‚æœæ²¡æœ‰æŒ‡å®šç«¯å£èŒƒå›´ï¼Œåˆ™ä½äº512çš„æºç«¯å£å°†æ˜ å°„åˆ°512ä»¥ä¸‹çš„å…¶ä»–ç«¯å£ï¼š512å’Œ1023ä¹‹é—´çš„ç«¯å£å°†æ˜ å°„åˆ°ä½äº1024çš„ç«¯å£ï¼Œ
#   å…¶ä»–ç«¯å£å°†è¢«æ˜ å°„åˆ°1024æˆ–æ›´é«˜ã€‚ åœ¨å¯èƒ½çš„æƒ…å†µä¸‹ï¼Œä¸ä¼šå‘ç”Ÿæ¸¯å£æ›´æ”¹ã€‚
#   åœ¨å†…æ ¸é«˜è¾¾2.6.10ï¼Œæ‚¨å¯ä»¥æ·»åŠ å‡ ä¸ª - æºé€‰é¡¹ã€‚ 
#   å¯¹äºè¿™äº›å†…æ ¸ï¼Œå¦‚æœé€šè¿‡åœ°å€èŒƒå›´æˆ–å¤šä¸ªæºé€‰é¡¹æŒ‡å®šå¤šä¸ªæºåœ°å€ï¼Œåˆ™ä¼šåœ¨è¿™äº›åœ°å€ä¹‹é—´è¿›è¡Œç®€å•çš„å¾ªç¯ï¼ˆå¾ªç¯ä¸­å¾ªç¯ï¼‰ã€‚ 
#   åæ¥çš„å†…æ ¸ï¼ˆ> = 2.6.11-rc1ï¼‰ä¸å†å…·æœ‰NATåˆ°å¤šä¸ªèŒƒå›´çš„èƒ½åŠ›ã€‚
iptables -t nat -A POSTROUTING -s 192.168.120.0/24 -j SNAT --to-source <å›ºå®šIP>
# cat /etc/sysconfig/iptables
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="å…¬ç½‘è®¿é—®è™šæ‹Ÿæœº"><a class="anchor" aria-hidden="true" tabindex="-1" href="#å…¬ç½‘è®¿é—®è™šæ‹Ÿæœº"><span class="octicon octicon-link"></span></a>å…¬ç½‘è®¿é—®è™šæ‹Ÿæœº</h2>
    <p>é€šè¿‡å…¬ç½‘ip <code>192.168.188.222</code>ç«¯å£<code>2280</code>ï¼Œè½¬å‘åˆ°è™šæ‹Ÿæœº<code>192.168.111.133:80</code>ä¸Šé¢</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">iptables -t nat -A PREROUTING -d <span class="token number">192.168</span>.188.222 -p tcp --dport <span class="token number">2280</span> -j DNAT --to-dest <span class="token number">192.168</span>.111.133:80
</span></code><div onclick="copied(this)" data-code="iptables -t nat -A PREROUTING -d 192.168.188.222 -p tcp --dport 2280 -j DNAT --to-dest 192.168.111.133:80
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>é‡å¯å¹¶ä¿å­˜ <code>iptables</code> é…ç½®ã€‚</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># ä¿å­˜ </span>
</span><span class="code-line"><span class="token function">service</span> iptables save
</span><span class="code-line"><span class="token comment"># é‡å¯</span>
</span><span class="code-line"><span class="token function">service</span> iptables restart
</span></code><div onclick="copied(this)" data-code="# ä¿å­˜ 
service iptables save
# é‡å¯
service iptables restart
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="é…ç½®å®¿ä¸»æœºç½‘ç»œ"><a class="anchor" aria-hidden="true" tabindex="-1" href="#é…ç½®å®¿ä¸»æœºç½‘ç»œ"><span class="octicon octicon-link"></span></a>é…ç½®å®¿ä¸»æœºç½‘ç»œ</h2>
    <ol>
      <li>KVM è™šæ‹Ÿæœºæ˜¯åŸºäº NAT çš„ç½‘ç»œé…ç½®ï¼›</li>
      <li>åªæœ‰åŒä¸€å®¿ä¸»æœºçš„è™šæ‹Ÿé”®ä¹‹é—´å¯ä»¥äº’ç›¸è®¿é—®ï¼Œè·¨å®¿ä¸»æœºæ˜¯ä¸èƒ½è®¿é—®ï¼›</li>
      <li>è™šæ‹Ÿæœºéœ€è¦å’Œå®¿ä¸»æœºé…ç½®æˆæ¡¥æ¥æ¨¡å¼ï¼Œä»¥ä¾¿è™šæ‹Ÿæœºå¯ä»¥åœ¨å±€åŸŸç½‘å†…å¯è§ï¼›</li>
    </ol>
    <h3 id="bridgeæ¨¡å¼é…ç½®"><a class="anchor" aria-hidden="true" tabindex="-1" href="#bridgeæ¨¡å¼é…ç½®"><span class="octicon octicon-link"></span></a>Bridgeæ¨¡å¼é…ç½®</h3>
    <p>Bridgeæ–¹å¼å³è™šæ‹Ÿç½‘æ¡¥çš„ç½‘ç»œè¿æ¥æ–¹å¼ï¼Œæ˜¯å®¢æˆ·æœºå’Œå­ç½‘é‡Œé¢çš„æœºå™¨èƒ½å¤Ÿäº’ç›¸é€šä¿¡ã€‚å¯ä»¥ä½¿è™šæ‹Ÿæœºæˆä¸ºç½‘ç»œä¸­å…·æœ‰ç‹¬ç«‹IPçš„ä¸»æœºã€‚<strong>æ¡¥æ¥ç½‘ç»œ</strong>ï¼ˆä¹Ÿå« <strong>ç‰©ç†è®¾å¤‡å…±äº«</strong>ï¼‰è¢«ç”¨ä½œæŠŠä¸€ä¸ªç‰©ç†è®¾å¤‡å¤åˆ¶åˆ°ä¸€å°è™šæ‹Ÿæœºã€‚ç½‘æ¡¥å¤šç”¨ä½œé«˜çº§è®¾ç½®ï¼Œç‰¹åˆ«æ˜¯ä¸»æœºå¤šä¸ªç½‘ç»œæ¥å£çš„æƒ…å†µã€‚</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span><span class="code-line">â”‚          HOST           â”‚      â”‚Virtual Machine <span class="token number">1</span>â”‚
</span><span class="code-line">â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”     â”‚
</span><span class="code-line">â”‚ â”‚ br0  â”‚â”€â”€â”¬â”€â”€â”€â”‚ vnet0 â”‚â”€â”‚â”€ â”€ â”€ â”‚    â”‚ br0  â”‚     â”‚
</span><span class="code-line">â”‚ â””â”€â”€â”€â”€â”€â”€â”˜  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚    â””â”€â”€â”€â”€â”€â”€â”˜     â”‚
</span><span class="code-line">â”‚     â”‚     â”‚             â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span><span class="code-line">â”‚     â”‚     â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span><span class="code-line">â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”  â””â”€â”€â”€â”‚ vnet1 â”‚â”€â”‚â”€     â”‚Virtual Machine <span class="token number">2</span>â”‚
</span><span class="code-line">â”‚ â”‚ eno0 â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”     â”‚
</span><span class="code-line">â”‚ â””â”€â”€â”€â”€â”€â”€â”˜                â”‚  â”€ â”€ â”‚    â”‚ br0  â”‚     â”‚
</span><span class="code-line">â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”                â”‚      â”‚    â””â”€â”€â”€â”€â”€â”€â”˜     â”‚
</span><span class="code-line">â”‚ â”‚ eno1 â”‚                â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span><span class="code-line">â”‚ â””â”€â”€â”€â”€â”€â”€â”˜                â”‚
</span><span class="code-line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></code><div onclick="copied(this)" data-code="â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          HOST           â”‚      â”‚Virtual Machine 1â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”     â”‚
â”‚ â”‚ br0  â”‚â”€â”€â”¬â”€â”€â”€â”‚ vnet0 â”‚â”€â”‚â”€ â”€ â”€ â”‚    â”‚ br0  â”‚     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”˜  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚    â””â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚     â”‚     â”‚             â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚     â”‚     â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”  â””â”€â”€â”€â”‚ vnet1 â”‚â”€â”‚â”€     â”‚Virtual Machine 2â”‚
â”‚ â”‚ eno0 â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”˜                â”‚  â”€ â”€ â”‚    â”‚ br0  â”‚     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”                â”‚      â”‚    â””â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚ â”‚ eno1 â”‚                â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â””â”€â”€â”€â”€â”€â”€â”˜                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>é€šè¿‡<a href="https://jaywcjlove.github.io/linux-command/c/ip.html">ip</a> å‘½ä»¤æŸ¥çœ‹å®¿ä¸»æœºé…ç½®æ–‡ä»¶çš„åå­—</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">ip</span> addr
</span><span class="code-line">
</span><span class="code-line"><span class="token number">6</span>: eno1: <span class="token operator">&#x3C;</span>BROADCAST,MULTICAST,UP,LOWER_UP<span class="token operator">></span> mtu <span class="token number">1500</span> qdisc mq state UP qlen <span class="token number">1000</span>
</span><span class="code-line">    link/ether <span class="token number">38</span>:63:bb:44:cf:6c brd ff:ff:ff:ff:ff:ff
</span><span class="code-line">    inet <span class="token number">192.168</span>.188.132/24 brd <span class="token number">192.168</span>.188.255 scope global dynamic eno1
</span><span class="code-line">       valid_lft 2822sec preferred_lft 2822sec
</span><span class="code-line">    inet6 fe80::3a63:bbff:fe44:cf6c/64 scope <span class="token function">link</span>
</span><span class="code-line">       valid_lft forever preferred_lft forever
</span></code><div onclick="copied(this)" data-code="ip addr

6: eno1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq state UP qlen 1000
    link/ether 38:63:bb:44:cf:6c brd ff:ff:ff:ff:ff:ff
    inet 192.168.188.132/24 brd 192.168.188.255 scope global dynamic eno1
       valid_lft 2822sec preferred_lft 2822sec
    inet6 fe80::3a63:bbff:fe44:cf6c/64 scope link
       valid_lft forever preferred_lft forever
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>å¯ä»¥çœ‹åˆ°ä¸Šé¢<code>eno1</code>æ˜¯æœ‰è·å–åˆ°ipåœ°å€çš„ï¼Œç›¸å¯¹åº”çš„æ–‡ä»¶åœ¨<code>/etc/sysconfig/network-scripts/</code>ç›®å½•ä¸­ï¼Œ<code>ifcfg-eno1</code> å®¿ä¸»æœºçš„ç‰©ç†ç½‘å¡é…ç½®æ–‡ä»¶</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># cat ifcfg-eno1</span>
</span><span class="code-line"><span class="token assign-left variable">TYPE</span><span class="token operator">=</span>Ethernet
</span><span class="code-line"><span class="token assign-left variable">BOOTPROTO</span><span class="token operator">=</span>static
</span><span class="code-line"><span class="token assign-left variable">NAME</span><span class="token operator">=</span>eno1
</span><span class="code-line"><span class="token assign-left variable">DEVICE</span><span class="token operator">=</span>eno1
</span><span class="code-line"><span class="token assign-left variable">UUID</span><span class="token operator">=</span>242b3d4d-37a5-4f46-b072-55554c185ecf
</span><span class="code-line"><span class="token assign-left variable">ONBOOT</span><span class="token operator">=</span>yes
</span><span class="code-line">
</span><span class="code-line"><span class="token assign-left variable">BRIDGE</span><span class="token operator">=</span><span class="token string">"br0"</span> <span class="token comment"># æŒ‡å®šæ¡¥æ¥ç½‘å¡çš„åç§°</span>
</span></code><div onclick="copied(this)" data-code="# cat ifcfg-eno1
TYPE=Ethernet
BOOTPROTO=static
NAME=eno1
DEVICE=eno1
UUID=242b3d4d-37a5-4f46-b072-55554c185ecf
ONBOOT=yes

BRIDGE=&#x22;br0&#x22; # æŒ‡å®šæ¡¥æ¥ç½‘å¡çš„åç§°
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p><code>ifcfg-br0</code> æ¡¥æ¥ç½‘å¡é…ç½®åœ¨åŒä¸€ä¸ªç›®å½•ä¸­ã€‚</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># cat ifcfg-br0</span>
</span><span class="code-line"><span class="token assign-left variable">BOOTPROTO</span><span class="token operator">=</span>static
</span><span class="code-line"><span class="token assign-left variable">DEFROUTE</span><span class="token operator">=</span>yes
</span><span class="code-line"><span class="token assign-left variable">PEERDNS</span><span class="token operator">=</span>yes
</span><span class="code-line"><span class="token assign-left variable">PEERROUTES</span><span class="token operator">=</span>yes
</span><span class="code-line"><span class="token assign-left variable">IPV4_FAILURE_FATAL</span><span class="token operator">=</span>no
</span><span class="code-line"><span class="token assign-left variable">IPV6INIT</span><span class="token operator">=</span>yes
</span><span class="code-line"><span class="token assign-left variable">IPV6_AUTOCONF</span><span class="token operator">=</span>yes
</span><span class="code-line"><span class="token assign-left variable">IPV6_DEFROUTE</span><span class="token operator">=</span>yes
</span><span class="code-line"><span class="token assign-left variable">IPV6_PEERDNS</span><span class="token operator">=</span>yes
</span><span class="code-line"><span class="token assign-left variable">IPV6_PEERROUTES</span><span class="token operator">=</span>yes
</span><span class="code-line"><span class="token assign-left variable">IPV6_FAILURE_FATAL</span><span class="token operator">=</span>no
</span><span class="code-line"><span class="token assign-left variable">NAME</span><span class="token operator">=</span>br0
</span><span class="code-line"><span class="token assign-left variable">UUID</span><span class="token operator">=</span>242b3d4d-37a5-4f46-b072-55554c185ecf
</span><span class="code-line"><span class="token assign-left variable">DEVICE</span><span class="token operator">=</span>br0
</span><span class="code-line"><span class="token assign-left variable">ONBOOT</span><span class="token operator">=</span>yes
</span><span class="code-line"><span class="token assign-left variable">TYPE</span><span class="token operator">=</span>bridge  <span class="token comment"># å°†åˆ¶å®šä¸ºæ¡¥æ¥ç±»å‹</span>
</span><span class="code-line"><span class="token assign-left variable">IPADDR</span><span class="token operator">=</span><span class="token number">192.168</span>.188.133  <span class="token comment"># è®¾ç½®IPåœ°å€</span>
</span><span class="code-line"><span class="token assign-left variable">PREFIX</span><span class="token operator">=</span><span class="token number">24</span>               <span class="token comment"># è®¾ç½®å­ç½‘æ©ç </span>
</span><span class="code-line"><span class="token assign-left variable">GATEWAY</span><span class="token operator">=</span><span class="token number">192.168</span>.188.1   <span class="token comment"># è®¾ç½®ç½‘å…³</span>
</span></code><div onclick="copied(this)" data-code="# cat ifcfg-br0
BOOTPROTO=static
DEFROUTE=yes
PEERDNS=yes
PEERROUTES=yes
IPV4_FAILURE_FATAL=no
IPV6INIT=yes
IPV6_AUTOCONF=yes
IPV6_DEFROUTE=yes
IPV6_PEERDNS=yes
IPV6_PEERROUTES=yes
IPV6_FAILURE_FATAL=no
NAME=br0
UUID=242b3d4d-37a5-4f46-b072-55554c185ecf
DEVICE=br0
ONBOOT=yes
TYPE=bridge  # å°†åˆ¶å®šä¸ºæ¡¥æ¥ç±»å‹
IPADDR=192.168.188.133  # è®¾ç½®IPåœ°å€
PREFIX=24               # è®¾ç½®å­ç½‘æ©ç 
GATEWAY=192.168.188.1   # è®¾ç½®ç½‘å…³
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>é…ç½®å¥½ä¹‹åï¼Œé€šè¿‡<a href="https://jaywcjlove.github.io/linux-command/c/systemctl.html">systemctl</a> å‘½ä»¤é‡å¯ç½‘å¡ã€‚</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">ifup</span> eno1 <span class="token comment"># æ¿€æ´»ç½‘å¡</span>
</span><span class="code-line"><span class="token function">ifup</span> br0 <span class="token comment"># æ¿€æ´»æ¡¥æ¥ç½‘å¡</span>
</span><span class="code-line"><span class="token comment"># ä¸¤ç§é‡å¯ç½‘ç»œçš„æ–¹æ³•</span>
</span><span class="code-line">systemctl restart network.service
</span><span class="code-line"><span class="token function">service</span> network restart
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># æ ¡éªŒæ¡¥æ¥æ¥å£</span>
</span><span class="code-line">brctl show
</span><span class="code-line">
</span><span class="code-line">bridge name bridge <span class="token function">id</span>   STP enabled interfaces
</span><span class="code-line">br0   <span class="token number">8000</span>.3863bb44cf6c no    eno1
</span><span class="code-line">              vnet0
</span><span class="code-line">virbr0    <span class="token number">8000</span>.525400193f0f <span class="token function">yes</span>   virbr0-nic
</span></code><div onclick="copied(this)" data-code="ifup eno1 # æ¿€æ´»ç½‘å¡
ifup br0 # æ¿€æ´»æ¡¥æ¥ç½‘å¡
# ä¸¤ç§é‡å¯ç½‘ç»œçš„æ–¹æ³•
systemctl restart network.service
service network restart

# æ ¡éªŒæ¡¥æ¥æ¥å£
brctl show

bridge name bridge id   STP enabled interfaces
br0   8000.3863bb44cf6c no    eno1
              vnet0
virbr0    8000.525400193f0f yes   virbr0-nic
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="natæ¨¡å¼"><a class="anchor" aria-hidden="true" tabindex="-1" href="#natæ¨¡å¼"><span class="octicon octicon-link"></span></a>NATæ¨¡å¼</h3>
    <p>NAT(Network Address Translationç½‘ç»œåœ°å€ç¿»è¯‘)ï¼ŒNATæ–¹å¼æ˜¯kvmå®‰è£…åçš„é»˜è®¤æ–¹å¼ã€‚å®ƒæ”¯æŒä¸»æœºä¸è™šæ‹Ÿæœºçš„äº’è®¿ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒè™šæ‹Ÿæœºè®¿é—®äº’è”ç½‘ï¼Œä½†ä¸æ”¯æŒå¤–ç•Œè®¿é—®è™šæ‹Ÿæœºã€‚</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">virsh</span> net-edit default <span class="token comment"># å¦‚æœè¦åˆ›å»ºæˆ–è€…ä¿®æ”¹NATç½‘ç»œï¼Œè¦å…ˆç¼–è¾‘default.xmlï¼š</span>
</span><span class="code-line"><span class="token function">virsh</span> net-list --all
</span><span class="code-line">
</span><span class="code-line"> Name                 State      Autostart     Persistent
</span><span class="code-line">----------------------------------------------------------
</span><span class="code-line"> default              active     no            no
</span></code><div onclick="copied(this)" data-code="virsh net-edit default # å¦‚æœè¦åˆ›å»ºæˆ–è€…ä¿®æ”¹NATç½‘ç»œï¼Œè¦å…ˆç¼–è¾‘default.xmlï¼š
virsh net-list --all

 Name                 State      Autostart     Persistent
----------------------------------------------------------
 default              active     no            no
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>defaultæ˜¯å®¿ä¸»æœºå®‰è£…è™šæ‹Ÿæœºæ”¯æŒæ¨¡å—çš„æ—¶å€™è‡ªåŠ¨å®‰è£…çš„ã€‚</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">ip</span> a l
</span><span class="code-line"><span class="token number">1</span>: lo: <span class="token operator">&#x3C;</span>LOOPBACK,UP,LOWER_UP<span class="token operator">></span> mtu <span class="token number">65536</span> qdisc noqueue state UNKNOWN
</span><span class="code-line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
</span><span class="code-line">    inet <span class="token number">127.0</span>.0.1/8 scope <span class="token function">host</span> lo
</span><span class="code-line">       valid_lft forever preferred_lft forever
</span><span class="code-line">    inet6 ::1/128 scope <span class="token function">host</span>
</span><span class="code-line">       valid_lft forever preferred_lft forever
</span><span class="code-line"><span class="token number">2</span>: ens1f0: <span class="token operator">&#x3C;</span>BROADCAST,MULTICAST<span class="token operator">></span> mtu <span class="token number">1500</span> qdisc mq state DOWN qlen <span class="token number">1000</span>
</span><span class="code-line">    link/ether 2c:44:fd:8c:43:44 brd ff:ff:ff:ff:ff:ff
</span><span class="code-line"><span class="token number">3</span>: ens1f1: <span class="token operator">&#x3C;</span>BROADCAST,MULTICAST<span class="token operator">></span> mtu <span class="token number">1500</span> qdisc mq state DOWN qlen <span class="token number">1000</span>
</span><span class="code-line">    link/ether 2c:44:fd:8c:43:45 brd ff:ff:ff:ff:ff:ff
</span><span class="code-line"><span class="token number">4</span>: ens1f2: <span class="token operator">&#x3C;</span>BROADCAST,MULTICAST<span class="token operator">></span> mtu <span class="token number">1500</span> qdisc mq state DOWN qlen <span class="token number">1000</span>
</span><span class="code-line">    link/ether 2c:44:fd:8c:43:46 brd ff:ff:ff:ff:ff:ff
</span><span class="code-line"><span class="token number">5</span>: ens1f3: <span class="token operator">&#x3C;</span>BROADCAST,MULTICAST<span class="token operator">></span> mtu <span class="token number">1500</span> qdisc mq state DOWN qlen <span class="token number">1000</span>
</span><span class="code-line">    link/ether 2c:44:fd:8c:43:47 brd ff:ff:ff:ff:ff:ff
</span><span class="code-line"><span class="token number">6</span>: eno1: <span class="token operator">&#x3C;</span>BROADCAST,MULTICAST,UP,LOWER_UP<span class="token operator">></span> mtu <span class="token number">1500</span> qdisc mq master br0 state UP qlen <span class="token number">1000</span>
</span><span class="code-line">    link/ether <span class="token number">38</span>:63:bb:44:cf:6c brd ff:ff:ff:ff:ff:ff
</span><span class="code-line"><span class="token number">7</span>: eno2: <span class="token operator">&#x3C;</span>BROADCAST,MULTICAST<span class="token operator">></span> mtu <span class="token number">1500</span> qdisc mq state DOWN qlen <span class="token number">1000</span>
</span><span class="code-line">    link/ether <span class="token number">38</span>:63:bb:44:cf:6d brd ff:ff:ff:ff:ff:ff
</span><span class="code-line"><span class="token number">8</span>: eno3: <span class="token operator">&#x3C;</span>BROADCAST,MULTICAST<span class="token operator">></span> mtu <span class="token number">1500</span> qdisc mq state DOWN qlen <span class="token number">1000</span>
</span><span class="code-line">    link/ether <span class="token number">38</span>:63:bb:44:cf:6e brd ff:ff:ff:ff:ff:ff
</span><span class="code-line"><span class="token number">9</span>: eno4: <span class="token operator">&#x3C;</span>BROADCAST,MULTICAST<span class="token operator">></span> mtu <span class="token number">1500</span> qdisc mq state DOWN qlen <span class="token number">1000</span>
</span><span class="code-line">    link/ether <span class="token number">38</span>:63:bb:44:cf:6f brd ff:ff:ff:ff:ff:ff
</span><span class="code-line"><span class="token number">10</span>: virbr0: <span class="token operator">&#x3C;</span>NO-CARRIER,BROADCAST,MULTICAST,UP<span class="token operator">></span> mtu <span class="token number">1500</span> qdisc noqueue state DOWN
</span><span class="code-line">    link/ether <span class="token number">52</span>:54:00:19:3f:0f brd ff:ff:ff:ff:ff:ff
</span><span class="code-line">    inet <span class="token number">192.168</span>.122.1/24 brd <span class="token number">192.168</span>.122.255 scope global virbr0
</span><span class="code-line">       valid_lft forever preferred_lft forever
</span><span class="code-line"><span class="token number">11</span>: virbr0-nic: <span class="token operator">&#x3C;</span>BROADCAST,MULTICAST<span class="token operator">></span> mtu <span class="token number">1500</span> qdisc pfifo_fast master virbr0 state DOWN qlen <span class="token number">500</span>
</span><span class="code-line">    link/ether <span class="token number">52</span>:54:00:19:3f:0f brd ff:ff:ff:ff:ff:ff
</span><span class="code-line"><span class="token number">12</span>: br0: <span class="token operator">&#x3C;</span>BROADCAST,MULTICAST,UP,LOWER_UP<span class="token operator">></span> mtu <span class="token number">1500</span> qdisc noqueue state UP
</span><span class="code-line">    link/ether <span class="token number">38</span>:63:bb:44:cf:6c brd ff:ff:ff:ff:ff:ff
</span><span class="code-line">    inet <span class="token number">192.168</span>.188.132/24 brd <span class="token number">192.168</span>.188.255 scope global dynamic br0
</span><span class="code-line">       valid_lft 3397sec preferred_lft 3397sec
</span><span class="code-line">    inet <span class="token number">192.168</span>.188.133/24 brd <span class="token number">192.168</span>.188.255 scope global secondary br0
</span><span class="code-line">       valid_lft forever preferred_lft forever
</span><span class="code-line">    inet6 fe80::3a63:bbff:fe44:cf6c/64 scope <span class="token function">link</span>
</span><span class="code-line">       valid_lft forever preferred_lft forever
</span><span class="code-line"><span class="token number">19</span>: vnet0: <span class="token operator">&#x3C;</span>BROADCAST,MULTICAST,UP,LOWER_UP<span class="token operator">></span> mtu <span class="token number">1500</span> qdisc pfifo_fast master br0 state UNKNOWN qlen <span class="token number">500</span>
</span><span class="code-line">    link/ether fe:54:00:72:12:a8 brd ff:ff:ff:ff:ff:ff
</span><span class="code-line">    inet6 fe80::fc54:ff:fe72:12a8/64 scope <span class="token function">link</span>
</span><span class="code-line">       valid_lft forever preferred_lft forever
</span></code><div onclick="copied(this)" data-code="ip a l
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever
2: ens1f0: <BROADCAST,MULTICAST> mtu 1500 qdisc mq state DOWN qlen 1000
    link/ether 2c:44:fd:8c:43:44 brd ff:ff:ff:ff:ff:ff
3: ens1f1: <BROADCAST,MULTICAST> mtu 1500 qdisc mq state DOWN qlen 1000
    link/ether 2c:44:fd:8c:43:45 brd ff:ff:ff:ff:ff:ff
4: ens1f2: <BROADCAST,MULTICAST> mtu 1500 qdisc mq state DOWN qlen 1000
    link/ether 2c:44:fd:8c:43:46 brd ff:ff:ff:ff:ff:ff
5: ens1f3: <BROADCAST,MULTICAST> mtu 1500 qdisc mq state DOWN qlen 1000
    link/ether 2c:44:fd:8c:43:47 brd ff:ff:ff:ff:ff:ff
6: eno1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc mq master br0 state UP qlen 1000
    link/ether 38:63:bb:44:cf:6c brd ff:ff:ff:ff:ff:ff
7: eno2: <BROADCAST,MULTICAST> mtu 1500 qdisc mq state DOWN qlen 1000
    link/ether 38:63:bb:44:cf:6d brd ff:ff:ff:ff:ff:ff
8: eno3: <BROADCAST,MULTICAST> mtu 1500 qdisc mq state DOWN qlen 1000
    link/ether 38:63:bb:44:cf:6e brd ff:ff:ff:ff:ff:ff
9: eno4: <BROADCAST,MULTICAST> mtu 1500 qdisc mq state DOWN qlen 1000
    link/ether 38:63:bb:44:cf:6f brd ff:ff:ff:ff:ff:ff
10: virbr0: <NO-CARRIER,BROADCAST,MULTICAST,UP> mtu 1500 qdisc noqueue state DOWN
    link/ether 52:54:00:19:3f:0f brd ff:ff:ff:ff:ff:ff
    inet 192.168.122.1/24 brd 192.168.122.255 scope global virbr0
       valid_lft forever preferred_lft forever
11: virbr0-nic: <BROADCAST,MULTICAST> mtu 1500 qdisc pfifo_fast master virbr0 state DOWN qlen 500
    link/ether 52:54:00:19:3f:0f brd ff:ff:ff:ff:ff:ff
12: br0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP
    link/ether 38:63:bb:44:cf:6c brd ff:ff:ff:ff:ff:ff
    inet 192.168.188.132/24 brd 192.168.188.255 scope global dynamic br0
       valid_lft 3397sec preferred_lft 3397sec
    inet 192.168.188.133/24 brd 192.168.188.255 scope global secondary br0
       valid_lft forever preferred_lft forever
    inet6 fe80::3a63:bbff:fe44:cf6c/64 scope link
       valid_lft forever preferred_lft forever
19: vnet0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast master br0 state UNKNOWN qlen 500
    link/ether fe:54:00:72:12:a8 brd ff:ff:ff:ff:ff:ff
    inet6 fe80::fc54:ff:fe72:12a8/64 scope link
       valid_lft forever preferred_lft forever
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>å…¶ä¸­virbr0æ˜¯ç”±å®¿ä¸»æœºè™šæ‹Ÿæœºæ”¯æŒæ¨¡å—å®‰è£…æ—¶äº§ç”Ÿçš„è™šæ‹Ÿç½‘ç»œæ¥å£ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªswitchå’Œbridgeï¼Œè´Ÿè´£æŠŠå†…å®¹åˆ†å‘åˆ°å„è™šæ‹Ÿæœºã€‚å‡ ä¸ªè™šæ‹Ÿæœºç®¡ç†æ¨¡å—äº§ç”Ÿçš„æ¥å£å…³ç³»å¦‚ä¸‹å›¾:</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      
</span><span class="code-line">â”‚         HOST          â”‚                      
</span><span class="code-line">â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”              â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span><span class="code-line">â”‚ â”‚ br0  â”‚â”€â”¬â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚Virtual Machine <span class="token number">1</span>â”‚
</span><span class="code-line">â”‚ â””â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚     â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”      â”‚
</span><span class="code-line">â”‚     â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”‚ â”€ â”‚   â”‚ br0  â”‚      â”‚
</span><span class="code-line">â”‚     â”‚    â”‚  â”‚ vnet0 â”‚â”€â”‚â”˜  â”‚   â””â”€â”€â”€â”€â”€â”€â”˜      â”‚
</span><span class="code-line">â”‚ â”Œâ”€â”€â”€â”€â”€â”€â” â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span><span class="code-line">â”‚ â”‚virbr0â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
</span><span class="code-line">â”‚ â”‚ -nic â”‚ â””â”€â”€â”‚ vnet1 â”‚â”€â”‚â”  â”‚Virtual Machine <span class="token number">2</span>â”‚
</span><span class="code-line">â”‚ â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚                 â”‚
</span><span class="code-line">â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”              â”‚â”” â”€â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”      â”‚
</span><span class="code-line">â”‚ â”‚ eno0 â”‚              â”‚   â”‚   â”‚ br0  â”‚      â”‚
</span><span class="code-line">â”‚ â””â”€â”€â”€â”€â”€â”€â”˜              â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”˜      â”‚
</span><span class="code-line">â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”              â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span><span class="code-line">â”‚ â”‚ eno1 â”‚              â”‚
</span><span class="code-line">â”‚ â””â”€â”€â”€â”€â”€â”€â”˜              â”‚
</span><span class="code-line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></code><div onclick="copied(this)" data-code="â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      
â”‚         HOST          â”‚                      
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”              â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”‚ br0  â”‚â”€â”¬â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚Virtual Machine 1â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚     â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”      â”‚
â”‚     â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”‚ â”€ â”‚   â”‚ br0  â”‚      â”‚
â”‚     â”‚    â”‚  â”‚ vnet0 â”‚â”€â”‚â”˜  â”‚   â””â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â” â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â”‚virbr0â”‚ â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”‚ -nic â”‚ â””â”€â”€â”‚ vnet1 â”‚â”€â”‚â”  â”‚Virtual Machine 2â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”              â”‚â”” â”€â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”      â”‚
â”‚ â”‚ eno0 â”‚              â”‚   â”‚   â”‚ br0  â”‚      â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”˜              â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”              â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â”‚ eno1 â”‚              â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>ä»å›¾ä¸Šå¯ä»¥çœ‹å‡ºï¼Œè™šæ‹Ÿæ¥å£å’Œç‰©ç†æ¥å£ä¹‹é—´æ²¡æœ‰è¿æ¥å…³ç³»ï¼Œæ‰€ä»¥è™šæ‹Ÿæœºåªèƒ½åœ¨é€šè¿‡è™šæ‹Ÿçš„ç½‘ç»œè®¿é—®å¤–éƒ¨ä¸–ç•Œï¼Œæ— æ³•ä»ç½‘ç»œä¸Šå®šä½å’Œè®¿é—®è™šæ‹Ÿä¸»æœºã€‚</p>
    <p>virbr0æ˜¯ä¸€ä¸ªæ¡¥æ¥å™¨ï¼Œæ¥æ”¶æ‰€æœ‰åˆ°ç½‘ç»œ192.168.122.*çš„å†…å®¹ã€‚ä»ä¸‹é¢å‘½ä»¤å¯ä»¥éªŒè¯ï¼š</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">brctl show
</span><span class="code-line"><span class="token comment"># è¾“å‡ºç»“æœ</span>
</span><span class="code-line"><span class="token comment"># ---------------------</span>
</span><span class="code-line"><span class="token comment"># bridge name bridge id   STP enabled interfaces</span>
</span><span class="code-line"><span class="token comment"># br0   8000.3863bb44cf6c no    eno1</span>
</span><span class="code-line"><span class="token comment">#               vnet0</span>
</span><span class="code-line"><span class="token comment"># virbr0    8000.525400193f0f yes   virbr0-nic</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token function">ip</span> route
</span><span class="code-line"><span class="token comment"># default via 192.168.188.1 dev br0</span>
</span><span class="code-line"><span class="token comment"># 169.254.0.0/16 dev br0  scope link  metric 1012</span>
</span><span class="code-line"><span class="token comment"># 192.168.122.0/24 dev virbr0  proto kernel  scope link  src 192.168.122.1</span>
</span><span class="code-line"><span class="token comment"># 192.168.188.0/24 dev br0  proto kernel  scope link  src 192.168.188.132</span>
</span></code><div onclick="copied(this)" data-code="brctl show
# è¾“å‡ºç»“æœ
# ---------------------
# bridge name bridge id   STP enabled interfaces
# br0   8000.3863bb44cf6c no    eno1
#               vnet0
# virbr0    8000.525400193f0f yes   virbr0-nic

ip route
# default via 192.168.188.1 dev br0
# 169.254.0.0/16 dev br0  scope link  metric 1012
# 192.168.122.0/24 dev virbr0  proto kernel  scope link  src 192.168.122.1
# 192.168.188.0/24 dev br0  proto kernel  scope link  src 192.168.188.132
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>åŒæ—¶ï¼Œè™šæ‹Ÿæœºæ”¯æŒæ¨¡å—ä¼šä¿®æ”¹iptablesè§„åˆ™ï¼Œé€šè¿‡å‘½ä»¤å¯ä»¥æŸ¥çœ‹ï¼š</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">iptables -t nat -L -nv
</span><span class="code-line">iptables -t filter -L -nv
</span></code><div onclick="copied(this)" data-code="iptables -t nat -L -nv
iptables -t filter -L -nv
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>å¦‚æœæ²¡æœ‰defaultçš„è¯ï¼Œæˆ–è€…éœ€è¦æ‰©å±•è‡ªå·±çš„è™šæ‹Ÿç½‘ç»œï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤é‡æ–°å®‰è£…NATã€‚</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">virsh</span> net-define /usr/share/libvirt/networks/default.xml
</span></code><div onclick="copied(this)" data-code="virsh net-define /usr/share/libvirt/networks/default.xml
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>æ­¤å‘½ä»¤å®šä¹‰ä¸€ä¸ªè™šæ‹Ÿç½‘ç»œï¼Œdefault.xmlçš„å†…å®¹ï¼š</p>
    <pre class="language-html"><code class="language-html code-highlight"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>network</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>name</span><span class="token punctuation">></span></span>default<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>name</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>bridge</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>virbr0<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>forward</span><span class="token punctuation">/></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>ip</span> <span class="token attr-name">address</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>192.168.122.1<span class="token punctuation">"</span></span> <span class="token attr-name">netmask</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>255.255.255.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>dhcp</span><span class="token punctuation">></span></span>
</span><span class="code-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>range</span> <span class="token attr-name">start</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>192.168.122.2<span class="token punctuation">"</span></span> <span class="token attr-name">end</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>192.168.122.254<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>dhcp</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>ip</span><span class="token punctuation">></span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>network</span><span class="token punctuation">></span></span>
</span></code><div onclick="copied(this)" data-code="<network>
  <name>default</name>
  <bridge name=&#x22;virbr0&#x22; />
  <forward/>
  <ip address=&#x22;192.168.122.1&#x22; netmask=&#x22;255.255.255.0&#x22;>
    <dhcp>
      <range start=&#x22;192.168.122.2&#x22; end=&#x22;192.168.122.254&#x22; />
    </dhcp>
  </ip>
</network>
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>ä¹Ÿå¯ä»¥ä¿®æ”¹xmlï¼Œåˆ›å»ºè‡ªå·±çš„è™šæ‹Ÿç½‘ç»œã€‚</p>
    <p>é‡æ–°åŠ è½½å’Œæ¿€æ´»é…ç½®ï¼š</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">virsh</span>  net-define /etc/libvirt/qemu/networks/default.xml
</span></code><div onclick="copied(this)" data-code="virsh  net-define /etc/libvirt/qemu/networks/default.xml
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>æ ‡è®°ä¸ºè‡ªåŠ¨å¯åŠ¨ï¼š</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">virsh</span> net-autostart default
</span><span class="code-line"><span class="token comment"># Network default marked as autostarted</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token function">virsh</span> net-start default
</span></code><div onclick="copied(this)" data-code="virsh net-autostart default
# Network default marked as autostarted

virsh net-start default
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>å¯åŠ¨ç½‘ç»œï¼š</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">virsh</span> net-start default
</span><span class="code-line"><span class="token comment"># Network default started</span>
</span></code><div onclick="copied(this)" data-code="virsh net-start default
# Network default started
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>ç½‘ç»œå¯åŠ¨åå¯ä»¥ç”¨å‘½ä»¤brctl show æŸ¥çœ‹å’ŒéªŒè¯ã€‚</p>
    <p>ä¿®æ”¹<code>vi /etc/sysctl.conf</code>ä¸­å‚æ•°ï¼Œå…è®¸ipè½¬å‘ï¼ŒCentOS7æ˜¯åœ¨<code>vi /usr/lib/sysctl.d/00-system.conf</code> è¿™é‡Œé¢ä¿®æ”¹</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">net.ipv4.ip_forward<span class="token operator">=</span><span class="token number">1</span>
</span></code><div onclick="copied(this)" data-code="net.ipv4.ip_forward=1
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>é€šè¿‡ <code>sysctl -p</code> æŸ¥çœ‹ä¿®æ”¹ç»“æœ</p>
    <h3 id="è‡ªå®šä¹‰natç½‘ç»œ"><a class="anchor" aria-hidden="true" tabindex="-1" href="#è‡ªå®šä¹‰natç½‘ç»œ"><span class="octicon octicon-link"></span></a>è‡ªå®šä¹‰NATç½‘ç»œ</h3>
    <p>åˆ›å»ºåä¸º<code>management</code>çš„NATç½‘ç»œï¼Œ<code>vi /usr/share/libvirt/networks/management.xml</code></p>
    <pre class="language-html"><code class="language-html code-highlight"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>network</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>name</span><span class="token punctuation">></span></span>management<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>name</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>bridge</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>virbr1<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>forward</span><span class="token punctuation">/></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>ip</span> <span class="token attr-name">address</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>192.168.123.1<span class="token punctuation">"</span></span> <span class="token attr-name">netmask</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>255.255.255.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>dhcp</span><span class="token punctuation">></span></span>
</span><span class="code-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>range</span> <span class="token attr-name">start</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>192.168.123.2<span class="token punctuation">"</span></span> <span class="token attr-name">end</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>192.168.123.254<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>dhcp</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>ip</span><span class="token punctuation">></span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>network</span><span class="token punctuation">></span></span>
</span></code><div onclick="copied(this)" data-code="<network>
  <name>management</name>
  <bridge name=&#x22;virbr1&#x22;/>
  <forward/>
  <ip address=&#x22;192.168.123.1&#x22; netmask=&#x22;255.255.255.0&#x22;>
    <dhcp>
      <range start=&#x22;192.168.123.2&#x22; end=&#x22;192.168.123.254&#x22;/>
    </dhcp>
  </ip>
</network>
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>å¯ç”¨æ–°å»ºçš„NATç½‘ç»œ</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">virsh</span> net-define /usr/share/libvirt/networks/management.xml
</span><span class="code-line"><span class="token function">virsh</span> net-start management
</span><span class="code-line"><span class="token function">virsh</span> net-autostart management
</span></code><div onclick="copied(this)" data-code="virsh net-define /usr/share/libvirt/networks/management.xml
virsh net-start management
virsh net-autostart management
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>éªŒè¯</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">brctl show
</span><span class="code-line"><span class="token comment"># bridge name bridge id   STP enabled interfaces</span>
</span><span class="code-line"><span class="token comment"># br0   8000.3863bb44cf6c no    eno1</span>
</span><span class="code-line"><span class="token comment">#               vnet0</span>
</span><span class="code-line"><span class="token comment"># virbr0    8000.525400193f0f yes   virbr0-nic</span>
</span><span class="code-line"><span class="token comment"># virbr1    8000.52540027f0ba yes   virbr1-nic</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token function">virsh</span> net-list --all
</span><span class="code-line"><span class="token comment">#  Name                 State      Autostart     Persistent</span>
</span><span class="code-line"><span class="token comment"># ----------------------------------------------------------</span>
</span><span class="code-line"><span class="token comment">#  default              active     no            no</span>
</span><span class="code-line"><span class="token comment">#  management           active     yes           yes</span>
</span></code><div onclick="copied(this)" data-code="brctl show
# bridge name bridge id   STP enabled interfaces
# br0   8000.3863bb44cf6c no    eno1
#               vnet0
# virbr0    8000.525400193f0f yes   virbr0-nic
# virbr1    8000.52540027f0ba yes   virbr1-nic

virsh net-list --all
#  Name                 State      Autostart     Persistent
# ----------------------------------------------------------
#  default              active     no            no
#  management           active     yes           yes
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="é€€å‡ºè™šæ‹Ÿæœº"><a class="anchor" aria-hidden="true" tabindex="-1" href="#é€€å‡ºè™šæ‹Ÿæœº"><span class="octicon octicon-link"></span></a>é€€å‡ºè™šæ‹Ÿæœº</h3>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token builtin class-name">exit</span> <span class="token comment"># é€€å‡ºç³»ç»Ÿåˆ°ç™»å½•ç•Œé¢</span>
</span><span class="code-line">
</span><span class="code-line">Ctrl+5 <span class="token comment"># ä»è™šæ‹Ÿæœºç™»å½•é¡µé¢ï¼Œé€€å‡ºåˆ°å®¿ä¸»æœºå‘½ä»¤è¡Œé¡µé¢</span>
</span><span class="code-line">Ctrl+<span class="token punctuation">]</span> <span class="token comment"># æˆ–è€…ä¸‹é¢</span>
</span></code><div onclick="copied(this)" data-code="exit # é€€å‡ºç³»ç»Ÿåˆ°ç™»å½•ç•Œé¢

Ctrl+5 # ä»è™šæ‹Ÿæœºç™»å½•é¡µé¢ï¼Œé€€å‡ºåˆ°å®¿ä¸»æœºå‘½ä»¤è¡Œé¡µé¢
Ctrl+] # æˆ–è€…ä¸‹é¢
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="ä¿®æ”¹è™šæ‹Ÿæœºé…ç½®ä¿¡æ¯"><a class="anchor" aria-hidden="true" tabindex="-1" href="#ä¿®æ”¹è™šæ‹Ÿæœºé…ç½®ä¿¡æ¯"><span class="octicon octicon-link"></span></a>ä¿®æ”¹è™šæ‹Ÿæœºé…ç½®ä¿¡æ¯</h2>
    <p>ç›´æ¥é€šè¿‡vimå‘½ä»¤ä¿®æ”¹</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">vim</span>  /etc/libvirt/qemu/centos72.xml
</span></code><div onclick="copied(this)" data-code="vim  /etc/libvirt/qemu/centos72.xml
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>é€šè¿‡virshå‘½ä»¤ä¿®æ”¹</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">virsh</span> edit centos72
</span></code><div onclick="copied(this)" data-code="virsh edit centos72
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="å…‹éš†è™šæ‹Ÿæœº"><a class="anchor" aria-hidden="true" tabindex="-1" href="#å…‹éš†è™šæ‹Ÿæœº"><span class="octicon octicon-link"></span></a>å…‹éš†è™šæ‹Ÿæœº</h2>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># æš‚åœåŸå§‹è™šæ‹Ÿæœº</span>
</span><span class="code-line"><span class="token function">virsh</span> <span class="token function">shutdown</span> centos72
</span><span class="code-line">virt-clone -o centos72 -n centos.112 -f /home/vms/centos.112.qcow2 -m 00:00:00:00:00:01
</span><span class="code-line">virt-clone -o centos88 -n centos.112 --file /home/vms/centos.112.qcow2 --nonsparse
</span></code><div onclick="copied(this)" data-code="# æš‚åœåŸå§‹è™šæ‹Ÿæœº
virsh shutdown centos72
virt-clone -o centos72 -n centos.112 -f /home/vms/centos.112.qcow2 -m 00:00:00:00:00:01
virt-clone -o centos88 -n centos.112 --file /home/vms/centos.112.qcow2 --nonsparse
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p><code>virt-clone</code> å‚æ•°ä»‹ç»</p>
    <ul>
      <li><code>--version</code> æŸ¥çœ‹ç‰ˆæœ¬ã€‚</li>
      <li><code>-hï¼Œ--help</code> æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯ã€‚</li>
      <li><code>--connect=URI</code> è¿æ¥åˆ°è™šæ‹Ÿæœºç®¡ç†ç¨‹åº libvirt çš„URIã€‚</li>
      <li><code>-o åŸå§‹è™šæ‹Ÿæœºåç§°</code> åŸå§‹è™šæ‹Ÿæœºåç§°ï¼Œå¿…é¡»ä¸ºå…³é—­æˆ–è€…æš‚åœçŠ¶æ€ã€‚</li>
      <li><code>-n æ–°è™šæ‹Ÿæœºåç§°</code> --name æ–°è™šæ‹Ÿæœºåç§°ã€‚</li>
      <li><code>--auto-clone</code> ä»åŸæ¥çš„è™šæ‹Ÿæœºé…ç½®è‡ªåŠ¨ç”Ÿæˆå…‹éš†åç§°å’Œå­˜å‚¨è·¯å¾„ã€‚</li>
      <li><code>-u NEW_UUID, --uuid=NEW_UUID</code> å…‹éš†è™šæ‹Ÿæœºçš„æ–°çš„UUIDï¼Œé»˜è®¤å€¼æ˜¯ä¸€ä¸ªéšæœºç”Ÿæˆçš„UUIDã€‚</li>
      <li><code>-m NEW_MAC, --mac=NEW_MAC</code> è®¾ç½®ä¸€ä¸ªæ–°çš„macåœ°å€ï¼Œé»˜è®¤ä¸ºéšæœºç”Ÿæˆ MACã€‚</li>
      <li><code>-f NEW_DISKFILE, --file=NEW_DISKFILE</code> ä¸ºæ–°å®¢æˆ·æœºä½¿ç”¨æ–°çš„ç£ç›˜é•œåƒæ–‡ä»¶åœ°å€ã€‚</li>
      <li><code>--force-copy=TARGET</code> å¼ºåˆ¶å¤åˆ¶è®¾å¤‡ã€‚</li>
      <li><code>--nonsparse</code> ä¸ä½¿ç”¨ç¨€ç–æ–‡ä»¶å¤åˆ¶ç£ç›˜æ˜ åƒã€‚</li>
    </ul>
    <h2 id="é€šè¿‡é•œåƒåˆ›å»ºè™šæ‹Ÿæœº"><a class="anchor" aria-hidden="true" tabindex="-1" href="#é€šè¿‡é•œåƒåˆ›å»ºè™šæ‹Ÿæœº"><span class="octicon octicon-link"></span></a>é€šè¿‡é•œåƒåˆ›å»ºè™šæ‹Ÿæœº</h2>
    <p>åˆ›å»ºè™šæ‹Ÿæœºé•œåƒæ–‡ä»¶</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># å¤åˆ¶ç¬¬ä¸€æ¬¡å®‰è£…çš„å¹²å‡€ç³»ç»Ÿé•œåƒï¼Œä½œä¸ºåŸºç¡€é•œåƒæ–‡ä»¶ï¼Œ</span>
</span><span class="code-line"><span class="token comment"># åé¢åˆ›å»ºè™šæ‹Ÿæœºä½¿ç”¨è¿™ä¸ªåŸºç¡€é•œåƒ</span>
</span><span class="code-line"><span class="token function">cp</span> /home/vms/centos.88.qcow2 /home/vms/centos7.base.qcow2
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># ä½¿ç”¨åŸºç¡€é•œåƒæ–‡ä»¶ï¼Œåˆ›å»ºæ–°çš„è™šæ‹Ÿæœºé•œåƒ</span>
</span><span class="code-line"><span class="token function">cp</span> /home/vms/centos7.base.qcow2 /home/vms/centos7.113.qcow2
</span></code><div onclick="copied(this)" data-code="# å¤åˆ¶ç¬¬ä¸€æ¬¡å®‰è£…çš„å¹²å‡€ç³»ç»Ÿé•œåƒï¼Œä½œä¸ºåŸºç¡€é•œåƒæ–‡ä»¶ï¼Œ
# åé¢åˆ›å»ºè™šæ‹Ÿæœºä½¿ç”¨è¿™ä¸ªåŸºç¡€é•œåƒ
cp /home/vms/centos.88.qcow2 /home/vms/centos7.base.qcow2

# ä½¿ç”¨åŸºç¡€é•œåƒæ–‡ä»¶ï¼Œåˆ›å»ºæ–°çš„è™šæ‹Ÿæœºé•œåƒ
cp /home/vms/centos7.base.qcow2 /home/vms/centos7.113.qcow2
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>åˆ›å»ºè™šæ‹Ÿæœºé…ç½®æ–‡ä»¶</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># å¤åˆ¶ç¬¬ä¸€æ¬¡å®‰è£…çš„å¹²å‡€ç³»ç»Ÿé•œåƒï¼Œä½œä¸ºåŸºç¡€é…ç½®æ–‡ä»¶ã€‚</span>
</span><span class="code-line"><span class="token function">virsh</span> dumpxml centos.88 <span class="token operator">></span> /home/vms/centos7.base.xml
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># ä½¿ç”¨åŸºç¡€è™šæ‹Ÿæœºé•œåƒé…ç½®æ–‡ä»¶ï¼Œåˆ›å»ºæ–°çš„è™šæ‹Ÿæœºé…ç½®æ–‡ä»¶</span>
</span><span class="code-line"><span class="token function">cp</span> /home/vms/centos7.base.xml /home/vms/centos7.113.xml
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># ç¼–è¾‘æ–°è™šæ‹Ÿæœºé…ç½®æ–‡ä»¶</span>
</span><span class="code-line"><span class="token function">vi</span> /home/vms/centos7.113.xml
</span></code><div onclick="copied(this)" data-code="# å¤åˆ¶ç¬¬ä¸€æ¬¡å®‰è£…çš„å¹²å‡€ç³»ç»Ÿé•œåƒï¼Œä½œä¸ºåŸºç¡€é…ç½®æ–‡ä»¶ã€‚
virsh dumpxml centos.88 > /home/vms/centos7.base.xml

# ä½¿ç”¨åŸºç¡€è™šæ‹Ÿæœºé•œåƒé…ç½®æ–‡ä»¶ï¼Œåˆ›å»ºæ–°çš„è™šæ‹Ÿæœºé…ç½®æ–‡ä»¶
cp /home/vms/centos7.base.xml /home/vms/centos7.113.xml

# ç¼–è¾‘æ–°è™šæ‹Ÿæœºé…ç½®æ–‡ä»¶
vi /home/vms/centos7.113.xml
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>ä¸»è¦æ˜¯ä¿®æ”¹è™šæ‹Ÿæœºæ–‡ä»¶åï¼ŒUUIDï¼Œé•œåƒåœ°å€å’Œç½‘å¡åœ°å€ï¼Œå…¶ä¸­ UUID åœ¨ Linux ä¸‹å¯ä»¥ä½¿ç”¨ <code>uuidgen</code> å‘½ä»¤ç”Ÿæˆ</p>
    <pre class="language-html"><code class="language-html code-highlight"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>domain</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>kvm<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>name</span><span class="token punctuation">></span></span>centos7.113<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>name</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>uuid</span><span class="token punctuation">></span></span>1e86167a-33a9-4ce8-929e-58013fbf9122<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>uuid</span><span class="token punctuation">></span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>devices</span><span class="token punctuation">></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>disk</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>file<span class="token punctuation">'</span></span> <span class="token attr-name">device</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>disk<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>
</span><span class="code-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>source</span> <span class="token attr-name">file</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>/home/vms/centos7.113.img<span class="token punctuation">'</span></span><span class="token punctuation">/></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>disk</span><span class="token punctuation">></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>interface</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>bridge<span class="token punctuation">'</span></span><span class="token punctuation">></span></span>
</span><span class="code-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>mac</span> <span class="token attr-name">address</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>00:00:00:00:00:04<span class="token punctuation">'</span></span><span class="token punctuation">/></span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>interface</span><span class="token punctuation">></span></span>    
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>devices</span><span class="token punctuation">></span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>domain</span><span class="token punctuation">></span></span>
</span></code><div onclick="copied(this)" data-code="<domain type=&#x27;kvm&#x27;>
  <name>centos7.113</name>
  <uuid>1e86167a-33a9-4ce8-929e-58013fbf9122</uuid>
  <devices>
    <disk type=&#x27;file&#x27; device=&#x27;disk&#x27;>
      <source file=&#x27;/home/vms/centos7.113.img&#x27;/>
    </disk>
    <interface type=&#x27;bridge&#x27;>
      <mac address=&#x27;00:00:00:00:00:04&#x27;/>
    </interface>    
    </devices>
</domain>
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">virsh</span> define /home/vms/centos7.113.xml
</span><span class="code-line"><span class="token comment"># Domain centos.113 defined from /home/vms/centos7.113.xml</span>
</span></code><div onclick="copied(this)" data-code="virsh define /home/vms/centos7.113.xml
# Domain centos.113 defined from /home/vms/centos7.113.xml
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="åŠ¨æ€æ›´æ”¹cpuæ•°é‡å’Œå†…å­˜å¤§å°"><a class="anchor" aria-hidden="true" tabindex="-1" href="#åŠ¨æ€æ›´æ”¹cpuæ•°é‡å’Œå†…å­˜å¤§å°"><span class="octicon octicon-link"></span></a>åŠ¨æ€æ›´æ”¹cpuæ•°é‡å’Œå†…å­˜å¤§å°</h2>
    <p>åŠ¨æ€è°ƒæ•´ï¼Œå¦‚æœè¶…è¿‡ç»™è™šæ‹Ÿæœºåˆ†é…çš„æœ€å¤§å†…å­˜ï¼Œéœ€è¦é‡å¯è™šæ‹Ÿæœºã€‚</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">virsh</span> list --all
</span><span class="code-line"><span class="token comment">#  Id    åç§°                         çŠ¶æ€</span>
</span><span class="code-line"><span class="token comment"># ----------------------------------------------------</span>
</span><span class="code-line"><span class="token comment">#  2     working112                     running</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># æ›´æ”¹CPU</span>
</span><span class="code-line"><span class="token function">virsh</span> setvcpus working112 --maximum <span class="token number">4</span> --config
</span><span class="code-line"><span class="token comment"># æ›´æ”¹å†…å­˜</span>
</span><span class="code-line"><span class="token function">virsh</span> setmaxmem working112 <span class="token number">1048576</span> --config
</span><span class="code-line"><span class="token comment"># æŸ¥çœ‹ä¿¡æ¯</span>
</span><span class="code-line"><span class="token function">virsh</span> dominfo working112
</span></code><div onclick="copied(this)" data-code="virsh list --all
#  Id    åç§°                         çŠ¶æ€
# ----------------------------------------------------
#  2     working112                     running

# æ›´æ”¹CPU
virsh setvcpus working112 --maximum 4 --config
# æ›´æ”¹å†…å­˜
virsh setmaxmem working112 1048576 --config
# æŸ¥çœ‹ä¿¡æ¯
virsh dominfo working112
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="æŒ‚è½½ç£ç›˜"><a class="anchor" aria-hidden="true" tabindex="-1" href="#æŒ‚è½½ç£ç›˜"><span class="octicon octicon-link"></span></a>æŒ‚è½½ç£ç›˜</h2>
    <h3 id="åˆ›å»ºç£ç›˜"><a class="anchor" aria-hidden="true" tabindex="-1" href="#åˆ›å»ºç£ç›˜"><span class="octicon octicon-link"></span></a>åˆ›å»ºç£ç›˜</h3>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">mkdir</span> /home/vms
</span></code><div onclick="copied(this)" data-code="mkdir /home/vms
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>æŸ¥çœ‹é•œåƒä¿¡æ¯</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">virt-filesystems --long --parts --blkdevs -h -a working112.qcow2
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># Name       Type       Size  Parent</span>
</span><span class="code-line"><span class="token comment"># /dev/sda1  partition  200M  /dev/sda</span>
</span><span class="code-line"><span class="token comment"># /dev/sda2  partition  9.8G  /dev/sda</span>
</span><span class="code-line"><span class="token comment"># /dev/sda   device     10G   -</span>
</span><span class="code-line">
</span><span class="code-line">qemu-img info working112.qcow2
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># image: working112.qcow2</span>
</span><span class="code-line"><span class="token comment"># file format: qcow2</span>
</span><span class="code-line"><span class="token comment"># virtual size: 140G (150323855360 bytes)</span>
</span><span class="code-line"><span class="token comment"># disk size: 33G</span>
</span><span class="code-line"><span class="token comment"># cluster_size: 65536</span>
</span><span class="code-line"><span class="token comment"># Format specific information:</span>
</span><span class="code-line"><span class="token comment">#     compat: 1.1</span>
</span><span class="code-line"><span class="token comment">#     lazy refcounts: true</span>
</span></code><div onclick="copied(this)" data-code="virt-filesystems --long --parts --blkdevs -h -a working112.qcow2

# Name       Type       Size  Parent
# /dev/sda1  partition  200M  /dev/sda
# /dev/sda2  partition  9.8G  /dev/sda
# /dev/sda   device     10G   -

qemu-img info working112.qcow2

# image: working112.qcow2
# file format: qcow2
# virtual size: 140G (150323855360 bytes)
# disk size: 33G
# cluster_size: 65536
# Format specific information:
#     compat: 1.1
#     lazy refcounts: true
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>ç»™è™šæ‹Ÿæœºé•œåƒæ·»åŠ <code>200G</code>å¤§å°ï¼Œæ³¨æ„éœ€è¦åœæ­¢<code>working112</code>è™šæ‹Ÿæœº</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">qemu-img resize working112.qcow2 +200G
</span><span class="code-line"><span class="token comment"># Image resized.</span>
</span></code><div onclick="copied(this)" data-code="qemu-img resize working112.qcow2 +200G
# Image resized.
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>é¦–å…ˆï¼Œæˆ‘ä»¬åˆ¶ä½œå¦‚ä¸‹æ‰€ç¤ºçš„ç£ç›˜çš„å¤‡ä»½å‰¯æœ¬ã€‚</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">cp</span> working112.qcow2 working112-orig.qcow2
</span></code><div onclick="copied(this)" data-code="cp working112.qcow2 working112-orig.qcow2
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>ç„¶åæˆ‘ä»¬è¿è¡Œä¸‹é¢çš„å‘½ä»¤æ¥å¢åŠ  <code>/dev/sda</code></p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">virt-resize --expand /dev/sda1 working112-orig.qcow2 working112.qcow2
</span></code><div onclick="copied(this)" data-code="virt-resize --expand /dev/sda1 working112-orig.qcow2 working112.qcow2
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>æŸ¥çœ‹é•œåƒä¿¡æ¯</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">qemu-img info working112.qcow2
</span><span class="code-line"><span class="token comment"># image: working112.qcow2</span>
</span><span class="code-line"><span class="token comment"># file format: qcow2</span>
</span><span class="code-line"><span class="token comment"># virtual size: 140G (150323855360 bytes)</span>
</span><span class="code-line"><span class="token comment"># disk size: 33G</span>
</span><span class="code-line"><span class="token comment"># cluster_size: 65536</span>
</span><span class="code-line"><span class="token comment"># Format specific information:</span>
</span><span class="code-line"><span class="token comment">#     compat: 1.1</span>
</span><span class="code-line"><span class="token comment">#     lazy refcounts: true</span>
</span></code><div onclick="copied(this)" data-code="qemu-img info working112.qcow2
# image: working112.qcow2
# file format: qcow2
# virtual size: 140G (150323855360 bytes)
# disk size: 33G
# cluster_size: 65536
# Format specific information:
#     compat: 1.1
#     lazy refcounts: true
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>è¿›å…¥è™šæ‹Ÿæœº<code>virsh console working112</code> æŸ¥çœ‹ä¿¡æ¯ï¼š</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">vgdisplay <span class="token comment"># æ˜¾ç¤ºå·ç»„å¤§å°</span>
</span><span class="code-line">lvdisplay <span class="token comment"># æ˜¾ç¤ºé€»è¾‘å·å¤§å°</span>
</span></code><div onclick="copied(this)" data-code="vgdisplay # æ˜¾ç¤ºå·ç»„å¤§å°
lvdisplay # æ˜¾ç¤ºé€»è¾‘å·å¤§å°
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>å·ç»„å¤§å°å·²å¢åŠ ï¼Œä¸‹é¢éœ€è¦åˆ†é…å®¹é‡ç»™é€»è¾‘å·</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">lvextend -L +60G /dev/centos/root
</span></code><div onclick="copied(this)" data-code="lvextend -L +60G /dev/centos/root
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>è¿˜æœ‰æœ€åä¸€æ­¥ï¼Œåˆ†é…å¥½äº†éœ€è¦åšç³»ç»Ÿè°ƒæ•´</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># ext ç³»ç»Ÿæ ¼å¼ä½¿ç”¨ï¼š</span>
</span><span class="code-line">resize2fs /dev/centos/root
</span><span class="code-line"><span class="token comment"># xfs ç³»ç»Ÿæ ¼å¼ä½¿ç”¨ä¸‹é¢å‘½ä»¤</span>
</span><span class="code-line">xfs_growfs /dev/centos/root
</span></code><div onclick="copied(this)" data-code="# ext ç³»ç»Ÿæ ¼å¼ä½¿ç”¨ï¼š
resize2fs /dev/centos/root
# xfs ç³»ç»Ÿæ ¼å¼ä½¿ç”¨ä¸‹é¢å‘½ä»¤
xfs_growfs /dev/centos/root
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="å¸¸ç”¨å‘½ä»¤è¯´æ˜"><a class="anchor" aria-hidden="true" tabindex="-1" href="#å¸¸ç”¨å‘½ä»¤è¯´æ˜"><span class="octicon octicon-link"></span></a>å¸¸ç”¨å‘½ä»¤è¯´æ˜</h2>
    <h3 id="virt-install"><a class="anchor" aria-hidden="true" tabindex="-1" href="#virt-install"><span class="octicon octicon-link"></span></a>virt-install</h3>
    <p>å¸¸ç”¨å‚æ•°è¯´æ˜</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">â€“nameæŒ‡å®šè™šæ‹Ÿæœºåç§°
</span><span class="code-line">â€“memoryåˆ†é…å†…å­˜å¤§å°ã€‚
</span><span class="code-line">â€“vcpusåˆ†é…CPUæ ¸å¿ƒæ•°ï¼Œæœ€å¤§ä¸å®ä½“æœºCPUæ ¸å¿ƒæ•°ç›¸åŒ
</span><span class="code-line">â€“diskæŒ‡å®šè™šæ‹Ÿæœºé•œåƒï¼ŒsizeæŒ‡å®šåˆ†é…å¤§å°å•ä½ä¸ºGã€‚
</span><span class="code-line">â€“networkç½‘ç»œç±»å‹ï¼Œæ­¤å¤„ç”¨çš„æ˜¯é»˜è®¤ï¼Œä¸€èˆ¬ç”¨çš„åº”è¯¥æ˜¯bridgeæ¡¥æ¥ã€‚
</span><span class="code-line">â€“accelerateåŠ é€Ÿ
</span><span class="code-line">â€“cdromæŒ‡å®šå®‰è£…é•œåƒiso
</span><span class="code-line">â€“vncå¯ç”¨VNCè¿œç¨‹ç®¡ç†ï¼Œä¸€èˆ¬å®‰è£…ç³»ç»Ÿéƒ½è¦å¯ç”¨ã€‚
</span><span class="code-line">â€“vncportæŒ‡å®šVNCç›‘æ§ç«¯å£ï¼Œé»˜è®¤ç«¯å£ä¸º5900ï¼Œç«¯å£ä¸èƒ½é‡å¤ã€‚
</span><span class="code-line">â€“vnclistenæŒ‡å®šVNCç»‘å®šIPï¼Œé»˜è®¤ç»‘å®š127.0.0.1ï¼Œè¿™é‡Œæ”¹ä¸º0.0.0.0ã€‚
</span><span class="code-line">â€“os-type<span class="token operator">=</span>linux,windows
</span><span class="code-line">â€“os-variant<span class="token operator">=</span>rhel6
</span><span class="code-line">
</span><span class="code-line">--name      æŒ‡å®šè™šæ‹Ÿæœºåç§°
</span><span class="code-line">--ram       è™šæ‹Ÿæœºå†…å­˜å¤§å°ï¼Œä»¥ MB ä¸ºå•ä½
</span><span class="code-line">--vcpus     åˆ†é…CPUæ ¸å¿ƒæ•°ï¼Œæœ€å¤§ä¸å®ä½“æœºCPUæ ¸å¿ƒæ•°ç›¸åŒ
</span><span class="code-line">â€“-vnc       å¯ç”¨VNCè¿œç¨‹ç®¡ç†ï¼Œä¸€èˆ¬å®‰è£…ç³»ç»Ÿéƒ½è¦å¯ç”¨ã€‚
</span><span class="code-line">â€“-vncport   æŒ‡å®šVNCç›‘æ§ç«¯å£ï¼Œé»˜è®¤ç«¯å£ä¸º5900ï¼Œç«¯å£ä¸èƒ½é‡å¤ã€‚
</span><span class="code-line">â€“-vnclisten  æŒ‡å®šVNCç»‘å®šIPï¼Œé»˜è®¤ç»‘å®š127.0.0.1ï¼Œè¿™é‡Œæ”¹ä¸º0.0.0.0ã€‚
</span><span class="code-line">--network   è™šæ‹Ÿæœºç½‘ç»œé…ç½®
</span><span class="code-line">  <span class="token comment"># å…¶ä¸­å­é€‰é¡¹ï¼Œbridge=br0 æŒ‡å®šæ¡¥æ¥ç½‘å¡çš„åç§°ã€‚</span>
</span><span class="code-line">
</span><span class="code-line">â€“os-type<span class="token operator">=</span>linux,windows
</span><span class="code-line">â€“os-variant<span class="token operator">=</span>rhel7.2
</span><span class="code-line">
</span><span class="code-line">--disk æŒ‡å®šè™šæ‹Ÿæœºçš„ç£ç›˜å­˜å‚¨ä½ç½®
</span><span class="code-line">  <span class="token comment"># sizeï¼Œåˆå§‹ç£ç›˜å¤§å°ï¼Œä»¥ GB ä¸ºå•ä½ã€‚</span>
</span><span class="code-line">
</span><span class="code-line">--location æŒ‡å®šå®‰è£…ä»‹è´¨è·¯å¾„ï¼Œå¦‚å…‰ç›˜é•œåƒçš„æ–‡ä»¶è·¯å¾„ã€‚
</span><span class="code-line">--graphics å›¾å½¢åŒ–æ˜¾ç¤ºé…ç½®
</span><span class="code-line">  <span class="token comment"># å…¨æ–°å®‰è£…è™šæ‹Ÿæœºè¿‡ç¨‹ä¸­å¯èƒ½ä¼šæœ‰å¾ˆå¤šäº¤äº’æ“ä½œï¼Œæ¯”å¦‚è®¾ç½®è¯­è¨€ï¼Œåˆå§‹åŒ– root å¯†ç ç­‰ç­‰ã€‚</span>
</span><span class="code-line">  <span class="token comment"># graphics é€‰é¡¹çš„ä½œç”¨å°±æ˜¯é…ç½®å›¾å½¢åŒ–çš„äº¤äº’æ–¹å¼ï¼Œå¯ä»¥ä½¿ç”¨ vncï¼ˆä¸€ç§è¿œç¨‹æ¡Œé¢è½¯ä»¶ï¼‰è¿›è¡Œé“¾æ¥ã€‚</span>
</span><span class="code-line">  <span class="token comment"># æˆ‘ä»¬è¿™åˆ—ä½¿ç”¨å‘½ä»¤è¡Œçš„æ–¹å¼å®‰è£…ï¼Œæ‰€ä»¥è¿™é‡Œè¦è®¾ç½®ä¸º noneï¼Œä½†è¦é€šè¿‡ --extra-args é€‰é¡¹æŒ‡å®šç»ˆç«¯ä¿¡æ¯ï¼Œ</span>
</span><span class="code-line">  <span class="token comment"># è¿™æ ·æ‰èƒ½å°†å®‰è£…è¿‡ç¨‹ä¸­çš„äº¤äº’ä¿¡æ¯è¾“å‡ºåˆ°å½“å‰æ§åˆ¶å°ã€‚</span>
</span><span class="code-line">--extra-args æ ¹æ®ä¸åŒçš„å®‰è£…æ–¹å¼è®¾ç½®ä¸åŒçš„é¢å¤–é€‰é¡¹
</span></code><div onclick="copied(this)" data-code="â€“nameæŒ‡å®šè™šæ‹Ÿæœºåç§°
â€“memoryåˆ†é…å†…å­˜å¤§å°ã€‚
â€“vcpusåˆ†é…CPUæ ¸å¿ƒæ•°ï¼Œæœ€å¤§ä¸å®ä½“æœºCPUæ ¸å¿ƒæ•°ç›¸åŒ
â€“diskæŒ‡å®šè™šæ‹Ÿæœºé•œåƒï¼ŒsizeæŒ‡å®šåˆ†é…å¤§å°å•ä½ä¸ºGã€‚
â€“networkç½‘ç»œç±»å‹ï¼Œæ­¤å¤„ç”¨çš„æ˜¯é»˜è®¤ï¼Œä¸€èˆ¬ç”¨çš„åº”è¯¥æ˜¯bridgeæ¡¥æ¥ã€‚
â€“accelerateåŠ é€Ÿ
â€“cdromæŒ‡å®šå®‰è£…é•œåƒiso
â€“vncå¯ç”¨VNCè¿œç¨‹ç®¡ç†ï¼Œä¸€èˆ¬å®‰è£…ç³»ç»Ÿéƒ½è¦å¯ç”¨ã€‚
â€“vncportæŒ‡å®šVNCç›‘æ§ç«¯å£ï¼Œé»˜è®¤ç«¯å£ä¸º5900ï¼Œç«¯å£ä¸èƒ½é‡å¤ã€‚
â€“vnclistenæŒ‡å®šVNCç»‘å®šIPï¼Œé»˜è®¤ç»‘å®š127.0.0.1ï¼Œè¿™é‡Œæ”¹ä¸º0.0.0.0ã€‚
â€“os-type=linux,windows
â€“os-variant=rhel6

--name      æŒ‡å®šè™šæ‹Ÿæœºåç§°
--ram       è™šæ‹Ÿæœºå†…å­˜å¤§å°ï¼Œä»¥ MB ä¸ºå•ä½
--vcpus     åˆ†é…CPUæ ¸å¿ƒæ•°ï¼Œæœ€å¤§ä¸å®ä½“æœºCPUæ ¸å¿ƒæ•°ç›¸åŒ
â€“-vnc       å¯ç”¨VNCè¿œç¨‹ç®¡ç†ï¼Œä¸€èˆ¬å®‰è£…ç³»ç»Ÿéƒ½è¦å¯ç”¨ã€‚
â€“-vncport   æŒ‡å®šVNCç›‘æ§ç«¯å£ï¼Œé»˜è®¤ç«¯å£ä¸º5900ï¼Œç«¯å£ä¸èƒ½é‡å¤ã€‚
â€“-vnclisten  æŒ‡å®šVNCç»‘å®šIPï¼Œé»˜è®¤ç»‘å®š127.0.0.1ï¼Œè¿™é‡Œæ”¹ä¸º0.0.0.0ã€‚
--network   è™šæ‹Ÿæœºç½‘ç»œé…ç½®
  # å…¶ä¸­å­é€‰é¡¹ï¼Œbridge=br0 æŒ‡å®šæ¡¥æ¥ç½‘å¡çš„åç§°ã€‚

â€“os-type=linux,windows
â€“os-variant=rhel7.2

--disk æŒ‡å®šè™šæ‹Ÿæœºçš„ç£ç›˜å­˜å‚¨ä½ç½®
  # sizeï¼Œåˆå§‹ç£ç›˜å¤§å°ï¼Œä»¥ GB ä¸ºå•ä½ã€‚

--location æŒ‡å®šå®‰è£…ä»‹è´¨è·¯å¾„ï¼Œå¦‚å…‰ç›˜é•œåƒçš„æ–‡ä»¶è·¯å¾„ã€‚
--graphics å›¾å½¢åŒ–æ˜¾ç¤ºé…ç½®
  # å…¨æ–°å®‰è£…è™šæ‹Ÿæœºè¿‡ç¨‹ä¸­å¯èƒ½ä¼šæœ‰å¾ˆå¤šäº¤äº’æ“ä½œï¼Œæ¯”å¦‚è®¾ç½®è¯­è¨€ï¼Œåˆå§‹åŒ– root å¯†ç ç­‰ç­‰ã€‚
  # graphics é€‰é¡¹çš„ä½œç”¨å°±æ˜¯é…ç½®å›¾å½¢åŒ–çš„äº¤äº’æ–¹å¼ï¼Œå¯ä»¥ä½¿ç”¨ vncï¼ˆä¸€ç§è¿œç¨‹æ¡Œé¢è½¯ä»¶ï¼‰è¿›è¡Œé“¾æ¥ã€‚
  # æˆ‘ä»¬è¿™åˆ—ä½¿ç”¨å‘½ä»¤è¡Œçš„æ–¹å¼å®‰è£…ï¼Œæ‰€ä»¥è¿™é‡Œè¦è®¾ç½®ä¸º noneï¼Œä½†è¦é€šè¿‡ --extra-args é€‰é¡¹æŒ‡å®šç»ˆç«¯ä¿¡æ¯ï¼Œ
  # è¿™æ ·æ‰èƒ½å°†å®‰è£…è¿‡ç¨‹ä¸­çš„äº¤äº’ä¿¡æ¯è¾“å‡ºåˆ°å½“å‰æ§åˆ¶å°ã€‚
--extra-args æ ¹æ®ä¸åŒçš„å®‰è£…æ–¹å¼è®¾ç½®ä¸åŒçš„é¢å¤–é€‰é¡¹
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="virsh"><a class="anchor" aria-hidden="true" tabindex="-1" href="#virsh"><span class="octicon octicon-link"></span></a>virsh</h3>
    <p>åŸºç¡€å‘½ä»¤</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">virsh</span> list --all           <span class="token comment"># æŸ¥çœ‹æ‰€æœ‰è¿è¡Œå’Œæ²¡æœ‰è¿è¡Œçš„è™šæ‹Ÿæœº</span>
</span><span class="code-line"><span class="token function">virsh</span> list                 <span class="token comment"># æŸ¥çœ‹åœ¨è¿è¡Œçš„è™šæ‹Ÿæœº</span>
</span><span class="code-line"><span class="token function">virsh</span> dumpxml vm-name      <span class="token comment"># æŸ¥çœ‹kvmè™šæ‹Ÿæœºé…ç½®æ–‡ä»¶</span>
</span><span class="code-line"><span class="token function">virsh</span> start vm-name        <span class="token comment"># å¯åŠ¨kvmè™šæ‹Ÿæœº</span>
</span><span class="code-line"><span class="token function">virsh</span> <span class="token function">shutdown</span> vm-name     <span class="token comment"># æ­£å¸¸å…³æœº</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token function">virsh</span> destroy vm-name      <span class="token comment"># éæ­£å¸¸å…³æœºï¼Œå¼ºåˆ¶å…³é—­è™šæ‹Ÿæœºï¼ˆç›¸å½“äºç‰©ç†æœºç›´æ¥æ‹”æ‰ç”µæºï¼‰</span>
</span><span class="code-line"><span class="token function">virsh</span> undefine vm-name     <span class="token comment"># åˆ é™¤vmçš„é…ç½®æ–‡ä»¶</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token function">ls</span> /etc/libvirt/qemu
</span><span class="code-line"><span class="token comment"># æŸ¥çœ‹åˆ é™¤ç»“æœï¼ŒCentos-6.6çš„é…ç½®æ–‡ä»¶è¢«åˆ é™¤ï¼Œä½†ç£ç›˜æ–‡ä»¶ä¸ä¼šè¢«åˆ é™¤</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token function">virsh</span> define file-name.xml <span class="token comment"># æ ¹æ®é…ç½®æ–‡ä»¶å®šä¹‰è™šæ‹Ÿæœº</span>
</span><span class="code-line"><span class="token function">virsh</span> <span class="token function">suspend</span> vm-name      <span class="token comment"># æŒ‚èµ·ï¼Œç»ˆæ­¢</span>
</span><span class="code-line"><span class="token function">virsh</span> resumed vm-name      <span class="token comment"># æ¢å¤è¢«æŒ‚èµ·çš„è™šæ‹Ÿæœº</span>
</span><span class="code-line"><span class="token function">virsh</span> autostart vm-name    <span class="token comment"># å¼€æœºè‡ªå¯åŠ¨vm</span>
</span><span class="code-line"><span class="token function">virsh</span> console <span class="token operator">&#x3C;</span>è™šæ‹Ÿæœºåç§°<span class="token operator">></span>   <span class="token comment"># è¿æ¥è™šæ‹Ÿæœº</span>
</span></code><div onclick="copied(this)" data-code="virsh list --all           # æŸ¥çœ‹æ‰€æœ‰è¿è¡Œå’Œæ²¡æœ‰è¿è¡Œçš„è™šæ‹Ÿæœº
virsh list                 # æŸ¥çœ‹åœ¨è¿è¡Œçš„è™šæ‹Ÿæœº
virsh dumpxml vm-name      # æŸ¥çœ‹kvmè™šæ‹Ÿæœºé…ç½®æ–‡ä»¶
virsh start vm-name        # å¯åŠ¨kvmè™šæ‹Ÿæœº
virsh shutdown vm-name     # æ­£å¸¸å…³æœº

virsh destroy vm-name      # éæ­£å¸¸å…³æœºï¼Œå¼ºåˆ¶å…³é—­è™šæ‹Ÿæœºï¼ˆç›¸å½“äºç‰©ç†æœºç›´æ¥æ‹”æ‰ç”µæºï¼‰
virsh undefine vm-name     # åˆ é™¤vmçš„é…ç½®æ–‡ä»¶

ls /etc/libvirt/qemu
# æŸ¥çœ‹åˆ é™¤ç»“æœï¼ŒCentos-6.6çš„é…ç½®æ–‡ä»¶è¢«åˆ é™¤ï¼Œä½†ç£ç›˜æ–‡ä»¶ä¸ä¼šè¢«åˆ é™¤

virsh define file-name.xml # æ ¹æ®é…ç½®æ–‡ä»¶å®šä¹‰è™šæ‹Ÿæœº
virsh suspend vm-name      # æŒ‚èµ·ï¼Œç»ˆæ­¢
virsh resumed vm-name      # æ¢å¤è¢«æŒ‚èµ·çš„è™šæ‹Ÿæœº
virsh autostart vm-name    # å¼€æœºè‡ªå¯åŠ¨vm
virsh console <è™šæ‹Ÿæœºåç§°>   # è¿æ¥è™šæ‹Ÿæœº
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="é”™è¯¯è§£å†³"><a class="anchor" aria-hidden="true" tabindex="-1" href="#é”™è¯¯è§£å†³"><span class="octicon octicon-link"></span></a>é”™è¯¯è§£å†³</h2>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">console <span class="token builtin class-name">test</span>
</span><span class="code-line">Connected to domain <span class="token builtin class-name">test</span>
</span><span class="code-line">Escape character is ^<span class="token punctuation">]</span>
</span></code><div onclick="copied(this)" data-code="console test
Connected to domain test
Escape character is ^]
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>å¦‚æœå‡ºç°ä¸Šé¢å­—ç¬¦ä¸²ä½¿ç”¨ <kbd>CTRL+Shift+5</kbd> <kbd>CTRL+Shift+]</kbd></p>
    <ol>
      <li>
        <p>
          ERROR Format cannot be specified for unmanaged storage.
          virt-manager æ²¡æœ‰æ‰¾åˆ°å­˜å‚¨æ± ï¼Œåˆ›å»ºå‚¨å­˜æ± å³å¯
        </p>
      </li>
      <li>
        <p>
          KVM VNCå®¢æˆ·ç«¯è¿æ¥é—ªé€€
          ä½¿ç”¨real vncæˆ–è€…å…¶å®ƒvncå®¢æˆ·ç«¯è¿æ¥kvmé—ªé€€ï¼ŒæŠŠå®¢æˆ·ç«¯è®¾ç½®ä¸­çš„ColourLevelå€¼è®¾ç½®ä¸ºrgb222æˆ–fullå³å¯
        </p>
      </li>
      <li>
        <p>virsh shutdown 
          <domain>
            æ— æ³•å…³é—­è™šæ‹Ÿæœº
            ä½¿ç”¨è¯¥å‘½ä»¤å…³é—­è™šæ‹Ÿæœºæ—¶ï¼ŒKVMæ˜¯å‘è™šæ‹Ÿæœºå‘é€ä¸€ä¸ªACPIçš„æŒ‡ä»¤ï¼Œéœ€è¦è™šæ‹Ÿæœºå®‰è£…acpidæœåŠ¡ï¼š
          </domain>
        </p>
      </li>
      <li>
        <p>operation failed: Active console session exists for this domain</p>
      </li>
    </ol>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># æ–¹æ¡ˆ1</span>
</span><span class="code-line">$ <span class="token function">ps</span> aux <span class="token operator">|</span> <span class="token function">grep</span> console
</span><span class="code-line">$ <span class="token function">kill</span> -9 <span class="token operator">&#x3C;</span>è¿›ç¨‹å·<span class="token operator">></span>
</span><span class="code-line"><span class="token comment"># æ–¹æ¡ˆ2</span>
</span><span class="code-line">$ /etc/init.d/libvirt-bin restart
</span><span class="code-line"><span class="token comment"># æ–¹æ¡ˆ3</span>
</span><span class="code-line">$ <span class="token function">ps</span> aux <span class="token operator">|</span> <span class="token function">grep</span> kvm
</span><span class="code-line">$ <span class="token function">kill</span> å¯¹åº”çš„è™šæ‹Ÿæœºè¿›ç¨‹
</span></code><div onclick="copied(this)" data-code="# æ–¹æ¡ˆ1
$ ps aux | grep console
$ kill -9 <è¿›ç¨‹å·>
# æ–¹æ¡ˆ2
$ /etc/init.d/libvirt-bin restart
# æ–¹æ¡ˆ3
$ ps aux | grep kvm
$ kill å¯¹åº”çš„è™šæ‹Ÿæœºè¿›ç¨‹
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="å‚è€ƒæ–‡ç« "><a class="anchor" aria-hidden="true" tabindex="-1" href="#å‚è€ƒæ–‡ç« "><span class="octicon octicon-link"></span></a>å‚è€ƒæ–‡ç« </h2>
    <ul>
      <li><a href="https://www.linux-kvm.org/page/Main_Page">KVMå®˜æ–¹ç½‘ç«™</a></li>
      <li><a href="http://www.cnblogs.com/ilanni/p/3878151.html">KVMè™šæ‹ŸæœºLinuxç³»ç»Ÿå¢åŠ ç¡¬ç›˜</a></li>
      <li><a href="https://www.ibm.com/support/knowledgecenter/zh/linuxonibm/liaat/liaatvirtinstalloptions.htm">virt-install å‘½ä»¤å‚æ•°è¯¦è§£</a></li>
      <li><a href="https://raymii.org/s/articles/virt-install_introduction_and_copy_paste_distro_install_commands.html">ä½¿ç”¨virt-installå®‰è£…è™šæ‹Ÿæœºï¼Œå‘è¡Œç‰ˆå®‰è£…ä»£ç ç›´æ¥å¤åˆ¶è¿è¡Œ</a></li>
      <li><a href="http://blog.oneiroi.co.uk/linux/kvm/virt-resize/RHEL/LVM/kvm-linux-expanding-a-lvm-guest-file-system-using-virt-resize/">KVM Linux - Expanding a Guest LVM File System Using Virt-resize</a></li>
    </ul>
  <style>.markdown-body pre .copied {
  display: flex;
  position: absolute;
  cursor: pointer;
  color: #a5afbb;
  top: 6px;
  right: 6px;
  border-radius: 5px;
  background: #82828226;
  padding: 6px;
  font-size: 12px;
  transition: all .3s;
}
.markdown-body pre .copied:not(.active) {
  visibility: hidden;
}
.markdown-body pre:hover .copied {
  visibility: visible;
}
.markdown-body pre:hover .copied:hover {
  background: #4caf50;
  color: #fff;
}
.markdown-body pre:hover .copied:active,
.markdown-body pre .copied.active {
  background: #2e9b33;
  color: #fff;
}
.markdown-body pre .copied .octicon-copy {
  display: block;
}
.markdown-body pre .copied .octicon-check {
  display: none;
}
.markdown-body pre .active .octicon-copy {
  display: none;
}
.markdown-body pre .active .octicon-check {
  display: block;
}</style><script>/*! @uiw/copy-to-clipboard v1.0.12 | MIT (c) 2021 Kenny Wang | https://github.com/uiwjs/copy-to-clipboard.git */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).copyTextToClipboard=t()}(this,(function(){"use strict";return function(e,t){const o=document.createElement("textarea");o.value=e,o.setAttribute("readonly",""),o.style={position:"absolute",left:"-9999px"},document.body.appendChild(o);const n=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);o.select();let c=!1;try{c=!!document.execCommand("copy")}catch(e){c=!1}document.body.removeChild(o),n&&document.getSelection&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(n)),t&&t(c)}}));

function copied(target, str) {
  target.classList.add('active');
  copyTextToClipboard(target.dataset.code, function() {
    setTimeout(() => {
      target.classList.remove('active');
    }, 2000);
  });
}</script></markdown-style><div class="footer"><a data-edit target="__blank" title="https://github.com/jaywcjlove/handbook/edit/master/CentOS/CentOS7å®‰è£…KVMè™šæ‹Ÿæœºè¯¦è§£.md" href="https://github.com/jaywcjlove/handbook/edit/master/CentOS/CentOS7å®‰è£…KVMè™šæ‹Ÿæœºè¯¦è§£.md">ç¼–è¾‘å½“å‰é¡µé¢</a><a target="__blank" href="https://jaywcjlove.gitee.io/handbook/">å›½å†…é•œåƒç«™ç‚¹ ğŸ‡¨ğŸ‡³</a><a target="__blank" href="https://github.com/jaywcjlove/handbook">Github</a><a target="__blank" href="https://gitee.com/jaywcjlove/handbook">Gitee</a><div class="copyright">Copyright Â© 2021. All rights reserved.</div></div></body>
</html>
