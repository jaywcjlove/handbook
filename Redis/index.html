<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>
      10åˆ†é’Ÿå¿«é€Ÿå…¥é—¨Redis---
      ç›®å½•
      - handbook
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta description="æ”¾ç½®æˆ‘çš„ç¬”è®°ã€æœé›†ã€æ‘˜å½•ã€å®è·µï¼Œä¿æŒå¥½å¥‡å¿ƒã€‚çœ‹æ–‡éœ€è°¨æ…ï¼Œåæœå¾ˆä¸¥é‡ã€‚10åˆ†é’Ÿå¿«é€Ÿå…¥é—¨Redis---

ç›®å½•
 - handbook">
    <meta keywords="example,handbook">
    <link rel="icon" href="data:image/png;base64,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" type="image/x-icon">
    <style>[data-color-mode*='dark'], [data-color-mode*='dark'] body {
  color-scheme: dark;
  --color-header-bg: #3a3a3a8f;
  --color-header-border: #323232;
  --color-hover: #ffffff30;
}
[data-color-mode*='light'], [data-color-mode*='light'] body {
  color-scheme: light;
  --color-header-bg: #ffffff52;
  --color-header-border: #d3d3d3;
  --color-hover: #f2f2f2;
}

@media screen and (max-width: 1140px) {
  .header .inner {
    justify-content: center !important;
  }
}

body {
  margin: 0;
}

dark-mode {
  top: 5px !important;
  font-size: 14px;
}

markdown-style {
  margin-top: 78px !important;
}

github-corners {
  width: 32px !important;
  height: 32px;
  right: 0;
}

.header {
  position: fixed;
  width: 100%;
  background: #fff;
  backdrop-filter: saturate(180%) blur(0.4rem);
  background-color: var(--color-header-bg);
  border-bottom: 1px solid var(--color-header-border);
  z-index: 99;
  top: 0;
}

.header .inner {
  max-width: 960px;
  margin: 0 auto;
  display: flex;
  justify-content: space-between;
  padding: 5px 0;
}

.header .logo {
  margin-right: 10px;
}
.header .title {
  display: flex;
  align-items: center;
  font-size: 16px;
  font-weight: bold;
}
.header .logo img {
  height: 26px;
  display: block;
}

.footer {
  max-width: 960px;
  margin: 0 auto;
  text-align: center;
  padding: 0 0 110px 0;
  border-top: 1px solid var(--color-header-border);
  padding-top: 18px;
}

.footer a {
  font-size: 14px;
  text-decoration: initial;
  color: #3f51b5;
}

.footer a:hover {
  color:#009688;
  text-decoration: underline;
}

.footer a + a {
  margin-left: 10px;
}

.footer .copyright {
  color: #596068;
  font-size: 14px;
  padding-top: 5px;
}</style>
  </head>
  <body id="totop"><header class="header"><article class="inner"><a class="logo" href="../index.html"><img src="data:image/png;base64,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" alt="handbook logo"></a><div class="title">handbook</div><nav class="nav"></nav></article></header><script type="module">const GITHUB_CORNERS_TEMPLATE = document.createElement("template");
GITHUB_CORNERS_TEMPLATE.innerHTML = `
<style>
:host a:hover .octo-arm { animation: octocat-wave 560ms ease-in-out; }
@keyframes octocat-wave {
  0%, 100% { transform: rotate(0); }
  20%, 60% { transform: rotate(-25deg); }
  40%, 80% { transform: rotate(10deg); }
}
@media (max-width:500px) {
  :host a:hover .octo-arm { animation: none; }
  :host .octo-arm { animation: octocat-wave 560ms ease-in-out; }
}
:host svg { z-index: 99; position: fixed; border: 0px; top: 0px; }
</style>
<svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true">
  <a xlink:href="https://github.com/uiwjs/react-github-corners" target="_blank" rel="nofollow sponsored" style="fill: rgb(21, 21, 19); color: rgb(255, 255, 255);">
    <g>
      <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
      <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" class="octo-arm" style="transform-origin: 130px 106px;"></path>
      <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
    </g>
  </a>
</svg>
`;
export class GithubCorners extends HTMLElement {
    constructor() {
        super();
        this.right = '0';
        this.shadow = this.attachShadow({ mode: 'open' });
        this.shadow.appendChild(this.ownerDocument.importNode(GITHUB_CORNERS_TEMPLATE.content, true));
        this.update();
    }
    static get observedAttributes() {
        return ['style', 'z-index', 'target', 'height', 'width', 'href', 'color', 'fill', 'position', 'top', 'left', 'right', 'bottom', 'transform'];
    }
    setAttr(name, value) {
        const svg = this.shadow.querySelector('svg');
        if (/(href)/.test(name.toLocaleLowerCase())) {
            svg.lastElementChild.setAttribute('xlink:href', value);
        }
        else if (/(color|fill)/.test(name.toLocaleLowerCase())) {
            svg.firstElementChild.style[name] = value;
        }
        else if (/(z-index|position|top|left|right|bottom|transform)/.test(name.toLocaleLowerCase())) {
            svg.style[name] = value;
        }
        else {
            svg.setAttribute(name, value);
        }
    }
    update() {
        ;
        [...this.getAttributeNames(), 'right'].forEach((name) => {
            const value = this.getAttribute(name) || this[name] || '';
            this.setAttr(name, value);
        });
    }
    attributeChangedCallback(name, oldValue, newValue) {
        if (oldValue !== newValue) {
            this.setAttr(name, newValue);
        }
    }
}
customElements.define('github-corners', GithubCorners);</script><github-corners target="__blank" position="fixed" z-index="999" href="https://github.com/jaywcjlove/handbook.git"></github-corners><dark-mode permanent style="position: fixed; top: 8px; left: 10px; z-index: 999;" dark="Dark" light="Light"></dark-mode><script>const t=document;const e="_dark_mode_theme_";const s="permanent";const o="colorschemechange";const i="permanentcolorscheme";const h="light";const r="dark";const n=(t,e,s=e)=>{Object.defineProperty(t,s,{enumerable:true,get(){const t=this.getAttribute(e);return t===null?"":t},set(t){this.setAttribute(e,t)}})};const c=(t,e,s=e)=>{Object.defineProperty(t,s,{enumerable:true,get(){return this.hasAttribute(e)},set(t){if(t){this.setAttribute(e,"")}else{this.removeAttribute(e)}}})};class a extends HTMLElement{static get observedAttributes(){return["mode",h,r,s]}LOCAL_NANE=e;constructor(){super();this.t()}connectedCallback(){n(this,"mode");n(this,r);n(this,h);c(this,s);const a=localStorage.getItem(e);if(a&&[h,r].includes(a)){this.mode=a;this.permanent=true}if(this.permanent&&!a){localStorage.setItem(e,this.mode)}const l=[h,r].includes(a);if(this.permanent&&a){this.o()}else{if(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches){this.mode=r;this.o()}if(window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches){this.mode=h;this.o()}}if(!this.permanent&&!l){window.matchMedia("(prefers-color-scheme: light)").onchange=t=>{this.mode=t.matches?h:r;this.o()};window.matchMedia("(prefers-color-scheme: dark)").onchange=t=>{this.mode=t.matches?r:h;this.o()}}const d=new MutationObserver(((s,h)=>{this.mode=t.documentElement.dataset.colorMode;if(this.permanent&&l){localStorage.setItem(e,this.mode);this.i(i,{permanent:this.permanent})}this.h();this.i(o,{colorScheme:this.mode})}));d.observe(t.documentElement,{attributes:true});this.i(o,{colorScheme:this.mode});this.h()}attributeChangedCallback(t,s,o){if(t==="mode"&&s!==o&&[h,r].includes(o)){const t=localStorage.getItem(e);if(this.mode===t){this.mode=o;this.h();this.o()}else if(this.mode&&this.mode!==t){this.h();this.o()}}else if((t===h||t===r)&&s!==o){this.h()}if(t==="permanent"&&typeof this.permanent==="boolean"){this.permanent?localStorage.setItem(e,this.mode):localStorage.removeItem(e)}}o(){t.documentElement.setAttribute("data-color-mode",this.mode)}h(){this.icon.textContent=this.mode===h?"ğŸŒ’":"ğŸŒ";this.text.textContent=this.mode===h?this.getAttribute(r):this.getAttribute(h)}t(){var s=this.attachShadow({mode:"open"});this.label=t.createElement("span");this.label.setAttribute("class","wrapper");this.label.onclick=()=>{this.mode=this.mode===h?r:h;if(this.permanent){localStorage.setItem(e,this.mode)}this.o();this.h()};s.appendChild(this.label);this.icon=t.createElement("span");this.label.appendChild(this.icon);this.text=t.createElement("span");this.label.appendChild(this.text);const o=`
[data-color-mode*='dark'], [data-color-mode*='dark'] body {
  color-scheme: dark;
  --color-theme-bg: #0d1117;
  --color-theme-text: #c9d1d9;
  background-color: var(--color-theme-bg);
  color: var(--color-theme-text);
}

[data-color-mode*='light'], [data-color-mode*='light'] body {
  color-scheme: light;
  --color-theme-bg: #fff;
  --color-theme-text: #24292f;
  background-color: var(--color-theme-bg);
  color: var(--color-theme-text);
}`;const i="_dark_mode_style_";const n=t.getElementById(i);if(!n){var c=t.createElement("style");c.id=i;c.textContent=o;t.head.appendChild(c)}var a=t.createElement("style");a.textContent=`
    .wrapper { cursor: pointer; user-select: none; position: relative; }
    .wrapper > span + span { margin-left: .4rem; }
    `;s.appendChild(a)}i(t,e){this.dispatchEvent(new CustomEvent(t,{bubbles:true,composed:true,detail:e}))}}customElements.define("dark-mode",a);</script><script>const __TEMPLATE__ = document.createElement('template');
__TEMPLATE__.innerHTML = `
<style>

markdown-style h1:hover a.anchor .octicon-link:before,
markdown-style h2:hover a.anchor .octicon-link:before,
markdown-style h3:hover a.anchor .octicon-link:before,
markdown-style h4:hover a.anchor .octicon-link:before,
markdown-style h5:hover a.anchor .octicon-link:before,
markdown-style h6:hover a.anchor .octicon-link:before {
  width: 16px;
  height: 16px;
  content: ' ';
  display: inline-block;
  background-color: currentColor;
  -webkit-mask-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' aria-hidden='true'><path fill-rule='evenodd' d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'></path></svg>");
  mask-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' aria-hidden='true'><path fill-rule='evenodd' d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'></path></svg>");
}
[data-color-mode*='light'], [data-color-mode*='light'] body, markdown-style[theme*='light'] { --color-prettylights-syntax-comment: #6e7781; --color-prettylights-syntax-constant: #0550ae; --color-prettylights-syntax-entity: #8250df; --color-prettylights-syntax-storage-modifier-import: #24292f; --color-prettylights-syntax-entity-tag: #116329; --color-prettylights-syntax-keyword: #cf222e; --color-prettylights-syntax-string: #0a3069; --color-prettylights-syntax-variable: #953800; --color-prettylights-syntax-brackethighlighter-unmatched: #82071e; --color-prettylights-syntax-invalid-illegal-text: #f6f8fa; --color-prettylights-syntax-invalid-illegal-bg: #82071e; --color-prettylights-syntax-carriage-return-text: #f6f8fa; --color-prettylights-syntax-carriage-return-bg: #cf222e; --color-prettylights-syntax-string-regexp: #116329; --color-prettylights-syntax-markup-list: #3b2300; --color-prettylights-syntax-markup-heading: #0550ae; --color-prettylights-syntax-markup-italic: #24292f; --color-prettylights-syntax-markup-bold: #24292f; --color-prettylights-syntax-markup-deleted-text: #82071e; --color-prettylights-syntax-markup-deleted-bg: #FFEBE9; --color-prettylights-syntax-markup-inserted-text: #116329; --color-prettylights-syntax-markup-inserted-bg: #dafbe1; --color-prettylights-syntax-markup-changed-text: #953800; --color-prettylights-syntax-markup-changed-bg: #ffd8b5; --color-prettylights-syntax-markup-ignored-text: #eaeef2; --color-prettylights-syntax-markup-ignored-bg: #0550ae; --color-prettylights-syntax-meta-diff-range: #8250df; --color-prettylights-syntax-brackethighlighter-angle: #57606a; --color-prettylights-syntax-sublimelinter-gutter-mark: #8c959f; --color-prettylights-syntax-constant-other-reference-link: #0a3069; --color-fg-default: #24292f; --color-fg-muted: #57606a; --color-fg-subtle: #6e7781; --color-canvas-default: #ffffff; --color-canvas-subtle: #f6f8fa; --color-border-default: #d0d7de; --color-border-muted: hsla(210,18%,87%,1); --color-neutral-muted: rgba(175,184,193,0.2); --color-accent-fg: #0969da; --color-accent-emphasis: #0969da; --color-attention-subtle: #fff8c5; --color-danger-fg: #cf222e; } [data-color-mode*='light'], [data-color-mode*='light'] body, markdown-style[theme*='dark'] { --color-prettylights-syntax-comment: #8b949e; --color-prettylights-syntax-constant: #79c0ff; --color-prettylights-syntax-entity: #d2a8ff; --color-prettylights-syntax-storage-modifier-import: #c9d1d9; --color-prettylights-syntax-entity-tag: #7ee787; --color-prettylights-syntax-keyword: #ff7b72; --color-prettylights-syntax-string: #a5d6ff; --color-prettylights-syntax-variable: #ffa657; --color-prettylights-syntax-brackethighlighter-unmatched: #f85149; --color-prettylights-syntax-invalid-illegal-text: #f0f6fc; --color-prettylights-syntax-invalid-illegal-bg: #8e1519; --color-prettylights-syntax-carriage-return-text: #f0f6fc; --color-prettylights-syntax-carriage-return-bg: #b62324; --color-prettylights-syntax-string-regexp: #7ee787; --color-prettylights-syntax-markup-list: #f2cc60; --color-prettylights-syntax-markup-heading: #1f6feb; --color-prettylights-syntax-markup-italic: #c9d1d9; --color-prettylights-syntax-markup-bold: #c9d1d9; --color-prettylights-syntax-markup-deleted-text: #ffdcd7; --color-prettylights-syntax-markup-deleted-bg: #67060c; --color-prettylights-syntax-markup-inserted-text: #aff5b4; --color-prettylights-syntax-markup-inserted-bg: #033a16; --color-prettylights-syntax-markup-changed-text: #ffdfb6; --color-prettylights-syntax-markup-changed-bg: #5a1e02; --color-prettylights-syntax-markup-ignored-text: #c9d1d9; --color-prettylights-syntax-markup-ignored-bg: #1158c7; --color-prettylights-syntax-meta-diff-range: #d2a8ff; --color-prettylights-syntax-brackethighlighter-angle: #8b949e; --color-prettylights-syntax-sublimelinter-gutter-mark: #484f58; --color-prettylights-syntax-constant-other-reference-link: #a5d6ff; --color-fg-default: #c9d1d9; --color-fg-muted: #8b949e; --color-fg-subtle: #484f58; --color-canvas-default: #0d1117; --color-canvas-subtle: #161b22; --color-border-default: #30363d; --color-border-muted: #21262d; --color-neutral-muted: rgba(110,118,129,0.4); --color-accent-fg: #58a6ff; --color-accent-emphasis: #1f6feb; --color-attention-subtle: rgba(187,128,9,0.15); --color-danger-fg: #f85149; } markdown-style { display: block; -webkit-text-size-adjust: 100%; font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji"; font-size: 16px; line-height: 1.5; word-wrap: break-word; color: var(--color-fg-default); background-color: var(--color-canvas-default); } markdown-style details, markdown-style figcaption, markdown-style figure { display: block; } markdown-style summary { display: list-item; } markdown-style [hidden] { display: none !important; } markdown-style a { background-color: transparent; color: var(--color-accent-fg); text-decoration: none; } markdown-style a:active, markdown-style a:hover { outline-width: 0; } markdown-style abbr[title] { border-bottom: none; text-decoration: underline dotted; } markdown-style b, markdown-style strong { font-weight: 600; } markdown-style dfn { font-style: italic; } markdown-style h1 { margin: .67em 0; font-weight: 600; padding-bottom: .3em; font-size: 2em; border-bottom: 1px solid var(--color-border-muted); } markdown-style mark { background-color: var(--color-attention-subtle); color: var(--color-text-primary); } markdown-style small { font-size: 90%; } markdown-style sub, markdown-style sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; } markdown-style sub { bottom: -0.25em; } markdown-style sup { top: -0.5em; } markdown-style img { border-style: none; max-width: 100%; box-sizing: content-box; background-color: var(--color-canvas-default); } markdown-style code, markdown-style kbd, markdown-style pre, markdown-style samp { font-family: monospace,monospace; font-size: 1em; } markdown-style figure { margin: 1em 40px; } markdown-style hr { box-sizing: content-box; overflow: hidden; background: transparent; border-bottom: 1px solid var(--color-border-muted); height: .25em; padding: 0; margin: 24px 0; background-color: var(--color-border-default); border: 0; } markdown-style input { font: inherit; margin: 0; overflow: visible; font-family: inherit; font-size: inherit; line-height: inherit; } markdown-style [type=button], markdown-style [type=reset], markdown-style [type=submit] { -webkit-appearance: button; } markdown-style [type=button]::-moz-focus-inner, markdown-style [type=reset]::-moz-focus-inner, markdown-style [type=submit]::-moz-focus-inner { border-style: none; padding: 0; } markdown-style [type=button]:-moz-focusring, markdown-style [type=reset]:-moz-focusring, markdown-style [type=submit]:-moz-focusring { outline: 1px dotted ButtonText; } markdown-style [type=checkbox], markdown-style [type=radio] { box-sizing: border-box; padding: 0; } markdown-style [type=number]::-webkit-inner-spin-button, markdown-style [type=number]::-webkit-outer-spin-button { height: auto; } markdown-style [type=search] { -webkit-appearance: textfield; outline-offset: -2px; } markdown-style [type=search]::-webkit-search-cancel-button, markdown-style [type=search]::-webkit-search-decoration { -webkit-appearance: none; } markdown-style ::-webkit-input-placeholder { color: inherit; opacity: .54; } markdown-style ::-webkit-file-upload-button { -webkit-appearance: button; font: inherit; } markdown-style a:hover { text-decoration: underline; } markdown-style hr::before { display: table; content: ""; } markdown-style hr::after { display: table; clear: both; content: ""; } markdown-style table { border-spacing: 0; border-collapse: collapse; display: block; width: max-content; max-width: 100%; overflow: auto; } markdown-style td, markdown-style th { padding: 0; } markdown-style details summary { cursor: pointer; } markdown-style details:not([open])>*:not(summary) { display: none !important; } markdown-style kbd { display: inline-block; padding: 3px 5px; font: 11px ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace; line-height: 10px; color: var(--color-fg-default); vertical-align: middle; background-color: var(--color-canvas-subtle); border: solid 1px var(--color-neutral-muted); border-bottom-color: var(--color-neutral-muted); border-radius: 6px; box-shadow: inset 0 -1px 0 var(--color-neutral-muted); } markdown-style h1, markdown-style h2, markdown-style h3, markdown-style h4, markdown-style h5, markdown-style h6 { margin-top: 24px; margin-bottom: 16px; font-weight: 600; line-height: 1.25; } markdown-style h2 { font-weight: 600; padding-bottom: .3em; font-size: 1.5em; border-bottom: 1px solid var(--color-border-muted); } markdown-style h3 { font-weight: 600; font-size: 1.25em; } markdown-style h4 { font-weight: 600; font-size: 1em; } markdown-style h5 { font-weight: 600; font-size: .875em; } markdown-style h6 { font-weight: 600; font-size: .85em; color: var(--color-fg-muted); } markdown-style p { margin-top: 0; margin-bottom: 10px; } markdown-style blockquote { margin: 0; padding: 0 1em; color: var(--color-fg-muted); border-left: .25em solid var(--color-border-default); } markdown-style ul, markdown-style ol { margin-top: 0; margin-bottom: 0; padding-left: 2em; } markdown-style ol ol, markdown-style ul ol { list-style-type: lower-roman; } markdown-style ul ul ol, markdown-style ul ol ol, markdown-style ol ul ol, markdown-style ol ol ol { list-style-type: lower-alpha; } markdown-style dd { margin-left: 0; } markdown-style tt, markdown-style code { font-family: ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace; font-size: 12px; } markdown-style pre { margin-top: 0; margin-bottom: 0; font-family: ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace; font-size: 12px; word-wrap: normal; } markdown-style .octicon { display: inline-block; overflow: visible !important; vertical-align: text-bottom; fill: currentColor; } markdown-style ::placeholder { color: var(--color-fg-subtle); opacity: 1; } markdown-style input::-webkit-outer-spin-button, markdown-style input::-webkit-inner-spin-button { margin: 0; -webkit-appearance: none; appearance: none; }
markdown-style .token.comment, markdown-style .token.prolog, markdown-style .token.doctype, markdown-style .token.cdata { color: var(--color-prettylights-syntax-comment); } markdown-style .token.namespace { opacity: 0.7; } markdown-style .token.tag, markdown-style .token.selector, markdown-style .token.constant, markdown-style .token.symbol, markdown-style .token.deleted { color: var(--color-prettylights-syntax-entity-tag); } markdown-style .token.maybe-class-name { color: var(--color-prettylights-syntax-variable); } markdown-style .token.property-access, markdown-style .token.operator, markdown-style .token.boolean, markdown-style .token.number, markdown-style .token.selector markdown-style .token.class, markdown-style .token.attr-name, markdown-style .token.string, markdown-style .token.char, markdown-style .token.builtin { color: var(--color-prettylights-syntax-constant); } markdown-style .token.deleted { color: var(--color-prettylights-syntax-markup-deleted-text); } markdown-style .token.property { color: var(--color-prettylights-syntax-constant); } markdown-style .token.punctuation { color: var(--color-prettylights-syntax-markup-bold); } markdown-style .token.function { color: var(--color-prettylights-syntax-entity); } markdown-style .code-line .token.deleted { background-color: var(--color-prettylights-syntax-markup-deleted-bg); } markdown-style .token.inserted { color: var(--color-prettylights-syntax-markup-inserted-text); } markdown-style .code-line .token.inserted { background-color: var(--color-prettylights-syntax-markup-inserted-bg); } markdown-style .token.variable { color: var(--color-prettylights-syntax-constant); } markdown-style .token.entity, markdown-style .token.url, .language-css markdown-style .token.string, .style markdown-style .token.string { color: var(--color-prettylights-syntax-string); } markdown-style .token.color, markdown-style .token.atrule, markdown-style .token.attr-value, markdown-style .token.function, markdown-style .token.class-name { color: var(--color-prettylights-syntax-string); } markdown-style .token.rule, markdown-style .token.regex, markdown-style .token.important, markdown-style .token.keyword { color: var(--color-prettylights-syntax-keyword); } markdown-style .token.coord { color: var(--color-prettylights-syntax-meta-diff-range); } markdown-style .token.important, markdown-style .token.bold { font-weight: bold; } markdown-style .token.italic { font-style: italic; } markdown-style .token.entity { cursor: help; }
markdown-style [data-catalyst] { display: block; } markdown-style g-emoji { font-family: "Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"; font-size: 1em; font-style: normal !important; font-weight: 400; line-height: 1; vertical-align: -0.075em; } markdown-style g-emoji img { width: 1em; height: 1em; } markdown-style::before { display: table; content: ""; } markdown-style::after { display: table; clear: both; content: ""; } markdown-style>*:first-child { margin-top: 0 !important; } markdown-style>*:last-child { margin-bottom: 0 !important; } markdown-style a:not([href]) { color: inherit; text-decoration: none; } markdown-style .absent { color: var(--color-danger-fg); } markdown-style .anchor { float: left; padding-right: 4px; margin-left: -20px; line-height: 1; } markdown-style .anchor:focus { outline: none; } markdown-style p, markdown-style blockquote, markdown-style ul, markdown-style ol, markdown-style dl, markdown-style table, markdown-style pre, markdown-style details { margin-top: 0; margin-bottom: 16px; } markdown-style blockquote>:first-child { margin-top: 0; } markdown-style blockquote>:last-child { margin-bottom: 0; } markdown-style sup>a::before { content: "["; } markdown-style sup>a::after { content: "]"; } markdown-style h1 .octicon-link, markdown-style h2 .octicon-link, markdown-style h3 .octicon-link, markdown-style h4 .octicon-link, markdown-style h5 .octicon-link, markdown-style h6 .octicon-link { color: var(--color-fg-default); vertical-align: middle; visibility: hidden; } markdown-style h1:hover .anchor, markdown-style h2:hover .anchor, markdown-style h3:hover .anchor, markdown-style h4:hover .anchor, markdown-style h5:hover .anchor, markdown-style h6:hover .anchor { text-decoration: none; } markdown-style h1:hover .anchor .octicon-link, markdown-style h2:hover .anchor .octicon-link, markdown-style h3:hover .anchor .octicon-link, markdown-style h4:hover .anchor .octicon-link, markdown-style h5:hover .anchor .octicon-link, markdown-style h6:hover .anchor .octicon-link { visibility: visible; } markdown-style h1 tt, markdown-style h1 code, markdown-style h2 tt, markdown-style h2 code, markdown-style h3 tt, markdown-style h3 code, markdown-style h4 tt, markdown-style h4 code, markdown-style h5 tt, markdown-style h5 code, markdown-style h6 tt, markdown-style h6 code { padding: 0 .2em; font-size: inherit; } markdown-style ul.no-list, markdown-style ol.no-list { padding: 0; list-style-type: none; } markdown-style ol[type="1"] { list-style-type: decimal; } markdown-style ol[type=a] { list-style-type: lower-alpha; } markdown-style ol[type=i] { list-style-type: lower-roman; } markdown-style div>ol:not([type]) { list-style-type: decimal; } markdown-style ul ul, markdown-style ul ol, markdown-style ol ol, markdown-style ol ul { margin-top: 0; margin-bottom: 0; } markdown-style li>p { margin-top: 16px; } markdown-style li+li { margin-top: .25em; } markdown-style dl { padding: 0; } markdown-style dl dt { padding: 0; margin-top: 16px; font-size: 1em; font-style: italic; font-weight: 600; } markdown-style dl dd { padding: 0 16px; margin-bottom: 16px; } markdown-style table th { font-weight: 600; } markdown-style table th, markdown-style table td { padding: 6px 13px; border: 1px solid var(--color-border-default); } markdown-style table tr { background-color: var(--color-canvas-default); border-top: 1px solid var(--color-border-muted); } markdown-style table tr:nth-child(2n) { background-color: var(--color-canvas-subtle); } markdown-style table img { background-color: transparent; } markdown-style img[align=right] { padding-left: 20px; } markdown-style img[align=left] { padding-right: 20px; } markdown-style .emoji { max-width: none; vertical-align: text-top; background-color: transparent; } markdown-style span.frame { display: block; overflow: hidden; } markdown-style span.frame>span { display: block; float: left; width: auto; padding: 7px; margin: 13px 0 0; overflow: hidden; border: 1px solid var(--color-border-default); } markdown-style span.frame span img { display: block; float: left; } markdown-style span.frame span span { display: block; padding: 5px 0 0; clear: both; color: var(--color-fg-default); } markdown-style span.align-center { display: block; overflow: hidden; clear: both; } markdown-style span.align-center>span { display: block; margin: 13px auto 0; overflow: hidden; text-align: center; } markdown-style span.align-center span img { margin: 0 auto; text-align: center; } markdown-style span.align-right { display: block; overflow: hidden; clear: both; } markdown-style span.align-right>span { display: block; margin: 13px 0 0; overflow: hidden; text-align: right; } markdown-style span.align-right span img { margin: 0; text-align: right; } markdown-style span.float-left { display: block; float: left; margin-right: 13px; overflow: hidden; } markdown-style span.float-left span { margin: 13px 0 0; } markdown-style span.float-right { display: block; float: right; margin-left: 13px; overflow: hidden; } markdown-style span.float-right>span { display: block; margin: 13px auto 0; overflow: hidden; text-align: right; } markdown-style code, markdown-style tt { padding: .2em .4em; margin: 0; font-size: 85%; background-color: var(--color-neutral-muted); border-radius: 6px; } markdown-style code br, markdown-style tt br { display: none; } markdown-style del code { text-decoration: inherit; } markdown-style pre code { font-size: 100%; } markdown-style pre>code { padding: 0; margin: 0; word-break: normal; white-space: pre; background: transparent; border: 0; } markdown-style pre { position: relative; font-size: 85%; line-height: 1.45; background-color: var(--color-canvas-subtle); border-radius: 6px; } markdown-style pre code, markdown-style pre tt { display: inline; max-width: auto; padding: 0; margin: 0; overflow: visible; line-height: inherit; word-wrap: normal; background-color: transparent; border: 0; } markdown-style pre > code { padding: 16px; overflow: auto; display: block; } markdown-style .csv-data td, markdown-style .csv-data th { padding: 5px; overflow: hidden; font-size: 12px; line-height: 1; text-align: left; white-space: nowrap; } markdown-style .csv-data .blob-num { padding: 10px 8px 9px; text-align: right; background: var(--color-canvas-default); border: 0; } markdown-style .csv-data tr { border-top: 0; } markdown-style .csv-data th { font-weight: 600; background: var(--color-canvas-subtle); border-top: 0; } markdown-style .footnotes { font-size: 12px; color: var(--color-fg-muted); border-top: 1px solid var(--color-border-default); } markdown-style .footnotes ol { padding-left: 16px; } markdown-style .footnotes li { position: relative; } markdown-style .footnotes li:target::before { position: absolute; top: -8px; right: -8px; bottom: -8px; left: -24px; pointer-events: none; content: ""; border: 2px solid var(--color-accent-emphasis); border-radius: 6px; } markdown-style .footnotes li:target { color: var(--color-fg-default); } markdown-style .footnotes .data-footnote-backref g-emoji { font-family: monospace; } markdown-style .task-list-item { list-style-type: none; } markdown-style .task-list-item label { font-weight: 400; } markdown-style .task-list-item.enabled label { cursor: pointer; } markdown-style .task-list-item+.task-list-item { margin-top: 3px; } markdown-style .task-list-item .handle { display: none; } markdown-style .task-list-item-checkbox, markdown-style input[type="checkbox"] { margin: 0 .2em .25em -1.6em; vertical-align: middle; } markdown-style .contains-task-list:dir(rtl) .task-list-item-checkbox, markdown-style .contains-task-list:dir(rtl) input[type="checkbox"] { margin: 0 -1.6em .25em .2em; } markdown-style ::-webkit-calendar-picker-indicator { filter: invert(50%); }
</style>
<slot></slot>
`;
class MarkdownStyle extends HTMLElement {
    constructor() {
        super();
        this.shadow = this.attachShadow({ mode: 'open' });
        this.shadow.appendChild(__TEMPLATE__.content.cloneNode(true));
        const style = Array.prototype.slice
            .call(this.shadow.children)
            .find((item) => item.tagName === 'STYLE');
        if (style) {
            const id = '__MARKDOWN_STYLE__';
            const findStyle = document.getElementById(id);
            if (!findStyle) {
                style.id = id;
                document.head.append(style);
            }
        }
    }
    get theme() {
        const value = this.getAttribute('theme');
        return value === null ? '' : value;
    }
    set theme(name) {
        this.setAttribute('theme', name);
    }
    connectedCallback() {
        if (!this.theme) {
            const { colorMode } = document.documentElement.dataset;
            this.theme = colorMode;
            const observer = new MutationObserver((mutationsList, observer) => {
                this.theme = document.documentElement.dataset.colorMode;
            });
            observer.observe(document.documentElement, { attributes: true });
            window.matchMedia('(prefers-color-scheme: light)').onchange = (event) => {
                this.theme = event.matches ? 'light' : 'dark';
            };
            window.matchMedia('(prefers-color-scheme: dark)').onchange = (event) => {
                this.theme = event.matches ? 'dark' : 'light';
            };
        }
    }
}
customElements.define('markdown-style', MarkdownStyle);</script><markdown-style style="max-width: 960px; margin: 0 auto 60px auto; padding: 8px" class="markdown-body">
    <h2 id="10åˆ†é’Ÿå¿«é€Ÿå…¥é—¨redis"><a class="anchor" aria-hidden="true" tabindex="-1" href="#10åˆ†é’Ÿå¿«é€Ÿå…¥é—¨redis"><span class="octicon octicon-link"></span></a>10åˆ†é’Ÿå¿«é€Ÿå…¥é—¨Redis</h2>
    <h1 id="ç›®å½•"><a class="anchor" aria-hidden="true" tabindex="-1" href="#ç›®å½•"><span class="octicon octicon-link"></span></a>ç›®å½•</h1>
    <ul>
      <li><a href="#redis%E5%AE%89%E8%A3%85">Rediså®‰è£…</a>
        <ul>
          <li><a href="#%E5%AE%98%E6%96%B9%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85">å®˜æ–¹ç¼–è¯‘å®‰è£…</a></li>
          <li><a href="#%E9%80%9A%E8%BF%87epel%E6%BA%90%E5%AE%89%E8%A3%85">é€šè¿‡EPELæºå®‰è£…</a></li>
          <li><a href="#redis%E5%8D%87%E7%BA%A7">Rediså‡çº§</a></li>
        </ul>
      </li>
      <li><a href="#%E6%9C%8D%E5%8A%A1%E7%AE%A1%E7%90%86">æœåŠ¡ç®¡ç†</a>
        <ul>
          <li><a href="#%E5%9F%BA%E6%9C%AC%E6%9C%8D%E5%8A%A1%E6%93%8D%E4%BD%9C">åŸºæœ¬æœåŠ¡æ“ä½œ</a></li>
          <li><a href="#%E6%9F%A5%E7%9C%8B%E7%89%88%E6%9C%AC">æŸ¥çœ‹ç‰ˆæœ¬</a></li>
          <li><a href="#%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8">å¼€æœºå¯åŠ¨</a></li>
        </ul>
      </li>
      <li><a href="#%E6%9B%B4%E6%94%B9%E9%85%8D%E7%BD%AE">æ›´æ”¹é…ç½®</a></li>
      <li><a href="#%E8%AE%BE%E7%BD%AE%E8%AF%B7%E6%B1%82%E5%AF%86%E7%A0%81">è®¾ç½®è¯·æ±‚å¯†ç </a></li>
      <li><a href="#%E4%B8%BB%E4%BB%8E%E6%9E%B6%E6%9E%84%E9%85%8D%E7%BD%AE">ä¸»ä»æ¶æ„é…ç½®</a></li>
      <li><a href="#%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C">åŸºæœ¬æ“ä½œ</a></li>
      <li><a href="#%E6%94%AF%E6%8C%81%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">æ”¯æŒçš„æ•°æ®ç±»å‹</a>
        <ul>
          <li><a href="#%E5%AD%97%E7%AC%A6%E4%B8%B2">å­—ç¬¦ä¸²</a></li>
          <li><a href="#hashes---%E5%93%88%E5%B8%8C%E5%80%BC">Hashes - å“ˆå¸Œå€¼</a></li>
          <li><a href="#lists---%E5%88%97%E8%A1%A8">Lists - åˆ—è¡¨</a></li>
          <li><a href="#%E6%9C%89%E5%BA%8F%E9%9B%86%E5%90%88">æœ‰åºé›†åˆ</a></li>
        </ul>
      </li>
      <li><a href="#%E5%BC%80%E5%90%AF%E9%80%9A%E7%9F%A5">å¼€å¯é€šçŸ¥</a></li>
      <li><a href="#%E5%BC%80%E5%90%AF%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95%E8%BF%9E%E6%8E%A5">å¼€å¯è¿œç¨‹ç™»å½•è¿æ¥</a>
        <ul>
          <li><a href="#%E4%BF%AE%E6%94%B9%E9%98%B2%E7%81%AB%E5%A2%99%E9%85%8D%E7%BD%AE">ä¿®æ”¹é˜²ç«å¢™é…ç½®</a></li>
          <li><a href="#%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">ä¿®æ”¹é…ç½®æ–‡ä»¶</a></li>
        </ul>
      </li>
      <li><a href="#%E6%8F%90%E4%BE%9B%E7%9A%84%E5%8E%9F%E7%94%9F%E7%9B%91%E6%8E%A7">æä¾›çš„åŸç”Ÿç›‘æ§</a>
        <ul>
          <li><a href="#%E5%BD%93%E5%89%8D%E9%93%BE%E6%8E%A5%E7%9A%84%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%95%B0%E5%92%8C%E8%BF%9E%E6%8E%A5%E6%95%B0">å½“å‰é“¾æ¥çš„å®¢æˆ·ç«¯æ•°å’Œè¿æ¥æ•°</a></li>
          <li><a href="#%E5%86%85%E5%AD%98%E6%9C%80%E5%A4%A7%E7%9A%84%E9%94%AE%E5%80%BC%E5%92%8C%E5%B9%B3%E5%9D%87%E7%9A%84%E9%94%AE%E5%80%BC%E6%95%B0%E6%8D%AE">å†…å­˜æœ€å¤§çš„é”®å€¼å’Œå¹³å‡çš„é”®å€¼æ•°æ®</a></li>
          <li><a href="#%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8D%E7%9A%84%E9%94%AE%E5%80%BC%E6%83%85%E5%86%B5">æŸ¥çœ‹å½“å‰çš„é”®å€¼æƒ…å†µ</a></li>
          <li><a href="#%E5%8E%9F%E7%94%9F%E7%9A%84monitor%E7%9B%91%E6%8E%A7">åŸç”Ÿçš„Monitorç›‘æ§</a></li>
        </ul>
      </li>
      <li><a href="#%E9%85%8D%E7%BD%AE%E8%AF%B4%E6%98%8E">é…ç½®è¯´æ˜</a></li>
      <li><a href="#%E7%B2%BE%E5%93%81%E6%96%87%E7%AB%A0">ç²¾å“æ–‡ç« </a></li>
    </ul>
    <h2 id="rediså®‰è£…"><a class="anchor" aria-hidden="true" tabindex="-1" href="#rediså®‰è£…"><span class="octicon octicon-link"></span></a>Rediså®‰è£…</h2>
    <h3 id="å®˜æ–¹ç¼–è¯‘å®‰è£…"><a class="anchor" aria-hidden="true" tabindex="-1" href="#å®˜æ–¹ç¼–è¯‘å®‰è£…"><span class="octicon octicon-link"></span></a>å®˜æ–¹ç¼–è¯‘å®‰è£…</h3>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">$ <span class="token function">wget</span> http://download.redis.io/releases/redis-4.0.0.tar.gz
</span><span class="code-line">$ <span class="token function">tar</span> xzvf redis-4.0.0.tar.gz -C /usr/local/
</span><span class="code-line">$ <span class="token builtin class-name">cd</span> /usr/local/redis-4.0.0
</span><span class="code-line">$ <span class="token function">make</span>
</span><span class="code-line">$ <span class="token function">make</span> <span class="token builtin class-name">test</span>
</span><span class="code-line">$ <span class="token function">make</span> <span class="token function">install</span> 
</span><span class="code-line"><span class="token comment"># ç¨‹åºä¼šè‡ªåŠ¨æ‰§è¡Œ:</span>
</span><span class="code-line"><span class="token comment"># mkdir -p /usr/local/bin</span>
</span><span class="code-line"><span class="token comment"># cp -pf redis-server /usr/local/bin</span>
</span><span class="code-line"><span class="token comment"># cp -pf redis-benchmark /usr/local/bin</span>
</span><span class="code-line"><span class="token comment"># cp -pf redis-cli /usr/local/bin</span>
</span><span class="code-line"><span class="token comment"># cp -pf redis-check-dump /usr/local/bin</span>
</span><span class="code-line"><span class="token comment"># cp -pf redis-check-aof /usr/local/bin</span>
</span></code><div onclick="copied(this)" data-code="$ wget http://download.redis.io/releases/redis-4.0.0.tar.gz
$ tar xzvf redis-4.0.0.tar.gz -C /usr/local/
$ cd /usr/local/redis-4.0.0
$ make
$ make test
$ make install 
# ç¨‹åºä¼šè‡ªåŠ¨æ‰§è¡Œ:
# mkdir -p /usr/local/bin
# cp -pf redis-server /usr/local/bin
# cp -pf redis-benchmark /usr/local/bin
# cp -pf redis-cli /usr/local/bin
# cp -pf redis-check-dump /usr/local/bin
# cp -pf redis-check-aof /usr/local/bin
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>æµ‹è¯•<code>make test</code>æŠ¥é”™</p>
    <pre><code class="code-highlight"><span class="code-line">$ make test
</span><span class="code-line">You need tcl 8.5 or newer in order to run the Redis test
</span><span class="code-line">make: *** [test] Error 1
</span></code><div onclick="copied(this)" data-code="$ make test
You need tcl 8.5 or newer in order to run the Redis test
make: *** [test] Error 1
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>è¿™ä¸ªæ˜¯éœ€è¦å®‰è£…<code>tcl</code></p>
    <pre><code class="code-highlight"><span class="code-line">wget http://downloads.sourceforge.net/tcl/tcl8.6.1-src.tar.gz  
</span><span class="code-line">sudo tar xzvf tcl8.6.1-src.tar.gz  -C /usr/local/  
</span><span class="code-line">cd  /usr/local/tcl8.6.1/unix/  
</span><span class="code-line">sudo ./configure  
</span><span class="code-line">sudo make  
</span><span class="code-line">sudo make install   
</span></code><div onclick="copied(this)" data-code="wget http://downloads.sourceforge.net/tcl/tcl8.6.1-src.tar.gz  
sudo tar xzvf tcl8.6.1-src.tar.gz  -C /usr/local/  
cd  /usr/local/tcl8.6.1/unix/  
sudo ./configure  
sudo make  
sudo make install   
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="é€šè¿‡epelæºå®‰è£…"><a class="anchor" aria-hidden="true" tabindex="-1" href="#é€šè¿‡epelæºå®‰è£…"><span class="octicon octicon-link"></span></a>é€šè¿‡EPELæºå®‰è£…</h3>
    <p>æºå®‰è£…é—®é¢˜åœ¨äºä¸èƒ½å®‰è£…æœ€æ–°ï¼Œæˆ–è€…æŒ‡å®šRedisç‰ˆæœ¬ã€‚</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">yum --enablerepo<span class="token operator">=</span>epel -y <span class="token function">install</span> redis
</span></code><div onclick="copied(this)" data-code="yum --enablerepo=epel -y install redis
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>å¦‚æœæ²¡æœ‰å®‰è£…æºï¼Œé€šè¿‡ä¸‹é¢æ–¹å¼å®‰è£…æºã€‚</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token builtin class-name">cd</span> /etc/yum.repos.d/
</span><span class="code-line"><span class="token function">rpm</span> -Uvh http://download.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm
</span></code><div onclick="copied(this)" data-code="cd /etc/yum.repos.d/
rpm -Uvh http://download.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="rediså‡çº§"><a class="anchor" aria-hidden="true" tabindex="-1" href="#rediså‡çº§"><span class="octicon octicon-link"></span></a>Rediså‡çº§</h3>
    <p>é¦–å…ˆï¼Œç¡®ä¿å®‰è£…äº†ä»¥ä¸‹reposï¼ŒEPELå’ŒREMIï¼š</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">sudo</span> <span class="token function">rpm</span> -Uvh http://download.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm
</span><span class="code-line"><span class="token function">sudo</span> <span class="token function">rpm</span> -Uvh http://rpms.remirepo.net/enterprise/remi-release-6.rpm
</span></code><div onclick="copied(this)" data-code="sudo rpm -Uvh http://download.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm
sudo rpm -Uvh http://rpms.remirepo.net/enterprise/remi-release-6.rpm
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>é€šè¿‡<code>--enablerepo=epel</code>å‚æ•°æŸ¥çœ‹æŒ‡å®šæºRedisç‰ˆæœ¬ï¼Œæ£€æŸ¥REMI repoä¸­çš„Redisç‰ˆæœ¬ï¼š</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">yum --enablerepo<span class="token operator">=</span>epel info redis
</span><span class="code-line"><span class="token comment"># Loaded plugins: fastestmirror</span>
</span><span class="code-line"><span class="token comment"># Loading mirror speeds from cached hostfile</span>
</span><span class="code-line"><span class="token comment">#  * base: centos.ustc.edu.cn</span>
</span><span class="code-line"><span class="token comment">#  * epel: mirrors.tuna.tsinghua.edu.cn</span>
</span><span class="code-line"><span class="token comment">#  * extras: centos.ustc.edu.cn</span>
</span><span class="code-line"><span class="token comment">#  * updates: mirrors.zju.edu.cn</span>
</span><span class="code-line"><span class="token comment"># Available Packages</span>
</span><span class="code-line"><span class="token comment"># Name        : redis</span>
</span><span class="code-line"><span class="token comment"># Arch        : x86_64</span>
</span><span class="code-line"><span class="token comment"># Version     : 2.4.10</span>
</span><span class="code-line"><span class="token comment"># Release     : 1.el6</span>
</span><span class="code-line"><span class="token comment"># Size        : 213 k</span>
</span><span class="code-line"><span class="token comment"># Repo        : epel/x86_64</span>
</span><span class="code-line"><span class="token comment"># Summary     : A persistent key-value database</span>
</span><span class="code-line"><span class="token comment"># URL         : http://redis.io</span>
</span><span class="code-line"><span class="token comment"># License     : BSD</span>
</span><span class="code-line"><span class="token comment"># Description : Redis is an advanced key-value store. It is similar to memcached but the data</span>
</span><span class="code-line"><span class="token comment">#             : set is not volatile, and values can be strings, exactly like in memcached, but</span>
</span><span class="code-line"><span class="token comment">#             : also lists, sets, and ordered sets. All this data types can be manipulated with</span>
</span><span class="code-line"><span class="token comment">#             : atomic operations to push/pop elements, add/remove elements, perform server</span>
</span><span class="code-line"><span class="token comment">#             : side union, intersection, difference between sets, and so forth. Redis supports</span>
</span><span class="code-line"><span class="token comment">#             : different kind of sorting abilities.</span>
</span></code><div onclick="copied(this)" data-code="yum --enablerepo=epel info redis
# Loaded plugins: fastestmirror
# Loading mirror speeds from cached hostfile
#  * base: centos.ustc.edu.cn
#  * epel: mirrors.tuna.tsinghua.edu.cn
#  * extras: centos.ustc.edu.cn
#  * updates: mirrors.zju.edu.cn
# Available Packages
# Name        : redis
# Arch        : x86_64
# Version     : 2.4.10
# Release     : 1.el6
# Size        : 213 k
# Repo        : epel/x86_64
# Summary     : A persistent key-value database
# URL         : http://redis.io
# License     : BSD
# Description : Redis is an advanced key-value store. It is similar to memcached but the data
#             : set is not volatile, and values can be strings, exactly like in memcached, but
#             : also lists, sets, and ordered sets. All this data types can be manipulated with
#             : atomic operations to push/pop elements, add/remove elements, perform server
#             : side union, intersection, difference between sets, and so forth. Redis supports
#             : different kind of sorting abilities.
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>ç„¶åä»EPEL repoå®‰è£…ç›¸å…³çš„ä¾èµ–å…³ç³»ï¼ˆjemallocï¼‰ï¼š</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">yum --enablerepo<span class="token operator">=</span>epel <span class="token function">install</span> jemalloc
</span></code><div onclick="copied(this)" data-code="yum --enablerepo=epel install jemalloc
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>åœ¨å®‰è£…ä¹‹å‰ï¼Œæ‚¨åº”è¯¥åœæ­¢æ—§çš„Rediså®ˆæŠ¤è¿›ç¨‹ï¼š</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">service</span> redis stop
</span></code><div onclick="copied(this)" data-code="service redis stop
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>ç„¶åå®‰è£…æ›´æ–°ç‰ˆæœ¬çš„Redisï¼š</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">sudo</span> yum --enablerepo<span class="token operator">=</span>remi <span class="token function">install</span> redis
</span></code><div onclick="copied(this)" data-code="sudo yum --enablerepo=remi install redis
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="æœåŠ¡ç®¡ç†"><a class="anchor" aria-hidden="true" tabindex="-1" href="#æœåŠ¡ç®¡ç†"><span class="octicon octicon-link"></span></a>æœåŠ¡ç®¡ç†</h2>
    <p>é‡æ–°å¯åŠ¨Rediså®ˆæŠ¤ç¨‹åºï¼Œå¹¶ä½¿å…¶é‡æ–°å¯åŠ¨æ—¶è‡ªåŠ¨å¯åŠ¨ï¼š</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">sudo</span> <span class="token function">service</span> redis start
</span><span class="code-line"><span class="token function">sudo</span> <span class="token function">chkconfig</span> redis on
</span></code><div onclick="copied(this)" data-code="sudo service redis start
sudo chkconfig redis on
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="åŸºæœ¬æœåŠ¡æ“ä½œ"><a class="anchor" aria-hidden="true" tabindex="-1" href="#åŸºæœ¬æœåŠ¡æ“ä½œ"><span class="octicon octicon-link"></span></a>åŸºæœ¬æœåŠ¡æ“ä½œ</h3>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment">## å¯åŠ¨å¹¶åå°è¿è¡Œ</span>
</span><span class="code-line">$ redis-server <span class="token operator">&#x26;</span> <span class="token function">nohup</span>
</span><span class="code-line"><span class="token comment">## æŸ¥æ˜¯å¦å¯åŠ¨</span>
</span><span class="code-line">$ redis-cli <span class="token function">ping</span>
</span><span class="code-line"><span class="token comment">## å…³é—­å‘½ä»¤</span>
</span><span class="code-line">$ redis-cli <span class="token function">shutdown</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># å‘½ä»¤è¡Œå®¢æˆ·ç«¯å¯åŠ¨</span>
</span><span class="code-line">$ redis-cli start
</span><span class="code-line"><span class="token comment"># å¯åŠ¨</span>
</span><span class="code-line">$ <span class="token function">service</span> redis start
</span><span class="code-line"><span class="token comment"># åœæ­¢</span>
</span><span class="code-line">$ <span class="token function">service</span> redis stop
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># å‘½ä»¤è¡Œå®¢æˆ·ç«¯å¯åŠ¨</span>
</span><span class="code-line">$ redis-cli -p <span class="token number">6380</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># æŒ‡å®šç«¯å£åå°å¯åŠ¨</span>
</span><span class="code-line">$ redis-server --port <span class="token number">6380</span> <span class="token operator">&#x26;</span>
</span></code><div onclick="copied(this)" data-code="## å¯åŠ¨å¹¶åå°è¿è¡Œ
$ redis-server &#x26; nohup
## æŸ¥æ˜¯å¦å¯åŠ¨
$ redis-cli ping
## å…³é—­å‘½ä»¤
$ redis-cli shutdown

# å‘½ä»¤è¡Œå®¢æˆ·ç«¯å¯åŠ¨
$ redis-cli start
# å¯åŠ¨
$ service redis start
# åœæ­¢
$ service redis stop

# å‘½ä»¤è¡Œå®¢æˆ·ç«¯å¯åŠ¨
$ redis-cli -p 6380

# æŒ‡å®šç«¯å£åå°å¯åŠ¨
$ redis-server --port 6380 &#x26;
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="æŸ¥çœ‹ç‰ˆæœ¬"><a class="anchor" aria-hidden="true" tabindex="-1" href="#æŸ¥çœ‹ç‰ˆæœ¬"><span class="octicon octicon-link"></span></a>æŸ¥çœ‹ç‰ˆæœ¬</h3>
    <p>æ£€æŸ¥å½“å‰å®‰è£…çš„Redisç‰ˆæœ¬ï¼š</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># æŸ¥çœ‹ Redis ç‰ˆæœ¬</span>
</span><span class="code-line">$ redis-cli info <span class="token operator">|</span> <span class="token function">grep</span> redis_version
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># æŸ¥çœ‹ç«¯å£å·</span>
</span><span class="code-line">$ redis-cli info <span class="token operator">|</span> <span class="token function">grep</span> tcp_port
</span></code><div onclick="copied(this)" data-code="# æŸ¥çœ‹ Redis ç‰ˆæœ¬
$ redis-cli info | grep redis_version

# æŸ¥çœ‹ç«¯å£å·
$ redis-cli info | grep tcp_port
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="æœåŠ¡ç®¡ç†-1"><a class="anchor" aria-hidden="true" tabindex="-1" href="#æœåŠ¡ç®¡ç†-1"><span class="octicon octicon-link"></span></a>æœåŠ¡ç®¡ç†</h3>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">systemctl status redis <span class="token comment"># æŸ¥çœ‹æœåŠ¡çŠ¶æ€</span>
</span><span class="code-line">systemctl start redis <span class="token comment"># å¯åŠ¨ Redis</span>
</span><span class="code-line">systemctl stop redis <span class="token comment"># å¯åŠ¨ Redis</span>
</span></code><div onclick="copied(this)" data-code="systemctl status redis # æŸ¥çœ‹æœåŠ¡çŠ¶æ€
systemctl start redis # å¯åŠ¨ Redis
systemctl stop redis # å¯åŠ¨ Redis
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="å¼€æœºå¯åŠ¨"><a class="anchor" aria-hidden="true" tabindex="-1" href="#å¼€æœºå¯åŠ¨"><span class="octicon octicon-link"></span></a>å¼€æœºå¯åŠ¨</h3>
    <p>å¦‚æœä½ æ˜¯é€šè¿‡yumå®‰è£…ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢æ–¹å¼å¼€æœºå¯åŠ¨ã€‚</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">systemctl <span class="token builtin class-name">enable</span> redis.service
</span><span class="code-line"><span class="token function">chkconfig</span> redis on
</span></code><div onclick="copied(this)" data-code="systemctl enable redis.service
chkconfig redis on
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>å¦‚æœä½ æ˜¯ç¼–è¯‘å®‰è£…å¯é€šè¿‡ä¸‹é¢æ–¹å¼è®¾ç½®å¼€æœºå¯åŠ¨</p>
    <p>æˆ‘ä»¬å°†åœ¨ Redis å®‰è£…ç›®å½•æ‰¾åˆ°<code>/usr/local/redis-4.0.0/utils</code>è¿™ä¸ªç›®å½•ï¼Œåœ¨è¿™ä¸ªç›®å½•ä¸­æœ‰ä¸ªæœ‰ä¸ªè„šæœ¬ <code>redis_init_script</code>ï¼Œå°†æ­¤è„šæœ¬æ‹·è´åˆ°<code>/etc/init.d</code>ç›®å½•ä¸‹ï¼Œå‘½åä¸º<code>redis</code>:</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">cp</span> /usr/local/redis-4.0.0/utils/redis_init_script /etc/init.d/redis
</span></code><div onclick="copied(this)" data-code="cp /usr/local/redis-4.0.0/utils/redis_init_script /etc/init.d/redis
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>æ‹·è´ä¸€ä¸‹<code>redis.conf</code> æ–‡ä»¶åˆ°<code>/etc/redis</code>ç›®å½•ä¸‹</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">cp</span> /usr/local/redis-4.0.0/redis.conf /etc/redis/6380.conf
</span></code><div onclick="copied(this)" data-code="cp /usr/local/redis-4.0.0/redis.conf /etc/redis/6380.conf
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>é…ç½®æ–‡ä»¶<code>6380.conf</code>éœ€è¦æ›´æ”¹å‡ ä¸ªåœ°æ–¹</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># æ˜¯å¦åœ¨åå°æ‰§è¡Œï¼Œyesï¼šåå°è¿è¡Œï¼›noï¼šä¸æ˜¯åå°è¿è¡Œï¼ˆè€ç‰ˆæœ¬é»˜è®¤ï¼‰</span>
</span><span class="code-line">daemonize <span class="token function">yes</span>
</span></code><div onclick="copied(this)" data-code="# æ˜¯å¦åœ¨åå°æ‰§è¡Œï¼Œyesï¼šåå°è¿è¡Œï¼›noï¼šä¸æ˜¯åå°è¿è¡Œï¼ˆè€ç‰ˆæœ¬é»˜è®¤ï¼‰
daemonize yes
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>æ›´æ”¹æƒé™ï¼Œé€šè¿‡ <a href="https://jaywcjlove.github.io/linux-command/c/chkconfig.html">chkconfig</a> å‘½ä»¤æ£€æŸ¥ã€è®¾ç½®ç³»ç»ŸredisæœåŠ¡å¼€å¯</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">chmod</span> +x /etc/init.d/redis
</span><span class="code-line"><span class="token function">chkconfig</span> redis on
</span></code><div onclick="copied(this)" data-code="chmod +x /etc/init.d/redis
chkconfig redis on
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>å¿…é¡»æŠŠä¸‹é¢ä¸¤è¡Œæ³¨é‡Šæ”¾åœ¨ <code>/etc/init.d/redis</code> æ–‡ä»¶å¤´éƒ¨ï¼Œä¸è®¾ç½®ä¼šæŠ¥ä¸æ”¯æŒçš„æç¤º <code>service redis does not support chkconfig</code></p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># chkconfig:   2345 90 10</span>
</span><span class="code-line"><span class="token comment"># description:  redis is a persistent key-value database</span>
</span></code><div onclick="copied(this)" data-code="# chkconfig:   2345 90 10
# description:  redis is a persistent key-value database
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>ä¸Šé¢çš„æ³¨é‡Šçš„æ„æ€æ˜¯ï¼ŒredisæœåŠ¡å¿…é¡»åœ¨è¿è¡Œçº§2ï¼Œ3ï¼Œ4ï¼Œ5ä¸‹è¢«å¯åŠ¨æˆ–å…³é—­ï¼Œå¯åŠ¨çš„ä¼˜å…ˆçº§æ˜¯90ï¼Œå…³é—­çš„ä¼˜å…ˆçº§æ˜¯10ã€‚</p>
    <p><strong>Redis å¯åŠ¨è­¦å‘Šé”™è¯¯è§£å†³</strong></p>
    <ol>
      <li>WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.</li>
    </ol>
    <pre class="language-shell"><code class="language-shell code-highlight"><span class="code-line"><span class="token builtin class-name">echo</span> <span class="token string">"vm.overcommit_memory=1"</span> <span class="token operator">></span> /etc/sysctl.conf  <span class="token comment"># æˆ– vi /etcsysctl.conf , ç„¶årebooté‡å¯æœºå™¨</span>
</span><span class="code-line"><span class="token builtin class-name">echo</span> <span class="token number">1</span> <span class="token operator">></span> /proc/sys/vm/overcommit_memory  <span class="token comment"># ä¸éœ€è¦å¯æœºå™¨å°±ç”Ÿæ•ˆ</span>
</span></code><div onclick="copied(this)" data-code="echo &#x22;vm.overcommit_memory=1&#x22; > /etc/sysctl.conf  # æˆ– vi /etcsysctl.conf , ç„¶årebooté‡å¯æœºå™¨
echo 1 > /proc/sys/vm/overcommit_memory  # ä¸éœ€è¦å¯æœºå™¨å°±ç”Ÿæ•ˆ
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <ol start="2">
      <li>WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.</li>
    </ol>
    <pre class="language-shell"><code class="language-shell code-highlight"><span class="code-line"><span class="token builtin class-name">echo</span> <span class="token number">511</span> <span class="token operator">></span> /proc/sys/net/core/somaxconn
</span></code><div onclick="copied(this)" data-code="echo 511 > /proc/sys/net/core/somaxconn
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="æ›´æ”¹é…ç½®"><a class="anchor" aria-hidden="true" tabindex="-1" href="#æ›´æ”¹é…ç½®"><span class="octicon octicon-link"></span></a>æ›´æ”¹é…ç½®</h2>
    <p>Redis çš„é…ç½®æ–‡ä»¶ä½äº Redis å®‰è£…ç›®å½•ä¸‹ï¼Œæ–‡ä»¶åä¸º <code>redis.conf</code>ã€‚ä¸Šé¢å·²ç»å°†å®ƒæ‹·è´åˆ°<code>/etc/redis</code>ç›®å½•ä¸‹äº†ï¼Œé…ç½®æ–‡ä»¶åœ¨ <code>sudo vi /etc/redis/6380.conf</code> è¿™é‡Œå¯ä»¥ç¼–è¾‘</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">sudo</span> <span class="token function">vi</span> /etc/redis/6380.conf
</span></code><div onclick="copied(this)" data-code="sudo vi /etc/redis/6380.conf
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>ä½ å¯ä»¥é€šè¿‡ CONFIG å‘½ä»¤æŸ¥çœ‹æˆ–è®¾ç½®é…ç½®é¡¹ã€‚é…ç½®è®¾ç½®å‘½ä»¤</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment">## è¿›å…¥redisè·å–</span>
</span><span class="code-line"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> CONFIG GET CONFIG_SETTING_NAME
</span><span class="code-line"><span class="token comment">## è¿›å…¥redisè®¾ç½®</span>
</span><span class="code-line"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> CONFIG SET CONFIG_SETTING_NAME NEW_CONFIG_VALUE
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">## è·å–æ‰€æœ‰é…ç½®</span>
</span><span class="code-line"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> CONFIG GET *
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">## è®¾ç½®é…ç½®å¼€å¯é€šçŸ¥åŠŸèƒ½</span>
</span><span class="code-line">$ redis-cli config <span class="token builtin class-name">set</span> notify-keyspace-events KEA
</span></code><div onclick="copied(this)" data-code="## è¿›å…¥redisè·å–
127.0.0.1:6379> CONFIG GET CONFIG_SETTING_NAME
## è¿›å…¥redisè®¾ç½®
127.0.0.1:6379> CONFIG SET CONFIG_SETTING_NAME NEW_CONFIG_VALUE

## è·å–æ‰€æœ‰é…ç½®
127.0.0.1:6379> CONFIG GET *

## è®¾ç½®é…ç½®å¼€å¯é€šçŸ¥åŠŸèƒ½
$ redis-cli config set notify-keyspace-events KEA
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="è®¾ç½®è¯·æ±‚å¯†ç "><a class="anchor" aria-hidden="true" tabindex="-1" href="#è®¾ç½®è¯·æ±‚å¯†ç "><span class="octicon octicon-link"></span></a>è®¾ç½®è¯·æ±‚å¯†ç </h2>
    <p>æ‰“å¼€ <code>vim /etc/redis/6380.conf</code> é…ç½®æ–‡ä»¶ç¼–è¾‘å®ƒï¼Œæ›´æ”¹ä¸‹é¢ä¸¤é¡¹å†…å®¹ï¼š</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># ...</span>
</span><span class="code-line"><span class="token comment"># requirepass foobared</span>
</span><span class="code-line"><span class="token comment"># æ›´æ”¹æˆä¸‹é¢å†…å®¹ï¼ŒæŠŠ foobared æ”¹ä¸ºä½ æƒ³è¦è®¾ç½®çš„å¯†ç </span>
</span><span class="code-line">requirepass <span class="token number">111111</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># bind 127.0.0.1 å»æ‰ # æ³¨é‡Šå¹¶æ”¹ä¸º</span>
</span><span class="code-line"><span class="token builtin class-name">bind</span> <span class="token number">0.0</span>.0.0
</span></code><div onclick="copied(this)" data-code="# ...
# requirepass foobared
# æ›´æ”¹æˆä¸‹é¢å†…å®¹ï¼ŒæŠŠ foobared æ”¹ä¸ºä½ æƒ³è¦è®¾ç½®çš„å¯†ç 
requirepass 111111

# bind 127.0.0.1 å»æ‰ # æ³¨é‡Šå¹¶æ”¹ä¸º
bind 0.0.0.0
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>æ›´æ”¹ä¸ºä¹‹åä½ å°±å¯ä»¥å¸¦å¯†ç è®¿é—®redisäº†ã€‚</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">redis-cli -h <span class="token number">127.0</span>.0.1 -p <span class="token number">6379</span> -a <span class="token number">111111</span>
</span></code><div onclick="copied(this)" data-code="redis-cli -h 127.0.0.1 -p 6379 -a 111111
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="ä¸»ä»æ¶æ„é…ç½®"><a class="anchor" aria-hidden="true" tabindex="-1" href="#ä¸»ä»æ¶æ„é…ç½®"><span class="octicon octicon-link"></span></a>ä¸»ä»æ¶æ„é…ç½®</h2>
    <p>å‡è®¾æœ‰ä¸¤å°æœåŠ¡å™¨ï¼Œä¸€å°åšä¸»ï¼Œä¸€å°åšä»</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">Redis ä¸»ä¿¡æ¯ï¼š
</span><span class="code-line">  IPï¼š12.168.1.114
</span><span class="code-line">  ç«¯å£ï¼š6379
</span><span class="code-line">Redis ä»ä¿¡æ¯ï¼š
</span><span class="code-line">  IPï¼š12.168.1.115
</span><span class="code-line">  ç«¯å£ï¼š6379
</span></code><div onclick="copied(this)" data-code="Redis ä¸»ä¿¡æ¯ï¼š
  IPï¼š12.168.1.114
  ç«¯å£ï¼š6379
Redis ä»ä¿¡æ¯ï¼š
  IPï¼š12.168.1.115
  ç«¯å£ï¼š6379
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>ç¼–è¾‘ä»æœºçš„ Redis é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ° <code># slaveof</code>å¼€å¤´çš„è¿™ä¸€è¡Œåº”è¯¥æ˜¯æ³¨é‡Šçš„ï¼š<code># slaveof &#x3C;masterip> &#x3C;masterport></code>æˆ‘ä»¬éœ€è¦å»æ‰è¯¥æ³¨é‡Šï¼Œå¹¶ä¸”å¡«å†™æˆ‘ä»¬è‡ªå·±çš„ä¸»æœºçš„ IP å’Œ ç«¯å£ï¼Œæ¯”å¦‚ï¼š<code>slaveof 192.168.1.114 6379</code>ã€‚</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># slaveof &#x3C;è‡ªå·±çš„ä¸»æœºçš„ IP> &#x3C;è‡ªå·±çš„ä¸»æœºçš„ ç«¯å£></span>
</span><span class="code-line"><span class="token comment"># è¿™è¡Œæ›´æ”¹æˆä¸‹é¢å†…å®¹</span>
</span><span class="code-line">slaveof <span class="token number">192.168</span>.1.114 <span class="token number">6379</span>
</span></code><div onclick="copied(this)" data-code="# slaveof <è‡ªå·±çš„ä¸»æœºçš„ IP> <è‡ªå·±çš„ä¸»æœºçš„ ç«¯å£>
# è¿™è¡Œæ›´æ”¹æˆä¸‹é¢å†…å®¹
slaveof 192.168.1.114 6379
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>é…ç½®å®Œæˆåé‡å¯ä»æœº Redis æœåŠ¡é‡å¯å®Œä¹‹åï¼Œè¿›å…¥ä¸»æœºçš„ redis-cli çŠ¶æ€ä¸‹ï¼Œè¾“å…¥ï¼š<code>INFO replication</code> å¯ä»¥æŸ¥è¯¢åˆ°å½“å‰ä¸»æœºçš„ redis å¤„äºä»€ä¹ˆè§’è‰²ï¼Œæœ‰å“ªäº›ä»æœºå·²ç»è¿ä¸Šä¸»æœºã€‚</p>
    <p>æ­¤æ—¶å·²ç»å®Œæˆäº†ä¸»ä»é…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥æµ‹è¯•ä¸‹ï¼š</p>
    <ol>
      <li>æˆ‘ä»¬è¿›å…¥ä¸»æœºçš„ redis-cli çŠ¶æ€ï¼Œç„¶å set æŸä¸ªå€¼ï¼Œæ¯”å¦‚ï¼šset mygithub jaywcjlove</li>
      <li>æˆ‘ä»¬åˆ‡æ¢è¿›å…¥ä»æœºçš„ redis-cli çš„çŠ¶æ€ä¸‹ï¼Œè·å–åˆšåˆšè®¾ç½®çš„å€¼çœ‹æ˜¯å¦å­˜åœ¨ï¼šget mygithubï¼Œæ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°æ˜¯å¯ä»¥è·å–åˆ°å€¼çš„ã€‚</li>
      <li>ä½†æ˜¯æœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„ï¼šä»åº“ä¸å…·å¤‡å†™å…¥æ•°æ®èƒ½åŠ›ï¼Œä¸ç„¶ä¼šæŠ¥é”™ã€‚ ä»åº“åªæœ‰åªè¯»èƒ½åŠ›ã€‚</li>
    </ol>
    <h2 id="åŸºæœ¬æ“ä½œ"><a class="anchor" aria-hidden="true" tabindex="-1" href="#åŸºæœ¬æ“ä½œ"><span class="octicon octicon-link"></span></a>åŸºæœ¬æ“ä½œ</h2>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment">## å‘½ä»¤è¡Œå®¢æˆ·ç«¯å¯åŠ¨</span>
</span><span class="code-line">$ redis-cli
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># æµ‹è¯•å¿ƒè·³</span>
</span><span class="code-line"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> <span class="token function">ping</span>
</span><span class="code-line">PONG
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># è®¾ç½® mykey é”®çš„å€¼</span>
</span><span class="code-line"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> <span class="token builtin class-name">set</span> mykey hello
</span><span class="code-line">OK
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># è·å– mykey é”®çš„å€¼</span>
</span><span class="code-line"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> get mykey
</span><span class="code-line"><span class="token string">"hello"</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">## è®¾ç½® mykey å¤±æ•ˆäº‹ä»¶</span>
</span><span class="code-line"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> expire mykey <span class="token number">2</span>
</span><span class="code-line">
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># æŸ¥çœ‹å½“å‰redisçš„é…ç½®ä¿¡æ¯</span>
</span><span class="code-line"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> config get *
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># è·å–æ‰€æœ‰çš„key</span>
</span><span class="code-line"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> keys *
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># åˆ é™¤rediså½“å‰æ•°æ®åº“ä¸­çš„æ‰€æœ‰Key</span>
</span><span class="code-line"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> flushdb
</span><span class="code-line">
</span><span class="code-line"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> config get <span class="token function">dir</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># é¦‹å“­å½“å‰åº“ key çš„æ•°é‡</span>
</span><span class="code-line"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> dbsize
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># åˆ é™¤æ‰€æœ‰æ•°æ®åº“ä¸­çš„key</span>
</span><span class="code-line"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> flushall
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># é€€å‡º</span>
</span><span class="code-line"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> <span class="token builtin class-name">exit</span>
</span><span class="code-line">
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># æ‰¾å‡ºæ‹–æ…¢ Redis çš„ç½ªé­ç¥¸é¦–</span>
</span><span class="code-line"><span class="token comment"># é€šè¿‡è¿™ä¸ªå·¥å…·å¯ä»¥æŸ¥çœ‹æ‰€æœ‰å‘½ä»¤ç»Ÿè®¡çš„å¿«ç…§ï¼Œ</span>
</span><span class="code-line"><span class="token comment"># æ¯”å¦‚å‘½ä»¤æ‰§è¡Œäº†å¤šå°‘æ¬¡ï¼Œ</span>
</span><span class="code-line"><span class="token comment"># æ‰§è¡Œå‘½ä»¤æ‰€è€—è´¹çš„æ¯«ç§’æ•°(æ¯ä¸ªå‘½ä»¤çš„æ€»æ—¶é—´å’Œå¹³å‡æ—¶é—´)</span>
</span><span class="code-line"><span class="token comment"># åªéœ€è¦ç®€å•åœ°æ‰§è¡Œ CONFIG RESETSTAT å‘½ä»¤å°±å¯ä»¥é‡ç½®ï¼Œè¿™æ ·ä½ å°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªå…¨æ–°çš„ç»Ÿè®¡ç»“æœã€‚</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> commandstats
</span><span class="code-line">cmdstat_get:calls<span class="token operator">=</span><span class="token number">78</span>,usec<span class="token operator">=</span><span class="token number">608</span>,usec_per_call<span class="token operator">=</span><span class="token number">7.79</span>
</span><span class="code-line">cmdstat_setex:calls<span class="token operator">=</span><span class="token number">5</span>,usec<span class="token operator">=</span><span class="token number">71</span>,usec_per_call<span class="token operator">=</span><span class="token number">14.20</span>
</span><span class="code-line">cmdstat_keys:calls<span class="token operator">=</span><span class="token number">2</span>,usec<span class="token operator">=</span><span class="token number">42</span>,usec_per_call<span class="token operator">=</span><span class="token number">21.00</span>
</span><span class="code-line">cmdstat_info:calls<span class="token operator">=</span><span class="token number">10</span>,usec<span class="token operator">=</span><span class="token number">1931</span>,usec_per_call<span class="token operator">=</span><span class="token number">193.10</span>
</span></code><div onclick="copied(this)" data-code="## å‘½ä»¤è¡Œå®¢æˆ·ç«¯å¯åŠ¨
$ redis-cli

# æµ‹è¯•å¿ƒè·³
127.0.0.1:6379> ping
PONG

# è®¾ç½® mykey é”®çš„å€¼
127.0.0.1:6379> set mykey hello
OK

# è·å– mykey é”®çš„å€¼
127.0.0.1:6379> get mykey
&#x22;hello&#x22;

## è®¾ç½® mykey å¤±æ•ˆäº‹ä»¶
127.0.0.1:6379> expire mykey 2


# æŸ¥çœ‹å½“å‰redisçš„é…ç½®ä¿¡æ¯
127.0.0.1:6379> config get *

# è·å–æ‰€æœ‰çš„key
127.0.0.1:6379> keys *

# åˆ é™¤rediså½“å‰æ•°æ®åº“ä¸­çš„æ‰€æœ‰Key
127.0.0.1:6379> flushdb

127.0.0.1:6379> config get dir

# é¦‹å“­å½“å‰åº“ key çš„æ•°é‡
127.0.0.1:6379> dbsize

# åˆ é™¤æ‰€æœ‰æ•°æ®åº“ä¸­çš„key
127.0.0.1:6379> flushall

# é€€å‡º
127.0.0.1:6379> exit


# æ‰¾å‡ºæ‹–æ…¢ Redis çš„ç½ªé­ç¥¸é¦–
# é€šè¿‡è¿™ä¸ªå·¥å…·å¯ä»¥æŸ¥çœ‹æ‰€æœ‰å‘½ä»¤ç»Ÿè®¡çš„å¿«ç…§ï¼Œ
# æ¯”å¦‚å‘½ä»¤æ‰§è¡Œäº†å¤šå°‘æ¬¡ï¼Œ
# æ‰§è¡Œå‘½ä»¤æ‰€è€—è´¹çš„æ¯«ç§’æ•°(æ¯ä¸ªå‘½ä»¤çš„æ€»æ—¶é—´å’Œå¹³å‡æ—¶é—´)
# åªéœ€è¦ç®€å•åœ°æ‰§è¡Œ CONFIG RESETSTAT å‘½ä»¤å°±å¯ä»¥é‡ç½®ï¼Œè¿™æ ·ä½ å°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªå…¨æ–°çš„ç»Ÿè®¡ç»“æœã€‚

127.0.0.1:6379> commandstats
cmdstat_get:calls=78,usec=608,usec_per_call=7.79
cmdstat_setex:calls=5,usec=71,usec_per_call=14.20
cmdstat_keys:calls=2,usec=42,usec_per_call=21.00
cmdstat_info:calls=10,usec=1931,usec_per_call=193.10
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="æ”¯æŒçš„æ•°æ®ç±»å‹"><a class="anchor" aria-hidden="true" tabindex="-1" href="#æ”¯æŒçš„æ•°æ®ç±»å‹"><span class="octicon octicon-link"></span></a>æ”¯æŒçš„æ•°æ®ç±»å‹</h2>
    <h3 id="å­—ç¬¦ä¸²"><a class="anchor" aria-hidden="true" tabindex="-1" href="#å­—ç¬¦ä¸²"><span class="octicon octicon-link"></span></a>å­—ç¬¦ä¸²</h3>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># å¯åŠ¨å®¢æˆ·ç«¯ ,å­˜å‚¨å­—ç¬¦ä¸²åˆ°redis.</span>
</span><span class="code-line">redis<span class="token operator">></span> SET name forezp
</span><span class="code-line">OK
</span><span class="code-line"><span class="token comment"># å–å­—ç¬¦ä¸²:</span>
</span><span class="code-line">redis<span class="token operator">></span> get name 
</span><span class="code-line"><span class="token string">"forezp"</span>
</span></code><div onclick="copied(this)" data-code="# å¯åŠ¨å®¢æˆ·ç«¯ ,å­˜å‚¨å­—ç¬¦ä¸²åˆ°redis.
redis> SET name forezp
OK
# å–å­—ç¬¦ä¸²:
redis> get name 
&#x22;forezp&#x22;
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="hashes---å“ˆå¸Œå€¼"><a class="anchor" aria-hidden="true" tabindex="-1" href="#hashes---å“ˆå¸Œå€¼"><span class="octicon octicon-link"></span></a>Hashes - å“ˆå¸Œå€¼</h3>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">redis <span class="token operator">></span> HMSET king username forezp password xxdxx age <span class="token number">22</span>
</span><span class="code-line">redis <span class="token operator">></span> HGETALL king
</span><span class="code-line"><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"username"</span>
</span><span class="code-line"><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"forezp "</span>
</span><span class="code-line"><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"password "</span>
</span><span class="code-line"><span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"xxdxx "</span>
</span><span class="code-line"><span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">"age "</span>
</span><span class="code-line"><span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">"22"</span>
</span></code><div onclick="copied(this)" data-code="redis > HMSET king username forezp password xxdxx age 22
redis > HGETALL king
1) &#x22;username&#x22;
2) &#x22;forezp &#x22;
3) &#x22;password &#x22;
4) &#x22;xxdxx &#x22;
5) &#x22;age &#x22;
6) &#x22;22&#x22;
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="lists---åˆ—è¡¨"><a class="anchor" aria-hidden="true" tabindex="-1" href="#lists---åˆ—è¡¨"><span class="octicon octicon-link"></span></a>Lists - åˆ—è¡¨</h3>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">redis<span class="token operator">></span> lpush pricess kenny
</span><span class="code-line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
</span><span class="code-line">redis <span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> lpush pricess jolin
</span><span class="code-line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
</span><span class="code-line">redis <span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> lpush pricess mayun
</span><span class="code-line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
</span><span class="code-line">redis <span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> lrange pricess <span class="token number">0</span> <span class="token number">10</span>
</span><span class="code-line"><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"kenny"</span>
</span><span class="code-line"><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"jolin"</span>
</span><span class="code-line"><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"mayun"</span>
</span></code><div onclick="copied(this)" data-code="redis> lpush pricess kenny
(integer) 1
redis 127.0.0.1:6379> lpush pricess jolin
(integer) 2
redis 127.0.0.1:6379> lpush pricess mayun
(integer) 3
redis 127.0.0.1:6379> lrange pricess 0 10
1) &#x22;kenny&#x22;
2) &#x22;jolin&#x22;
3) &#x22;mayun&#x22;
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="æœ‰åºé›†åˆ"><a class="anchor" aria-hidden="true" tabindex="-1" href="#æœ‰åºé›†åˆ"><span class="octicon octicon-link"></span></a>æœ‰åºé›†åˆ</h3>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">redis <span class="token operator">></span> ZADD kindom <span class="token number">1</span> redis
</span><span class="code-line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
</span><span class="code-line">redis<span class="token operator">></span> ZADD kindom <span class="token number">2</span> mongodb
</span><span class="code-line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
</span><span class="code-line">redis <span class="token operator">></span> ZADD kindom <span class="token number">3</span> mysql
</span><span class="code-line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
</span><span class="code-line">redis <span class="token operator">></span> ZADD kindom <span class="token number">3</span> mysql
</span><span class="code-line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
</span><span class="code-line">redis <span class="token operator">></span> ZADD kindom <span class="token number">4</span> mysql
</span><span class="code-line"><span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
</span><span class="code-line">redis <span class="token operator">></span> ZRANGE kindom <span class="token number">0</span> <span class="token number">10</span> WITHSCORES
</span><span class="code-line"><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"redis"</span>
</span><span class="code-line"><span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"1"</span>
</span><span class="code-line"><span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"mongodb"</span>
</span><span class="code-line"><span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"2"</span>
</span><span class="code-line"><span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">"mysql"</span>
</span><span class="code-line"><span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">"4"</span>
</span></code><div onclick="copied(this)" data-code="redis > ZADD kindom 1 redis
(integer) 1
redis> ZADD kindom 2 mongodb
(integer) 1
redis > ZADD kindom 3 mysql
(integer) 1
redis > ZADD kindom 3 mysql
(integer) 0
redis > ZADD kindom 4 mysql
(integer) 0
redis > ZRANGE kindom 0 10 WITHSCORES
1) &#x22;redis&#x22;
2) &#x22;1&#x22;
3) &#x22;mongodb&#x22;
4) &#x22;2&#x22;
5) &#x22;mysql&#x22;
6) &#x22;4&#x22;
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="å¼€å¯é€šçŸ¥"><a class="anchor" aria-hidden="true" tabindex="-1" href="#å¼€å¯é€šçŸ¥"><span class="octicon octicon-link"></span></a>å¼€å¯é€šçŸ¥</h2>
    <p>é”®ç©ºé—´äº‹ä»¶é€šçŸ¥é»˜è®¤è¢«ç¦ç”¨ï¼Œå› ä¸ºè¿™ä¸ªç‰¹æ€§æ¶ˆè€—CPUç”µé‡ä¸æ˜¯å¾ˆæ˜æ™ºã€‚ä½¿ç”¨<code>redis.conf</code>çš„<code>notify-keyspace-events</code>ï¼Œæˆ–è€…é€šè¿‡<code>CONFIG SET</code>æ¥å¼€å¯é€šçŸ¥ã€‚</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment">## è®¾ç½®é…ç½®å¼€å¯é€šçŸ¥åŠŸèƒ½</span>
</span><span class="code-line">$ redis-cli config <span class="token builtin class-name">set</span> notify-keyspace-events KEA
</span><span class="code-line"><span class="token comment">## å‘½ä»¤è¡Œç›‘æ§æ‰€æœ‰é€šçŸ¥</span>
</span><span class="code-line">$ redis-cli --csv psubscribe <span class="token string">'__key*__:*'</span>
</span><span class="code-line">Reading messages<span class="token punctuation">..</span>. <span class="token punctuation">(</span>press Ctrl-C to quit<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token string">"psubscribe"</span>,<span class="token string">"__key*__:*"</span>,1
</span></code><div onclick="copied(this)" data-code="## è®¾ç½®é…ç½®å¼€å¯é€šçŸ¥åŠŸèƒ½
$ redis-cli config set notify-keyspace-events KEA
## å‘½ä»¤è¡Œç›‘æ§æ‰€æœ‰é€šçŸ¥
$ redis-cli --csv psubscribe &#x27;__key*__:*&#x27;
Reading messages... (press Ctrl-C to quit)
&#x22;psubscribe&#x22;,&#x22;__key*__:*&#x22;,1
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>é”®å€¼è¯´æ˜</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">K     Keyspace events, published with __keyspace@<span class="token operator">&#x3C;</span>db<span class="token operator">></span>__ prefix.  
</span><span class="code-line">E     Keyevent events, published with __keyevent@<span class="token operator">&#x3C;</span>db<span class="token operator">></span>__ prefix.  
</span><span class="code-line">g     Generic commands <span class="token punctuation">(</span>non-type specific<span class="token punctuation">)</span> like DEL, EXPIRE, RENAME, <span class="token punctuation">..</span>.  
</span><span class="code-line">$     String commands  
</span><span class="code-line">l     List commands  
</span><span class="code-line">s     Set commands  
</span><span class="code-line">h     Hash commands  
</span><span class="code-line">z     Sorted <span class="token builtin class-name">set</span> commands  
</span><span class="code-line">x     Expired events <span class="token punctuation">(</span>events generated every <span class="token function">time</span> a key expires<span class="token punctuation">)</span>  
</span><span class="code-line">e     Evicted events <span class="token punctuation">(</span>events generated when a key is evicted <span class="token keyword">for</span> maxmemory<span class="token punctuation">)</span>  
</span><span class="code-line">A     Alias <span class="token keyword">for</span> g<span class="token variable">$lshzxe</span>, so that the <span class="token string">"AKE"</span> string means all the events. 
</span></code><div onclick="copied(this)" data-code="K     Keyspace events, published with __keyspace@<db>__ prefix.  
E     Keyevent events, published with __keyevent@<db>__ prefix.  
g     Generic commands (non-type specific) like DEL, EXPIRE, RENAME, ...  
$     String commands  
l     List commands  
s     Set commands  
h     Hash commands  
z     Sorted set commands  
x     Expired events (events generated every time a key expires)  
e     Evicted events (events generated when a key is evicted for maxmemory)  
A     Alias for g$lshzxe, so that the &#x22;AKE&#x22; string means all the events. 
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>ä¸åŒå‘½ä»¤äº§ç”Ÿçš„äº‹ä»¶(Events generated by different commands)</p>
    <p>æŒ‰ç…§ä¸‹é¢çš„æ¸…å•ï¼Œä¸åŒçš„å‘½ä»¤äº§ç”Ÿä¸åŒç±»å‹çš„äº‹ä»¶ã€‚ <a href="http://redis.io/topics/notifications">Redis Keyspace Notifications</a></p>
    <ul>
      <li>DEL ä¸ºæ¯ä¸€ä¸ªè¢«åˆ é™¤çš„é”®äº§ç”Ÿä¸€ä¸ªdeläº‹ä»¶ã€‚</li>
      <li>RENAME äº§ç”Ÿä¸¤ä¸ªäº‹ä»¶ï¼Œä¸ºæºé”®äº§ç”Ÿä¸€ä¸ªrename_fromäº‹ä»¶ï¼Œä¸ºç›®æ ‡é”®äº§ç”Ÿä¸€ä¸ªrename_toäº‹ä»¶ã€‚</li>
      <li>EXPIRE å½“ä¸ºé”®è®¾ç½®è¿‡æœŸæ—¶äº§ç”Ÿä¸€ä¸ªexpireäº‹ä»¶ï¼Œæˆ–è€…æ¯å½“è®¾ç½®äº†è¿‡æœŸçš„é”®è¢«åˆ é™¤æ—¶äº§ç”Ÿä¸€ä¸ªexpiredäº‹ä»¶(æŸ¥çœ‹EXPIREæ–‡æ¡£è·å–æ›´å¤šä¿¡æ¯)ã€‚</li>
      <li>SORT å½“STOREç”¨äºè®¾ç½®ä¸€ä¸ªæ–°é”®æ—¶äº§ç”Ÿä¸€ä¸ªsortstoreäº‹ä»¶ã€‚å½“ç»“æœåˆ—è¡¨ä¸ºç©ºï¼Œå¹¶ä¸”ä½¿ç”¨äº†STOREé€‰é¡¹ï¼Œå¹¶ä¸”å·²ç»æœ‰ä¸€ä¸ªè¯¥åå­—çš„é”®å­˜åœ¨ï¼Œé‚£ä¹ˆè¿™ä¸ªä»¶é”®è¢«åˆ é™¤ï¼Œæ‰€ä»¥è¿™ç§æ¡ä»¶ä¸‹æˆ–äº§ç”Ÿä¸€ä¸ªdeläº‹ä»¶ã€‚</li>
      <li>SETåŠå…¶æ‰€æœ‰å˜ç§(SETEX, SETNX,GETSET) äº§ç”Ÿsetäº‹ä»¶ã€‚ä½†æ˜¯SETEXè¿˜ä¼šäº§ç”Ÿä¸€ä¸ªexpireäº‹ä»¶ã€‚</li>
      <li>MSET ä¸ºæ¯ä¸ªé”®äº§ç”Ÿä¸€ä¸ªå•ç‹¬çš„setäº‹ä»¶ã€‚</li>
      <li>SETRANGE äº§ç”Ÿä¸€ä¸ªsetrangeäº‹ä»¶ã€‚</li>
      <li>INCR, DECR, INCRBY, DECRBY éƒ½äº§ç”Ÿincrbyäº‹ä»¶ã€‚</li>
      <li>INCRBYFLOAT äº§ç”Ÿä¸€ä¸ªincrbyfloatäº‹ä»¶ã€‚</li>
      <li>APPEND äº§ç”Ÿä¸€ä¸ªappendäº‹ä»¶ã€‚</li>
      <li>LPUSHå’ŒLPUSHX äº§ç”Ÿå•ä¸ªlpushäº‹ä»¶ï¼Œå³ä½¿åœ¨å¯å˜æƒ…å†µä¸‹(even in the variadic case)ã€‚</li>
      <li>RPUSHå’ŒRPUSHX äº§ç”Ÿå•ä¸ªrpushäº‹ä»¶ï¼Œå³ä½¿åœ¨å¯å˜æƒ…å†µä¸‹(even in the variadic case)ã€‚</li>
      <li>RPOP äº§ç”Ÿä¸€ä¸ªrpopäº‹ä»¶ã€‚å¦‚æœé”®ç”±äºæœ€åä¸€ä¸ªå…ƒç´ è¢«ä»åˆ—è¡¨ä¸­å¼¹å‡ºè€Œå¯¼è‡´åˆ é™¤ï¼Œä¼šåˆäº§ç”Ÿä¸€ä¸ªdeläº‹ä»¶ã€‚</li>
      <li>LPOP äº§ç”Ÿä¸€ä¸ªlpopäº‹ä»¶ã€‚å¦‚æœé”®ç”±äºæœ€åä¸€ä¸ªå…ƒç´ è¢«ä»åˆ—è¡¨ä¸­å¼¹å‡ºè€Œå¯¼è‡´åˆ é™¤ï¼Œä¼šåˆäº§ç”Ÿä¸€ä¸ªdeläº‹ä»¶ã€‚</li>
      <li>LINSERT äº§ç”Ÿä¸€ä¸ªlinsertäº‹ä»¶ã€‚</li>
      <li>LSET äº§ç”Ÿä¸€ä¸ªlsetäº‹ä»¶ã€‚</li>
      <li>LREM äº§ç”Ÿä¸€ä¸ªlremäº‹ä»¶ã€‚å¦‚æœç»“æœåˆ—è¡¨ä¸ºç©ºå¹¶ä¸”é”®è¢«åˆ é™¤ï¼Œä¼šåˆäº§ç”Ÿä¸€ä¸ªdeläº‹ä»¶ã€‚</li>
      <li>LTRIM äº§ç”Ÿä¸€ä¸ªltrimäº‹ä»¶ã€‚å¦‚æœç»“æœåˆ—è¡¨ä¸ºç©ºå¹¶ä¸”é”®è¢«åˆ é™¤ï¼Œä¼šåˆäº§ç”Ÿä¸€ä¸ªdeläº‹ä»¶ã€‚</li>
      <li>RPOPLPUSHå’ŒBRPOPLPUSH äº§ç”Ÿä¸€ä¸ªrpopäº‹ä»¶å’Œä¸€ä¸ªlpushäº‹ä»¶ã€‚ä¸¤ç§æƒ…å†µä¸‹é¡ºåºéƒ½èƒ½ä¿è¯ (lpushäº‹ä»¶æ€»æ˜¯åœ¨rpopäº‹ä»¶ä¹‹åè¢«ä¼ é€’) å¦‚æœç»“æœåˆ—è¡¨é•¿åº¦ä¸ºé›¶å¹¶ä¸”é”®è¢«åˆ é™¤ï¼Œä¼šåˆäº§ç”Ÿä¸€ä¸ªdeläº‹ä»¶ã€‚</li>
      <li>HSET, HSETNXå’ŒHMSET éƒ½äº§ç”Ÿå•ä¸ªhsetäº‹ä»¶ã€‚</li>
      <li>HINCRBY äº§ç”Ÿä¸€ä¸ªhincrbyäº‹ä»¶ã€‚</li>
      <li>HINCRBYFLOAT äº§ç”Ÿä¸€ä¸ªhincrbyfloatäº‹ä»¶ã€‚</li>
      <li>HDEL äº§ç”Ÿå•ä¸ªhdeläº‹ä»¶ã€‚å¦‚æœç»“æœå“ˆå¸Œä¸ºç©ºå¹¶ä¸”é”®è¢«åˆ é™¤ï¼Œä¼šåˆäº§ç”Ÿä¸€ä¸ªdeläº‹ä»¶ã€‚</li>
      <li>SADD äº§ç”Ÿå•ä¸ªsaddäº‹ä»¶ï¼Œå³ä½¿åœ¨å¯å˜æƒ…å†µä¸‹(even in the variadic case)ã€‚</li>
      <li>SREM äº§ç”Ÿå•ä¸ªsremäº‹ä»¶ã€‚å¦‚æœç»“æœé›†åˆä¸ºç©ºå¹¶ä¸”é”®è¢«åˆ é™¤ï¼Œä¼šåˆäº§ç”Ÿä¸€ä¸ªdeläº‹ä»¶ã€‚</li>
      <li>SMOVE ä¸ºæºé”®äº§ç”Ÿä¸€ä¸ªsremäº‹ä»¶ä¸ºç›®æ ‡é”®äº§ç”Ÿä¸€ä¸ªsaddäº‹ä»¶ã€‚</li>
      <li>SPOP äº§ç”Ÿä¸€ä¸ªspopäº‹ä»¶ã€‚å¦‚æœç»“æœé›†åˆä¸ºç©ºå¹¶ä¸”é”®è¢«åˆ é™¤ï¼Œä¼šåˆäº§ç”Ÿä¸€ä¸ªdeläº‹ä»¶ã€‚</li>
      <li>SINTERSTORE, SUNIONSTORE, SDIFFSTORE åˆ†åˆ«äº§ç”Ÿsinterstoreï¼Œsunionostoreï¼Œsdiffstoreäº‹ä»¶ã€‚åœ¨ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œé›†åˆä¸ºç©ºï¼Œä¸”å­˜å‚¨ç»“æœçš„é”®å·²ç»å­˜åœ¨ï¼Œç”±äºé”®è¢«åˆ é™¤ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªdeläº‹ä»¶ã€‚</li>
      <li>ZINCR äº§ç”Ÿä¸€ä¸ªzincräº‹ä»¶ã€‚</li>
      <li>ZADDäº§ç”Ÿå•ä¸ªzaddäº‹ä»¶ï¼Œå³ä½¿æ·»åŠ äº†å¤šä¸ªå…ƒç´ ã€‚.</li>
      <li>ZREM äº§ç”Ÿå•ä¸ªzremäº‹ä»¶ï¼Œå³ä½¿åˆ é™¤äº†å¤šä¸ªå…ƒç´ ã€‚å½“ç»“æœæœ‰åºé›†åˆä¸ºç©ºï¼Œå¹¶ä¸”é”®è¢«ç”Ÿæˆæ—¶ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªé¢å¤–çš„deläº‹ä»¶ã€‚</li>
      <li>ZREMBYSCORE äº§ç”Ÿå•ä¸ªzrembyscoreäº‹ä»¶ã€‚å½“ç»“æœæœ‰åºé›†åˆä¸ºç©ºï¼Œå¹¶ä¸”é”®è¢«ç”Ÿæˆæ—¶ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªé¢å¤–çš„deläº‹ä»¶ã€‚</li>
      <li>ZREMBYRANK äº§ç”Ÿå•ä¸ªzrembyrankäº‹ä»¶ã€‚å½“ç»“æœæœ‰åºé›†åˆä¸ºç©ºï¼Œå¹¶ä¸”é”®è¢«ç”Ÿæˆæ—¶ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªé¢å¤–çš„deläº‹ä»¶ã€‚</li>
      <li>ZINTERSTOREå’ŒZUNIONSTORE åˆ†åˆ«äº§ç”Ÿzinterstoreå’Œzunionstoreäº‹ä»¶ã€‚åœ¨ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œé›†åˆä¸ºç©ºï¼Œä¸”å­˜å‚¨ç»“æœçš„é”®å·²ç»å­˜åœ¨ï¼Œç”±äºé”®è¢«åˆ é™¤ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªdeläº‹ä»¶ã€‚</li>
      <li>æ¯å½“ä¸€ä¸ªå…³è”æœ‰ç”Ÿå­˜äº‹ä»¶çš„é”®ç”±äºè¿‡æœŸè€Œè¢«ä»æ•°æ®é›†ä¸­åˆ é™¤æ—¶ä¼šäº§ç”Ÿä¸€ä¸ªexpiredäº‹ä»¶ã€‚</li>
      <li>æ¯å½“ä¸€ä¸ªé”®ç”±äºmaxmemoryç­–ç•¥è€Œä»æ•°æ®é›†ä¸­è¢«æ·˜æ±°ä»¥èŠ‚çœå†…å­˜æ—¶ä¼šäº§ç”Ÿä¸€ä¸ªevictedäº‹ä»¶ã€‚</li>
    </ul>
    <h2 id="å¼€å¯è¿œç¨‹ç™»å½•è¿æ¥"><a class="anchor" aria-hidden="true" tabindex="-1" href="#å¼€å¯è¿œç¨‹ç™»å½•è¿æ¥"><span class="octicon octicon-link"></span></a>å¼€å¯è¿œç¨‹ç™»å½•è¿æ¥</h2>
    <p>ä½¿ç”¨ netstat æ¥æŸ¥çœ‹ç«¯å£å ç”¨æƒ…å†µï¼Œ6379ä¸ºé»˜è®¤Redisç«¯å£ã€‚</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">netstat</span> -nlt<span class="token operator">|</span><span class="token function">grep</span> <span class="token number">6379</span>
</span></code><div onclick="copied(this)" data-code="netstat -nlt|grep 6379
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <ul>
      <li>-tï¼šæŒ‡æ˜æ˜¾ç¤º TCP ç«¯å£</li>
      <li>-uï¼šæŒ‡æ˜æ˜¾ç¤º UDP ç«¯å£</li>
      <li>-lï¼šä»…æ˜¾ç¤ºç›‘å¬å¥—æ¥å­—</li>
      <li>-pï¼šæ˜¾ç¤ºè¿›ç¨‹æ ‡è¯†ç¬¦å’Œç¨‹åºåç§°ï¼Œæ¯ä¸€ä¸ªå¥—æ¥å­—/ç«¯å£éƒ½å±äºä¸€ä¸ªç¨‹åºã€‚</li>
      <li>-nï¼šä¸è¿›è¡Œ DNS è½®è¯¢ï¼Œæ˜¾ç¤º IP ï¼ˆå¯ä»¥åŠ é€Ÿæ“ä½œï¼‰</li>
    </ul>
    <h3 id="ä¿®æ”¹é˜²ç«å¢™é…ç½®"><a class="anchor" aria-hidden="true" tabindex="-1" href="#ä¿®æ”¹é˜²ç«å¢™é…ç½®"><span class="octicon octicon-link"></span></a>ä¿®æ”¹é˜²ç«å¢™é…ç½®</h3>
    <p>ä¿®æ”¹é˜²ç«å¢™é…ç½® sudo vi /etc/sysconfig/iptables</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">-A INPUT -m state --state NEW -m tcp -p tcp --dport <span class="token number">6379</span> -j ACCEPT
</span></code><div onclick="copied(this)" data-code="-A INPUT -m state --state NEW -m tcp -p tcp --dport 6379 -j ACCEPT
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="ä¿®æ”¹é…ç½®æ–‡ä»¶"><a class="anchor" aria-hidden="true" tabindex="-1" href="#ä¿®æ”¹é…ç½®æ–‡ä»¶"><span class="octicon octicon-link"></span></a>ä¿®æ”¹é…ç½®æ–‡ä»¶</h3>
    <p>Redis protected-mode æ˜¯3.2 ä¹‹ååŠ å…¥çš„æ–°ç‰¹æ€§ï¼Œåœ¨Redis.confçš„æ³¨é‡Šä¸­ï¼Œæˆ‘ä»¬å¯ä»¥äº†è§£åˆ°ï¼Œä»–çš„å…·ä½“ä½œç”¨å’Œå¯ç”¨æ¡ä»¶ã€‚å¯ä»¥åœ¨ sudo vi /etc/redis.conf ä¸­ç¼–è¾‘ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ã€‚</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># Protected mode is a layer of security protection, in order to avoid that</span>
</span><span class="code-line"><span class="token comment"># Redis instances left open on the internet are accessed and exploited.</span>
</span><span class="code-line"><span class="token comment">#</span>
</span><span class="code-line"><span class="token comment"># When protected mode is on and if:</span>
</span><span class="code-line"><span class="token comment">#</span>
</span><span class="code-line"><span class="token comment"># 1) The server is not binding explicitly to a set of addresses using the</span>
</span><span class="code-line"><span class="token comment">#    "bind" directive.</span>
</span><span class="code-line"><span class="token comment"># 2) No password is configured.</span>
</span><span class="code-line"><span class="token comment">#</span>
</span><span class="code-line"><span class="token comment"># The server only accepts connections from clients connecting from the</span>
</span><span class="code-line"><span class="token comment"># IPv4 and IPv6 loopback addresses 127.0.0.1 and ::1, and from Unix domain</span>
</span><span class="code-line"><span class="token comment"># sockets.</span>
</span><span class="code-line"><span class="token comment">#</span>
</span><span class="code-line"><span class="token comment"># By default protected mode is enabled. You should disable it only if</span>
</span><span class="code-line"><span class="token comment"># you are sure you want clients from other hosts to connect to Redis</span>
</span><span class="code-line"><span class="token comment"># even if no authentication is configured, nor a specific set of interfaces</span>
</span><span class="code-line"><span class="token comment"># are explicitly listed using the "bind" directive.</span>
</span><span class="code-line">protected-mode <span class="token function">yes</span>
</span><span class="code-line">
</span></code><div onclick="copied(this)" data-code="# Protected mode is a layer of security protection, in order to avoid that
# Redis instances left open on the internet are accessed and exploited.
#
# When protected mode is on and if:
#
# 1) The server is not binding explicitly to a set of addresses using the
#    &#x22;bind&#x22; directive.
# 2) No password is configured.
#
# The server only accepts connections from clients connecting from the
# IPv4 and IPv6 loopback addresses 127.0.0.1 and ::1, and from Unix domain
# sockets.
#
# By default protected mode is enabled. You should disable it only if
# you are sure you want clients from other hosts to connect to Redis
# even if no authentication is configured, nor a specific set of interfaces
# are explicitly listed using the &#x22;bind&#x22; directive.
protected-mode yes

" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <p>å®ƒå¯ç”¨çš„æ¡ä»¶ï¼Œæœ‰ä¸¤ä¸ªï¼š</p>
    <ol>
      <li>æ²¡æœ‰bind IP</li>
      <li>æ²¡æœ‰è®¾ç½®è®¿é—®å¯†ç </li>
    </ol>
    <p>å¦‚æœå¯ç”¨äº†ï¼Œåˆ™åªèƒ½å¤Ÿé€šè¿‡lookback ipï¼ˆ127.0.0.1ï¼‰è®¿é—®Redis cacheï¼Œå¦‚æœä»å¤–ç½‘è®¿é—®ï¼Œåˆ™ä¼šè¿”å›ç›¸åº”çš„é”™è¯¯ä¿¡æ¯ï¼š</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token punctuation">(</span>error<span class="token punctuation">)</span> DENIED Redis is running <span class="token keyword">in</span> protected mode because protected mode is enabled, no <span class="token builtin class-name">bind</span> address was specified, no authentication password is requested to clients. In this mode connections are only accepted from the lookback interface. If you want to connect from external computers to Redis you may adopt one of the following solutions: <span class="token number">1</span><span class="token punctuation">)</span> Just disable protected mode sending the <span class="token builtin class-name">command</span> <span class="token string">'CONFIG SET protected-mode no'</span> from the loopback interface by connecting to Redis from the same <span class="token function">host</span> the server is running, however MAKE SURE Redis is not publicly accessible from internet <span class="token keyword">if</span> you <span class="token keyword">do</span> so. Use CONFIG REWRITE to <span class="token function">make</span> this change permanent. <span class="token number">2</span><span class="token punctuation">)</span> Alternatively you can just disable the protected mode by editing the Redis configuration file, and setting the protected mode option to <span class="token string">'no'</span>, and <span class="token keyword">then</span> restarting the server. <span class="token number">3</span><span class="token punctuation">)</span> If you started the server manually just <span class="token keyword">for</span> testing, restart it with the --portected-mode no option. <span class="token number">4</span><span class="token punctuation">)</span> Setup a <span class="token builtin class-name">bind</span> address or an authentication password. NOTE: You only need to <span class="token keyword">do</span> one of the above things <span class="token keyword">in</span> order <span class="token keyword">for</span> the server to start accepting connections from the outside.
</span></code><div onclick="copied(this)" data-code="(error) DENIED Redis is running in protected mode because protected mode is enabled, no bind address was specified, no authentication password is requested to clients. In this mode connections are only accepted from the lookback interface. If you want to connect from external computers to Redis you may adopt one of the following solutions: 1) Just disable protected mode sending the command &#x27;CONFIG SET protected-mode no&#x27; from the loopback interface by connecting to Redis from the same host the server is running, however MAKE SURE Redis is not publicly accessible from internet if you do so. Use CONFIG REWRITE to make this change permanent. 2) Alternatively you can just disable the protected mode by editing the Redis configuration file, and setting the protected mode option to &#x27;no&#x27;, and then restarting the server. 3) If you started the server manually just for testing, restart it with the --portected-mode no option. 4) Setup a bind address or an authentication password. NOTE: You only need to do one of the above things in order for the server to start accepting connections from the outside.
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="æä¾›çš„åŸç”Ÿç›‘æ§"><a class="anchor" aria-hidden="true" tabindex="-1" href="#æä¾›çš„åŸç”Ÿç›‘æ§"><span class="octicon octicon-link"></span></a>æä¾›çš„åŸç”Ÿç›‘æ§</h2>
    <h3 id="å½“å‰é“¾æ¥çš„å®¢æˆ·ç«¯æ•°å’Œè¿æ¥æ•°"><a class="anchor" aria-hidden="true" tabindex="-1" href="#å½“å‰é“¾æ¥çš„å®¢æˆ·ç«¯æ•°å’Œè¿æ¥æ•°"><span class="octicon octicon-link"></span></a>å½“å‰é“¾æ¥çš„å®¢æˆ·ç«¯æ•°å’Œè¿æ¥æ•°</h3>
    <p><code>redis-cli --stat</code>æŸ¥çœ‹å½“å‰è¿æ¥çš„å®¢æˆ·ç«¯æ•°ï¼Œè¿æ¥æ•°ç­‰</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">------- data ------ --------------------- load -------------------- - child -
</span><span class="code-line">keys       mem      clients blocked requests            connections
</span><span class="code-line"><span class="token number">4</span>          <span class="token number">1</span>.27M    <span class="token number">6</span>       <span class="token number">0</span>       <span class="token number">17340</span> <span class="token punctuation">(</span>+0<span class="token punctuation">)</span>          <span class="token number">111</span>
</span><span class="code-line"><span class="token number">4</span>          <span class="token number">1</span>.27M    <span class="token number">6</span>       <span class="token number">0</span>       <span class="token number">17341</span> <span class="token punctuation">(</span>+1<span class="token punctuation">)</span>          <span class="token number">111</span>
</span><span class="code-line"><span class="token number">4</span>          <span class="token number">1</span>.27M    <span class="token number">6</span>       <span class="token number">0</span>       <span class="token number">17342</span> <span class="token punctuation">(</span>+1<span class="token punctuation">)</span>          <span class="token number">111</span>
</span><span class="code-line"><span class="token number">4</span>          <span class="token number">1</span>.27M    <span class="token number">6</span>       <span class="token number">0</span>       <span class="token number">17343</span> <span class="token punctuation">(</span>+1<span class="token punctuation">)</span>          <span class="token number">111</span>
</span></code><div onclick="copied(this)" data-code="------- data ------ --------------------- load -------------------- - child -
keys       mem      clients blocked requests            connections
4          1.27M    6       0       17340 (+0)          111
4          1.27M    6       0       17341 (+1)          111
4          1.27M    6       0       17342 (+1)          111
4          1.27M    6       0       17343 (+1)          111
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="å†…å­˜æœ€å¤§çš„é”®å€¼å’Œå¹³å‡çš„é”®å€¼æ•°æ®"><a class="anchor" aria-hidden="true" tabindex="-1" href="#å†…å­˜æœ€å¤§çš„é”®å€¼å’Œå¹³å‡çš„é”®å€¼æ•°æ®"><span class="octicon octicon-link"></span></a>å†…å­˜æœ€å¤§çš„é”®å€¼å’Œå¹³å‡çš„é”®å€¼æ•°æ®</h3>
    <p><code>redis-cli --bigkeys</code> å¯¹å½“å‰å ç”¨å†…å­˜æœ€å¤§çš„é”®å€¼å’Œå¹³å‡çš„é”®å€¼æ•°æ®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æŒ‡å®š<code>-i</code>å‚æ•°å®šæ—¶æŸ¥çœ‹å½“å‰çš„è§†å›¾æƒ…å†µã€‚</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># Scanning the entire keyspace to find biggest keys as well as</span>
</span><span class="code-line"><span class="token comment"># average sizes per key type.  You can use -i 0.1 to sleep 0.1 sec</span>
</span><span class="code-line"><span class="token comment"># per 100 SCAN commands (not usually needed).</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token punctuation">[</span>00.00%<span class="token punctuation">]</span> Biggest string found so far <span class="token string">'asdf.js'</span> with <span class="token number">3</span> bytes
</span><span class="code-line"><span class="token punctuation">[</span>00.00%<span class="token punctuation">]</span> Biggest string found so far <span class="token string">'wabg-tokeneyJhbGciOiJIUzI1NiJ9.NA.UGGRiB2I42rP-33cIMrcoPub7AzHgDlqHacAKFw1pfE'</span> with <span class="token number">328</span> bytes
</span><span class="code-line"><span class="token punctuation">[</span>00.00%<span class="token punctuation">]</span> Biggest string found so far <span class="token string">'wabg-token-province'</span> with <span class="token number">231042</span> bytes
</span><span class="code-line">
</span><span class="code-line">-------- summary -------
</span><span class="code-line">
</span><span class="code-line">Sampled <span class="token number">4</span> keys <span class="token keyword">in</span> the keyspace<span class="token operator">!</span>
</span><span class="code-line">Total key length <span class="token keyword">in</span> bytes is <span class="token number">180</span> <span class="token punctuation">(</span>avg len <span class="token number">45.00</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">Biggest string found <span class="token string">'wabg-token-province'</span> has <span class="token number">231042</span> bytes
</span><span class="code-line">
</span><span class="code-line"><span class="token number">4</span> strings with <span class="token number">231819</span> bytes <span class="token punctuation">(</span><span class="token number">100.00</span>% of keys, avg size <span class="token number">57954.75</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token number">0</span> lists with <span class="token number">0</span> items <span class="token punctuation">(</span>00.00% of keys, avg size <span class="token number">0.00</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token number">0</span> sets with <span class="token number">0</span> members <span class="token punctuation">(</span>00.00% of keys, avg size <span class="token number">0.00</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token number">0</span> hashs with <span class="token number">0</span> fields <span class="token punctuation">(</span>00.00% of keys, avg size <span class="token number">0.00</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token number">0</span> zsets with <span class="token number">0</span> members <span class="token punctuation">(</span>00.00% of keys, avg size <span class="token number">0.00</span><span class="token punctuation">)</span>
</span></code><div onclick="copied(this)" data-code="# Scanning the entire keyspace to find biggest keys as well as
# average sizes per key type.  You can use -i 0.1 to sleep 0.1 sec
# per 100 SCAN commands (not usually needed).

[00.00%] Biggest string found so far &#x27;asdf.js&#x27; with 3 bytes
[00.00%] Biggest string found so far &#x27;wabg-tokeneyJhbGciOiJIUzI1NiJ9.NA.UGGRiB2I42rP-33cIMrcoPub7AzHgDlqHacAKFw1pfE&#x27; with 328 bytes
[00.00%] Biggest string found so far &#x27;wabg-token-province&#x27; with 231042 bytes

-------- summary -------

Sampled 4 keys in the keyspace!
Total key length in bytes is 180 (avg len 45.00)

Biggest string found &#x27;wabg-token-province&#x27; has 231042 bytes

4 strings with 231819 bytes (100.00% of keys, avg size 57954.75)
0 lists with 0 items (00.00% of keys, avg size 0.00)
0 sets with 0 members (00.00% of keys, avg size 0.00)
0 hashs with 0 fields (00.00% of keys, avg size 0.00)
0 zsets with 0 members (00.00% of keys, avg size 0.00)
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="æŸ¥çœ‹å½“å‰çš„é”®å€¼æƒ…å†µ"><a class="anchor" aria-hidden="true" tabindex="-1" href="#æŸ¥çœ‹å½“å‰çš„é”®å€¼æƒ…å†µ"><span class="octicon octicon-link"></span></a>æŸ¥çœ‹å½“å‰çš„é”®å€¼æƒ…å†µ</h3>
    <p><code>redis-cli --scan</code>æä¾›å’Œ<code>keys *</code>ç›¸ä¼¼çš„åŠŸèƒ½ï¼ŒæŸ¥çœ‹å½“å‰çš„é”®å€¼æƒ…å†µï¼Œå¯ä»¥é€šè¿‡æ­£åˆ™è¡¨è¾¾</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">$ redis-cli --scan
</span><span class="code-line">
</span><span class="code-line">sess:K4xh-bxOBrcXpy9kEW87oiy-u7I2sAA5
</span><span class="code-line">asdf.js
</span><span class="code-line">sess:1tGNZSXW8GyoEQsbtpqkA5tMmSFp_ZIn
</span><span class="code-line">wabg-tokeneyJhbGciOiJIUzI1NiJ9.NA.UGGRiB2I42rP-33cIMrcoPub7AzHgDlqHacAKFw1pfE
</span><span class="code-line">sess:3e4NGIJd0wf1-RONeTt-FsXQj4EaVNjk
</span><span class="code-line">wabg-token-province
</span><span class="code-line">sess:UuCLAX2sWZ50fiIO1qvDgulf0XIZRd98
</span><span class="code-line">wabg-tokeneyJhbGciOiJIUzI1NiJ9.MQ.6z44GClzAsUED1M_UyxqdREdDKcYFnL9tSqd5ZhLhsY
</span><span class="code-line">sess:2HEchaRLYUoaa44IF1bB6mpik7lZjBb4
</span></code><div onclick="copied(this)" data-code="$ redis-cli --scan

sess:K4xh-bxOBrcXpy9kEW87oiy-u7I2sAA5
asdf.js
sess:1tGNZSXW8GyoEQsbtpqkA5tMmSFp_ZIn
wabg-tokeneyJhbGciOiJIUzI1NiJ9.NA.UGGRiB2I42rP-33cIMrcoPub7AzHgDlqHacAKFw1pfE
sess:3e4NGIJd0wf1-RONeTt-FsXQj4EaVNjk
wabg-token-province
sess:UuCLAX2sWZ50fiIO1qvDgulf0XIZRd98
wabg-tokeneyJhbGciOiJIUzI1NiJ9.MQ.6z44GClzAsUED1M_UyxqdREdDKcYFnL9tSqd5ZhLhsY
sess:2HEchaRLYUoaa44IF1bB6mpik7lZjBb4
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h3 id="åŸç”Ÿçš„monitorç›‘æ§"><a class="anchor" aria-hidden="true" tabindex="-1" href="#åŸç”Ÿçš„monitorç›‘æ§"><span class="octicon octicon-link"></span></a>åŸç”Ÿçš„Monitorç›‘æ§</h3>
    <p>redis-cli monitoræ‰“å°å‡ºæ‰€æœ‰severæ¥æ”¶åˆ°çš„å‘½ä»¤ä»¥åŠå…¶å¯¹åº”çš„å®¢æˆ·ç«¯åœ°å€</p>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line">$ redis-cli monitor
</span><span class="code-line">OK
</span><span class="code-line"><span class="token number">1472626566.218175</span> <span class="token punctuation">[</span><span class="token number">0</span> <span class="token number">127.0</span>.0.1:62862<span class="token punctuation">]</span> <span class="token string">"info"</span>
</span><span class="code-line"><span class="token number">1472626571.220948</span> <span class="token punctuation">[</span><span class="token number">0</span> <span class="token number">127.0</span>.0.1:62862<span class="token punctuation">]</span> <span class="token string">"exists"</span> <span class="token string">"aaa"</span>
</span><span class="code-line"><span class="token number">1472626571.223174</span> <span class="token punctuation">[</span><span class="token number">0</span> <span class="token number">127.0</span>.0.1:62862<span class="token punctuation">]</span> <span class="token string">"set"</span> <span class="token string">"aaa"</span> <span class="token string">""</span>
</span><span class="code-line"><span class="token number">1472626571.232126</span> <span class="token punctuation">[</span><span class="token number">0</span> <span class="token number">127.0</span>.0.1:62862<span class="token punctuation">]</span> <span class="token string">"type"</span> <span class="token string">"aaa"</span>
</span><span class="code-line"><span class="token number">1472626571.243697</span> <span class="token punctuation">[</span><span class="token number">0</span> <span class="token number">127.0</span>.0.1:62862<span class="token punctuation">]</span> <span class="token string">"pttl"</span> <span class="token string">"aaa"</span>
</span><span class="code-line"><span class="token number">1472626571.243717</span> <span class="token punctuation">[</span><span class="token number">0</span> <span class="token number">127.0</span>.0.1:62862<span class="token punctuation">]</span> <span class="token string">"object"</span> <span class="token string">"ENCODING"</span> <span class="token string">"aaa"</span>
</span><span class="code-line"><span class="token number">1472626571.243726</span> <span class="token punctuation">[</span><span class="token number">0</span> <span class="token number">127.0</span>.0.1:62862<span class="token punctuation">]</span> <span class="token string">"strlen"</span> <span class="token string">"aaa"</span>
</span></code><div onclick="copied(this)" data-code="$ redis-cli monitor
OK
1472626566.218175 [0 127.0.0.1:62862] &#x22;info&#x22;
1472626571.220948 [0 127.0.0.1:62862] &#x22;exists&#x22; &#x22;aaa&#x22;
1472626571.223174 [0 127.0.0.1:62862] &#x22;set&#x22; &#x22;aaa&#x22; &#x22;&#x22;
1472626571.232126 [0 127.0.0.1:62862] &#x22;type&#x22; &#x22;aaa&#x22;
1472626571.243697 [0 127.0.0.1:62862] &#x22;pttl&#x22; &#x22;aaa&#x22;
1472626571.243717 [0 127.0.0.1:62862] &#x22;object&#x22; &#x22;ENCODING&#x22; &#x22;aaa&#x22;
1472626571.243726 [0 127.0.0.1:62862] &#x22;strlen&#x22; &#x22;aaa&#x22;
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="é…ç½®è¯´æ˜"><a class="anchor" aria-hidden="true" tabindex="-1" href="#é…ç½®è¯´æ˜"><span class="octicon octicon-link"></span></a>é…ç½®è¯´æ˜</h2>
    <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment">#redis.conf</span>
</span><span class="code-line"><span class="token comment"># Redis configuration file example.</span>
</span><span class="code-line"><span class="token comment"># ./redis-server /path/to/redis.conf</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">################################## INCLUDES ###################################</span>
</span><span class="code-line"><span class="token comment">#è¿™åœ¨ä½ æœ‰æ ‡å‡†é…ç½®æ¨¡æ¿ä½†æ˜¯æ¯ä¸ªredisæœåŠ¡å™¨åˆéœ€è¦ä¸ªæ€§è®¾ç½®çš„æ—¶å€™å¾ˆæœ‰ç”¨ã€‚</span>
</span><span class="code-line"><span class="token comment"># include /path/to/local.conf</span>
</span><span class="code-line"><span class="token comment"># include /path/to/other.conf</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">################################ GENERAL #####################################</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># æ˜¯å¦åœ¨åå°æ‰§è¡Œï¼Œyesï¼šåå°è¿è¡Œï¼›noï¼šä¸æ˜¯åå°è¿è¡Œï¼ˆè€ç‰ˆæœ¬é»˜è®¤ï¼‰</span>
</span><span class="code-line">daemonize <span class="token function">yes</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 3.2é‡Œçš„å‚æ•°ï¼Œæ˜¯å¦å¼€å¯ä¿æŠ¤æ¨¡å¼ï¼Œé»˜è®¤å¼€å¯ã€‚è¦æ˜¯é…ç½®é‡Œæ²¡æœ‰æŒ‡å®šbindå’Œå¯†ç ã€‚</span>
</span><span class="code-line"><span class="token comment"># å¼€å¯è¯¥å‚æ•°åï¼Œredisåªä¼šæœ¬åœ°è¿›è¡Œè®¿é—®ï¼Œæ‹’ç»å¤–éƒ¨è®¿é—®ã€‚</span>
</span><span class="code-line"><span class="token comment"># è¦æ˜¯å¼€å¯äº†å¯†ç    å’Œbindï¼Œå¯ä»¥å¼€å¯ã€‚å¦   åˆ™æœ€å¥½å…³é—­ï¼Œè®¾ç½®ä¸ºnoã€‚</span>
</span><span class="code-line">
</span><span class="code-line">protected-mode <span class="token function">yes</span>
</span><span class="code-line"><span class="token comment"># redisçš„è¿›ç¨‹æ–‡ä»¶</span>
</span><span class="code-line">pidfile /var/run/redis/redis-server.pid
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># redisç›‘å¬çš„ç«¯å£å·ã€‚</span>
</span><span class="code-line">port <span class="token number">6379</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># æ­¤å‚æ•°ç¡®å®šäº†TCPè¿æ¥ä¸­å·²å®Œæˆé˜Ÿåˆ—(å®Œæˆä¸‰æ¬¡æ¡æ‰‹ä¹‹å)çš„é•¿åº¦ï¼Œ </span>
</span><span class="code-line"><span class="token comment"># å½“ç„¶æ­¤å€¼å¿…é¡»ä¸å¤§äºLinuxç³»ç»Ÿå®šä¹‰çš„/proc/sys/net/core/somaxconnå€¼ï¼Œé»˜è®¤æ˜¯511ï¼Œ</span>
</span><span class="code-line"><span class="token comment"># è€ŒLinuxçš„é»˜è®¤å‚æ•°å€¼æ˜¯128ã€‚å½“ç³»ç»Ÿå¹¶å‘é‡å¤§å¹¶ä¸”å®¢æˆ·ç«¯é€Ÿåº¦ç¼“æ…¢çš„æ—¶å€™ï¼Œ</span>
</span><span class="code-line"><span class="token comment"># å¯ä»¥å°†è¿™äºŒä¸ªå‚æ•°ä¸€èµ·å‚è€ƒè®¾å®šã€‚è¯¥å†…æ ¸å‚æ•°é»˜è®¤å€¼ä¸€èˆ¬æ˜¯128ï¼Œå¯¹äºè´Ÿè½½å¾ˆå¤§çš„æœåŠ¡ç¨‹åºæ¥è¯´å¤§å¤§çš„ä¸å¤Ÿã€‚</span>
</span><span class="code-line"><span class="token comment"># ä¸€èˆ¬ä¼šå°†å®ƒä¿®æ”¹ä¸º2048æˆ–è€…æ›´å¤§ã€‚åœ¨/etc/sysctl.confä¸­æ·»åŠ :net.core.somaxconn = 2048ï¼Œç„¶ååœ¨ç»ˆç«¯ä¸­æ‰§è¡Œsysctl -pã€‚</span>
</span><span class="code-line">tcp-backlog <span class="token number">511</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">#æŒ‡å®š redis åªæ¥æ”¶æ¥è‡ªäºè¯¥ IP åœ°å€çš„è¯·æ±‚ï¼Œå¦‚æœä¸è¿›è¡Œè®¾ç½®ï¼Œé‚£ä¹ˆå°†å¤„ç†æ‰€æœ‰è¯·æ±‚</span>
</span><span class="code-line"><span class="token builtin class-name">bind</span> <span class="token number">127.0</span>.0.1
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># é…ç½®unix socketæ¥è®©redisæ”¯æŒç›‘å¬æœ¬åœ°è¿æ¥ã€‚</span>
</span><span class="code-line"><span class="token comment"># unixsocket /var/run/redis/redis.sock</span>
</span><span class="code-line"><span class="token comment"># é…ç½®unix socketä½¿ç”¨æ–‡ä»¶çš„æƒé™</span>
</span><span class="code-line"><span class="token comment"># unixsocketperm 700</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># æ­¤å‚æ•°ä¸ºè®¾ç½®å®¢æˆ·ç«¯ç©ºé—²è¶…è¿‡timeoutï¼ŒæœåŠ¡ç«¯ä¼šæ–­å¼€è¿æ¥ï¼Œä¸º0åˆ™æœåŠ¡ç«¯ä¸ä¼šä¸»åŠ¨æ–­å¼€è¿æ¥ï¼Œä¸èƒ½å°äº0ã€‚</span>
</span><span class="code-line"><span class="token function">timeout</span> <span class="token number">0</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># tcp keepaliveå‚æ•°ã€‚å¦‚æœè®¾ç½®ä¸ä¸º0ï¼Œå°±ä½¿ç”¨é…ç½®tcpçš„SO_KEEPALIVEå€¼ï¼Œ</span>
</span><span class="code-line"><span class="token comment"># ä½¿ç”¨keepaliveæœ‰ä¸¤ä¸ªå¥½å¤„:æ£€æµ‹æŒ‚æ‰çš„å¯¹ç«¯ã€‚é™ä½ä¸­é—´è®¾å¤‡å‡ºé—®é¢˜è€Œå¯¼è‡´ç½‘ç»œçœ‹ä¼¼è¿æ¥å´å·²ç»ä¸å¯¹ç«¯ç«¯å£çš„é—®é¢˜ã€‚</span>
</span><span class="code-line"><span class="token comment"># åœ¨Linuxå†…æ ¸ä¸­ï¼Œè®¾ç½®äº†keepaliveï¼Œredisä¼šå®šæ—¶ç»™å¯¹ç«¯å‘é€ackã€‚æ£€æµ‹åˆ°å¯¹ç«¯å…³é—­éœ€è¦ä¸¤å€çš„è®¾ç½®å€¼ã€‚</span>
</span><span class="code-line">tcp-keepalive <span class="token number">0</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># æŒ‡å®šäº†æœåŠ¡ç«¯æ—¥å¿—çš„çº§åˆ«ã€‚çº§åˆ«åŒ…æ‹¬ï¼šdebugï¼ˆå¾ˆå¤šä¿¡æ¯ï¼Œæ–¹ä¾¿å¼€å‘ã€æµ‹è¯•ï¼‰ï¼Œ</span>
</span><span class="code-line"><span class="token comment"># verboseï¼ˆè®¸å¤šæœ‰ç”¨çš„ä¿¡æ¯ï¼Œä½†æ˜¯æ²¡æœ‰debugçº§åˆ«ä¿¡æ¯å¤šï¼‰ï¼Œnoticeï¼ˆé€‚å½“çš„æ—¥å¿—çº§åˆ«ï¼Œé€‚åˆç”Ÿäº§ç¯å¢ƒï¼‰ï¼Œwarnï¼ˆåªæœ‰éå¸¸é‡è¦çš„ä¿¡æ¯ï¼‰</span>
</span><span class="code-line">loglevel notice
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">#æŒ‡å®šäº†è®°å½•æ—¥å¿—çš„æ–‡ä»¶ã€‚ç©ºå­—ç¬¦ä¸²çš„è¯ï¼Œæ—¥å¿—ä¼šæ‰“å°åˆ°æ ‡å‡†è¾“å‡ºè®¾å¤‡ã€‚åå°è¿è¡Œçš„redisæ ‡å‡†è¾“å‡ºæ˜¯/dev/nullã€‚</span>
</span><span class="code-line">logfile /var/log/redis/redis-server.log
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># æ˜¯å¦æ‰“å¼€è®°å½•syslogåŠŸèƒ½</span>
</span><span class="code-line"><span class="token comment"># syslog-enabled no</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># syslogçš„æ ‡è¯†ç¬¦ã€‚</span>
</span><span class="code-line"><span class="token comment"># syslog-ident redis</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># æ—¥å¿—çš„æ¥æºã€è®¾å¤‡</span>
</span><span class="code-line"><span class="token comment"># syslog-facility local0</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># æ•°æ®åº“çš„æ•°é‡ï¼Œé»˜è®¤ä½¿ç”¨çš„æ•°æ®åº“æ˜¯DB 0ã€‚å¯ä»¥é€šè¿‡â€SELECT â€œå‘½ä»¤é€‰æ‹©ä¸€ä¸ªdb</span>
</span><span class="code-line">databases <span class="token number">16</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">################################ SNAPSHOTTING ################################</span>
</span><span class="code-line"><span class="token comment"># å¿«ç…§é…ç½®</span>
</span><span class="code-line"><span class="token comment"># æ³¨é‡Šæ‰â€œsaveâ€è¿™ä¸€è¡Œé…ç½®é¡¹å°±å¯ä»¥è®©ä¿å­˜æ•°æ®åº“åŠŸèƒ½å¤±æ•ˆ</span>
</span><span class="code-line"><span class="token comment"># è®¾ç½®sedisè¿›è¡Œæ•°æ®åº“é•œåƒçš„é¢‘ç‡ã€‚</span>
</span><span class="code-line"><span class="token comment"># 900ç§’ï¼ˆ15åˆ†é’Ÿï¼‰å†…è‡³å°‘1ä¸ªkeyå€¼æ”¹å˜ï¼ˆåˆ™è¿›è¡Œæ•°æ®åº“ä¿å­˜--æŒä¹…åŒ–ï¼‰ </span>
</span><span class="code-line"><span class="token comment"># 300ç§’ï¼ˆ5åˆ†é’Ÿï¼‰å†…è‡³å°‘10ä¸ªkeyå€¼æ”¹å˜ï¼ˆåˆ™è¿›è¡Œæ•°æ®åº“ä¿å­˜--æŒä¹…åŒ–ï¼‰ </span>
</span><span class="code-line"><span class="token comment"># 60ç§’ï¼ˆ1åˆ†é’Ÿï¼‰å†…è‡³å°‘10000ä¸ªkeyå€¼æ”¹å˜ï¼ˆåˆ™è¿›è¡Œæ•°æ®åº“ä¿å­˜--æŒä¹…åŒ–ï¼‰</span>
</span><span class="code-line">save <span class="token number">900</span> <span class="token number">1</span>
</span><span class="code-line">save <span class="token number">300</span> <span class="token number">10</span>
</span><span class="code-line">save <span class="token number">60</span> <span class="token number">10000</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># å½“RDBæŒä¹…åŒ–å‡ºç°é”™è¯¯åï¼Œæ˜¯å¦ä¾ç„¶è¿›è¡Œç»§ç»­è¿›è¡Œå·¥ä½œï¼Œyesï¼šä¸èƒ½è¿›è¡Œå·¥ä½œï¼Œnoï¼šå¯ä»¥ç»§ç»­è¿›è¡Œå·¥ä½œï¼Œ</span>
</span><span class="code-line"><span class="token comment"># å¯ä»¥é€šè¿‡infoä¸­çš„rdb_last_bgsave_statusäº†è§£RDBæŒä¹…åŒ–æ˜¯å¦æœ‰é”™è¯¯</span>
</span><span class="code-line">stop-writes-on-bgsave-error <span class="token function">yes</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># ä½¿ç”¨å‹ç¼©rdbæ–‡ä»¶ï¼Œrdbæ–‡ä»¶å‹ç¼©ä½¿ç”¨LZFå‹ç¼©ç®—æ³•ï¼Œyesï¼šå‹ç¼©ï¼Œä½†æ˜¯éœ€è¦ä¸€äº›cpuçš„æ¶ˆè€—ã€‚noï¼šä¸å‹ç¼©ï¼Œéœ€è¦æ›´å¤šçš„ç£ç›˜ç©ºé—´</span>
</span><span class="code-line">rdbcompression <span class="token function">yes</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># æ˜¯å¦æ ¡éªŒrdbæ–‡ä»¶ã€‚ä»rdbæ ¼å¼çš„ç¬¬äº”ä¸ªç‰ˆæœ¬å¼€å§‹ï¼Œåœ¨rdbæ–‡ä»¶çš„æœ«å°¾ä¼šå¸¦ä¸ŠCRC64çš„æ ¡éªŒå’Œã€‚</span>
</span><span class="code-line"><span class="token comment"># è¿™è·Ÿæœ‰åˆ©äºæ–‡ä»¶çš„å®¹é”™æ€§ï¼Œä½†æ˜¯åœ¨ä¿å­˜rdbæ–‡ä»¶çš„æ—¶å€™ï¼Œä¼šæœ‰å¤§æ¦‚10%çš„æ€§èƒ½æŸè€—ï¼Œæ‰€ä»¥å¦‚æœä½ è¿½æ±‚é«˜æ€§èƒ½ï¼Œå¯ä»¥å…³é—­è¯¥é…ç½®ã€‚</span>
</span><span class="code-line">rdbchecksum <span class="token function">yes</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># rdbæ–‡ä»¶çš„åç§°</span>
</span><span class="code-line">dbfilename dump.rdb
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># æ•°æ®ç›®å½•ï¼Œæ•°æ®åº“çš„å†™å…¥ä¼šåœ¨è¿™ä¸ªç›®å½•ã€‚rdbã€aofæ–‡ä»¶ä¹Ÿä¼šå†™åœ¨è¿™ä¸ªç›®å½•</span>
</span><span class="code-line"><span class="token function">dir</span> /var/lib/redis
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">################################# REPLICATION #################################</span>
</span><span class="code-line"><span class="token comment"># å¤åˆ¶é€‰é¡¹ï¼Œslaveå¤åˆ¶å¯¹åº”çš„masterã€‚</span>
</span><span class="code-line"><span class="token comment"># slaveof &#x3C;masterip> &#x3C;masterport></span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">#å¦‚æœmasterè®¾ç½®äº†requirepassï¼Œé‚£ä¹ˆslaveè¦è¿ä¸Šmasterï¼Œéœ€è¦æœ‰masterçš„å¯†ç æ‰è¡Œã€‚masterauthå°±æ˜¯ç”¨æ¥é…ç½®masterçš„å¯†ç ï¼Œè¿™æ ·å¯ä»¥åœ¨è¿ä¸Šmasteråè¿›è¡Œè®¤è¯ã€‚</span>
</span><span class="code-line"><span class="token comment"># masterauth &#x3C;master-password></span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">#å½“ä»åº“åŒä¸»æœºå¤±å»è¿æ¥æˆ–è€…å¤åˆ¶æ­£åœ¨è¿›è¡Œï¼Œä»æœºåº“æœ‰ä¸¤ç§è¿è¡Œæ–¹å¼ï¼š1) å¦‚æœslave-serve-stale-dataè®¾ç½®ä¸ºyes(é»˜è®¤è®¾ç½®)ï¼Œä»åº“ä¼šç»§ç»­å“åº”å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚2) å¦‚æœslave-serve-stale-dataè®¾ç½®ä¸ºnoï¼Œé™¤å»INFOå’ŒSLAVOFå‘½ä»¤ä¹‹å¤–çš„ä»»ä½•è¯·æ±‚éƒ½ä¼šè¿”å›ä¸€ä¸ªé”™è¯¯â€SYNC with master in progressâ€ã€‚</span>
</span><span class="code-line">slave-serve-stale-data <span class="token function">yes</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">#ä½œä¸ºä»æœåŠ¡å™¨ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯åªè¯»çš„ï¼ˆyesï¼‰ï¼Œå¯ä»¥ä¿®æ”¹æˆNOï¼Œç”¨äºå†™ï¼ˆä¸å»ºè®®ï¼‰ã€‚</span>
</span><span class="code-line">slave-read-only <span class="token function">yes</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">#æ˜¯å¦ä½¿ç”¨socketæ–¹å¼å¤åˆ¶æ•°æ®ã€‚ç›®å‰rediså¤åˆ¶æä¾›ä¸¤ç§æ–¹å¼ï¼Œdiskå’Œsocketã€‚å¦‚æœæ–°çš„slaveè¿ä¸Šæ¥æˆ–è€…é‡è¿çš„slaveæ— æ³•éƒ¨åˆ†åŒæ­¥ï¼Œå°±ä¼šæ‰§è¡Œå…¨é‡åŒæ­¥ï¼Œmasterä¼šç”Ÿæˆrdbæ–‡ä»¶ã€‚æœ‰2ç§æ–¹å¼ï¼šdiskæ–¹å¼æ˜¯masteråˆ›å»ºä¸€ä¸ªæ–°çš„è¿›ç¨‹æŠŠrdbæ–‡ä»¶ä¿å­˜åˆ°ç£ç›˜ï¼Œå†æŠŠç£ç›˜ä¸Šçš„rdbæ–‡ä»¶ä¼ é€’ç»™slaveã€‚socketæ˜¯masteråˆ›å»ºä¸€ä¸ªæ–°çš„è¿›ç¨‹ï¼Œç›´æ¥æŠŠrdbæ–‡ä»¶ä»¥socketçš„æ–¹å¼å‘ç»™slaveã€‚diskæ–¹å¼çš„æ—¶å€™ï¼Œå½“ä¸€ä¸ªrdbä¿å­˜çš„è¿‡ç¨‹ä¸­ï¼Œå¤šä¸ªslaveéƒ½èƒ½å…±äº«è¿™ä¸ªrdbæ–‡ä»¶ã€‚socketçš„æ–¹å¼å°±çš„ä¸€ä¸ªä¸ªslaveé¡ºåºå¤åˆ¶ã€‚åœ¨ç£ç›˜é€Ÿåº¦ç¼“æ…¢ï¼Œç½‘é€Ÿå¿«çš„æƒ…å†µä¸‹æ¨èç”¨socketæ–¹å¼ã€‚</span>
</span><span class="code-line">repl-diskless-sync no
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">#disklesså¤åˆ¶çš„å»¶è¿Ÿæ—¶é—´ï¼Œé˜²æ­¢è®¾ç½®ä¸º0ã€‚ä¸€æ—¦å¤åˆ¶å¼€å§‹ï¼ŒèŠ‚ç‚¹ä¸ä¼šå†æ¥æ”¶æ–°slaveçš„å¤åˆ¶è¯·æ±‚ç›´åˆ°ä¸‹ä¸€ä¸ªrdbä¼ è¾“ã€‚æ‰€ä»¥æœ€å¥½ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œç­‰æ›´å¤šçš„slaveè¿ä¸Šæ¥ã€‚</span>
</span><span class="code-line">repl-diskless-sync-delay <span class="token number">5</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">#slaveæ ¹æ®æŒ‡å®šçš„æ—¶é—´é—´éš”å‘æœåŠ¡å™¨å‘é€pingè¯·æ±‚ã€‚æ—¶é—´é—´éš”å¯ä»¥é€šè¿‡ repl_ping_slave_period æ¥è®¾ç½®ï¼Œé»˜è®¤10ç§’ã€‚</span>
</span><span class="code-line"><span class="token comment"># repl-ping-slave-period 10</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">#å¤åˆ¶è¿æ¥è¶…æ—¶æ—¶é—´ã€‚masterå’Œslaveéƒ½æœ‰è¶…æ—¶æ—¶é—´çš„è®¾ç½®ã€‚masteræ£€æµ‹åˆ°slaveä¸Šæ¬¡å‘é€çš„æ—¶é—´è¶…è¿‡repl-timeoutï¼Œå³è®¤ä¸ºslaveç¦»çº¿ï¼Œæ¸…é™¤è¯¥slaveä¿¡æ¯ã€‚slaveæ£€æµ‹åˆ°ä¸Šæ¬¡å’Œmasteräº¤äº’çš„æ—¶é—´è¶…è¿‡repl-timeoutï¼Œåˆ™è®¤ä¸ºmasterç¦»çº¿ã€‚éœ€è¦æ³¨æ„çš„æ˜¯repl-timeoutéœ€è¦è®¾ç½®ä¸€ä¸ªæ¯”repl-ping-slave-periodæ›´å¤§çš„å€¼ï¼Œä¸ç„¶ä¼šç»å¸¸æ£€æµ‹åˆ°è¶…æ—¶ã€‚</span>
</span><span class="code-line"><span class="token comment"># repl-timeout 60</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">#æ˜¯å¦ç¦æ­¢å¤åˆ¶tcpé“¾æ¥çš„tcp nodelayå‚æ•°ï¼Œå¯ä¼ é€’yesæˆ–è€…noã€‚é»˜è®¤æ˜¯noï¼Œå³ä½¿ç”¨tcp nodelayã€‚å¦‚æœmasterè®¾ç½®äº†yesæ¥ç¦æ­¢tcp nodelayè®¾ç½®ï¼Œåœ¨æŠŠæ•°æ®å¤åˆ¶ç»™slaveçš„æ—¶å€™ï¼Œä¼šå‡å°‘åŒ…çš„æ•°é‡å’Œæ›´å°çš„ç½‘ç»œå¸¦å®½ã€‚ä½†æ˜¯è¿™ä¹Ÿå¯èƒ½å¸¦æ¥æ•°æ®çš„å»¶è¿Ÿã€‚é»˜è®¤æˆ‘ä»¬æ¨èæ›´å°çš„å»¶è¿Ÿï¼Œä½†æ˜¯åœ¨æ•°æ®é‡ä¼ è¾“å¾ˆå¤§çš„åœºæ™¯ä¸‹ï¼Œå»ºè®®é€‰æ‹©yesã€‚</span>
</span><span class="code-line">repl-disable-tcp-nodelay no
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">#å¤åˆ¶ç¼“å†²åŒºå¤§å°ï¼Œè¿™æ˜¯ä¸€ä¸ªç¯å½¢å¤åˆ¶ç¼“å†²åŒºï¼Œç”¨æ¥ä¿å­˜æœ€æ–°å¤åˆ¶çš„å‘½ä»¤ã€‚è¿™æ ·åœ¨slaveç¦»çº¿çš„æ—¶å€™ï¼Œä¸éœ€è¦å®Œå…¨å¤åˆ¶masterçš„æ•°æ®ï¼Œå¦‚æœå¯ä»¥æ‰§è¡Œéƒ¨åˆ†åŒæ­¥ï¼Œåªéœ€è¦æŠŠç¼“å†²åŒºçš„éƒ¨åˆ†æ•°æ®å¤åˆ¶ç»™slaveï¼Œå°±èƒ½æ¢å¤æ­£å¸¸å¤åˆ¶çŠ¶æ€ã€‚ç¼“å†²åŒºçš„å¤§å°è¶Šå¤§ï¼Œslaveç¦»çº¿çš„æ—¶é—´å¯ä»¥æ›´é•¿ï¼Œå¤åˆ¶ç¼“å†²åŒºåªæœ‰åœ¨æœ‰slaveè¿æ¥çš„æ—¶å€™æ‰åˆ†é…å†…å­˜ã€‚æ²¡æœ‰slaveçš„ä¸€æ®µæ—¶é—´ï¼Œå†…å­˜ä¼šè¢«é‡Šæ”¾å‡ºæ¥ï¼Œé»˜è®¤1mã€‚</span>
</span><span class="code-line"><span class="token comment"># repl-backlog-size 5mb</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">#masteræ²¡æœ‰slaveä¸€æ®µæ—¶é—´ä¼šé‡Šæ”¾å¤åˆ¶ç¼“å†²åŒºçš„å†…å­˜ï¼Œrepl-backlog-ttlç”¨æ¥è®¾ç½®è¯¥æ—¶é—´é•¿åº¦ã€‚å•ä½ä¸ºç§’ã€‚</span>
</span><span class="code-line"><span class="token comment"># repl-backlog-ttl 3600</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">#å½“masterä¸å¯ç”¨ï¼ŒSentinelä¼šæ ¹æ®slaveçš„ä¼˜å…ˆçº§é€‰ä¸¾ä¸€ä¸ªmasterã€‚æœ€ä½çš„ä¼˜å…ˆçº§çš„slaveï¼Œå½“é€‰masterã€‚è€Œé…ç½®æˆ0ï¼Œæ°¸è¿œä¸ä¼šè¢«é€‰ä¸¾ã€‚</span>
</span><span class="code-line">slave-priority <span class="token number">100</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">#redisæä¾›äº†å¯ä»¥è®©masteråœæ­¢å†™å…¥çš„æ–¹å¼ï¼Œå¦‚æœé…ç½®äº†min-slaves-to-writeï¼Œå¥åº·çš„slaveçš„ä¸ªæ•°å°äºNï¼Œmaterå°±ç¦æ­¢å†™å…¥ã€‚masteræœ€å°‘å¾—æœ‰å¤šå°‘ä¸ªå¥åº·çš„slaveå­˜æ´»æ‰èƒ½æ‰§è¡Œå†™å‘½ä»¤ã€‚è¿™ä¸ªé…ç½®è™½ç„¶ä¸èƒ½ä¿è¯Nä¸ªslaveéƒ½ä¸€å®šèƒ½æ¥æ”¶åˆ°masterçš„å†™æ“ä½œï¼Œä½†æ˜¯èƒ½é¿å…æ²¡æœ‰è¶³å¤Ÿå¥åº·çš„slaveçš„æ—¶å€™ï¼Œmasterä¸èƒ½å†™å…¥æ¥é¿å…æ•°æ®ä¸¢å¤±ã€‚è®¾ç½®ä¸º0æ˜¯å…³é—­è¯¥åŠŸèƒ½ã€‚</span>
</span><span class="code-line"><span class="token comment"># min-slaves-to-write 3</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">#å»¶è¿Ÿå°äºmin-slaves-max-lagç§’çš„slaveæ‰è®¤ä¸ºæ˜¯å¥åº·çš„slaveã€‚</span>
</span><span class="code-line"><span class="token comment"># min-slaves-max-lag 10</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># è®¾ç½®1æˆ–å¦ä¸€ä¸ªè®¾ç½®ä¸º0ç¦ç”¨è¿™ä¸ªç‰¹æ€§ã€‚</span>
</span><span class="code-line"><span class="token comment"># Setting one or the other to 0 disables the feature.</span>
</span><span class="code-line"><span class="token comment"># By default min-slaves-to-write is set to 0 (feature disabled) and</span>
</span><span class="code-line"><span class="token comment"># min-slaves-max-lag is set to 10.</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">################################## SECURITY ###################################</span>
</span><span class="code-line"><span class="token comment">#requirepassé…ç½®å¯ä»¥è®©ç”¨æˆ·ä½¿ç”¨AUTHå‘½ä»¤æ¥è®¤è¯å¯†ç ï¼Œæ‰èƒ½ä½¿ç”¨å…¶ä»–å‘½ä»¤ã€‚è¿™è®©rediså¯ä»¥ä½¿ç”¨åœ¨ä¸å—ä¿¡ä»»çš„ç½‘ç»œä¸­ã€‚ä¸ºäº†ä¿æŒå‘åçš„å…¼å®¹æ€§ï¼Œå¯ä»¥æ³¨é‡Šè¯¥å‘½ä»¤ï¼Œå› ä¸ºå¤§éƒ¨åˆ†ç”¨æˆ·ä¹Ÿä¸éœ€è¦è®¤è¯ã€‚ä½¿ç”¨requirepassçš„æ—¶å€™éœ€è¦æ³¨æ„ï¼Œå› ä¸ºrediså¤ªå¿«äº†ï¼Œæ¯ç§’å¯ä»¥è®¤è¯15wæ¬¡å¯†ç ï¼Œç®€å•çš„å¯†ç å¾ˆå®¹æ˜“è¢«æ”»ç ´ï¼Œæ‰€ä»¥æœ€å¥½ä½¿ç”¨ä¸€ä¸ªæ›´å¤æ‚çš„å¯†ç ã€‚</span>
</span><span class="code-line"><span class="token comment"># requirepass foobared</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">#æŠŠå±é™©çš„å‘½ä»¤ç»™ä¿®æ”¹æˆå…¶ä»–åç§°ã€‚æ¯”å¦‚CONFIGå‘½ä»¤å¯ä»¥é‡å‘½åä¸ºä¸€ä¸ªå¾ˆéš¾è¢«çŒœåˆ°çš„å‘½ä»¤ï¼Œè¿™æ ·ç”¨æˆ·ä¸èƒ½ä½¿ç”¨ï¼Œè€Œå†…éƒ¨å·¥å…·è¿˜èƒ½æ¥ç€ä½¿ç”¨ã€‚</span>
</span><span class="code-line"><span class="token comment"># rename-command CONFIG b840fc02d524045429941cc15f59e41cb7be6c52</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">#è®¾ç½®æˆä¸€ä¸ªç©ºçš„å€¼ï¼Œå¯ä»¥ç¦æ­¢ä¸€ä¸ªå‘½ä»¤</span>
</span><span class="code-line"><span class="token comment"># rename-command CONFIG ""</span>
</span><span class="code-line"><span class="token comment">################################### LIMITS ####################################</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># è®¾ç½®èƒ½è¿ä¸Šredisçš„æœ€å¤§å®¢æˆ·ç«¯è¿æ¥æ•°é‡ã€‚é»˜è®¤æ˜¯10000ä¸ªå®¢æˆ·ç«¯è¿æ¥ã€‚</span>
</span><span class="code-line"><span class="token comment"># ç”±äºredisä¸åŒºåˆ†è¿æ¥æ˜¯å®¢æˆ·ç«¯è¿æ¥è¿˜æ˜¯å†…éƒ¨æ‰“å¼€æ–‡ä»¶æˆ–è€…å’Œslaveè¿æ¥ç­‰ï¼Œæ‰€ä»¥maxclientsæœ€å°å»ºè®®è®¾ç½®åˆ°32ã€‚</span>
</span><span class="code-line"><span class="token comment"># å¦‚æœè¶…è¿‡äº†maxclientsï¼Œredisä¼šç»™æ–°çš„è¿æ¥å‘é€â€™max number of clients reachedâ€™ï¼Œå¹¶å…³é—­è¿æ¥ã€‚</span>
</span><span class="code-line"><span class="token comment"># maxclients 10000</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># redisé…ç½®çš„æœ€å¤§å†…å­˜å®¹é‡ã€‚å½“å†…å­˜æ»¡äº†ï¼Œéœ€è¦é…åˆmaxmemory-policyç­–ç•¥è¿›è¡Œå¤„ç†ã€‚</span>
</span><span class="code-line"><span class="token comment"># æ³¨æ„slaveçš„è¾“å‡ºç¼“å†²åŒºæ˜¯ä¸è®¡ç®—åœ¨maxmemoryå†…çš„ã€‚æ‰€ä»¥ä¸ºäº†é˜²æ­¢ä¸»æœºå†…å­˜ä½¿ç”¨å®Œï¼Œå»ºè®®è®¾ç½®çš„maxmemoryéœ€è¦æ›´å°ä¸€äº›ã€‚</span>
</span><span class="code-line"><span class="token comment"># maxmemory &#x3C;bytes></span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># å†…å­˜å®¹é‡è¶…è¿‡maxmemoryåçš„å¤„ç†ç­–ç•¥ã€‚</span>
</span><span class="code-line"><span class="token comment"># volatile-lruï¼šåˆ©ç”¨LRUç®—æ³•ç§»é™¤è®¾ç½®è¿‡è¿‡æœŸæ—¶é—´çš„keyã€‚</span>
</span><span class="code-line"><span class="token comment"># volatile-randomï¼šéšæœºç§»é™¤è®¾ç½®è¿‡è¿‡æœŸæ—¶é—´çš„keyã€‚</span>
</span><span class="code-line"><span class="token comment"># volatile-ttlï¼šç§»é™¤å³å°†è¿‡æœŸçš„keyï¼Œæ ¹æ®æœ€è¿‘è¿‡æœŸæ—¶é—´æ¥åˆ é™¤ï¼ˆè¾…ä»¥TTLï¼‰</span>
</span><span class="code-line"><span class="token comment"># allkeys-lruï¼šåˆ©ç”¨LRUç®—æ³•ç§»é™¤ä»»ä½•keyã€‚</span>
</span><span class="code-line"><span class="token comment"># allkeys-randomï¼šéšæœºç§»é™¤ä»»ä½•keyã€‚</span>
</span><span class="code-line"><span class="token comment"># noevictionï¼šä¸ç§»é™¤ä»»ä½•keyï¼Œåªæ˜¯è¿”å›ä¸€ä¸ªå†™é”™è¯¯ã€‚</span>
</span><span class="code-line"><span class="token comment"># ä¸Šé¢çš„è¿™äº›é©±é€ç­–ç•¥ï¼Œå¦‚æœredisæ²¡æœ‰åˆé€‚çš„keyé©±é€ï¼Œå¯¹äºå†™å‘½ä»¤ï¼Œè¿˜æ˜¯ä¼šè¿”å›é”™è¯¯ã€‚</span>
</span><span class="code-line"><span class="token comment"># rediså°†ä¸å†æ¥æ”¶å†™è¯·æ±‚ï¼Œåªæ¥æ”¶getè¯·æ±‚ã€‚</span>
</span><span class="code-line"><span class="token comment"># å†™å‘½ä»¤åŒ…æ‹¬ï¼šset setnx setex append incr decr rpush lpush rpushx lpushx linsert lset rpoplpush sadd sinter sinterstore sunion sunionstore sdiff sdiffstore zadd zincrby zunionstore zinterstore hset hsetnx hmset hincrby incrby decrby getset mset msetnx exec sortã€‚</span>
</span><span class="code-line"><span class="token comment"># maxmemory-policy noeviction</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">#lruæ£€æµ‹çš„æ ·æœ¬æ•°ã€‚ä½¿ç”¨lruæˆ–è€…ttlæ·˜æ±°ç®—æ³•ï¼Œä»éœ€è¦æ·˜æ±°çš„åˆ—è¡¨ä¸­éšæœºé€‰æ‹©sampleä¸ªkeyï¼Œé€‰å‡ºé—²ç½®æ—¶é—´æœ€é•¿çš„keyç§»é™¤ã€‚</span>
</span><span class="code-line"><span class="token comment"># maxmemory-samples 5</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">############################## APPEND ONLY MODE ###############################</span>
</span><span class="code-line"><span class="token comment">#é»˜è®¤redisä½¿ç”¨çš„æ˜¯rdbæ–¹å¼æŒä¹…åŒ–ï¼Œè¿™ç§æ–¹å¼åœ¨è®¸å¤šåº”ç”¨ä¸­å·²ç»è¶³å¤Ÿç”¨äº†ã€‚ä½†æ˜¯rediså¦‚æœä¸­é€”å®•æœºï¼Œä¼šå¯¼è‡´å¯èƒ½æœ‰å‡ åˆ†é’Ÿçš„æ•°æ®ä¸¢å¤±ï¼Œæ ¹æ®saveæ¥ç­–ç•¥è¿›è¡ŒæŒä¹…åŒ–ï¼ŒAppend Only Fileæ˜¯å¦ä¸€ç§æŒä¹…åŒ–æ–¹å¼ï¼Œå¯ä»¥æä¾›æ›´å¥½çš„æŒä¹…åŒ–ç‰¹æ€§ã€‚Redisä¼šæŠŠæ¯æ¬¡å†™å…¥çš„æ•°æ®åœ¨æ¥æ”¶åéƒ½å†™å…¥ appendonly.aof æ–‡ä»¶ï¼Œæ¯æ¬¡å¯åŠ¨æ—¶Rediséƒ½ä¼šå…ˆæŠŠè¿™ä¸ªæ–‡ä»¶çš„æ•°æ®è¯»å…¥å†…å­˜é‡Œï¼Œå…ˆå¿½ç•¥RDBæ–‡ä»¶ã€‚</span>
</span><span class="code-line">appendonly no
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">#aofæ–‡ä»¶å</span>
</span><span class="code-line">appendfilename <span class="token string">"appendonly.aof"</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># aofæŒä¹…åŒ–ç­–ç•¥çš„é…ç½®</span>
</span><span class="code-line"><span class="token comment"># noè¡¨ç¤ºä¸æ‰§è¡Œfsyncï¼Œç”±æ“ä½œç³»ç»Ÿä¿è¯æ•°æ®åŒæ­¥åˆ°ç£ç›˜ï¼Œé€Ÿåº¦æœ€å¿«ã€‚</span>
</span><span class="code-line"><span class="token comment"># alwaysè¡¨ç¤ºæ¯æ¬¡å†™å…¥éƒ½æ‰§è¡Œfsyncï¼Œä»¥ä¿è¯æ•°æ®åŒæ­¥åˆ°ç£ç›˜ã€‚</span>
</span><span class="code-line"><span class="token comment"># everysecè¡¨ç¤ºæ¯ç§’æ‰§è¡Œä¸€æ¬¡fsyncï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸¢å¤±è¿™1sæ•°æ®ã€‚</span>
</span><span class="code-line">appendfsync everysec
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># åœ¨aofé‡å†™æˆ–è€…å†™å…¥rdbæ–‡ä»¶çš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œå¤§é‡IOï¼Œ</span>
</span><span class="code-line"><span class="token comment"># æ­¤æ—¶å¯¹äºeverysecå’Œalwaysçš„aofæ¨¡å¼æ¥è¯´ï¼Œæ‰§è¡Œfsyncä¼šé€ æˆé˜»å¡è¿‡é•¿æ—¶é—´ï¼Œ</span>
</span><span class="code-line"><span class="token comment"># no-appendfsync-on-rewriteå­—æ®µè®¾ç½®ä¸ºé»˜è®¤è®¾ç½®ä¸ºnoã€‚</span>
</span><span class="code-line"><span class="token comment"># å¦‚æœå¯¹å»¶è¿Ÿè¦æ±‚å¾ˆé«˜çš„åº”ç”¨ï¼Œè¿™ä¸ªå­—æ®µå¯ä»¥è®¾ç½®ä¸ºyesï¼Œå¦åˆ™è¿˜æ˜¯è®¾ç½®ä¸ºnoï¼Œ</span>
</span><span class="code-line"><span class="token comment"># è¿™æ ·å¯¹æŒä¹…åŒ–ç‰¹æ€§æ¥è¯´è¿™æ˜¯æ›´å®‰å…¨çš„é€‰æ‹©ã€‚è®¾ç½®ä¸ºyesè¡¨ç¤ºrewriteæœŸé—´å¯¹æ–°å†™æ“ä½œä¸fsync,</span>
</span><span class="code-line"><span class="token comment"># æš‚æ—¶å­˜åœ¨å†…å­˜ä¸­,ç­‰rewriteå®Œæˆåå†å†™å…¥ï¼Œé»˜è®¤ä¸ºnoï¼Œå»ºè®®yesã€‚Linuxçš„é»˜è®¤fsyncç­–ç•¥æ˜¯30ç§’ã€‚å¯èƒ½ä¸¢å¤±30ç§’æ•°æ®ã€‚</span>
</span><span class="code-line">no-appendfsync-on-rewrite no
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># aofè‡ªåŠ¨é‡å†™é…ç½®ã€‚å½“ç›®å‰aofæ–‡ä»¶å¤§å°è¶…è¿‡ä¸Šä¸€æ¬¡é‡å†™çš„aofæ–‡ä»¶å¤§å°çš„ç™¾åˆ†ä¹‹å¤šå°‘è¿›è¡Œé‡å†™ï¼Œ</span>
</span><span class="code-line"><span class="token comment"># å³å½“aofæ–‡ä»¶å¢é•¿åˆ°ä¸€å®šå¤§å°çš„æ—¶å€™Redisèƒ½å¤Ÿè°ƒç”¨bgrewriteaofå¯¹æ—¥å¿—æ–‡ä»¶è¿›è¡Œé‡å†™ã€‚</span>
</span><span class="code-line"><span class="token comment"># å½“å‰AOFæ–‡ä»¶å¤§å°æ˜¯ä¸Šæ¬¡æ—¥å¿—é‡å†™å¾—åˆ°AOFæ–‡ä»¶å¤§å°çš„äºŒå€ï¼ˆè®¾ç½®ä¸º100ï¼‰æ—¶ï¼Œè‡ªåŠ¨å¯åŠ¨æ–°çš„æ—¥å¿—é‡å†™è¿‡ç¨‹ã€‚</span>
</span><span class="code-line">auto-aof-rewrite-percentage <span class="token number">100</span>
</span><span class="code-line"><span class="token comment">#è®¾ç½®å…è®¸é‡å†™çš„æœ€å°aofæ–‡ä»¶å¤§å°ï¼Œé¿å…äº†è¾¾åˆ°çº¦å®šç™¾åˆ†æ¯”ä½†å°ºå¯¸ä»ç„¶å¾ˆå°çš„æƒ…å†µè¿˜è¦é‡å†™</span>
</span><span class="code-line">auto-aof-rewrite-min-size 64mb
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># aofæ–‡ä»¶å¯èƒ½åœ¨å°¾éƒ¨æ˜¯ä¸å®Œæ•´çš„ï¼Œå½“rediså¯åŠ¨çš„æ—¶å€™ï¼Œaofæ–‡ä»¶çš„æ•°æ®è¢«è½½å…¥å†…å­˜ã€‚</span>
</span><span class="code-line"><span class="token comment"># é‡å¯å¯èƒ½å‘ç”Ÿåœ¨redisæ‰€åœ¨çš„ä¸»æœºæ“ä½œç³»ç»Ÿå®•æœºåï¼Œ</span>
</span><span class="code-line"><span class="token comment"># å°¤å…¶åœ¨ext4æ–‡ä»¶ç³»ç»Ÿæ²¡æœ‰åŠ ä¸Šdata=orderedé€‰é¡¹ï¼ˆrediså®•æœºæˆ–è€…å¼‚å¸¸ç»ˆæ­¢ä¸ä¼šé€ æˆå°¾éƒ¨ä¸å®Œæ•´ç°è±¡ã€‚ï¼‰</span>
</span><span class="code-line"><span class="token comment"># å‡ºç°è¿™ç§ç°è±¡ï¼Œå¯ä»¥é€‰æ‹©è®©redisé€€å‡ºï¼Œæˆ–è€…å¯¼å…¥å°½å¯èƒ½å¤šçš„æ•°æ®ã€‚å¦‚æœé€‰æ‹©çš„æ˜¯yesï¼Œ</span>
</span><span class="code-line"><span class="token comment"># å½“æˆªæ–­çš„aofæ–‡ä»¶è¢«å¯¼å…¥çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨å‘å¸ƒä¸€ä¸ªlogç»™å®¢æˆ·ç«¯ç„¶åloadã€‚å¦‚æœæ˜¯noï¼Œç”¨æˆ·å¿…é¡»æ‰‹åŠ¨redis-check-aofä¿®å¤AOFæ–‡ä»¶æ‰å¯ä»¥ã€‚</span>
</span><span class="code-line">aof-load-truncated <span class="token function">yes</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">################################ LUA SCRIPTING ###############################</span>
</span><span class="code-line"><span class="token comment"># å¦‚æœè¾¾åˆ°æœ€å¤§æ—¶é—´é™åˆ¶ï¼ˆæ¯«ç§’ï¼‰ï¼Œredisä¼šè®°ä¸ªlogï¼Œç„¶åè¿”å›errorã€‚</span>
</span><span class="code-line"><span class="token comment"># å½“ä¸€ä¸ªè„šæœ¬è¶…è¿‡äº†æœ€å¤§æ—¶é™ã€‚</span>
</span><span class="code-line"><span class="token comment"># åªæœ‰SCRIPT KILLå’ŒSHUTDOWN NOSAVEå¯ä»¥ç”¨ã€‚</span>
</span><span class="code-line"><span class="token comment"># ç¬¬ä¸€ä¸ªå¯ä»¥æ€æ²¡æœ‰è°ƒwriteå‘½ä»¤çš„ä¸œè¥¿ã€‚è¦æ˜¯å·²ç»è°ƒç”¨äº†writeï¼Œåªèƒ½ç”¨ç¬¬äºŒä¸ªå‘½ä»¤æ€ã€‚</span>
</span><span class="code-line">lua-time-limit <span class="token number">5000</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">################################ REDIS CLUSTER ###############################</span>
</span><span class="code-line"><span class="token comment"># é›†ç¾¤å¼€å…³ï¼Œé»˜è®¤æ˜¯ä¸å¼€å¯é›†ç¾¤æ¨¡å¼ã€‚</span>
</span><span class="code-line"><span class="token comment"># cluster-enabled yes</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># é›†ç¾¤é…ç½®æ–‡ä»¶çš„åç§°ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªé›†ç¾¤ç›¸å…³çš„é…ç½®æ–‡ä»¶ï¼ŒæŒä¹…åŒ–ä¿å­˜é›†ç¾¤çš„ä¿¡æ¯ã€‚</span>
</span><span class="code-line"><span class="token comment"># è¿™ä¸ªæ–‡ä»¶å¹¶ä¸éœ€è¦æ‰‹åŠ¨é…ç½®ï¼Œè¿™ä¸ªé…ç½®æ–‡ä»¶æœ‰Redisç”Ÿæˆå¹¶æ›´æ–°ï¼Œæ¯ä¸ªRedisé›†ç¾¤èŠ‚ç‚¹éœ€è¦ä¸€ä¸ªå•ç‹¬çš„é…ç½®æ–‡ä»¶ï¼Œ</span>
</span><span class="code-line"><span class="token comment"># è¯·ç¡®ä¿ä¸å®ä¾‹è¿è¡Œçš„ç³»ç»Ÿä¸­é…ç½®æ–‡ä»¶åç§°ä¸å†²çª</span>
</span><span class="code-line"><span class="token comment"># cluster-config-file nodes-6379.conf</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># èŠ‚ç‚¹äº’è¿è¶…æ—¶çš„é˜€å€¼ã€‚é›†ç¾¤èŠ‚ç‚¹è¶…æ—¶æ¯«ç§’æ•°</span>
</span><span class="code-line"><span class="token comment"># cluster-node-timeout 15000</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># åœ¨è¿›è¡Œæ•…éšœè½¬ç§»çš„æ—¶å€™ï¼Œå…¨éƒ¨slaveéƒ½ä¼šè¯·æ±‚ç”³è¯·ä¸ºmasterï¼Œä½†æ˜¯æœ‰äº›slaveå¯èƒ½ä¸masteræ–­å¼€è¿æ¥ä¸€æ®µæ—¶é—´äº†ï¼Œ</span>
</span><span class="code-line"><span class="token comment"># å¯¼è‡´æ•°æ®è¿‡äºé™ˆæ—§ï¼Œè¿™æ ·çš„slaveä¸åº”è¯¥è¢«æå‡ä¸ºmasterã€‚è¯¥å‚æ•°å°±æ˜¯ç”¨æ¥åˆ¤æ–­slaveèŠ‚ç‚¹ä¸masteræ–­çº¿çš„æ—¶é—´æ˜¯å¦è¿‡é•¿ã€‚åˆ¤æ–­æ–¹æ³•æ˜¯ï¼š</span>
</span><span class="code-line"><span class="token comment"># æ¯”è¾ƒslaveæ–­å¼€è¿æ¥çš„æ—¶é—´å’Œ(node-timeout * slave-validity-factor) + repl-ping-slave-period</span>
</span><span class="code-line"><span class="token comment"># å¦‚æœèŠ‚ç‚¹è¶…æ—¶æ—¶é—´ä¸ºä¸‰åç§’, å¹¶ä¸”slave-validity-factorä¸º10,å‡è®¾é»˜è®¤çš„repl-ping-slave-periodæ˜¯10ç§’ï¼Œ</span>
</span><span class="code-line"><span class="token comment"># å³å¦‚æœè¶…è¿‡310ç§’slaveå°†ä¸ä¼šå°è¯•è¿›è¡Œæ•…éšœè½¬ç§» </span>
</span><span class="code-line"><span class="token comment"># cluster-slave-validity-factor 10</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># masterçš„slaveæ•°é‡å¤§äºè¯¥å€¼ï¼Œslaveæ‰èƒ½è¿ç§»åˆ°å…¶ä»–å­¤ç«‹masterä¸Šï¼Œ</span>
</span><span class="code-line"><span class="token comment"># å¦‚è¿™ä¸ªå‚æ•°è‹¥è¢«è®¾ä¸º2ï¼Œé‚£ä¹ˆåªæœ‰å½“ä¸€ä¸ªä¸»èŠ‚ç‚¹æ‹¥æœ‰2 ä¸ªå¯å·¥ä½œçš„ä»èŠ‚ç‚¹æ—¶ï¼Œå®ƒçš„ä¸€ä¸ªä»èŠ‚ç‚¹ä¼šå°è¯•è¿ç§»ã€‚</span>
</span><span class="code-line"><span class="token comment"># cluster-migration-barrier 1</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># é»˜è®¤æƒ…å†µä¸‹ï¼Œé›†ç¾¤å…¨éƒ¨çš„slotæœ‰èŠ‚ç‚¹è´Ÿè´£ï¼Œé›†ç¾¤çŠ¶æ€æ‰ä¸ºokï¼Œæ‰èƒ½æä¾›æœåŠ¡ã€‚</span>
</span><span class="code-line"><span class="token comment"># è®¾ç½®ä¸ºnoï¼Œå¯ä»¥åœ¨slotæ²¡æœ‰å…¨éƒ¨åˆ†é…çš„æ—¶å€™æä¾›æœåŠ¡ã€‚</span>
</span><span class="code-line"><span class="token comment"># ä¸å»ºè®®æ‰“å¼€è¯¥é…ç½®ï¼Œè¿™æ ·ä¼šé€ æˆåˆ†åŒºçš„æ—¶å€™ï¼Œå°åˆ†åŒºçš„masterä¸€ç›´åœ¨æ¥å—å†™è¯·æ±‚ï¼Œè€Œé€ æˆå¾ˆé•¿æ—¶é—´æ•°æ®ä¸ä¸€è‡´ã€‚</span>
</span><span class="code-line"><span class="token comment"># cluster-require-full-coverage yes</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">################################## SLOW LOG ###################################</span>
</span><span class="code-line"><span class="token comment">###slog logæ˜¯ç”¨æ¥è®°å½•redisè¿è¡Œä¸­æ‰§è¡Œæ¯”è¾ƒæ…¢çš„å‘½ä»¤è€—æ—¶ã€‚å½“å‘½ä»¤çš„æ‰§è¡Œè¶…è¿‡äº†æŒ‡å®šæ—¶é—´ï¼Œå°±è®°å½•åœ¨slow logä¸­ï¼Œslog logä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œæ‰€ä»¥æ²¡æœ‰IOæ“ä½œã€‚</span>
</span><span class="code-line"><span class="token comment">#æ‰§è¡Œæ—¶é—´æ¯”slowlog-log-slower-thanå¤§çš„è¯·æ±‚è®°å½•åˆ°slowlogé‡Œé¢ï¼Œå•ä½æ˜¯å¾®ç§’ï¼Œæ‰€ä»¥1000000å°±æ˜¯1ç§’ã€‚æ³¨æ„ï¼Œè´Ÿæ•°æ—¶é—´ä¼šç¦ç”¨æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œè€Œ0åˆ™ä¼šå¼ºåˆ¶è®°å½•æ‰€æœ‰å‘½ä»¤ã€‚</span>
</span><span class="code-line">slowlog-log-slower-than <span class="token number">10000</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">#æ…¢æŸ¥è¯¢æ—¥å¿—é•¿åº¦ã€‚å½“ä¸€ä¸ªæ–°çš„å‘½ä»¤è¢«å†™è¿›æ—¥å¿—çš„æ—¶å€™ï¼Œæœ€è€çš„é‚£ä¸ªè®°å½•ä¼šè¢«åˆ æ‰ã€‚è¿™ä¸ªé•¿åº¦æ²¡æœ‰é™åˆ¶ã€‚åªè¦æœ‰è¶³å¤Ÿçš„å†…å­˜å°±è¡Œã€‚ä½ å¯ä»¥é€šè¿‡ SLOWLOG RESET æ¥é‡Šæ”¾å†…å­˜ã€‚</span>
</span><span class="code-line">slowlog-max-len <span class="token number">128</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">################################ LATENCY MONITOR ##############################</span>
</span><span class="code-line"><span class="token comment">#å»¶è¿Ÿç›‘æ§åŠŸèƒ½æ˜¯ç”¨æ¥ç›‘æ§redisä¸­æ‰§è¡Œæ¯”è¾ƒç¼“æ…¢çš„ä¸€äº›æ“ä½œï¼Œç”¨LATENCYæ‰“å°rediså®ä¾‹åœ¨è·‘å‘½ä»¤æ—¶çš„è€—æ—¶å›¾è¡¨ã€‚åªè®°å½•å¤§äºç­‰äºä¸‹è¾¹è®¾ç½®çš„å€¼çš„æ“ä½œã€‚0çš„è¯ï¼Œå°±æ˜¯å…³é—­ç›‘è§†ã€‚é»˜è®¤å»¶è¿Ÿç›‘æ§åŠŸèƒ½æ˜¯å…³é—­çš„ï¼Œå¦‚æœä½ éœ€è¦æ‰“å¼€ï¼Œä¹Ÿå¯ä»¥é€šè¿‡CONFIG SETå‘½ä»¤åŠ¨æ€è®¾ç½®ã€‚</span>
</span><span class="code-line">latency-monitor-threshold <span class="token number">0</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">############################# EVENT NOTIFICATION ##############################</span>
</span><span class="code-line"><span class="token comment">#é”®ç©ºé—´é€šçŸ¥ä½¿å¾—å®¢æˆ·ç«¯å¯ä»¥é€šè¿‡è®¢é˜…é¢‘é“æˆ–æ¨¡å¼ï¼Œæ¥æ¥æ”¶é‚£äº›ä»¥æŸç§æ–¹å¼æ”¹åŠ¨äº† Redis æ•°æ®é›†çš„äº‹ä»¶ã€‚å› ä¸ºå¼€å¯é”®ç©ºé—´é€šçŸ¥åŠŸèƒ½éœ€è¦æ¶ˆè€—ä¸€äº› CPU ï¼Œæ‰€ä»¥åœ¨é»˜è®¤é…ç½®ä¸‹ï¼Œè¯¥åŠŸèƒ½å¤„äºå…³é—­çŠ¶æ€ã€‚</span>
</span><span class="code-line"><span class="token comment">#notify-keyspace-events çš„å‚æ•°å¯ä»¥æ˜¯ä»¥ä¸‹å­—ç¬¦çš„ä»»æ„ç»„åˆï¼Œå®ƒæŒ‡å®šäº†æœåŠ¡å™¨è¯¥å‘é€å“ªäº›ç±»å‹çš„é€šçŸ¥ï¼š</span>
</span><span class="code-line"><span class="token comment">##K é”®ç©ºé—´é€šçŸ¥ï¼Œæ‰€æœ‰é€šçŸ¥ä»¥ __keyspace@__ ä¸ºå‰ç¼€</span>
</span><span class="code-line"><span class="token comment">##E é”®äº‹ä»¶é€šçŸ¥ï¼Œæ‰€æœ‰é€šçŸ¥ä»¥ __keyevent@__ ä¸ºå‰ç¼€</span>
</span><span class="code-line"><span class="token comment">##g DEL ã€ EXPIRE ã€ RENAME ç­‰ç±»å‹æ— å…³çš„é€šç”¨å‘½ä»¤çš„é€šçŸ¥</span>
</span><span class="code-line"><span class="token comment">##$ å­—ç¬¦ä¸²å‘½ä»¤çš„é€šçŸ¥</span>
</span><span class="code-line"><span class="token comment">##l åˆ—è¡¨å‘½ä»¤çš„é€šçŸ¥</span>
</span><span class="code-line"><span class="token comment">##s é›†åˆå‘½ä»¤çš„é€šçŸ¥</span>
</span><span class="code-line"><span class="token comment">##h å“ˆå¸Œå‘½ä»¤çš„é€šçŸ¥</span>
</span><span class="code-line"><span class="token comment">##z æœ‰åºé›†åˆå‘½ä»¤çš„é€šçŸ¥</span>
</span><span class="code-line"><span class="token comment">##x è¿‡æœŸäº‹ä»¶ï¼šæ¯å½“æœ‰è¿‡æœŸé”®è¢«åˆ é™¤æ—¶å‘é€</span>
</span><span class="code-line"><span class="token comment">##e é©±é€(evict)äº‹ä»¶ï¼šæ¯å½“æœ‰é”®å› ä¸º maxmemory æ”¿ç­–è€Œè¢«åˆ é™¤æ—¶å‘é€</span>
</span><span class="code-line"><span class="token comment">##A å‚æ•° g$lshzxe çš„åˆ«å</span>
</span><span class="code-line"><span class="token comment">#è¾“å…¥çš„å‚æ•°ä¸­è‡³å°‘è¦æœ‰ä¸€ä¸ª K æˆ–è€… Eï¼Œå¦åˆ™çš„è¯ï¼Œä¸ç®¡å…¶ä½™çš„å‚æ•°æ˜¯ä»€ä¹ˆï¼Œéƒ½ä¸ä¼šæœ‰ä»»ä½• é€šçŸ¥è¢«åˆ†å‘ã€‚è¯¦ç»†ä½¿ç”¨å¯ä»¥å‚è€ƒhttp://redis.io/topics/notifications</span>
</span><span class="code-line">
</span><span class="code-line">notify-keyspace-events <span class="token string">"KEA"</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">############################### ADVANCED CONFIG ###############################</span>
</span><span class="code-line"><span class="token comment"># æ•°æ®é‡å°äºç­‰äºhash-max-ziplist-entriesçš„ç”¨ziplistï¼Œå¤§äºhash-max-ziplist-entriesç”¨hash</span>
</span><span class="code-line">hash-max-ziplist-entries <span class="token number">512</span>
</span><span class="code-line"><span class="token comment"># valueå¤§å°å°äºç­‰äºhash-max-ziplist-valueçš„ç”¨ziplistï¼Œå¤§äºhash-max-ziplist-valueç”¨hashã€‚</span>
</span><span class="code-line">hash-max-ziplist-value <span class="token number">64</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># æ•°æ®é‡å°äºç­‰äºlist-max-ziplist-entriesç”¨ziplistï¼Œå¤§äºlist-max-ziplist-entriesç”¨listã€‚</span>
</span><span class="code-line">list-max-ziplist-entries <span class="token number">512</span>
</span><span class="code-line"><span class="token comment"># valueå¤§å°å°äºç­‰äºlist-max-ziplist-valueçš„ç”¨ziplistï¼Œå¤§äºlist-max-ziplist-valueç”¨listã€‚</span>
</span><span class="code-line">list-max-ziplist-value <span class="token number">64</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># æ•°æ®é‡å°äºç­‰äºset-max-intset-entriesç”¨inisetï¼Œå¤§äºset-max-intset-entriesç”¨setã€‚</span>
</span><span class="code-line">set-max-intset-entries <span class="token number">512</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># æ•°æ®é‡å°äºç­‰äºzset-max-ziplist-entriesç”¨ziplistï¼Œå¤§äºzset-max-ziplist-entriesç”¨zsetã€‚</span>
</span><span class="code-line">zset-max-ziplist-entries <span class="token number">128</span>
</span><span class="code-line"><span class="token comment"># valueå¤§å°å°äºç­‰äºzset-max-ziplist-valueç”¨ziplistï¼Œå¤§äºzset-max-ziplist-valueç”¨zsetã€‚</span>
</span><span class="code-line">zset-max-ziplist-value <span class="token number">64</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># valueå¤§å°å°äºç­‰äºhll-sparse-max-bytesä½¿ç”¨ç¨€ç–æ•°æ®ç»“æ„ï¼ˆsparseï¼‰ï¼Œ</span>
</span><span class="code-line"><span class="token comment"># å¤§äºhll-sparse-max-bytesä½¿ç”¨ç¨ å¯†çš„æ•°æ®ç»“æ„ï¼ˆdenseï¼‰ã€‚</span>
</span><span class="code-line"><span class="token comment"># ä¸€ä¸ªæ¯”16000å¤§çš„valueæ˜¯å‡ ä¹æ²¡ç”¨çš„ï¼Œå»ºè®®çš„valueå¤§æ¦‚ä¸º3000ã€‚</span>
</span><span class="code-line"><span class="token comment"># å¦‚æœå¯¹CPUè¦æ±‚ä¸é«˜ï¼Œå¯¹ç©ºé—´è¦æ±‚è¾ƒé«˜çš„ï¼Œå»ºè®®è®¾ç½®åˆ°10000å·¦å³ã€‚</span>
</span><span class="code-line">hll-sparse-max-bytes <span class="token number">3000</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># Rediså°†åœ¨æ¯100æ¯«ç§’æ—¶ä½¿ç”¨1æ¯«ç§’çš„CPUæ—¶é—´æ¥å¯¹redisçš„hashè¡¨è¿›è¡Œé‡æ–°hashï¼Œå¯ä»¥é™ä½å†…å­˜çš„ä½¿ç”¨ã€‚</span>
</span><span class="code-line"><span class="token comment"># å½“ä½ çš„ä½¿ç”¨åœºæ™¯ä¸­ï¼Œæœ‰éå¸¸ä¸¥æ ¼çš„å®æ—¶æ€§éœ€è¦ï¼Œä¸èƒ½å¤Ÿæ¥å—Redisæ—¶ä¸æ—¶çš„å¯¹è¯·æ±‚æœ‰2æ¯«ç§’çš„å»¶è¿Ÿçš„è¯ï¼ŒæŠŠè¿™é¡¹é…ç½®ä¸ºnoã€‚</span>
</span><span class="code-line"><span class="token comment"># å¦‚æœæ²¡æœ‰è¿™ä¹ˆä¸¥æ ¼çš„å®æ—¶æ€§è¦æ±‚ï¼Œå¯ä»¥è®¾ç½®ä¸ºyesï¼Œä»¥ä¾¿èƒ½å¤Ÿå°½å¯èƒ½å¿«çš„é‡Šæ”¾å†…å­˜ã€‚</span>
</span><span class="code-line">activerehashing <span class="token function">yes</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># å¯¹å®¢æˆ·ç«¯è¾“å‡ºç¼“å†²è¿›è¡Œé™åˆ¶å¯ä»¥å¼ºè¿«é‚£äº›ä¸ä»æœåŠ¡å™¨è¯»å–æ•°æ®çš„å®¢æˆ·ç«¯æ–­å¼€è¿æ¥ï¼Œç”¨æ¥å¼ºåˆ¶å…³é—­ä¼ è¾“ç¼“æ…¢çš„å®¢æˆ·ç«¯ã€‚</span>
</span><span class="code-line"><span class="token comment"># å¯¹äºnormal clientï¼Œç¬¬ä¸€ä¸ª0è¡¨ç¤ºå–æ¶ˆhard limitï¼Œç¬¬äºŒä¸ª0å’Œç¬¬ä¸‰ä¸ª0è¡¨ç¤ºå–æ¶ˆsoft limitï¼Œnormal clienté»˜è®¤å–æ¶ˆé™åˆ¶ï¼Œå› ä¸ºå¦‚æœæ²¡æœ‰å¯»é—®ï¼Œä»–ä»¬æ˜¯ä¸ä¼šæ¥æ”¶æ•°æ®çš„ã€‚</span>
</span><span class="code-line">client-output-buffer-limit normal <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span>
</span><span class="code-line"><span class="token comment"># å¯¹äºslave clientå’ŒMONITER clientï¼Œå¦‚æœclient-output-bufferä¸€æ—¦è¶…è¿‡256mbï¼Œåˆæˆ–è€…è¶…è¿‡64mbæŒç»­60ç§’ï¼Œé‚£ä¹ˆæœåŠ¡å™¨å°±ä¼šç«‹å³æ–­å¼€å®¢æˆ·ç«¯è¿æ¥ã€‚</span>
</span><span class="code-line">client-output-buffer-limit slave 256mb 64mb <span class="token number">60</span>
</span><span class="code-line"><span class="token comment"># å¯¹äºpubsub clientï¼Œå¦‚æœclient-output-bufferä¸€æ—¦è¶…è¿‡32mbï¼Œåˆæˆ–è€…è¶…è¿‡8mbæŒç»­60ç§’ï¼Œé‚£ä¹ˆæœåŠ¡å™¨å°±ä¼šç«‹å³æ–­å¼€å®¢æˆ·ç«¯è¿æ¥ã€‚</span>
</span><span class="code-line">client-output-buffer-limit pubsub 32mb 8mb <span class="token number">60</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># redisæ‰§è¡Œä»»åŠ¡çš„é¢‘ç‡ä¸º1sé™¤ä»¥hzã€‚</span>
</span><span class="code-line">hz <span class="token number">10</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># åœ¨aofé‡å†™çš„æ—¶å€™ï¼Œå¦‚æœæ‰“å¼€äº†aof-rewrite-incremental-fsyncå¼€å…³ï¼Œç³»ç»Ÿä¼šæ¯32MBæ‰§è¡Œä¸€æ¬¡fsyncã€‚è¿™å¯¹äºæŠŠæ–‡ä»¶å†™å…¥ç£ç›˜æ˜¯æœ‰å¸®åŠ©çš„ï¼Œå¯ä»¥é¿å…è¿‡å¤§çš„å»¶è¿Ÿå³°å€¼ã€‚</span>
</span><span class="code-line">aof-rewrite-incremental-fsync <span class="token function">yes</span>
</span></code><div onclick="copied(this)" data-code="#redis.conf
# Redis configuration file example.
# ./redis-server /path/to/redis.conf

################################## INCLUDES ###################################
#è¿™åœ¨ä½ æœ‰æ ‡å‡†é…ç½®æ¨¡æ¿ä½†æ˜¯æ¯ä¸ªredisæœåŠ¡å™¨åˆéœ€è¦ä¸ªæ€§è®¾ç½®çš„æ—¶å€™å¾ˆæœ‰ç”¨ã€‚
# include /path/to/local.conf
# include /path/to/other.conf

################################ GENERAL #####################################

# æ˜¯å¦åœ¨åå°æ‰§è¡Œï¼Œyesï¼šåå°è¿è¡Œï¼›noï¼šä¸æ˜¯åå°è¿è¡Œï¼ˆè€ç‰ˆæœ¬é»˜è®¤ï¼‰
daemonize yes

# 3.2é‡Œçš„å‚æ•°ï¼Œæ˜¯å¦å¼€å¯ä¿æŠ¤æ¨¡å¼ï¼Œé»˜è®¤å¼€å¯ã€‚è¦æ˜¯é…ç½®é‡Œæ²¡æœ‰æŒ‡å®šbindå’Œå¯†ç ã€‚
# å¼€å¯è¯¥å‚æ•°åï¼Œredisåªä¼šæœ¬åœ°è¿›è¡Œè®¿é—®ï¼Œæ‹’ç»å¤–éƒ¨è®¿é—®ã€‚
# è¦æ˜¯å¼€å¯äº†å¯†ç    å’Œbindï¼Œå¯ä»¥å¼€å¯ã€‚å¦   åˆ™æœ€å¥½å…³é—­ï¼Œè®¾ç½®ä¸ºnoã€‚

protected-mode yes
# redisçš„è¿›ç¨‹æ–‡ä»¶
pidfile /var/run/redis/redis-server.pid

# redisç›‘å¬çš„ç«¯å£å·ã€‚
port 6379

# æ­¤å‚æ•°ç¡®å®šäº†TCPè¿æ¥ä¸­å·²å®Œæˆé˜Ÿåˆ—(å®Œæˆä¸‰æ¬¡æ¡æ‰‹ä¹‹å)çš„é•¿åº¦ï¼Œ 
# å½“ç„¶æ­¤å€¼å¿…é¡»ä¸å¤§äºLinuxç³»ç»Ÿå®šä¹‰çš„/proc/sys/net/core/somaxconnå€¼ï¼Œé»˜è®¤æ˜¯511ï¼Œ
# è€ŒLinuxçš„é»˜è®¤å‚æ•°å€¼æ˜¯128ã€‚å½“ç³»ç»Ÿå¹¶å‘é‡å¤§å¹¶ä¸”å®¢æˆ·ç«¯é€Ÿåº¦ç¼“æ…¢çš„æ—¶å€™ï¼Œ
# å¯ä»¥å°†è¿™äºŒä¸ªå‚æ•°ä¸€èµ·å‚è€ƒè®¾å®šã€‚è¯¥å†…æ ¸å‚æ•°é»˜è®¤å€¼ä¸€èˆ¬æ˜¯128ï¼Œå¯¹äºè´Ÿè½½å¾ˆå¤§çš„æœåŠ¡ç¨‹åºæ¥è¯´å¤§å¤§çš„ä¸å¤Ÿã€‚
# ä¸€èˆ¬ä¼šå°†å®ƒä¿®æ”¹ä¸º2048æˆ–è€…æ›´å¤§ã€‚åœ¨/etc/sysctl.confä¸­æ·»åŠ :net.core.somaxconn = 2048ï¼Œç„¶ååœ¨ç»ˆç«¯ä¸­æ‰§è¡Œsysctl -pã€‚
tcp-backlog 511

#æŒ‡å®š redis åªæ¥æ”¶æ¥è‡ªäºè¯¥ IP åœ°å€çš„è¯·æ±‚ï¼Œå¦‚æœä¸è¿›è¡Œè®¾ç½®ï¼Œé‚£ä¹ˆå°†å¤„ç†æ‰€æœ‰è¯·æ±‚
bind 127.0.0.1

# é…ç½®unix socketæ¥è®©redisæ”¯æŒç›‘å¬æœ¬åœ°è¿æ¥ã€‚
# unixsocket /var/run/redis/redis.sock
# é…ç½®unix socketä½¿ç”¨æ–‡ä»¶çš„æƒé™
# unixsocketperm 700

# æ­¤å‚æ•°ä¸ºè®¾ç½®å®¢æˆ·ç«¯ç©ºé—²è¶…è¿‡timeoutï¼ŒæœåŠ¡ç«¯ä¼šæ–­å¼€è¿æ¥ï¼Œä¸º0åˆ™æœåŠ¡ç«¯ä¸ä¼šä¸»åŠ¨æ–­å¼€è¿æ¥ï¼Œä¸èƒ½å°äº0ã€‚
timeout 0

# tcp keepaliveå‚æ•°ã€‚å¦‚æœè®¾ç½®ä¸ä¸º0ï¼Œå°±ä½¿ç”¨é…ç½®tcpçš„SO_KEEPALIVEå€¼ï¼Œ
# ä½¿ç”¨keepaliveæœ‰ä¸¤ä¸ªå¥½å¤„:æ£€æµ‹æŒ‚æ‰çš„å¯¹ç«¯ã€‚é™ä½ä¸­é—´è®¾å¤‡å‡ºé—®é¢˜è€Œå¯¼è‡´ç½‘ç»œçœ‹ä¼¼è¿æ¥å´å·²ç»ä¸å¯¹ç«¯ç«¯å£çš„é—®é¢˜ã€‚
# åœ¨Linuxå†…æ ¸ä¸­ï¼Œè®¾ç½®äº†keepaliveï¼Œredisä¼šå®šæ—¶ç»™å¯¹ç«¯å‘é€ackã€‚æ£€æµ‹åˆ°å¯¹ç«¯å…³é—­éœ€è¦ä¸¤å€çš„è®¾ç½®å€¼ã€‚
tcp-keepalive 0

# æŒ‡å®šäº†æœåŠ¡ç«¯æ—¥å¿—çš„çº§åˆ«ã€‚çº§åˆ«åŒ…æ‹¬ï¼šdebugï¼ˆå¾ˆå¤šä¿¡æ¯ï¼Œæ–¹ä¾¿å¼€å‘ã€æµ‹è¯•ï¼‰ï¼Œ
# verboseï¼ˆè®¸å¤šæœ‰ç”¨çš„ä¿¡æ¯ï¼Œä½†æ˜¯æ²¡æœ‰debugçº§åˆ«ä¿¡æ¯å¤šï¼‰ï¼Œnoticeï¼ˆé€‚å½“çš„æ—¥å¿—çº§åˆ«ï¼Œé€‚åˆç”Ÿäº§ç¯å¢ƒï¼‰ï¼Œwarnï¼ˆåªæœ‰éå¸¸é‡è¦çš„ä¿¡æ¯ï¼‰
loglevel notice

#æŒ‡å®šäº†è®°å½•æ—¥å¿—çš„æ–‡ä»¶ã€‚ç©ºå­—ç¬¦ä¸²çš„è¯ï¼Œæ—¥å¿—ä¼šæ‰“å°åˆ°æ ‡å‡†è¾“å‡ºè®¾å¤‡ã€‚åå°è¿è¡Œçš„redisæ ‡å‡†è¾“å‡ºæ˜¯/dev/nullã€‚
logfile /var/log/redis/redis-server.log

# æ˜¯å¦æ‰“å¼€è®°å½•syslogåŠŸèƒ½
# syslog-enabled no

# syslogçš„æ ‡è¯†ç¬¦ã€‚
# syslog-ident redis

# æ—¥å¿—çš„æ¥æºã€è®¾å¤‡
# syslog-facility local0

# æ•°æ®åº“çš„æ•°é‡ï¼Œé»˜è®¤ä½¿ç”¨çš„æ•°æ®åº“æ˜¯DB 0ã€‚å¯ä»¥é€šè¿‡â€SELECT â€œå‘½ä»¤é€‰æ‹©ä¸€ä¸ªdb
databases 16

################################ SNAPSHOTTING ################################
# å¿«ç…§é…ç½®
# æ³¨é‡Šæ‰â€œsaveâ€è¿™ä¸€è¡Œé…ç½®é¡¹å°±å¯ä»¥è®©ä¿å­˜æ•°æ®åº“åŠŸèƒ½å¤±æ•ˆ
# è®¾ç½®sedisè¿›è¡Œæ•°æ®åº“é•œåƒçš„é¢‘ç‡ã€‚
# 900ç§’ï¼ˆ15åˆ†é’Ÿï¼‰å†…è‡³å°‘1ä¸ªkeyå€¼æ”¹å˜ï¼ˆåˆ™è¿›è¡Œæ•°æ®åº“ä¿å­˜--æŒä¹…åŒ–ï¼‰ 
# 300ç§’ï¼ˆ5åˆ†é’Ÿï¼‰å†…è‡³å°‘10ä¸ªkeyå€¼æ”¹å˜ï¼ˆåˆ™è¿›è¡Œæ•°æ®åº“ä¿å­˜--æŒä¹…åŒ–ï¼‰ 
# 60ç§’ï¼ˆ1åˆ†é’Ÿï¼‰å†…è‡³å°‘10000ä¸ªkeyå€¼æ”¹å˜ï¼ˆåˆ™è¿›è¡Œæ•°æ®åº“ä¿å­˜--æŒä¹…åŒ–ï¼‰
save 900 1
save 300 10
save 60 10000

# å½“RDBæŒä¹…åŒ–å‡ºç°é”™è¯¯åï¼Œæ˜¯å¦ä¾ç„¶è¿›è¡Œç»§ç»­è¿›è¡Œå·¥ä½œï¼Œyesï¼šä¸èƒ½è¿›è¡Œå·¥ä½œï¼Œnoï¼šå¯ä»¥ç»§ç»­è¿›è¡Œå·¥ä½œï¼Œ
# å¯ä»¥é€šè¿‡infoä¸­çš„rdb_last_bgsave_statusäº†è§£RDBæŒä¹…åŒ–æ˜¯å¦æœ‰é”™è¯¯
stop-writes-on-bgsave-error yes

# ä½¿ç”¨å‹ç¼©rdbæ–‡ä»¶ï¼Œrdbæ–‡ä»¶å‹ç¼©ä½¿ç”¨LZFå‹ç¼©ç®—æ³•ï¼Œyesï¼šå‹ç¼©ï¼Œä½†æ˜¯éœ€è¦ä¸€äº›cpuçš„æ¶ˆè€—ã€‚noï¼šä¸å‹ç¼©ï¼Œéœ€è¦æ›´å¤šçš„ç£ç›˜ç©ºé—´
rdbcompression yes

# æ˜¯å¦æ ¡éªŒrdbæ–‡ä»¶ã€‚ä»rdbæ ¼å¼çš„ç¬¬äº”ä¸ªç‰ˆæœ¬å¼€å§‹ï¼Œåœ¨rdbæ–‡ä»¶çš„æœ«å°¾ä¼šå¸¦ä¸ŠCRC64çš„æ ¡éªŒå’Œã€‚
# è¿™è·Ÿæœ‰åˆ©äºæ–‡ä»¶çš„å®¹é”™æ€§ï¼Œä½†æ˜¯åœ¨ä¿å­˜rdbæ–‡ä»¶çš„æ—¶å€™ï¼Œä¼šæœ‰å¤§æ¦‚10%çš„æ€§èƒ½æŸè€—ï¼Œæ‰€ä»¥å¦‚æœä½ è¿½æ±‚é«˜æ€§èƒ½ï¼Œå¯ä»¥å…³é—­è¯¥é…ç½®ã€‚
rdbchecksum yes

# rdbæ–‡ä»¶çš„åç§°
dbfilename dump.rdb

# æ•°æ®ç›®å½•ï¼Œæ•°æ®åº“çš„å†™å…¥ä¼šåœ¨è¿™ä¸ªç›®å½•ã€‚rdbã€aofæ–‡ä»¶ä¹Ÿä¼šå†™åœ¨è¿™ä¸ªç›®å½•
dir /var/lib/redis

################################# REPLICATION #################################
# å¤åˆ¶é€‰é¡¹ï¼Œslaveå¤åˆ¶å¯¹åº”çš„masterã€‚
# slaveof <masterip> <masterport>

#å¦‚æœmasterè®¾ç½®äº†requirepassï¼Œé‚£ä¹ˆslaveè¦è¿ä¸Šmasterï¼Œéœ€è¦æœ‰masterçš„å¯†ç æ‰è¡Œã€‚masterauthå°±æ˜¯ç”¨æ¥é…ç½®masterçš„å¯†ç ï¼Œè¿™æ ·å¯ä»¥åœ¨è¿ä¸Šmasteråè¿›è¡Œè®¤è¯ã€‚
# masterauth <master-password>

#å½“ä»åº“åŒä¸»æœºå¤±å»è¿æ¥æˆ–è€…å¤åˆ¶æ­£åœ¨è¿›è¡Œï¼Œä»æœºåº“æœ‰ä¸¤ç§è¿è¡Œæ–¹å¼ï¼š1) å¦‚æœslave-serve-stale-dataè®¾ç½®ä¸ºyes(é»˜è®¤è®¾ç½®)ï¼Œä»åº“ä¼šç»§ç»­å“åº”å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚2) å¦‚æœslave-serve-stale-dataè®¾ç½®ä¸ºnoï¼Œé™¤å»INFOå’ŒSLAVOFå‘½ä»¤ä¹‹å¤–çš„ä»»ä½•è¯·æ±‚éƒ½ä¼šè¿”å›ä¸€ä¸ªé”™è¯¯â€SYNC with master in progressâ€ã€‚
slave-serve-stale-data yes

#ä½œä¸ºä»æœåŠ¡å™¨ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯åªè¯»çš„ï¼ˆyesï¼‰ï¼Œå¯ä»¥ä¿®æ”¹æˆNOï¼Œç”¨äºå†™ï¼ˆä¸å»ºè®®ï¼‰ã€‚
slave-read-only yes

#æ˜¯å¦ä½¿ç”¨socketæ–¹å¼å¤åˆ¶æ•°æ®ã€‚ç›®å‰rediså¤åˆ¶æä¾›ä¸¤ç§æ–¹å¼ï¼Œdiskå’Œsocketã€‚å¦‚æœæ–°çš„slaveè¿ä¸Šæ¥æˆ–è€…é‡è¿çš„slaveæ— æ³•éƒ¨åˆ†åŒæ­¥ï¼Œå°±ä¼šæ‰§è¡Œå…¨é‡åŒæ­¥ï¼Œmasterä¼šç”Ÿæˆrdbæ–‡ä»¶ã€‚æœ‰2ç§æ–¹å¼ï¼šdiskæ–¹å¼æ˜¯masteråˆ›å»ºä¸€ä¸ªæ–°çš„è¿›ç¨‹æŠŠrdbæ–‡ä»¶ä¿å­˜åˆ°ç£ç›˜ï¼Œå†æŠŠç£ç›˜ä¸Šçš„rdbæ–‡ä»¶ä¼ é€’ç»™slaveã€‚socketæ˜¯masteråˆ›å»ºä¸€ä¸ªæ–°çš„è¿›ç¨‹ï¼Œç›´æ¥æŠŠrdbæ–‡ä»¶ä»¥socketçš„æ–¹å¼å‘ç»™slaveã€‚diskæ–¹å¼çš„æ—¶å€™ï¼Œå½“ä¸€ä¸ªrdbä¿å­˜çš„è¿‡ç¨‹ä¸­ï¼Œå¤šä¸ªslaveéƒ½èƒ½å…±äº«è¿™ä¸ªrdbæ–‡ä»¶ã€‚socketçš„æ–¹å¼å°±çš„ä¸€ä¸ªä¸ªslaveé¡ºåºå¤åˆ¶ã€‚åœ¨ç£ç›˜é€Ÿåº¦ç¼“æ…¢ï¼Œç½‘é€Ÿå¿«çš„æƒ…å†µä¸‹æ¨èç”¨socketæ–¹å¼ã€‚
repl-diskless-sync no

#disklesså¤åˆ¶çš„å»¶è¿Ÿæ—¶é—´ï¼Œé˜²æ­¢è®¾ç½®ä¸º0ã€‚ä¸€æ—¦å¤åˆ¶å¼€å§‹ï¼ŒèŠ‚ç‚¹ä¸ä¼šå†æ¥æ”¶æ–°slaveçš„å¤åˆ¶è¯·æ±‚ç›´åˆ°ä¸‹ä¸€ä¸ªrdbä¼ è¾“ã€‚æ‰€ä»¥æœ€å¥½ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œç­‰æ›´å¤šçš„slaveè¿ä¸Šæ¥ã€‚
repl-diskless-sync-delay 5

#slaveæ ¹æ®æŒ‡å®šçš„æ—¶é—´é—´éš”å‘æœåŠ¡å™¨å‘é€pingè¯·æ±‚ã€‚æ—¶é—´é—´éš”å¯ä»¥é€šè¿‡ repl_ping_slave_period æ¥è®¾ç½®ï¼Œé»˜è®¤10ç§’ã€‚
# repl-ping-slave-period 10

#å¤åˆ¶è¿æ¥è¶…æ—¶æ—¶é—´ã€‚masterå’Œslaveéƒ½æœ‰è¶…æ—¶æ—¶é—´çš„è®¾ç½®ã€‚masteræ£€æµ‹åˆ°slaveä¸Šæ¬¡å‘é€çš„æ—¶é—´è¶…è¿‡repl-timeoutï¼Œå³è®¤ä¸ºslaveç¦»çº¿ï¼Œæ¸…é™¤è¯¥slaveä¿¡æ¯ã€‚slaveæ£€æµ‹åˆ°ä¸Šæ¬¡å’Œmasteräº¤äº’çš„æ—¶é—´è¶…è¿‡repl-timeoutï¼Œåˆ™è®¤ä¸ºmasterç¦»çº¿ã€‚éœ€è¦æ³¨æ„çš„æ˜¯repl-timeoutéœ€è¦è®¾ç½®ä¸€ä¸ªæ¯”repl-ping-slave-periodæ›´å¤§çš„å€¼ï¼Œä¸ç„¶ä¼šç»å¸¸æ£€æµ‹åˆ°è¶…æ—¶ã€‚
# repl-timeout 60

#æ˜¯å¦ç¦æ­¢å¤åˆ¶tcpé“¾æ¥çš„tcp nodelayå‚æ•°ï¼Œå¯ä¼ é€’yesæˆ–è€…noã€‚é»˜è®¤æ˜¯noï¼Œå³ä½¿ç”¨tcp nodelayã€‚å¦‚æœmasterè®¾ç½®äº†yesæ¥ç¦æ­¢tcp nodelayè®¾ç½®ï¼Œåœ¨æŠŠæ•°æ®å¤åˆ¶ç»™slaveçš„æ—¶å€™ï¼Œä¼šå‡å°‘åŒ…çš„æ•°é‡å’Œæ›´å°çš„ç½‘ç»œå¸¦å®½ã€‚ä½†æ˜¯è¿™ä¹Ÿå¯èƒ½å¸¦æ¥æ•°æ®çš„å»¶è¿Ÿã€‚é»˜è®¤æˆ‘ä»¬æ¨èæ›´å°çš„å»¶è¿Ÿï¼Œä½†æ˜¯åœ¨æ•°æ®é‡ä¼ è¾“å¾ˆå¤§çš„åœºæ™¯ä¸‹ï¼Œå»ºè®®é€‰æ‹©yesã€‚
repl-disable-tcp-nodelay no

#å¤åˆ¶ç¼“å†²åŒºå¤§å°ï¼Œè¿™æ˜¯ä¸€ä¸ªç¯å½¢å¤åˆ¶ç¼“å†²åŒºï¼Œç”¨æ¥ä¿å­˜æœ€æ–°å¤åˆ¶çš„å‘½ä»¤ã€‚è¿™æ ·åœ¨slaveç¦»çº¿çš„æ—¶å€™ï¼Œä¸éœ€è¦å®Œå…¨å¤åˆ¶masterçš„æ•°æ®ï¼Œå¦‚æœå¯ä»¥æ‰§è¡Œéƒ¨åˆ†åŒæ­¥ï¼Œåªéœ€è¦æŠŠç¼“å†²åŒºçš„éƒ¨åˆ†æ•°æ®å¤åˆ¶ç»™slaveï¼Œå°±èƒ½æ¢å¤æ­£å¸¸å¤åˆ¶çŠ¶æ€ã€‚ç¼“å†²åŒºçš„å¤§å°è¶Šå¤§ï¼Œslaveç¦»çº¿çš„æ—¶é—´å¯ä»¥æ›´é•¿ï¼Œå¤åˆ¶ç¼“å†²åŒºåªæœ‰åœ¨æœ‰slaveè¿æ¥çš„æ—¶å€™æ‰åˆ†é…å†…å­˜ã€‚æ²¡æœ‰slaveçš„ä¸€æ®µæ—¶é—´ï¼Œå†…å­˜ä¼šè¢«é‡Šæ”¾å‡ºæ¥ï¼Œé»˜è®¤1mã€‚
# repl-backlog-size 5mb

#masteræ²¡æœ‰slaveä¸€æ®µæ—¶é—´ä¼šé‡Šæ”¾å¤åˆ¶ç¼“å†²åŒºçš„å†…å­˜ï¼Œrepl-backlog-ttlç”¨æ¥è®¾ç½®è¯¥æ—¶é—´é•¿åº¦ã€‚å•ä½ä¸ºç§’ã€‚
# repl-backlog-ttl 3600

#å½“masterä¸å¯ç”¨ï¼ŒSentinelä¼šæ ¹æ®slaveçš„ä¼˜å…ˆçº§é€‰ä¸¾ä¸€ä¸ªmasterã€‚æœ€ä½çš„ä¼˜å…ˆçº§çš„slaveï¼Œå½“é€‰masterã€‚è€Œé…ç½®æˆ0ï¼Œæ°¸è¿œä¸ä¼šè¢«é€‰ä¸¾ã€‚
slave-priority 100

#redisæä¾›äº†å¯ä»¥è®©masteråœæ­¢å†™å…¥çš„æ–¹å¼ï¼Œå¦‚æœé…ç½®äº†min-slaves-to-writeï¼Œå¥åº·çš„slaveçš„ä¸ªæ•°å°äºNï¼Œmaterå°±ç¦æ­¢å†™å…¥ã€‚masteræœ€å°‘å¾—æœ‰å¤šå°‘ä¸ªå¥åº·çš„slaveå­˜æ´»æ‰èƒ½æ‰§è¡Œå†™å‘½ä»¤ã€‚è¿™ä¸ªé…ç½®è™½ç„¶ä¸èƒ½ä¿è¯Nä¸ªslaveéƒ½ä¸€å®šèƒ½æ¥æ”¶åˆ°masterçš„å†™æ“ä½œï¼Œä½†æ˜¯èƒ½é¿å…æ²¡æœ‰è¶³å¤Ÿå¥åº·çš„slaveçš„æ—¶å€™ï¼Œmasterä¸èƒ½å†™å…¥æ¥é¿å…æ•°æ®ä¸¢å¤±ã€‚è®¾ç½®ä¸º0æ˜¯å…³é—­è¯¥åŠŸèƒ½ã€‚
# min-slaves-to-write 3

#å»¶è¿Ÿå°äºmin-slaves-max-lagç§’çš„slaveæ‰è®¤ä¸ºæ˜¯å¥åº·çš„slaveã€‚
# min-slaves-max-lag 10

# è®¾ç½®1æˆ–å¦ä¸€ä¸ªè®¾ç½®ä¸º0ç¦ç”¨è¿™ä¸ªç‰¹æ€§ã€‚
# Setting one or the other to 0 disables the feature.
# By default min-slaves-to-write is set to 0 (feature disabled) and
# min-slaves-max-lag is set to 10.

################################## SECURITY ###################################
#requirepassé…ç½®å¯ä»¥è®©ç”¨æˆ·ä½¿ç”¨AUTHå‘½ä»¤æ¥è®¤è¯å¯†ç ï¼Œæ‰èƒ½ä½¿ç”¨å…¶ä»–å‘½ä»¤ã€‚è¿™è®©rediså¯ä»¥ä½¿ç”¨åœ¨ä¸å—ä¿¡ä»»çš„ç½‘ç»œä¸­ã€‚ä¸ºäº†ä¿æŒå‘åçš„å…¼å®¹æ€§ï¼Œå¯ä»¥æ³¨é‡Šè¯¥å‘½ä»¤ï¼Œå› ä¸ºå¤§éƒ¨åˆ†ç”¨æˆ·ä¹Ÿä¸éœ€è¦è®¤è¯ã€‚ä½¿ç”¨requirepassçš„æ—¶å€™éœ€è¦æ³¨æ„ï¼Œå› ä¸ºrediså¤ªå¿«äº†ï¼Œæ¯ç§’å¯ä»¥è®¤è¯15wæ¬¡å¯†ç ï¼Œç®€å•çš„å¯†ç å¾ˆå®¹æ˜“è¢«æ”»ç ´ï¼Œæ‰€ä»¥æœ€å¥½ä½¿ç”¨ä¸€ä¸ªæ›´å¤æ‚çš„å¯†ç ã€‚
# requirepass foobared

#æŠŠå±é™©çš„å‘½ä»¤ç»™ä¿®æ”¹æˆå…¶ä»–åç§°ã€‚æ¯”å¦‚CONFIGå‘½ä»¤å¯ä»¥é‡å‘½åä¸ºä¸€ä¸ªå¾ˆéš¾è¢«çŒœåˆ°çš„å‘½ä»¤ï¼Œè¿™æ ·ç”¨æˆ·ä¸èƒ½ä½¿ç”¨ï¼Œè€Œå†…éƒ¨å·¥å…·è¿˜èƒ½æ¥ç€ä½¿ç”¨ã€‚
# rename-command CONFIG b840fc02d524045429941cc15f59e41cb7be6c52

#è®¾ç½®æˆä¸€ä¸ªç©ºçš„å€¼ï¼Œå¯ä»¥ç¦æ­¢ä¸€ä¸ªå‘½ä»¤
# rename-command CONFIG &#x22;&#x22;
################################### LIMITS ####################################

# è®¾ç½®èƒ½è¿ä¸Šredisçš„æœ€å¤§å®¢æˆ·ç«¯è¿æ¥æ•°é‡ã€‚é»˜è®¤æ˜¯10000ä¸ªå®¢æˆ·ç«¯è¿æ¥ã€‚
# ç”±äºredisä¸åŒºåˆ†è¿æ¥æ˜¯å®¢æˆ·ç«¯è¿æ¥è¿˜æ˜¯å†…éƒ¨æ‰“å¼€æ–‡ä»¶æˆ–è€…å’Œslaveè¿æ¥ç­‰ï¼Œæ‰€ä»¥maxclientsæœ€å°å»ºè®®è®¾ç½®åˆ°32ã€‚
# å¦‚æœè¶…è¿‡äº†maxclientsï¼Œredisä¼šç»™æ–°çš„è¿æ¥å‘é€â€™max number of clients reachedâ€™ï¼Œå¹¶å…³é—­è¿æ¥ã€‚
# maxclients 10000

# redisé…ç½®çš„æœ€å¤§å†…å­˜å®¹é‡ã€‚å½“å†…å­˜æ»¡äº†ï¼Œéœ€è¦é…åˆmaxmemory-policyç­–ç•¥è¿›è¡Œå¤„ç†ã€‚
# æ³¨æ„slaveçš„è¾“å‡ºç¼“å†²åŒºæ˜¯ä¸è®¡ç®—åœ¨maxmemoryå†…çš„ã€‚æ‰€ä»¥ä¸ºäº†é˜²æ­¢ä¸»æœºå†…å­˜ä½¿ç”¨å®Œï¼Œå»ºè®®è®¾ç½®çš„maxmemoryéœ€è¦æ›´å°ä¸€äº›ã€‚
# maxmemory <bytes>

# å†…å­˜å®¹é‡è¶…è¿‡maxmemoryåçš„å¤„ç†ç­–ç•¥ã€‚
# volatile-lruï¼šåˆ©ç”¨LRUç®—æ³•ç§»é™¤è®¾ç½®è¿‡è¿‡æœŸæ—¶é—´çš„keyã€‚
# volatile-randomï¼šéšæœºç§»é™¤è®¾ç½®è¿‡è¿‡æœŸæ—¶é—´çš„keyã€‚
# volatile-ttlï¼šç§»é™¤å³å°†è¿‡æœŸçš„keyï¼Œæ ¹æ®æœ€è¿‘è¿‡æœŸæ—¶é—´æ¥åˆ é™¤ï¼ˆè¾…ä»¥TTLï¼‰
# allkeys-lruï¼šåˆ©ç”¨LRUç®—æ³•ç§»é™¤ä»»ä½•keyã€‚
# allkeys-randomï¼šéšæœºç§»é™¤ä»»ä½•keyã€‚
# noevictionï¼šä¸ç§»é™¤ä»»ä½•keyï¼Œåªæ˜¯è¿”å›ä¸€ä¸ªå†™é”™è¯¯ã€‚
# ä¸Šé¢çš„è¿™äº›é©±é€ç­–ç•¥ï¼Œå¦‚æœredisæ²¡æœ‰åˆé€‚çš„keyé©±é€ï¼Œå¯¹äºå†™å‘½ä»¤ï¼Œè¿˜æ˜¯ä¼šè¿”å›é”™è¯¯ã€‚
# rediså°†ä¸å†æ¥æ”¶å†™è¯·æ±‚ï¼Œåªæ¥æ”¶getè¯·æ±‚ã€‚
# å†™å‘½ä»¤åŒ…æ‹¬ï¼šset setnx setex append incr decr rpush lpush rpushx lpushx linsert lset rpoplpush sadd sinter sinterstore sunion sunionstore sdiff sdiffstore zadd zincrby zunionstore zinterstore hset hsetnx hmset hincrby incrby decrby getset mset msetnx exec sortã€‚
# maxmemory-policy noeviction

#lruæ£€æµ‹çš„æ ·æœ¬æ•°ã€‚ä½¿ç”¨lruæˆ–è€…ttlæ·˜æ±°ç®—æ³•ï¼Œä»éœ€è¦æ·˜æ±°çš„åˆ—è¡¨ä¸­éšæœºé€‰æ‹©sampleä¸ªkeyï¼Œé€‰å‡ºé—²ç½®æ—¶é—´æœ€é•¿çš„keyç§»é™¤ã€‚
# maxmemory-samples 5

############################## APPEND ONLY MODE ###############################
#é»˜è®¤redisä½¿ç”¨çš„æ˜¯rdbæ–¹å¼æŒä¹…åŒ–ï¼Œè¿™ç§æ–¹å¼åœ¨è®¸å¤šåº”ç”¨ä¸­å·²ç»è¶³å¤Ÿç”¨äº†ã€‚ä½†æ˜¯rediså¦‚æœä¸­é€”å®•æœºï¼Œä¼šå¯¼è‡´å¯èƒ½æœ‰å‡ åˆ†é’Ÿçš„æ•°æ®ä¸¢å¤±ï¼Œæ ¹æ®saveæ¥ç­–ç•¥è¿›è¡ŒæŒä¹…åŒ–ï¼ŒAppend Only Fileæ˜¯å¦ä¸€ç§æŒä¹…åŒ–æ–¹å¼ï¼Œå¯ä»¥æä¾›æ›´å¥½çš„æŒä¹…åŒ–ç‰¹æ€§ã€‚Redisä¼šæŠŠæ¯æ¬¡å†™å…¥çš„æ•°æ®åœ¨æ¥æ”¶åéƒ½å†™å…¥ appendonly.aof æ–‡ä»¶ï¼Œæ¯æ¬¡å¯åŠ¨æ—¶Rediséƒ½ä¼šå…ˆæŠŠè¿™ä¸ªæ–‡ä»¶çš„æ•°æ®è¯»å…¥å†…å­˜é‡Œï¼Œå…ˆå¿½ç•¥RDBæ–‡ä»¶ã€‚
appendonly no

#aofæ–‡ä»¶å
appendfilename &#x22;appendonly.aof&#x22;

# aofæŒä¹…åŒ–ç­–ç•¥çš„é…ç½®
# noè¡¨ç¤ºä¸æ‰§è¡Œfsyncï¼Œç”±æ“ä½œç³»ç»Ÿä¿è¯æ•°æ®åŒæ­¥åˆ°ç£ç›˜ï¼Œé€Ÿåº¦æœ€å¿«ã€‚
# alwaysè¡¨ç¤ºæ¯æ¬¡å†™å…¥éƒ½æ‰§è¡Œfsyncï¼Œä»¥ä¿è¯æ•°æ®åŒæ­¥åˆ°ç£ç›˜ã€‚
# everysecè¡¨ç¤ºæ¯ç§’æ‰§è¡Œä¸€æ¬¡fsyncï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸¢å¤±è¿™1sæ•°æ®ã€‚
appendfsync everysec

# åœ¨aofé‡å†™æˆ–è€…å†™å…¥rdbæ–‡ä»¶çš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œå¤§é‡IOï¼Œ
# æ­¤æ—¶å¯¹äºeverysecå’Œalwaysçš„aofæ¨¡å¼æ¥è¯´ï¼Œæ‰§è¡Œfsyncä¼šé€ æˆé˜»å¡è¿‡é•¿æ—¶é—´ï¼Œ
# no-appendfsync-on-rewriteå­—æ®µè®¾ç½®ä¸ºé»˜è®¤è®¾ç½®ä¸ºnoã€‚
# å¦‚æœå¯¹å»¶è¿Ÿè¦æ±‚å¾ˆé«˜çš„åº”ç”¨ï¼Œè¿™ä¸ªå­—æ®µå¯ä»¥è®¾ç½®ä¸ºyesï¼Œå¦åˆ™è¿˜æ˜¯è®¾ç½®ä¸ºnoï¼Œ
# è¿™æ ·å¯¹æŒä¹…åŒ–ç‰¹æ€§æ¥è¯´è¿™æ˜¯æ›´å®‰å…¨çš„é€‰æ‹©ã€‚è®¾ç½®ä¸ºyesè¡¨ç¤ºrewriteæœŸé—´å¯¹æ–°å†™æ“ä½œä¸fsync,
# æš‚æ—¶å­˜åœ¨å†…å­˜ä¸­,ç­‰rewriteå®Œæˆåå†å†™å…¥ï¼Œé»˜è®¤ä¸ºnoï¼Œå»ºè®®yesã€‚Linuxçš„é»˜è®¤fsyncç­–ç•¥æ˜¯30ç§’ã€‚å¯èƒ½ä¸¢å¤±30ç§’æ•°æ®ã€‚
no-appendfsync-on-rewrite no

# aofè‡ªåŠ¨é‡å†™é…ç½®ã€‚å½“ç›®å‰aofæ–‡ä»¶å¤§å°è¶…è¿‡ä¸Šä¸€æ¬¡é‡å†™çš„aofæ–‡ä»¶å¤§å°çš„ç™¾åˆ†ä¹‹å¤šå°‘è¿›è¡Œé‡å†™ï¼Œ
# å³å½“aofæ–‡ä»¶å¢é•¿åˆ°ä¸€å®šå¤§å°çš„æ—¶å€™Redisèƒ½å¤Ÿè°ƒç”¨bgrewriteaofå¯¹æ—¥å¿—æ–‡ä»¶è¿›è¡Œé‡å†™ã€‚
# å½“å‰AOFæ–‡ä»¶å¤§å°æ˜¯ä¸Šæ¬¡æ—¥å¿—é‡å†™å¾—åˆ°AOFæ–‡ä»¶å¤§å°çš„äºŒå€ï¼ˆè®¾ç½®ä¸º100ï¼‰æ—¶ï¼Œè‡ªåŠ¨å¯åŠ¨æ–°çš„æ—¥å¿—é‡å†™è¿‡ç¨‹ã€‚
auto-aof-rewrite-percentage 100
#è®¾ç½®å…è®¸é‡å†™çš„æœ€å°aofæ–‡ä»¶å¤§å°ï¼Œé¿å…äº†è¾¾åˆ°çº¦å®šç™¾åˆ†æ¯”ä½†å°ºå¯¸ä»ç„¶å¾ˆå°çš„æƒ…å†µè¿˜è¦é‡å†™
auto-aof-rewrite-min-size 64mb

# aofæ–‡ä»¶å¯èƒ½åœ¨å°¾éƒ¨æ˜¯ä¸å®Œæ•´çš„ï¼Œå½“rediså¯åŠ¨çš„æ—¶å€™ï¼Œaofæ–‡ä»¶çš„æ•°æ®è¢«è½½å…¥å†…å­˜ã€‚
# é‡å¯å¯èƒ½å‘ç”Ÿåœ¨redisæ‰€åœ¨çš„ä¸»æœºæ“ä½œç³»ç»Ÿå®•æœºåï¼Œ
# å°¤å…¶åœ¨ext4æ–‡ä»¶ç³»ç»Ÿæ²¡æœ‰åŠ ä¸Šdata=orderedé€‰é¡¹ï¼ˆrediså®•æœºæˆ–è€…å¼‚å¸¸ç»ˆæ­¢ä¸ä¼šé€ æˆå°¾éƒ¨ä¸å®Œæ•´ç°è±¡ã€‚ï¼‰
# å‡ºç°è¿™ç§ç°è±¡ï¼Œå¯ä»¥é€‰æ‹©è®©redisé€€å‡ºï¼Œæˆ–è€…å¯¼å…¥å°½å¯èƒ½å¤šçš„æ•°æ®ã€‚å¦‚æœé€‰æ‹©çš„æ˜¯yesï¼Œ
# å½“æˆªæ–­çš„aofæ–‡ä»¶è¢«å¯¼å…¥çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨å‘å¸ƒä¸€ä¸ªlogç»™å®¢æˆ·ç«¯ç„¶åloadã€‚å¦‚æœæ˜¯noï¼Œç”¨æˆ·å¿…é¡»æ‰‹åŠ¨redis-check-aofä¿®å¤AOFæ–‡ä»¶æ‰å¯ä»¥ã€‚
aof-load-truncated yes

################################ LUA SCRIPTING ###############################
# å¦‚æœè¾¾åˆ°æœ€å¤§æ—¶é—´é™åˆ¶ï¼ˆæ¯«ç§’ï¼‰ï¼Œredisä¼šè®°ä¸ªlogï¼Œç„¶åè¿”å›errorã€‚
# å½“ä¸€ä¸ªè„šæœ¬è¶…è¿‡äº†æœ€å¤§æ—¶é™ã€‚
# åªæœ‰SCRIPT KILLå’ŒSHUTDOWN NOSAVEå¯ä»¥ç”¨ã€‚
# ç¬¬ä¸€ä¸ªå¯ä»¥æ€æ²¡æœ‰è°ƒwriteå‘½ä»¤çš„ä¸œè¥¿ã€‚è¦æ˜¯å·²ç»è°ƒç”¨äº†writeï¼Œåªèƒ½ç”¨ç¬¬äºŒä¸ªå‘½ä»¤æ€ã€‚
lua-time-limit 5000

################################ REDIS CLUSTER ###############################
# é›†ç¾¤å¼€å…³ï¼Œé»˜è®¤æ˜¯ä¸å¼€å¯é›†ç¾¤æ¨¡å¼ã€‚
# cluster-enabled yes

# é›†ç¾¤é…ç½®æ–‡ä»¶çš„åç§°ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªé›†ç¾¤ç›¸å…³çš„é…ç½®æ–‡ä»¶ï¼ŒæŒä¹…åŒ–ä¿å­˜é›†ç¾¤çš„ä¿¡æ¯ã€‚
# è¿™ä¸ªæ–‡ä»¶å¹¶ä¸éœ€è¦æ‰‹åŠ¨é…ç½®ï¼Œè¿™ä¸ªé…ç½®æ–‡ä»¶æœ‰Redisç”Ÿæˆå¹¶æ›´æ–°ï¼Œæ¯ä¸ªRedisé›†ç¾¤èŠ‚ç‚¹éœ€è¦ä¸€ä¸ªå•ç‹¬çš„é…ç½®æ–‡ä»¶ï¼Œ
# è¯·ç¡®ä¿ä¸å®ä¾‹è¿è¡Œçš„ç³»ç»Ÿä¸­é…ç½®æ–‡ä»¶åç§°ä¸å†²çª
# cluster-config-file nodes-6379.conf

# èŠ‚ç‚¹äº’è¿è¶…æ—¶çš„é˜€å€¼ã€‚é›†ç¾¤èŠ‚ç‚¹è¶…æ—¶æ¯«ç§’æ•°
# cluster-node-timeout 15000

# åœ¨è¿›è¡Œæ•…éšœè½¬ç§»çš„æ—¶å€™ï¼Œå…¨éƒ¨slaveéƒ½ä¼šè¯·æ±‚ç”³è¯·ä¸ºmasterï¼Œä½†æ˜¯æœ‰äº›slaveå¯èƒ½ä¸masteræ–­å¼€è¿æ¥ä¸€æ®µæ—¶é—´äº†ï¼Œ
# å¯¼è‡´æ•°æ®è¿‡äºé™ˆæ—§ï¼Œè¿™æ ·çš„slaveä¸åº”è¯¥è¢«æå‡ä¸ºmasterã€‚è¯¥å‚æ•°å°±æ˜¯ç”¨æ¥åˆ¤æ–­slaveèŠ‚ç‚¹ä¸masteræ–­çº¿çš„æ—¶é—´æ˜¯å¦è¿‡é•¿ã€‚åˆ¤æ–­æ–¹æ³•æ˜¯ï¼š
# æ¯”è¾ƒslaveæ–­å¼€è¿æ¥çš„æ—¶é—´å’Œ(node-timeout * slave-validity-factor) + repl-ping-slave-period
# å¦‚æœèŠ‚ç‚¹è¶…æ—¶æ—¶é—´ä¸ºä¸‰åç§’, å¹¶ä¸”slave-validity-factorä¸º10,å‡è®¾é»˜è®¤çš„repl-ping-slave-periodæ˜¯10ç§’ï¼Œ
# å³å¦‚æœè¶…è¿‡310ç§’slaveå°†ä¸ä¼šå°è¯•è¿›è¡Œæ•…éšœè½¬ç§» 
# cluster-slave-validity-factor 10

# masterçš„slaveæ•°é‡å¤§äºè¯¥å€¼ï¼Œslaveæ‰èƒ½è¿ç§»åˆ°å…¶ä»–å­¤ç«‹masterä¸Šï¼Œ
# å¦‚è¿™ä¸ªå‚æ•°è‹¥è¢«è®¾ä¸º2ï¼Œé‚£ä¹ˆåªæœ‰å½“ä¸€ä¸ªä¸»èŠ‚ç‚¹æ‹¥æœ‰2 ä¸ªå¯å·¥ä½œçš„ä»èŠ‚ç‚¹æ—¶ï¼Œå®ƒçš„ä¸€ä¸ªä»èŠ‚ç‚¹ä¼šå°è¯•è¿ç§»ã€‚
# cluster-migration-barrier 1

# é»˜è®¤æƒ…å†µä¸‹ï¼Œé›†ç¾¤å…¨éƒ¨çš„slotæœ‰èŠ‚ç‚¹è´Ÿè´£ï¼Œé›†ç¾¤çŠ¶æ€æ‰ä¸ºokï¼Œæ‰èƒ½æä¾›æœåŠ¡ã€‚
# è®¾ç½®ä¸ºnoï¼Œå¯ä»¥åœ¨slotæ²¡æœ‰å…¨éƒ¨åˆ†é…çš„æ—¶å€™æä¾›æœåŠ¡ã€‚
# ä¸å»ºè®®æ‰“å¼€è¯¥é…ç½®ï¼Œè¿™æ ·ä¼šé€ æˆåˆ†åŒºçš„æ—¶å€™ï¼Œå°åˆ†åŒºçš„masterä¸€ç›´åœ¨æ¥å—å†™è¯·æ±‚ï¼Œè€Œé€ æˆå¾ˆé•¿æ—¶é—´æ•°æ®ä¸ä¸€è‡´ã€‚
# cluster-require-full-coverage yes

################################## SLOW LOG ###################################
###slog logæ˜¯ç”¨æ¥è®°å½•redisè¿è¡Œä¸­æ‰§è¡Œæ¯”è¾ƒæ…¢çš„å‘½ä»¤è€—æ—¶ã€‚å½“å‘½ä»¤çš„æ‰§è¡Œè¶…è¿‡äº†æŒ‡å®šæ—¶é—´ï¼Œå°±è®°å½•åœ¨slow logä¸­ï¼Œslog logä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œæ‰€ä»¥æ²¡æœ‰IOæ“ä½œã€‚
#æ‰§è¡Œæ—¶é—´æ¯”slowlog-log-slower-thanå¤§çš„è¯·æ±‚è®°å½•åˆ°slowlogé‡Œé¢ï¼Œå•ä½æ˜¯å¾®ç§’ï¼Œæ‰€ä»¥1000000å°±æ˜¯1ç§’ã€‚æ³¨æ„ï¼Œè´Ÿæ•°æ—¶é—´ä¼šç¦ç”¨æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œè€Œ0åˆ™ä¼šå¼ºåˆ¶è®°å½•æ‰€æœ‰å‘½ä»¤ã€‚
slowlog-log-slower-than 10000

#æ…¢æŸ¥è¯¢æ—¥å¿—é•¿åº¦ã€‚å½“ä¸€ä¸ªæ–°çš„å‘½ä»¤è¢«å†™è¿›æ—¥å¿—çš„æ—¶å€™ï¼Œæœ€è€çš„é‚£ä¸ªè®°å½•ä¼šè¢«åˆ æ‰ã€‚è¿™ä¸ªé•¿åº¦æ²¡æœ‰é™åˆ¶ã€‚åªè¦æœ‰è¶³å¤Ÿçš„å†…å­˜å°±è¡Œã€‚ä½ å¯ä»¥é€šè¿‡ SLOWLOG RESET æ¥é‡Šæ”¾å†…å­˜ã€‚
slowlog-max-len 128

################################ LATENCY MONITOR ##############################
#å»¶è¿Ÿç›‘æ§åŠŸèƒ½æ˜¯ç”¨æ¥ç›‘æ§redisä¸­æ‰§è¡Œæ¯”è¾ƒç¼“æ…¢çš„ä¸€äº›æ“ä½œï¼Œç”¨LATENCYæ‰“å°rediså®ä¾‹åœ¨è·‘å‘½ä»¤æ—¶çš„è€—æ—¶å›¾è¡¨ã€‚åªè®°å½•å¤§äºç­‰äºä¸‹è¾¹è®¾ç½®çš„å€¼çš„æ“ä½œã€‚0çš„è¯ï¼Œå°±æ˜¯å…³é—­ç›‘è§†ã€‚é»˜è®¤å»¶è¿Ÿç›‘æ§åŠŸèƒ½æ˜¯å…³é—­çš„ï¼Œå¦‚æœä½ éœ€è¦æ‰“å¼€ï¼Œä¹Ÿå¯ä»¥é€šè¿‡CONFIG SETå‘½ä»¤åŠ¨æ€è®¾ç½®ã€‚
latency-monitor-threshold 0

############################# EVENT NOTIFICATION ##############################
#é”®ç©ºé—´é€šçŸ¥ä½¿å¾—å®¢æˆ·ç«¯å¯ä»¥é€šè¿‡è®¢é˜…é¢‘é“æˆ–æ¨¡å¼ï¼Œæ¥æ¥æ”¶é‚£äº›ä»¥æŸç§æ–¹å¼æ”¹åŠ¨äº† Redis æ•°æ®é›†çš„äº‹ä»¶ã€‚å› ä¸ºå¼€å¯é”®ç©ºé—´é€šçŸ¥åŠŸèƒ½éœ€è¦æ¶ˆè€—ä¸€äº› CPU ï¼Œæ‰€ä»¥åœ¨é»˜è®¤é…ç½®ä¸‹ï¼Œè¯¥åŠŸèƒ½å¤„äºå…³é—­çŠ¶æ€ã€‚
#notify-keyspace-events çš„å‚æ•°å¯ä»¥æ˜¯ä»¥ä¸‹å­—ç¬¦çš„ä»»æ„ç»„åˆï¼Œå®ƒæŒ‡å®šäº†æœåŠ¡å™¨è¯¥å‘é€å“ªäº›ç±»å‹çš„é€šçŸ¥ï¼š
##K é”®ç©ºé—´é€šçŸ¥ï¼Œæ‰€æœ‰é€šçŸ¥ä»¥ __keyspace@__ ä¸ºå‰ç¼€
##E é”®äº‹ä»¶é€šçŸ¥ï¼Œæ‰€æœ‰é€šçŸ¥ä»¥ __keyevent@__ ä¸ºå‰ç¼€
##g DEL ã€ EXPIRE ã€ RENAME ç­‰ç±»å‹æ— å…³çš„é€šç”¨å‘½ä»¤çš„é€šçŸ¥
##$ å­—ç¬¦ä¸²å‘½ä»¤çš„é€šçŸ¥
##l åˆ—è¡¨å‘½ä»¤çš„é€šçŸ¥
##s é›†åˆå‘½ä»¤çš„é€šçŸ¥
##h å“ˆå¸Œå‘½ä»¤çš„é€šçŸ¥
##z æœ‰åºé›†åˆå‘½ä»¤çš„é€šçŸ¥
##x è¿‡æœŸäº‹ä»¶ï¼šæ¯å½“æœ‰è¿‡æœŸé”®è¢«åˆ é™¤æ—¶å‘é€
##e é©±é€(evict)äº‹ä»¶ï¼šæ¯å½“æœ‰é”®å› ä¸º maxmemory æ”¿ç­–è€Œè¢«åˆ é™¤æ—¶å‘é€
##A å‚æ•° g$lshzxe çš„åˆ«å
#è¾“å…¥çš„å‚æ•°ä¸­è‡³å°‘è¦æœ‰ä¸€ä¸ª K æˆ–è€… Eï¼Œå¦åˆ™çš„è¯ï¼Œä¸ç®¡å…¶ä½™çš„å‚æ•°æ˜¯ä»€ä¹ˆï¼Œéƒ½ä¸ä¼šæœ‰ä»»ä½• é€šçŸ¥è¢«åˆ†å‘ã€‚è¯¦ç»†ä½¿ç”¨å¯ä»¥å‚è€ƒhttp://redis.io/topics/notifications

notify-keyspace-events &#x22;KEA&#x22;

############################### ADVANCED CONFIG ###############################
# æ•°æ®é‡å°äºç­‰äºhash-max-ziplist-entriesçš„ç”¨ziplistï¼Œå¤§äºhash-max-ziplist-entriesç”¨hash
hash-max-ziplist-entries 512
# valueå¤§å°å°äºç­‰äºhash-max-ziplist-valueçš„ç”¨ziplistï¼Œå¤§äºhash-max-ziplist-valueç”¨hashã€‚
hash-max-ziplist-value 64

# æ•°æ®é‡å°äºç­‰äºlist-max-ziplist-entriesç”¨ziplistï¼Œå¤§äºlist-max-ziplist-entriesç”¨listã€‚
list-max-ziplist-entries 512
# valueå¤§å°å°äºç­‰äºlist-max-ziplist-valueçš„ç”¨ziplistï¼Œå¤§äºlist-max-ziplist-valueç”¨listã€‚
list-max-ziplist-value 64

# æ•°æ®é‡å°äºç­‰äºset-max-intset-entriesç”¨inisetï¼Œå¤§äºset-max-intset-entriesç”¨setã€‚
set-max-intset-entries 512

# æ•°æ®é‡å°äºç­‰äºzset-max-ziplist-entriesç”¨ziplistï¼Œå¤§äºzset-max-ziplist-entriesç”¨zsetã€‚
zset-max-ziplist-entries 128
# valueå¤§å°å°äºç­‰äºzset-max-ziplist-valueç”¨ziplistï¼Œå¤§äºzset-max-ziplist-valueç”¨zsetã€‚
zset-max-ziplist-value 64

# valueå¤§å°å°äºç­‰äºhll-sparse-max-bytesä½¿ç”¨ç¨€ç–æ•°æ®ç»“æ„ï¼ˆsparseï¼‰ï¼Œ
# å¤§äºhll-sparse-max-bytesä½¿ç”¨ç¨ å¯†çš„æ•°æ®ç»“æ„ï¼ˆdenseï¼‰ã€‚
# ä¸€ä¸ªæ¯”16000å¤§çš„valueæ˜¯å‡ ä¹æ²¡ç”¨çš„ï¼Œå»ºè®®çš„valueå¤§æ¦‚ä¸º3000ã€‚
# å¦‚æœå¯¹CPUè¦æ±‚ä¸é«˜ï¼Œå¯¹ç©ºé—´è¦æ±‚è¾ƒé«˜çš„ï¼Œå»ºè®®è®¾ç½®åˆ°10000å·¦å³ã€‚
hll-sparse-max-bytes 3000

# Rediså°†åœ¨æ¯100æ¯«ç§’æ—¶ä½¿ç”¨1æ¯«ç§’çš„CPUæ—¶é—´æ¥å¯¹redisçš„hashè¡¨è¿›è¡Œé‡æ–°hashï¼Œå¯ä»¥é™ä½å†…å­˜çš„ä½¿ç”¨ã€‚
# å½“ä½ çš„ä½¿ç”¨åœºæ™¯ä¸­ï¼Œæœ‰éå¸¸ä¸¥æ ¼çš„å®æ—¶æ€§éœ€è¦ï¼Œä¸èƒ½å¤Ÿæ¥å—Redisæ—¶ä¸æ—¶çš„å¯¹è¯·æ±‚æœ‰2æ¯«ç§’çš„å»¶è¿Ÿçš„è¯ï¼ŒæŠŠè¿™é¡¹é…ç½®ä¸ºnoã€‚
# å¦‚æœæ²¡æœ‰è¿™ä¹ˆä¸¥æ ¼çš„å®æ—¶æ€§è¦æ±‚ï¼Œå¯ä»¥è®¾ç½®ä¸ºyesï¼Œä»¥ä¾¿èƒ½å¤Ÿå°½å¯èƒ½å¿«çš„é‡Šæ”¾å†…å­˜ã€‚
activerehashing yes

# å¯¹å®¢æˆ·ç«¯è¾“å‡ºç¼“å†²è¿›è¡Œé™åˆ¶å¯ä»¥å¼ºè¿«é‚£äº›ä¸ä»æœåŠ¡å™¨è¯»å–æ•°æ®çš„å®¢æˆ·ç«¯æ–­å¼€è¿æ¥ï¼Œç”¨æ¥å¼ºåˆ¶å…³é—­ä¼ è¾“ç¼“æ…¢çš„å®¢æˆ·ç«¯ã€‚
# å¯¹äºnormal clientï¼Œç¬¬ä¸€ä¸ª0è¡¨ç¤ºå–æ¶ˆhard limitï¼Œç¬¬äºŒä¸ª0å’Œç¬¬ä¸‰ä¸ª0è¡¨ç¤ºå–æ¶ˆsoft limitï¼Œnormal clienté»˜è®¤å–æ¶ˆé™åˆ¶ï¼Œå› ä¸ºå¦‚æœæ²¡æœ‰å¯»é—®ï¼Œä»–ä»¬æ˜¯ä¸ä¼šæ¥æ”¶æ•°æ®çš„ã€‚
client-output-buffer-limit normal 0 0 0
# å¯¹äºslave clientå’ŒMONITER clientï¼Œå¦‚æœclient-output-bufferä¸€æ—¦è¶…è¿‡256mbï¼Œåˆæˆ–è€…è¶…è¿‡64mbæŒç»­60ç§’ï¼Œé‚£ä¹ˆæœåŠ¡å™¨å°±ä¼šç«‹å³æ–­å¼€å®¢æˆ·ç«¯è¿æ¥ã€‚
client-output-buffer-limit slave 256mb 64mb 60
# å¯¹äºpubsub clientï¼Œå¦‚æœclient-output-bufferä¸€æ—¦è¶…è¿‡32mbï¼Œåˆæˆ–è€…è¶…è¿‡8mbæŒç»­60ç§’ï¼Œé‚£ä¹ˆæœåŠ¡å™¨å°±ä¼šç«‹å³æ–­å¼€å®¢æˆ·ç«¯è¿æ¥ã€‚
client-output-buffer-limit pubsub 32mb 8mb 60

# redisæ‰§è¡Œä»»åŠ¡çš„é¢‘ç‡ä¸º1sé™¤ä»¥hzã€‚
hz 10

# åœ¨aofé‡å†™çš„æ—¶å€™ï¼Œå¦‚æœæ‰“å¼€äº†aof-rewrite-incremental-fsyncå¼€å…³ï¼Œç³»ç»Ÿä¼šæ¯32MBæ‰§è¡Œä¸€æ¬¡fsyncã€‚è¿™å¯¹äºæŠŠæ–‡ä»¶å†™å…¥ç£ç›˜æ˜¯æœ‰å¸®åŠ©çš„ï¼Œå¯ä»¥é¿å…è¿‡å¤§çš„å»¶è¿Ÿå³°å€¼ã€‚
aof-rewrite-incremental-fsync yes
" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
    <h2 id="ç²¾å“æ–‡ç« "><a class="anchor" aria-hidden="true" tabindex="-1" href="#ç²¾å“æ–‡ç« "><span class="octicon octicon-link"></span></a>ç²¾å“æ–‡ç« </h2>
    <ul>
      <li><a href="https://mp.weixin.qq.com/s/BoLsVKYyu8yRXZbxd1uuQw">å²ä¸Šæœ€å…¨Redisé«˜å¯ç”¨æŠ€æœ¯è§£å†³æ–¹æ¡ˆå¤§å…¨</a></li>
      <li><a href="http://blog.huangz.me/diary/2016/redis-4-outline.html">Redis 4.0 æ–°åŠŸèƒ½ç®€ä»‹</a></li>
      <li><a href="http://blog.huangz.me/diary/2016/how-to-learn-redis.html">Redis å­¦ä¹ è·¯çº¿</a></li>
      <li><a href="https://mp.weixin.qq.com/s/TBCEwLVAXdsTszRVpXhVug">Redisæ¶æ„ä¹‹é˜²é›ªå´©è®¾è®¡ï¼šç½‘ç«™ä¸å®•æœºèƒŒåçš„å…µæ³•</a></li>
      <li><a href="https://cachecloud.github.io/2017/02/16/Redis%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/">Redisçš„å†…å­˜ä¼˜åŒ–</a></li>
      <li><a href="https://zhuoroger.github.io/2016/08/20/redis-monitor-and-alarm/">ç»†è¯´Redisç›‘æ§å’Œå‘Šè­¦</a></li>
      <li><a href="https://github.com/sohutv/cachecloud">æœç‹è§†é¢‘(sohu tv)Redisç§æœ‰äº‘å¹³å°</a></li>
      <li><a href="https://mp.weixin.qq.com/s?__biz=MzA5NzkxMzg1Nw==&#x26;mid=2653159795&#x26;idx=1&#x26;sn=10264108e1da670774b4b53a1e6dbbe4&#x26;scene=0">ä¼˜é…·åœŸè±†çš„RedisæœåŠ¡å¹³å°åŒ–ä¹‹è·¯</a></li>
      <li><a href="https://mp.weixin.qq.com/s?__biz=MzA3MzYwNjQ3NA==&#x26;mid=2651296671&#x26;idx=1&#x26;sn=366de50a6787963517ff6e096c9d1643&#x26;scene=2&#x26;srcid=0601j5sEtcRyw9TtehhXW0Ix&#x26;from=timeline&#x26;isappinstalled=0#wechat_redirect">è¿™å¯èƒ½æ˜¯æœ€å…¨çš„ Redis é›†ç¾¤æ–¹æ¡ˆä»‹ç»äº†</a></li>
      <li><a href="https://mp.weixin.qq.com/s?__biz=MzAwNTg2MDUyMw==&#x26;mid=2247483661&#x26;idx=1&#x26;sn=c924b3a2b098c4211b0044de180a1c0e">å¦‚ä½•å®ç°é«˜å¯ç”¨çš„redisé›†ç¾¤</a></li>
    </ul>
  <style>.markdown-body pre .copied {
  display: flex;
  position: absolute;
  cursor: pointer;
  color: #a5afbb;
  top: 6px;
  right: 6px;
  border-radius: 5px;
  background: #82828226;
  padding: 6px;
  font-size: 12px;
  transition: all .3s;
}
.markdown-body pre .copied:not(.active) {
  visibility: hidden;
}
.markdown-body pre:hover .copied {
  visibility: visible;
}
.markdown-body pre:hover .copied:hover {
  background: #4caf50;
  color: #fff;
}
.markdown-body pre:hover .copied:active,
.markdown-body pre .copied.active {
  background: #2e9b33;
  color: #fff;
}
.markdown-body pre .copied .octicon-copy {
  display: block;
}
.markdown-body pre .copied .octicon-check {
  display: none;
}
.markdown-body pre .active .octicon-copy {
  display: none;
}
.markdown-body pre .active .octicon-check {
  display: block;
}</style><script>/*! @uiw/copy-to-clipboard v1.0.12 | MIT (c) 2021 Kenny Wang | https://github.com/uiwjs/copy-to-clipboard.git */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).copyTextToClipboard=t()}(this,(function(){"use strict";return function(e,t){const o=document.createElement("textarea");o.value=e,o.setAttribute("readonly",""),o.style={position:"absolute",left:"-9999px"},document.body.appendChild(o);const n=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);o.select();let c=!1;try{c=!!document.execCommand("copy")}catch(e){c=!1}document.body.removeChild(o),n&&document.getSelection&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(n)),t&&t(c)}}));

function copied(target, str) {
  target.classList.add('active');
  copyTextToClipboard(target.dataset.code, function() {
    setTimeout(() => {
      target.classList.remove('active');
    }, 2000);
  });
}</script></markdown-style><div class="footer"><a data-edit target="__blank" title="https://github.com/jaywcjlove/handbook/edit/master/Redis/README.md" href="https://github.com/jaywcjlove/handbook/edit/master/Redis/README.md">ç¼–è¾‘å½“å‰é¡µé¢</a><a target="__blank" href="https://jaywcjlove.gitee.io/handbook/">å›½å†…é•œåƒç«™ç‚¹ ğŸ‡¨ğŸ‡³</a><a target="__blank" href="https://github.com/jaywcjlove/handbook">Github</a><a target="__blank" href="https://gitee.com/jaywcjlove/handbook">Gitee</a><div class="copyright">Copyright Â© 2021. All rights reserved.</div></div></body>
</html>
